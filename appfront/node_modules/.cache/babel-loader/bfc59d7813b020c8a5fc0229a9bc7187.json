{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { createVNode as _createVNode } from \"vue\";\nimport classNames from '../_util/classNames';\nimport uniqBy from 'lodash-es/uniqBy';\nimport findIndex from 'lodash-es/findIndex';\nimport VcUpload from '../vc-upload';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getOptionProps, hasProp, getSlot } from '../_util/props-util';\nimport initDefaultProps from '../_util/props-util/initDefaultProps';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale-provider/default';\nimport { defaultConfigProvider } from '../config-provider';\nimport Dragger from './Dragger';\nimport UploadList from './UploadList';\nimport { UploadProps } from './interface';\nimport { T, fileToObject, genPercentAdd, getFileItem, removeFileItem } from './utils';\nimport { defineComponent, inject } from 'vue';\nimport { getDataAndAria } from '../vc-tree/src/util';\nexport default defineComponent({\n  name: 'AUpload',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  Dragger: Dragger,\n  props: initDefaultProps(UploadProps, {\n    type: 'select',\n    multiple: false,\n    action: '',\n    data: {},\n    accept: '',\n    beforeUpload: T,\n    showUploadList: true,\n    listType: 'text',\n    disabled: false,\n    supportServerRender: true\n  }),\n  setup: function setup() {\n    return {\n      upload: null,\n      progressTimer: null,\n      configProvider: inject('configProvider', defaultConfigProvider)\n    };\n  },\n  // recentUploadStatus: boolean | PromiseLike<any>;\n  data: function data() {\n    return {\n      sFileList: this.fileList || this.defaultFileList || [],\n      dragState: 'drop'\n    };\n  },\n  watch: {\n    fileList: function fileList(val) {\n      this.sFileList = val || [];\n    }\n  },\n  beforeUnmount: function beforeUnmount() {\n    this.clearProgressTimer();\n  },\n  methods: {\n    onStart: function onStart(file) {\n      var targetItem = fileToObject(file);\n      targetItem.status = 'uploading';\n      var nextFileList = this.sFileList.concat();\n      var fileIndex = findIndex(nextFileList, function (_ref) {\n        var uid = _ref.uid;\n        return uid === targetItem.uid;\n      });\n\n      if (fileIndex === -1) {\n        nextFileList.push(targetItem);\n      } else {\n        nextFileList[fileIndex] = targetItem;\n      }\n\n      this.handleChange({\n        file: targetItem,\n        fileList: nextFileList\n      }); // fix ie progress\n\n      if (!window.File || (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && process.env.TEST_IE) {\n        this.autoUpdateProgress(0, targetItem);\n      }\n    },\n    onSuccess: function onSuccess(response, file, xhr) {\n      this.clearProgressTimer();\n\n      try {\n        if (typeof response === 'string') {\n          response = JSON.parse(response);\n        }\n      } catch (e) {\n        /* do nothing */\n      }\n\n      var fileList = this.sFileList;\n      var targetItem = getFileItem(file, fileList); // removed\n\n      if (!targetItem) {\n        return;\n      }\n\n      targetItem.status = 'done';\n      targetItem.response = response;\n      targetItem.xhr = xhr;\n      this.handleChange({\n        file: _extends({}, targetItem),\n        fileList: fileList\n      });\n    },\n    onProgress: function onProgress(e, file) {\n      var fileList = this.sFileList;\n      var targetItem = getFileItem(file, fileList); // removed\n\n      if (!targetItem) {\n        return;\n      }\n\n      targetItem.percent = e.percent;\n      this.handleChange({\n        event: e,\n        file: _extends({}, targetItem),\n        fileList: this.sFileList\n      });\n    },\n    onError: function onError(error, response, file) {\n      this.clearProgressTimer();\n      var fileList = this.sFileList;\n      var targetItem = getFileItem(file, fileList); // removed\n\n      if (!targetItem) {\n        return;\n      }\n\n      targetItem.error = error;\n      targetItem.response = response;\n      targetItem.status = 'error';\n      this.handleChange({\n        file: _extends({}, targetItem),\n        fileList: fileList\n      });\n    },\n    onReject: function onReject(fileList) {\n      this.$emit('reject', fileList);\n    },\n    handleRemove: function handleRemove(file) {\n      var _this = this;\n\n      var onRemove = this.remove;\n      var fileList = this.$data.sFileList;\n      Promise.resolve(typeof onRemove === 'function' ? onRemove(file) : onRemove).then(function (ret) {\n        // Prevent removing file\n        if (ret === false) {\n          return;\n        }\n\n        var removedFileList = removeFileItem(file, fileList);\n\n        if (removedFileList) {\n          file.status = 'removed'; // eslint-disable-line\n\n          if (_this.upload) {\n            _this.upload.abort(file);\n          }\n\n          _this.handleChange({\n            file: file,\n            fileList: removedFileList\n          });\n        }\n      });\n    },\n    handleManualRemove: function handleManualRemove(file) {\n      if (this.$refs.uploadRef) {\n        this.$refs.uploadRef.abort(file);\n      }\n\n      this.handleRemove(file);\n    },\n    handleChange: function handleChange(info) {\n      if (!hasProp(this, 'fileList')) {\n        this.setState({\n          sFileList: info.fileList\n        });\n      }\n\n      this.$emit('update:fileList', info.fileList);\n      this.$emit('change', info);\n    },\n    onFileDrop: function onFileDrop(e) {\n      this.setState({\n        dragState: e.type\n      });\n    },\n    reBeforeUpload: function reBeforeUpload(file, fileList) {\n      var beforeUpload = this.$props.beforeUpload;\n      var stateFileList = this.$data.sFileList;\n\n      if (!beforeUpload) {\n        return true;\n      }\n\n      var result = beforeUpload(file, fileList);\n\n      if (result === false) {\n        this.handleChange({\n          file: file,\n          fileList: uniqBy(stateFileList.concat(fileList.map(fileToObject)), function (item) {\n            return item.uid;\n          })\n        });\n        return false;\n      }\n\n      if (result && result.then) {\n        return result;\n      }\n\n      return true;\n    },\n    clearProgressTimer: function clearProgressTimer() {\n      clearInterval(this.progressTimer);\n    },\n    autoUpdateProgress: function autoUpdateProgress(_, file) {\n      var _this2 = this;\n\n      var getPercent = genPercentAdd();\n      var curPercent = 0;\n      this.clearProgressTimer();\n      this.progressTimer = setInterval(function () {\n        curPercent = getPercent(curPercent);\n\n        _this2.onProgress({\n          percent: curPercent * 100\n        }, file);\n      }, 200);\n    },\n    renderUploadList: function renderUploadList(locale) {\n      var _getOptionProps = getOptionProps(this),\n          _getOptionProps$showU = _getOptionProps.showUploadList,\n          showUploadList = _getOptionProps$showU === void 0 ? {} : _getOptionProps$showU,\n          listType = _getOptionProps.listType,\n          previewFile = _getOptionProps.previewFile,\n          disabled = _getOptionProps.disabled,\n          propLocale = _getOptionProps.locale;\n\n      var showRemoveIcon = showUploadList.showRemoveIcon,\n          showPreviewIcon = showUploadList.showPreviewIcon,\n          showDownloadIcon = showUploadList.showDownloadIcon;\n      var fileList = this.$data.sFileList;\n      var _this$$props = this.$props,\n          onDownload = _this$$props.onDownload,\n          onPreview = _this$$props.onPreview;\n      var uploadListProps = {\n        listType: listType,\n        items: fileList,\n        previewFile: previewFile,\n        showRemoveIcon: !disabled && showRemoveIcon,\n        showPreviewIcon: showPreviewIcon,\n        showDownloadIcon: showDownloadIcon,\n        locale: _extends(_extends({}, locale), propLocale),\n        onRemove: this.handleManualRemove,\n        onDownload: onDownload,\n        onPreview: onPreview\n      };\n      return _createVNode(UploadList, uploadListProps, null);\n    }\n  },\n  render: function render() {\n    var _classNames2;\n\n    var _getOptionProps2 = getOptionProps(this),\n        customizePrefixCls = _getOptionProps2.prefixCls,\n        showUploadList = _getOptionProps2.showUploadList,\n        listType = _getOptionProps2.listType,\n        type = _getOptionProps2.type,\n        disabled = _getOptionProps2.disabled;\n\n    var _this$$data = this.$data,\n        fileList = _this$$data.sFileList,\n        dragState = _this$$data.dragState;\n    var _this$$attrs = this.$attrs,\n        className = _this$$attrs.class,\n        style = _this$$attrs.style;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('upload', customizePrefixCls);\n\n    var vcUploadProps = _extends(_extends({}, this.$props), {\n      prefixCls: prefixCls,\n      beforeUpload: this.reBeforeUpload,\n      onStart: this.onStart,\n      onError: this.onError,\n      onProgress: this.onProgress,\n      onSuccess: this.onSuccess,\n      onReject: this.onReject,\n      ref: 'uploadRef'\n    });\n\n    var uploadList = showUploadList ? _createVNode(LocaleReceiver, {\n      \"componentName\": \"Upload\",\n      \"defaultLocale\": defaultLocale.Upload,\n      \"children\": this.renderUploadList\n    }, null) : null;\n    var children = getSlot(this);\n\n    if (type === 'drag') {\n      var _classNames;\n\n      var dragCls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-uploading\"), fileList.some(function (file) {\n        return file.status === 'uploading';\n      })), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-hover\"), dragState === 'dragover'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames));\n      return _createVNode(\"span\", _objectSpread({\n        \"class\": className\n      }, getDataAndAria(this.$attrs)), [_createVNode(\"div\", {\n        \"class\": dragCls,\n        \"onDrop\": this.onFileDrop,\n        \"onDragover\": this.onFileDrop,\n        \"onDragleave\": this.onFileDrop,\n        \"style\": style\n      }, [_createVNode(VcUpload, _objectSpread(_objectSpread({}, vcUploadProps), {}, {\n        \"class\": \"\".concat(prefixCls, \"-btn\")\n      }), {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"class\": \"\".concat(prefixCls, \"-drag-container\")\n          }, [children])];\n        }\n      })]), uploadList]);\n    }\n\n    var uploadButtonCls = classNames(prefixCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select-\").concat(listType), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames2)); // Remove id to avoid open by label when trigger is hidden\n    // https://github.com/ant-design/ant-design/issues/14298\n\n    if (!children.length || disabled) {\n      delete vcUploadProps.id;\n    }\n\n    var uploadButton = _createVNode(\"div\", {\n      \"class\": uploadButtonCls,\n      \"style\": children.length ? undefined : {\n        display: 'none'\n      }\n    }, [_createVNode(VcUpload, vcUploadProps, {\n      default: function _default() {\n        return [children];\n      }\n    })]);\n\n    if (listType === 'picture-card') {\n      return _createVNode(\"span\", {\n        \"class\": classNames(\"\".concat(prefixCls, \"-picture-card-wrapper\"), className)\n      }, [uploadList, uploadButton]);\n    }\n\n    return _createVNode(\"span\", {\n      \"class\": className\n    }, [uploadButton, uploadList]);\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/upload/Upload.js"],"names":["_objectSpread","_defineProperty","_extends","_typeof","createVNode","_createVNode","classNames","uniqBy","findIndex","VcUpload","BaseMixin","getOptionProps","hasProp","getSlot","initDefaultProps","LocaleReceiver","defaultLocale","defaultConfigProvider","Dragger","UploadList","UploadProps","T","fileToObject","genPercentAdd","getFileItem","removeFileItem","defineComponent","inject","getDataAndAria","name","mixins","inheritAttrs","props","type","multiple","action","data","accept","beforeUpload","showUploadList","listType","disabled","supportServerRender","setup","upload","progressTimer","configProvider","sFileList","fileList","defaultFileList","dragState","watch","val","beforeUnmount","clearProgressTimer","methods","onStart","file","targetItem","status","nextFileList","concat","fileIndex","_ref","uid","push","handleChange","window","File","process","env","TEST_IE","autoUpdateProgress","onSuccess","response","xhr","JSON","parse","e","onProgress","percent","event","onError","error","onReject","$emit","handleRemove","_this","onRemove","remove","$data","Promise","resolve","then","ret","removedFileList","abort","handleManualRemove","$refs","uploadRef","info","setState","onFileDrop","reBeforeUpload","$props","stateFileList","result","map","item","clearInterval","_","_this2","getPercent","curPercent","setInterval","renderUploadList","locale","_getOptionProps","_getOptionProps$showU","previewFile","propLocale","showRemoveIcon","showPreviewIcon","showDownloadIcon","_this$$props","onDownload","onPreview","uploadListProps","items","render","_classNames2","_getOptionProps2","customizePrefixCls","prefixCls","_this$$data","_this$$attrs","$attrs","className","class","style","getPrefixCls","vcUploadProps","ref","uploadList","Upload","children","_classNames","dragCls","some","default","_default","uploadButtonCls","length","id","uploadButton","undefined","display"],"mappings":"AAAA,OAAOA,aAAP,MAA0B,0CAA1B;AACA,OAAOC,eAAP,MAA4B,2CAA5B;AACA,OAAOC,QAAP,MAAqB,oCAArB;AACA,OAAOC,OAAP,MAAoB,mCAApB;AACA,SAASC,WAAW,IAAIC,YAAxB,QAA4C,KAA5C;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,QAAP,MAAqB,cAArB;AACA,OAAOC,SAAP,MAAsB,oBAAtB;AACA,SAASC,cAAT,EAAyBC,OAAzB,EAAkCC,OAAlC,QAAiD,qBAAjD;AACA,OAAOC,gBAAP,MAA6B,sCAA7B;AACA,OAAOC,cAAP,MAA2B,mCAA3B;AACA,OAAOC,aAAP,MAA0B,4BAA1B;AACA,SAASC,qBAAT,QAAsC,oBAAtC;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,SAASC,CAAT,EAAYC,YAAZ,EAA0BC,aAA1B,EAAyCC,WAAzC,EAAsDC,cAAtD,QAA4E,SAA5E;AACA,SAASC,eAAT,EAA0BC,MAA1B,QAAwC,KAAxC;AACA,SAASC,cAAT,QAA+B,qBAA/B;AACA,eAAeF,eAAe,CAAC;AAC7BG,EAAAA,IAAI,EAAE,SADuB;AAE7BC,EAAAA,MAAM,EAAE,CAACpB,SAAD,CAFqB;AAG7BqB,EAAAA,YAAY,EAAE,KAHe;AAI7Bb,EAAAA,OAAO,EAAEA,OAJoB;AAK7Bc,EAAAA,KAAK,EAAElB,gBAAgB,CAACM,WAAD,EAAc;AACnCa,IAAAA,IAAI,EAAE,QAD6B;AAEnCC,IAAAA,QAAQ,EAAE,KAFyB;AAGnCC,IAAAA,MAAM,EAAE,EAH2B;AAInCC,IAAAA,IAAI,EAAE,EAJ6B;AAKnCC,IAAAA,MAAM,EAAE,EAL2B;AAMnCC,IAAAA,YAAY,EAAEjB,CANqB;AAOnCkB,IAAAA,cAAc,EAAE,IAPmB;AAQnCC,IAAAA,QAAQ,EAAE,MARyB;AASnCC,IAAAA,QAAQ,EAAE,KATyB;AAUnCC,IAAAA,mBAAmB,EAAE;AAVc,GAAd,CALM;AAiB7BC,EAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACtB,WAAO;AACLC,MAAAA,MAAM,EAAE,IADH;AAELC,MAAAA,aAAa,EAAE,IAFV;AAGLC,MAAAA,cAAc,EAAEnB,MAAM,CAAC,gBAAD,EAAmBV,qBAAnB;AAHjB,KAAP;AAKD,GAvB4B;AAwB7B;AACAmB,EAAAA,IAAI,EAAE,SAASA,IAAT,GAAgB;AACpB,WAAO;AACLW,MAAAA,SAAS,EAAE,KAAKC,QAAL,IAAiB,KAAKC,eAAtB,IAAyC,EAD/C;AAELC,MAAAA,SAAS,EAAE;AAFN,KAAP;AAID,GA9B4B;AA+B7BC,EAAAA,KAAK,EAAE;AACLH,IAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBI,GAAlB,EAAuB;AAC/B,WAAKL,SAAL,GAAiBK,GAAG,IAAI,EAAxB;AACD;AAHI,GA/BsB;AAoC7BC,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,SAAKC,kBAAL;AACD,GAtC4B;AAuC7BC,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBC,IAAjB,EAAuB;AAC9B,UAAIC,UAAU,GAAGpC,YAAY,CAACmC,IAAD,CAA7B;AACAC,MAAAA,UAAU,CAACC,MAAX,GAAoB,WAApB;AACA,UAAIC,YAAY,GAAG,KAAKb,SAAL,CAAec,MAAf,EAAnB;AACA,UAAIC,SAAS,GAAGtD,SAAS,CAACoD,YAAD,EAAe,UAAUG,IAAV,EAAgB;AACtD,YAAIC,GAAG,GAAGD,IAAI,CAACC,GAAf;AACA,eAAOA,GAAG,KAAKN,UAAU,CAACM,GAA1B;AACD,OAHwB,CAAzB;;AAKA,UAAIF,SAAS,KAAK,CAAC,CAAnB,EAAsB;AACpBF,QAAAA,YAAY,CAACK,IAAb,CAAkBP,UAAlB;AACD,OAFD,MAEO;AACLE,QAAAA,YAAY,CAACE,SAAD,CAAZ,GAA0BJ,UAA1B;AACD;;AAED,WAAKQ,YAAL,CAAkB;AAChBT,QAAAA,IAAI,EAAEC,UADU;AAEhBV,QAAAA,QAAQ,EAAEY;AAFM,OAAlB,EAf8B,CAkB1B;;AAEJ,UAAI,CAACO,MAAM,CAACC,IAAR,IAAgB,CAAC,OAAOC,OAAP,KAAmB,WAAnB,GAAiC,WAAjC,GAA+ClE,OAAO,CAACkE,OAAD,CAAvD,MAAsE,QAAtE,IAAkFA,OAAO,CAACC,GAAR,CAAYC,OAAlH,EAA2H;AACzH,aAAKC,kBAAL,CAAwB,CAAxB,EAA2Bd,UAA3B;AACD;AACF,KAxBM;AAyBPe,IAAAA,SAAS,EAAE,SAASA,SAAT,CAAmBC,QAAnB,EAA6BjB,IAA7B,EAAmCkB,GAAnC,EAAwC;AACjD,WAAKrB,kBAAL;;AAEA,UAAI;AACF,YAAI,OAAOoB,QAAP,KAAoB,QAAxB,EAAkC;AAChCA,UAAAA,QAAQ,GAAGE,IAAI,CAACC,KAAL,CAAWH,QAAX,CAAX;AACD;AACF,OAJD,CAIE,OAAOI,CAAP,EAAU;AACV;AACD;;AAED,UAAI9B,QAAQ,GAAG,KAAKD,SAApB;AACA,UAAIW,UAAU,GAAGlC,WAAW,CAACiC,IAAD,EAAOT,QAAP,CAA5B,CAZiD,CAYH;;AAE9C,UAAI,CAACU,UAAL,EAAiB;AACf;AACD;;AAEDA,MAAAA,UAAU,CAACC,MAAX,GAAoB,MAApB;AACAD,MAAAA,UAAU,CAACgB,QAAX,GAAsBA,QAAtB;AACAhB,MAAAA,UAAU,CAACiB,GAAX,GAAiBA,GAAjB;AACA,WAAKT,YAAL,CAAkB;AAChBT,QAAAA,IAAI,EAAEvD,QAAQ,CAAC,EAAD,EAAKwD,UAAL,CADE;AAEhBV,QAAAA,QAAQ,EAAEA;AAFM,OAAlB;AAID,KAlDM;AAmDP+B,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBD,CAApB,EAAuBrB,IAAvB,EAA6B;AACvC,UAAIT,QAAQ,GAAG,KAAKD,SAApB;AACA,UAAIW,UAAU,GAAGlC,WAAW,CAACiC,IAAD,EAAOT,QAAP,CAA5B,CAFuC,CAEO;;AAE9C,UAAI,CAACU,UAAL,EAAiB;AACf;AACD;;AAEDA,MAAAA,UAAU,CAACsB,OAAX,GAAqBF,CAAC,CAACE,OAAvB;AACA,WAAKd,YAAL,CAAkB;AAChBe,QAAAA,KAAK,EAAEH,CADS;AAEhBrB,QAAAA,IAAI,EAAEvD,QAAQ,CAAC,EAAD,EAAKwD,UAAL,CAFE;AAGhBV,QAAAA,QAAQ,EAAE,KAAKD;AAHC,OAAlB;AAKD,KAjEM;AAkEPmC,IAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBC,KAAjB,EAAwBT,QAAxB,EAAkCjB,IAAlC,EAAwC;AAC/C,WAAKH,kBAAL;AACA,UAAIN,QAAQ,GAAG,KAAKD,SAApB;AACA,UAAIW,UAAU,GAAGlC,WAAW,CAACiC,IAAD,EAAOT,QAAP,CAA5B,CAH+C,CAGD;;AAE9C,UAAI,CAACU,UAAL,EAAiB;AACf;AACD;;AAEDA,MAAAA,UAAU,CAACyB,KAAX,GAAmBA,KAAnB;AACAzB,MAAAA,UAAU,CAACgB,QAAX,GAAsBA,QAAtB;AACAhB,MAAAA,UAAU,CAACC,MAAX,GAAoB,OAApB;AACA,WAAKO,YAAL,CAAkB;AAChBT,QAAAA,IAAI,EAAEvD,QAAQ,CAAC,EAAD,EAAKwD,UAAL,CADE;AAEhBV,QAAAA,QAAQ,EAAEA;AAFM,OAAlB;AAID,KAlFM;AAmFPoC,IAAAA,QAAQ,EAAE,SAASA,QAAT,CAAkBpC,QAAlB,EAA4B;AACpC,WAAKqC,KAAL,CAAW,QAAX,EAAqBrC,QAArB;AACD,KArFM;AAsFPsC,IAAAA,YAAY,EAAE,SAASA,YAAT,CAAsB7B,IAAtB,EAA4B;AACxC,UAAI8B,KAAK,GAAG,IAAZ;;AAEA,UAAIC,QAAQ,GAAG,KAAKC,MAApB;AACA,UAAIzC,QAAQ,GAAG,KAAK0C,KAAL,CAAW3C,SAA1B;AACA4C,MAAAA,OAAO,CAACC,OAAR,CAAgB,OAAOJ,QAAP,KAAoB,UAApB,GAAiCA,QAAQ,CAAC/B,IAAD,CAAzC,GAAkD+B,QAAlE,EAA4EK,IAA5E,CAAiF,UAAUC,GAAV,EAAe;AAC9F;AACA,YAAIA,GAAG,KAAK,KAAZ,EAAmB;AACjB;AACD;;AAED,YAAIC,eAAe,GAAGtE,cAAc,CAACgC,IAAD,EAAOT,QAAP,CAApC;;AAEA,YAAI+C,eAAJ,EAAqB;AACnBtC,UAAAA,IAAI,CAACE,MAAL,GAAc,SAAd,CADmB,CACM;;AAEzB,cAAI4B,KAAK,CAAC3C,MAAV,EAAkB;AAChB2C,YAAAA,KAAK,CAAC3C,MAAN,CAAaoD,KAAb,CAAmBvC,IAAnB;AACD;;AAED8B,UAAAA,KAAK,CAACrB,YAAN,CAAmB;AACjBT,YAAAA,IAAI,EAAEA,IADW;AAEjBT,YAAAA,QAAQ,EAAE+C;AAFO,WAAnB;AAID;AACF,OApBD;AAqBD,KAhHM;AAiHPE,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BxC,IAA5B,EAAkC;AACpD,UAAI,KAAKyC,KAAL,CAAWC,SAAf,EAA0B;AACxB,aAAKD,KAAL,CAAWC,SAAX,CAAqBH,KAArB,CAA2BvC,IAA3B;AACD;;AAED,WAAK6B,YAAL,CAAkB7B,IAAlB;AACD,KAvHM;AAwHPS,IAAAA,YAAY,EAAE,SAASA,YAAT,CAAsBkC,IAAtB,EAA4B;AACxC,UAAI,CAACxF,OAAO,CAAC,IAAD,EAAO,UAAP,CAAZ,EAAgC;AAC9B,aAAKyF,QAAL,CAAc;AACZtD,UAAAA,SAAS,EAAEqD,IAAI,CAACpD;AADJ,SAAd;AAGD;;AAED,WAAKqC,KAAL,CAAW,iBAAX,EAA8Be,IAAI,CAACpD,QAAnC;AACA,WAAKqC,KAAL,CAAW,QAAX,EAAqBe,IAArB;AACD,KAjIM;AAkIPE,IAAAA,UAAU,EAAE,SAASA,UAAT,CAAoBxB,CAApB,EAAuB;AACjC,WAAKuB,QAAL,CAAc;AACZnD,QAAAA,SAAS,EAAE4B,CAAC,CAAC7C;AADD,OAAd;AAGD,KAtIM;AAuIPsE,IAAAA,cAAc,EAAE,SAASA,cAAT,CAAwB9C,IAAxB,EAA8BT,QAA9B,EAAwC;AACtD,UAAIV,YAAY,GAAG,KAAKkE,MAAL,CAAYlE,YAA/B;AACA,UAAImE,aAAa,GAAG,KAAKf,KAAL,CAAW3C,SAA/B;;AAEA,UAAI,CAACT,YAAL,EAAmB;AACjB,eAAO,IAAP;AACD;;AAED,UAAIoE,MAAM,GAAGpE,YAAY,CAACmB,IAAD,EAAOT,QAAP,CAAzB;;AAEA,UAAI0D,MAAM,KAAK,KAAf,EAAsB;AACpB,aAAKxC,YAAL,CAAkB;AAChBT,UAAAA,IAAI,EAAEA,IADU;AAEhBT,UAAAA,QAAQ,EAAEzC,MAAM,CAACkG,aAAa,CAAC5C,MAAd,CAAqBb,QAAQ,CAAC2D,GAAT,CAAarF,YAAb,CAArB,CAAD,EAAmD,UAAUsF,IAAV,EAAgB;AACjF,mBAAOA,IAAI,CAAC5C,GAAZ;AACD,WAFe;AAFA,SAAlB;AAMA,eAAO,KAAP;AACD;;AAED,UAAI0C,MAAM,IAAIA,MAAM,CAACb,IAArB,EAA2B;AACzB,eAAOa,MAAP;AACD;;AAED,aAAO,IAAP;AACD,KAhKM;AAiKPpD,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,GAA8B;AAChDuD,MAAAA,aAAa,CAAC,KAAKhE,aAAN,CAAb;AACD,KAnKM;AAoKP2B,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BsC,CAA5B,EAA+BrD,IAA/B,EAAqC;AACvD,UAAIsD,MAAM,GAAG,IAAb;;AAEA,UAAIC,UAAU,GAAGzF,aAAa,EAA9B;AACA,UAAI0F,UAAU,GAAG,CAAjB;AACA,WAAK3D,kBAAL;AACA,WAAKT,aAAL,GAAqBqE,WAAW,CAAC,YAAY;AAC3CD,QAAAA,UAAU,GAAGD,UAAU,CAACC,UAAD,CAAvB;;AAEAF,QAAAA,MAAM,CAAChC,UAAP,CAAkB;AAChBC,UAAAA,OAAO,EAAEiC,UAAU,GAAG;AADN,SAAlB,EAEGxD,IAFH;AAGD,OAN+B,EAM7B,GAN6B,CAAhC;AAOD,KAjLM;AAkLP0D,IAAAA,gBAAgB,EAAE,SAASA,gBAAT,CAA0BC,MAA1B,EAAkC;AAClD,UAAIC,eAAe,GAAG1G,cAAc,CAAC,IAAD,CAApC;AAAA,UACI2G,qBAAqB,GAAGD,eAAe,CAAC9E,cAD5C;AAAA,UAEIA,cAAc,GAAG+E,qBAAqB,KAAK,KAAK,CAA/B,GAAmC,EAAnC,GAAwCA,qBAF7D;AAAA,UAGI9E,QAAQ,GAAG6E,eAAe,CAAC7E,QAH/B;AAAA,UAII+E,WAAW,GAAGF,eAAe,CAACE,WAJlC;AAAA,UAKI9E,QAAQ,GAAG4E,eAAe,CAAC5E,QAL/B;AAAA,UAMI+E,UAAU,GAAGH,eAAe,CAACD,MANjC;;AAQA,UAAIK,cAAc,GAAGlF,cAAc,CAACkF,cAApC;AAAA,UACIC,eAAe,GAAGnF,cAAc,CAACmF,eADrC;AAAA,UAEIC,gBAAgB,GAAGpF,cAAc,CAACoF,gBAFtC;AAGA,UAAI3E,QAAQ,GAAG,KAAK0C,KAAL,CAAW3C,SAA1B;AACA,UAAI6E,YAAY,GAAG,KAAKpB,MAAxB;AAAA,UACIqB,UAAU,GAAGD,YAAY,CAACC,UAD9B;AAAA,UAEIC,SAAS,GAAGF,YAAY,CAACE,SAF7B;AAGA,UAAIC,eAAe,GAAG;AACpBvF,QAAAA,QAAQ,EAAEA,QADU;AAEpBwF,QAAAA,KAAK,EAAEhF,QAFa;AAGpBuE,QAAAA,WAAW,EAAEA,WAHO;AAIpBE,QAAAA,cAAc,EAAE,CAAChF,QAAD,IAAagF,cAJT;AAKpBC,QAAAA,eAAe,EAAEA,eALG;AAMpBC,QAAAA,gBAAgB,EAAEA,gBANE;AAOpBP,QAAAA,MAAM,EAAElH,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAKkH,MAAL,CAAT,EAAuBI,UAAvB,CAPI;AAQpBhC,QAAAA,QAAQ,EAAE,KAAKS,kBARK;AASpB4B,QAAAA,UAAU,EAAEA,UATQ;AAUpBC,QAAAA,SAAS,EAAEA;AAVS,OAAtB;AAYA,aAAOzH,YAAY,CAACc,UAAD,EAAa4G,eAAb,EAA8B,IAA9B,CAAnB;AACD;AA/MM,GAvCoB;AAwP7BE,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,YAAJ;;AAEA,QAAIC,gBAAgB,GAAGxH,cAAc,CAAC,IAAD,CAArC;AAAA,QACIyH,kBAAkB,GAAGD,gBAAgB,CAACE,SAD1C;AAAA,QAEI9F,cAAc,GAAG4F,gBAAgB,CAAC5F,cAFtC;AAAA,QAGIC,QAAQ,GAAG2F,gBAAgB,CAAC3F,QAHhC;AAAA,QAIIP,IAAI,GAAGkG,gBAAgB,CAAClG,IAJ5B;AAAA,QAKIQ,QAAQ,GAAG0F,gBAAgB,CAAC1F,QALhC;;AAOA,QAAI6F,WAAW,GAAG,KAAK5C,KAAvB;AAAA,QACI1C,QAAQ,GAAGsF,WAAW,CAACvF,SAD3B;AAAA,QAEIG,SAAS,GAAGoF,WAAW,CAACpF,SAF5B;AAGA,QAAIqF,YAAY,GAAG,KAAKC,MAAxB;AAAA,QACIC,SAAS,GAAGF,YAAY,CAACG,KAD7B;AAAA,QAEIC,KAAK,GAAGJ,YAAY,CAACI,KAFzB;AAGA,QAAIC,YAAY,GAAG,KAAK9F,cAAL,CAAoB8F,YAAvC;AACA,QAAIP,SAAS,GAAGO,YAAY,CAAC,QAAD,EAAWR,kBAAX,CAA5B;;AAEA,QAAIS,aAAa,GAAG3I,QAAQ,CAACA,QAAQ,CAAC,EAAD,EAAK,KAAKsG,MAAV,CAAT,EAA4B;AACtD6B,MAAAA,SAAS,EAAEA,SAD2C;AAEtD/F,MAAAA,YAAY,EAAE,KAAKiE,cAFmC;AAGtD/C,MAAAA,OAAO,EAAE,KAAKA,OAHwC;AAItD0B,MAAAA,OAAO,EAAE,KAAKA,OAJwC;AAKtDH,MAAAA,UAAU,EAAE,KAAKA,UALqC;AAMtDN,MAAAA,SAAS,EAAE,KAAKA,SANsC;AAOtDW,MAAAA,QAAQ,EAAE,KAAKA,QAPuC;AAQtD0D,MAAAA,GAAG,EAAE;AARiD,KAA5B,CAA5B;;AAWA,QAAIC,UAAU,GAAGxG,cAAc,GAAGlC,YAAY,CAACU,cAAD,EAAiB;AAC7D,uBAAiB,QAD4C;AAE7D,uBAAiBC,aAAa,CAACgI,MAF8B;AAG7D,kBAAY,KAAK7B;AAH4C,KAAjB,EAI3C,IAJ2C,CAAf,GAIpB,IAJX;AAKA,QAAI8B,QAAQ,GAAGpI,OAAO,CAAC,IAAD,CAAtB;;AAEA,QAAIoB,IAAI,KAAK,MAAb,EAAqB;AACnB,UAAIiH,WAAJ;;AAEA,UAAIC,OAAO,GAAG7I,UAAU,CAAC+H,SAAD,GAAaa,WAAW,GAAG,EAAd,EAAkBjJ,eAAe,CAACiJ,WAAD,EAAc,GAAGrF,MAAH,CAAUwE,SAAV,EAAqB,OAArB,CAAd,EAA6C,IAA7C,CAAjC,EAAqFpI,eAAe,CAACiJ,WAAD,EAAc,GAAGrF,MAAH,CAAUwE,SAAV,EAAqB,iBAArB,CAAd,EAAuDrF,QAAQ,CAACoG,IAAT,CAAc,UAAU3F,IAAV,EAAgB;AAC5N,eAAOA,IAAI,CAACE,MAAL,KAAgB,WAAvB;AACD,OAF+L,CAAvD,CAApG,EAEhC1D,eAAe,CAACiJ,WAAD,EAAc,GAAGrF,MAAH,CAAUwE,SAAV,EAAqB,aAArB,CAAd,EAAmDnF,SAAS,KAAK,UAAjE,CAFiB,EAE6DjD,eAAe,CAACiJ,WAAD,EAAc,GAAGrF,MAAH,CAAUwE,SAAV,EAAqB,WAArB,CAAd,EAAiD5F,QAAjD,CAF5E,EAEwIyG,WAFrJ,EAAxB;AAGA,aAAO7I,YAAY,CAAC,MAAD,EAASL,aAAa,CAAC;AACxC,iBAASyI;AAD+B,OAAD,EAEtC7G,cAAc,CAAC,KAAK4G,MAAN,CAFwB,CAAtB,EAEc,CAACnI,YAAY,CAAC,KAAD,EAAQ;AACpD,iBAAS8I,OAD2C;AAEpD,kBAAU,KAAK7C,UAFqC;AAGpD,sBAAc,KAAKA,UAHiC;AAIpD,uBAAe,KAAKA,UAJgC;AAKpD,iBAASqC;AAL2C,OAAR,EAM3C,CAACtI,YAAY,CAACI,QAAD,EAAWT,aAAa,CAACA,aAAa,CAAC,EAAD,EAAK6I,aAAL,CAAd,EAAmC,EAAnC,EAAuC;AAC7E,iBAAS,GAAGhF,MAAH,CAAUwE,SAAV,EAAqB,MAArB;AADoE,OAAvC,CAAxB,EAEZ;AACFgB,QAAAA,OAAO,EAAE,SAASC,QAAT,GAAoB;AAC3B,iBAAO,CAACjJ,YAAY,CAAC,KAAD,EAAQ;AAC1B,qBAAS,GAAGwD,MAAH,CAAUwE,SAAV,EAAqB,iBAArB;AADiB,WAAR,EAEjB,CAACY,QAAD,CAFiB,CAAb,CAAP;AAGD;AALC,OAFY,CAAb,CAN2C,CAAb,EAc3BF,UAd2B,CAFd,CAAnB;AAiBD;;AAED,QAAIQ,eAAe,GAAGjJ,UAAU,CAAC+H,SAAD,GAAaH,YAAY,GAAG,EAAf,EAAmBjI,eAAe,CAACiI,YAAD,EAAe,GAAGrE,MAAH,CAAUwE,SAAV,EAAqB,SAArB,CAAf,EAAgD,IAAhD,CAAlC,EAAyFpI,eAAe,CAACiI,YAAD,EAAe,GAAGrE,MAAH,CAAUwE,SAAV,EAAqB,UAArB,EAAiCxE,MAAjC,CAAwCrB,QAAxC,CAAf,EAAkE,IAAlE,CAAxG,EAAiLvC,eAAe,CAACiI,YAAD,EAAe,GAAGrE,MAAH,CAAUwE,SAAV,EAAqB,WAArB,CAAf,EAAkD5F,QAAlD,CAAhM,EAA6PyF,YAA1Q,EAAhC,CA9DwB,CA8DkS;AAC1T;;AAEA,QAAI,CAACe,QAAQ,CAACO,MAAV,IAAoB/G,QAAxB,EAAkC;AAChC,aAAOoG,aAAa,CAACY,EAArB;AACD;;AAED,QAAIC,YAAY,GAAGrJ,YAAY,CAAC,KAAD,EAAQ;AACrC,eAASkJ,eAD4B;AAErC,eAASN,QAAQ,CAACO,MAAT,GAAkBG,SAAlB,GAA8B;AACrCC,QAAAA,OAAO,EAAE;AAD4B;AAFF,KAAR,EAK5B,CAACvJ,YAAY,CAACI,QAAD,EAAWoI,aAAX,EAA0B;AACxCQ,MAAAA,OAAO,EAAE,SAASC,QAAT,GAAoB;AAC3B,eAAO,CAACL,QAAD,CAAP;AACD;AAHuC,KAA1B,CAAb,CAL4B,CAA/B;;AAWA,QAAIzG,QAAQ,KAAK,cAAjB,EAAiC;AAC/B,aAAOnC,YAAY,CAAC,MAAD,EAAS;AAC1B,iBAASC,UAAU,CAAC,GAAGuD,MAAH,CAAUwE,SAAV,EAAqB,uBAArB,CAAD,EAAgDI,SAAhD;AADO,OAAT,EAEhB,CAACM,UAAD,EAAaW,YAAb,CAFgB,CAAnB;AAGD;;AAED,WAAOrJ,YAAY,CAAC,MAAD,EAAS;AAC1B,eAASoI;AADiB,KAAT,EAEhB,CAACiB,YAAD,EAAeX,UAAf,CAFgB,CAAnB;AAGD;AAjV4B,CAAD,CAA9B","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { createVNode as _createVNode } from \"vue\";\nimport classNames from '../_util/classNames';\nimport uniqBy from 'lodash-es/uniqBy';\nimport findIndex from 'lodash-es/findIndex';\nimport VcUpload from '../vc-upload';\nimport BaseMixin from '../_util/BaseMixin';\nimport { getOptionProps, hasProp, getSlot } from '../_util/props-util';\nimport initDefaultProps from '../_util/props-util/initDefaultProps';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale-provider/default';\nimport { defaultConfigProvider } from '../config-provider';\nimport Dragger from './Dragger';\nimport UploadList from './UploadList';\nimport { UploadProps } from './interface';\nimport { T, fileToObject, genPercentAdd, getFileItem, removeFileItem } from './utils';\nimport { defineComponent, inject } from 'vue';\nimport { getDataAndAria } from '../vc-tree/src/util';\nexport default defineComponent({\n  name: 'AUpload',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  Dragger: Dragger,\n  props: initDefaultProps(UploadProps, {\n    type: 'select',\n    multiple: false,\n    action: '',\n    data: {},\n    accept: '',\n    beforeUpload: T,\n    showUploadList: true,\n    listType: 'text',\n    disabled: false,\n    supportServerRender: true\n  }),\n  setup: function setup() {\n    return {\n      upload: null,\n      progressTimer: null,\n      configProvider: inject('configProvider', defaultConfigProvider)\n    };\n  },\n  // recentUploadStatus: boolean | PromiseLike<any>;\n  data: function data() {\n    return {\n      sFileList: this.fileList || this.defaultFileList || [],\n      dragState: 'drop'\n    };\n  },\n  watch: {\n    fileList: function fileList(val) {\n      this.sFileList = val || [];\n    }\n  },\n  beforeUnmount: function beforeUnmount() {\n    this.clearProgressTimer();\n  },\n  methods: {\n    onStart: function onStart(file) {\n      var targetItem = fileToObject(file);\n      targetItem.status = 'uploading';\n      var nextFileList = this.sFileList.concat();\n      var fileIndex = findIndex(nextFileList, function (_ref) {\n        var uid = _ref.uid;\n        return uid === targetItem.uid;\n      });\n\n      if (fileIndex === -1) {\n        nextFileList.push(targetItem);\n      } else {\n        nextFileList[fileIndex] = targetItem;\n      }\n\n      this.handleChange({\n        file: targetItem,\n        fileList: nextFileList\n      }); // fix ie progress\n\n      if (!window.File || (typeof process === \"undefined\" ? \"undefined\" : _typeof(process)) === 'object' && process.env.TEST_IE) {\n        this.autoUpdateProgress(0, targetItem);\n      }\n    },\n    onSuccess: function onSuccess(response, file, xhr) {\n      this.clearProgressTimer();\n\n      try {\n        if (typeof response === 'string') {\n          response = JSON.parse(response);\n        }\n      } catch (e) {\n        /* do nothing */\n      }\n\n      var fileList = this.sFileList;\n      var targetItem = getFileItem(file, fileList); // removed\n\n      if (!targetItem) {\n        return;\n      }\n\n      targetItem.status = 'done';\n      targetItem.response = response;\n      targetItem.xhr = xhr;\n      this.handleChange({\n        file: _extends({}, targetItem),\n        fileList: fileList\n      });\n    },\n    onProgress: function onProgress(e, file) {\n      var fileList = this.sFileList;\n      var targetItem = getFileItem(file, fileList); // removed\n\n      if (!targetItem) {\n        return;\n      }\n\n      targetItem.percent = e.percent;\n      this.handleChange({\n        event: e,\n        file: _extends({}, targetItem),\n        fileList: this.sFileList\n      });\n    },\n    onError: function onError(error, response, file) {\n      this.clearProgressTimer();\n      var fileList = this.sFileList;\n      var targetItem = getFileItem(file, fileList); // removed\n\n      if (!targetItem) {\n        return;\n      }\n\n      targetItem.error = error;\n      targetItem.response = response;\n      targetItem.status = 'error';\n      this.handleChange({\n        file: _extends({}, targetItem),\n        fileList: fileList\n      });\n    },\n    onReject: function onReject(fileList) {\n      this.$emit('reject', fileList);\n    },\n    handleRemove: function handleRemove(file) {\n      var _this = this;\n\n      var onRemove = this.remove;\n      var fileList = this.$data.sFileList;\n      Promise.resolve(typeof onRemove === 'function' ? onRemove(file) : onRemove).then(function (ret) {\n        // Prevent removing file\n        if (ret === false) {\n          return;\n        }\n\n        var removedFileList = removeFileItem(file, fileList);\n\n        if (removedFileList) {\n          file.status = 'removed'; // eslint-disable-line\n\n          if (_this.upload) {\n            _this.upload.abort(file);\n          }\n\n          _this.handleChange({\n            file: file,\n            fileList: removedFileList\n          });\n        }\n      });\n    },\n    handleManualRemove: function handleManualRemove(file) {\n      if (this.$refs.uploadRef) {\n        this.$refs.uploadRef.abort(file);\n      }\n\n      this.handleRemove(file);\n    },\n    handleChange: function handleChange(info) {\n      if (!hasProp(this, 'fileList')) {\n        this.setState({\n          sFileList: info.fileList\n        });\n      }\n\n      this.$emit('update:fileList', info.fileList);\n      this.$emit('change', info);\n    },\n    onFileDrop: function onFileDrop(e) {\n      this.setState({\n        dragState: e.type\n      });\n    },\n    reBeforeUpload: function reBeforeUpload(file, fileList) {\n      var beforeUpload = this.$props.beforeUpload;\n      var stateFileList = this.$data.sFileList;\n\n      if (!beforeUpload) {\n        return true;\n      }\n\n      var result = beforeUpload(file, fileList);\n\n      if (result === false) {\n        this.handleChange({\n          file: file,\n          fileList: uniqBy(stateFileList.concat(fileList.map(fileToObject)), function (item) {\n            return item.uid;\n          })\n        });\n        return false;\n      }\n\n      if (result && result.then) {\n        return result;\n      }\n\n      return true;\n    },\n    clearProgressTimer: function clearProgressTimer() {\n      clearInterval(this.progressTimer);\n    },\n    autoUpdateProgress: function autoUpdateProgress(_, file) {\n      var _this2 = this;\n\n      var getPercent = genPercentAdd();\n      var curPercent = 0;\n      this.clearProgressTimer();\n      this.progressTimer = setInterval(function () {\n        curPercent = getPercent(curPercent);\n\n        _this2.onProgress({\n          percent: curPercent * 100\n        }, file);\n      }, 200);\n    },\n    renderUploadList: function renderUploadList(locale) {\n      var _getOptionProps = getOptionProps(this),\n          _getOptionProps$showU = _getOptionProps.showUploadList,\n          showUploadList = _getOptionProps$showU === void 0 ? {} : _getOptionProps$showU,\n          listType = _getOptionProps.listType,\n          previewFile = _getOptionProps.previewFile,\n          disabled = _getOptionProps.disabled,\n          propLocale = _getOptionProps.locale;\n\n      var showRemoveIcon = showUploadList.showRemoveIcon,\n          showPreviewIcon = showUploadList.showPreviewIcon,\n          showDownloadIcon = showUploadList.showDownloadIcon;\n      var fileList = this.$data.sFileList;\n      var _this$$props = this.$props,\n          onDownload = _this$$props.onDownload,\n          onPreview = _this$$props.onPreview;\n      var uploadListProps = {\n        listType: listType,\n        items: fileList,\n        previewFile: previewFile,\n        showRemoveIcon: !disabled && showRemoveIcon,\n        showPreviewIcon: showPreviewIcon,\n        showDownloadIcon: showDownloadIcon,\n        locale: _extends(_extends({}, locale), propLocale),\n        onRemove: this.handleManualRemove,\n        onDownload: onDownload,\n        onPreview: onPreview\n      };\n      return _createVNode(UploadList, uploadListProps, null);\n    }\n  },\n  render: function render() {\n    var _classNames2;\n\n    var _getOptionProps2 = getOptionProps(this),\n        customizePrefixCls = _getOptionProps2.prefixCls,\n        showUploadList = _getOptionProps2.showUploadList,\n        listType = _getOptionProps2.listType,\n        type = _getOptionProps2.type,\n        disabled = _getOptionProps2.disabled;\n\n    var _this$$data = this.$data,\n        fileList = _this$$data.sFileList,\n        dragState = _this$$data.dragState;\n    var _this$$attrs = this.$attrs,\n        className = _this$$attrs.class,\n        style = _this$$attrs.style;\n    var getPrefixCls = this.configProvider.getPrefixCls;\n    var prefixCls = getPrefixCls('upload', customizePrefixCls);\n\n    var vcUploadProps = _extends(_extends({}, this.$props), {\n      prefixCls: prefixCls,\n      beforeUpload: this.reBeforeUpload,\n      onStart: this.onStart,\n      onError: this.onError,\n      onProgress: this.onProgress,\n      onSuccess: this.onSuccess,\n      onReject: this.onReject,\n      ref: 'uploadRef'\n    });\n\n    var uploadList = showUploadList ? _createVNode(LocaleReceiver, {\n      \"componentName\": \"Upload\",\n      \"defaultLocale\": defaultLocale.Upload,\n      \"children\": this.renderUploadList\n    }, null) : null;\n    var children = getSlot(this);\n\n    if (type === 'drag') {\n      var _classNames;\n\n      var dragCls = classNames(prefixCls, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag\"), true), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-uploading\"), fileList.some(function (file) {\n        return file.status === 'uploading';\n      })), _defineProperty(_classNames, \"\".concat(prefixCls, \"-drag-hover\"), dragState === 'dragover'), _defineProperty(_classNames, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames));\n      return _createVNode(\"span\", _objectSpread({\n        \"class\": className\n      }, getDataAndAria(this.$attrs)), [_createVNode(\"div\", {\n        \"class\": dragCls,\n        \"onDrop\": this.onFileDrop,\n        \"onDragover\": this.onFileDrop,\n        \"onDragleave\": this.onFileDrop,\n        \"style\": style\n      }, [_createVNode(VcUpload, _objectSpread(_objectSpread({}, vcUploadProps), {}, {\n        \"class\": \"\".concat(prefixCls, \"-btn\")\n      }), {\n        default: function _default() {\n          return [_createVNode(\"div\", {\n            \"class\": \"\".concat(prefixCls, \"-drag-container\")\n          }, [children])];\n        }\n      })]), uploadList]);\n    }\n\n    var uploadButtonCls = classNames(prefixCls, (_classNames2 = {}, _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select\"), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-select-\").concat(listType), true), _defineProperty(_classNames2, \"\".concat(prefixCls, \"-disabled\"), disabled), _classNames2)); // Remove id to avoid open by label when trigger is hidden\n    // https://github.com/ant-design/ant-design/issues/14298\n\n    if (!children.length || disabled) {\n      delete vcUploadProps.id;\n    }\n\n    var uploadButton = _createVNode(\"div\", {\n      \"class\": uploadButtonCls,\n      \"style\": children.length ? undefined : {\n        display: 'none'\n      }\n    }, [_createVNode(VcUpload, vcUploadProps, {\n      default: function _default() {\n        return [children];\n      }\n    })]);\n\n    if (listType === 'picture-card') {\n      return _createVNode(\"span\", {\n        \"class\": classNames(\"\".concat(prefixCls, \"-picture-card-wrapper\"), className)\n      }, [uploadList, uploadButton]);\n    }\n\n    return _createVNode(\"span\", {\n      \"class\": className\n    }, [uploadButton, uploadList]);\n  }\n});"]},"metadata":{},"sourceType":"module"}