{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport Trigger from '../../vc-trigger';\nimport { computed, defineComponent, onBeforeUnmount, ref, watch } from 'vue';\nimport { useInjectMenu } from './hooks/useMenuContext';\nimport { placements, placementsRtl } from './placements';\nimport raf from '../../_util/raf';\nimport classNames from '../../_util/classNames';\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\nexport default defineComponent({\n  name: 'PopupTrigger',\n  inheritAttrs: false,\n  props: {\n    prefixCls: String,\n    mode: String,\n    visible: Boolean,\n    // popup: React.ReactNode;\n    popupClassName: String,\n    popupOffset: Array,\n    disabled: Boolean,\n    onVisibleChange: Function\n  },\n  slots: ['popup'],\n  emits: ['visibleChange'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        emit = _ref.emit;\n    var innerVisible = ref(false);\n\n    var _useInjectMenu = useInjectMenu(),\n        getPopupContainer = _useInjectMenu.getPopupContainer,\n        rtl = _useInjectMenu.rtl,\n        subMenuOpenDelay = _useInjectMenu.subMenuOpenDelay,\n        subMenuCloseDelay = _useInjectMenu.subMenuCloseDelay,\n        builtinPlacements = _useInjectMenu.builtinPlacements,\n        triggerSubMenuAction = _useInjectMenu.triggerSubMenuAction,\n        isRootMenu = _useInjectMenu.isRootMenu;\n\n    var placement = computed(function () {\n      return rtl.value ? _extends(_extends({}, placementsRtl), builtinPlacements.value) : _extends(_extends({}, placements), builtinPlacements.value);\n    });\n    var popupPlacement = computed(function () {\n      return popupPlacementMap[props.mode];\n    });\n    var visibleRef = ref();\n    watch(function () {\n      return props.visible;\n    }, function (visible) {\n      raf.cancel(visibleRef.value);\n      visibleRef.value = raf(function () {\n        innerVisible.value = visible;\n      });\n    }, {\n      immediate: true\n    });\n    onBeforeUnmount(function () {\n      raf.cancel(visibleRef.value);\n    });\n\n    var onVisibleChange = function onVisibleChange(visible) {\n      emit('visibleChange', visible);\n    };\n\n    return function () {\n      var prefixCls = props.prefixCls,\n          popupClassName = props.popupClassName,\n          mode = props.mode,\n          popupOffset = props.popupOffset,\n          disabled = props.disabled;\n      return _createVNode(Trigger, {\n        \"prefixCls\": prefixCls,\n        \"popupClassName\": classNames(\"\".concat(prefixCls, \"-popup\"), _defineProperty({}, \"\".concat(prefixCls, \"-rtl\"), rtl.value), popupClassName),\n        \"stretch\": mode === 'horizontal' ? 'minWidth' : null,\n        \"getPopupContainer\": isRootMenu.value ? getPopupContainer.value : function (triggerNode) {\n          return triggerNode.parentNode;\n        },\n        \"builtinPlacements\": placement.value,\n        \"popupPlacement\": popupPlacement.value,\n        \"popupVisible\": innerVisible.value,\n        \"popupAlign\": popupOffset && {\n          offset: popupOffset\n        },\n        \"action\": disabled ? [] : [triggerSubMenuAction.value],\n        \"mouseEnterDelay\": subMenuOpenDelay.value,\n        \"mouseLeaveDelay\": subMenuCloseDelay.value,\n        \"onPopupVisibleChange\": onVisibleChange,\n        \"forceRender\": true\n      }, {\n        popup: function popup() {\n          var _a;\n\n          return (_a = slots.popup) === null || _a === void 0 ? void 0 : _a.call(slots, {\n            visible: innerVisible.value\n          });\n        },\n        default: slots.default\n      });\n    };\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/menu/src/PopupTrigger.js"],"names":["_defineProperty","_extends","createVNode","_createVNode","resolveDirective","_resolveDirective","Trigger","computed","defineComponent","onBeforeUnmount","ref","watch","useInjectMenu","placements","placementsRtl","raf","classNames","popupPlacementMap","horizontal","vertical","name","inheritAttrs","props","prefixCls","String","mode","visible","Boolean","popupClassName","popupOffset","Array","disabled","onVisibleChange","Function","slots","emits","setup","_ref","emit","innerVisible","_useInjectMenu","getPopupContainer","rtl","subMenuOpenDelay","subMenuCloseDelay","builtinPlacements","triggerSubMenuAction","isRootMenu","placement","value","popupPlacement","visibleRef","cancel","immediate","concat","triggerNode","parentNode","offset","popup","_a","call","default"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport Trigger from '../../vc-trigger';\nimport { computed, defineComponent, onBeforeUnmount, ref, watch } from 'vue';\nimport { useInjectMenu } from './hooks/useMenuContext';\nimport { placements, placementsRtl } from './placements';\nimport raf from '../../_util/raf';\nimport classNames from '../../_util/classNames';\nvar popupPlacementMap = {\n  horizontal: 'bottomLeft',\n  vertical: 'rightTop',\n  'vertical-left': 'rightTop',\n  'vertical-right': 'leftTop'\n};\nexport default defineComponent({\n  name: 'PopupTrigger',\n  inheritAttrs: false,\n  props: {\n    prefixCls: String,\n    mode: String,\n    visible: Boolean,\n    // popup: React.ReactNode;\n    popupClassName: String,\n    popupOffset: Array,\n    disabled: Boolean,\n    onVisibleChange: Function\n  },\n  slots: ['popup'],\n  emits: ['visibleChange'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        emit = _ref.emit;\n    var innerVisible = ref(false);\n\n    var _useInjectMenu = useInjectMenu(),\n        getPopupContainer = _useInjectMenu.getPopupContainer,\n        rtl = _useInjectMenu.rtl,\n        subMenuOpenDelay = _useInjectMenu.subMenuOpenDelay,\n        subMenuCloseDelay = _useInjectMenu.subMenuCloseDelay,\n        builtinPlacements = _useInjectMenu.builtinPlacements,\n        triggerSubMenuAction = _useInjectMenu.triggerSubMenuAction,\n        isRootMenu = _useInjectMenu.isRootMenu;\n\n    var placement = computed(function () {\n      return rtl.value ? _extends(_extends({}, placementsRtl), builtinPlacements.value) : _extends(_extends({}, placements), builtinPlacements.value);\n    });\n    var popupPlacement = computed(function () {\n      return popupPlacementMap[props.mode];\n    });\n    var visibleRef = ref();\n    watch(function () {\n      return props.visible;\n    }, function (visible) {\n      raf.cancel(visibleRef.value);\n      visibleRef.value = raf(function () {\n        innerVisible.value = visible;\n      });\n    }, {\n      immediate: true\n    });\n    onBeforeUnmount(function () {\n      raf.cancel(visibleRef.value);\n    });\n\n    var onVisibleChange = function onVisibleChange(visible) {\n      emit('visibleChange', visible);\n    };\n\n    return function () {\n      var prefixCls = props.prefixCls,\n          popupClassName = props.popupClassName,\n          mode = props.mode,\n          popupOffset = props.popupOffset,\n          disabled = props.disabled;\n      return _createVNode(Trigger, {\n        \"prefixCls\": prefixCls,\n        \"popupClassName\": classNames(\"\".concat(prefixCls, \"-popup\"), _defineProperty({}, \"\".concat(prefixCls, \"-rtl\"), rtl.value), popupClassName),\n        \"stretch\": mode === 'horizontal' ? 'minWidth' : null,\n        \"getPopupContainer\": isRootMenu.value ? getPopupContainer.value : function (triggerNode) {\n          return triggerNode.parentNode;\n        },\n        \"builtinPlacements\": placement.value,\n        \"popupPlacement\": popupPlacement.value,\n        \"popupVisible\": innerVisible.value,\n        \"popupAlign\": popupOffset && {\n          offset: popupOffset\n        },\n        \"action\": disabled ? [] : [triggerSubMenuAction.value],\n        \"mouseEnterDelay\": subMenuOpenDelay.value,\n        \"mouseLeaveDelay\": subMenuCloseDelay.value,\n        \"onPopupVisibleChange\": onVisibleChange,\n        \"forceRender\": true\n      }, {\n        popup: function popup() {\n          var _a;\n\n          return (_a = slots.popup) === null || _a === void 0 ? void 0 : _a.call(slots, {\n            visible: innerVisible.value\n          });\n        },\n        default: slots.default\n      });\n    };\n  }\n});"]},"metadata":{},"sourceType":"module"}