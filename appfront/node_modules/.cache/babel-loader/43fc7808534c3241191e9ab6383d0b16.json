{"ast":null,"code":"var staticStrFirst = require('./staticStrFirst');\n\nvar staticStrLast = require('./staticStrLast');\n\nvar helperGetDateFullYear = require('./helperGetDateFullYear');\n\nvar getWhatMonth = require('./getWhatMonth');\n\nvar toStringDate = require('./toStringDate');\n\nvar isValidDate = require('./isValidDate');\n/**\r\n  * 返回前几年或后几年的日期\r\n  *\r\n  * @param {Date} date 日期或数字\r\n  * @param {Number} offset 年(默认当前年)、前几个年(数值)、后几个年(数值)\r\n  * @param {Number/String} month 获取哪月(null默认当前年)、年初(first)、年末(last)、指定月份（0-11）\r\n  * @return {Date}\r\n  */\n\n\nfunction getWhatYear(date, offset, month) {\n  var number;\n  date = toStringDate(date);\n\n  if (isValidDate(date)) {\n    if (offset) {\n      number = offset && !isNaN(offset) ? offset : 0;\n      date.setFullYear(helperGetDateFullYear(date) + number);\n    }\n\n    if (month || !isNaN(month)) {\n      if (month === staticStrFirst) {\n        return new Date(helperGetDateFullYear(date), 0, 1);\n      } else if (month === staticStrLast) {\n        date.setMonth(11);\n        return getWhatMonth(date, 0, staticStrLast);\n      } else {\n        date.setMonth(month);\n      }\n    }\n  }\n\n  return date;\n}\n\nmodule.exports = getWhatYear;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/xe-utils/getWhatYear.js"],"names":["staticStrFirst","require","staticStrLast","helperGetDateFullYear","getWhatMonth","toStringDate","isValidDate","getWhatYear","date","offset","month","number","isNaN","setFullYear","Date","setMonth","module","exports"],"mappings":"AAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,kBAAD,CAA5B;;AACA,IAAIC,aAAa,GAAGD,OAAO,CAAC,iBAAD,CAA3B;;AAEA,IAAIE,qBAAqB,GAAGF,OAAO,CAAC,yBAAD,CAAnC;;AAEA,IAAIG,YAAY,GAAGH,OAAO,CAAC,gBAAD,CAA1B;;AACA,IAAII,YAAY,GAAGJ,OAAO,CAAC,gBAAD,CAA1B;;AACA,IAAIK,WAAW,GAAGL,OAAO,CAAC,eAAD,CAAzB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASM,WAAT,CAAsBC,IAAtB,EAA4BC,MAA5B,EAAoCC,KAApC,EAA2C;AACzC,MAAIC,MAAJ;AACAH,EAAAA,IAAI,GAAGH,YAAY,CAACG,IAAD,CAAnB;;AACA,MAAIF,WAAW,CAACE,IAAD,CAAf,EAAuB;AACrB,QAAIC,MAAJ,EAAY;AACVE,MAAAA,MAAM,GAAGF,MAAM,IAAI,CAACG,KAAK,CAACH,MAAD,CAAhB,GAA2BA,MAA3B,GAAoC,CAA7C;AACAD,MAAAA,IAAI,CAACK,WAAL,CAAiBV,qBAAqB,CAACK,IAAD,CAArB,GAA8BG,MAA/C;AACD;;AACD,QAAID,KAAK,IAAI,CAACE,KAAK,CAACF,KAAD,CAAnB,EAA4B;AAC1B,UAAIA,KAAK,KAAKV,cAAd,EAA8B;AAC5B,eAAO,IAAIc,IAAJ,CAASX,qBAAqB,CAACK,IAAD,CAA9B,EAAsC,CAAtC,EAAyC,CAAzC,CAAP;AACD,OAFD,MAEO,IAAIE,KAAK,KAAKR,aAAd,EAA6B;AAClCM,QAAAA,IAAI,CAACO,QAAL,CAAc,EAAd;AACA,eAAOX,YAAY,CAACI,IAAD,EAAO,CAAP,EAAUN,aAAV,CAAnB;AACD,OAHM,MAGA;AACLM,QAAAA,IAAI,CAACO,QAAL,CAAcL,KAAd;AACD;AACF;AACF;;AACD,SAAOF,IAAP;AACD;;AAEDQ,MAAM,CAACC,OAAP,GAAiBV,WAAjB","sourcesContent":["var staticStrFirst = require('./staticStrFirst')\r\nvar staticStrLast = require('./staticStrLast')\r\n\r\nvar helperGetDateFullYear = require('./helperGetDateFullYear')\r\n\r\nvar getWhatMonth = require('./getWhatMonth')\r\nvar toStringDate = require('./toStringDate')\r\nvar isValidDate = require('./isValidDate')\r\n\r\n/**\r\n  * 返回前几年或后几年的日期\r\n  *\r\n  * @param {Date} date 日期或数字\r\n  * @param {Number} offset 年(默认当前年)、前几个年(数值)、后几个年(数值)\r\n  * @param {Number/String} month 获取哪月(null默认当前年)、年初(first)、年末(last)、指定月份（0-11）\r\n  * @return {Date}\r\n  */\r\nfunction getWhatYear (date, offset, month) {\r\n  var number\r\n  date = toStringDate(date)\r\n  if (isValidDate(date)) {\r\n    if (offset) {\r\n      number = offset && !isNaN(offset) ? offset : 0\r\n      date.setFullYear(helperGetDateFullYear(date) + number)\r\n    }\r\n    if (month || !isNaN(month)) {\r\n      if (month === staticStrFirst) {\r\n        return new Date(helperGetDateFullYear(date), 0, 1)\r\n      } else if (month === staticStrLast) {\r\n        date.setMonth(11)\r\n        return getWhatMonth(date, 0, staticStrLast)\r\n      } else {\r\n        date.setMonth(month)\r\n      }\r\n    }\r\n  }\r\n  return date\r\n}\r\n\r\nmodule.exports = getWhatYear\r\n"]},"metadata":{},"sourceType":"script"}