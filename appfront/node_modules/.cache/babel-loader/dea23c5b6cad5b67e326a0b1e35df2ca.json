{"ast":null,"code":"import { defineComponent, reactive, computed, ref } from 'vue';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons-vue'; // import router from '@/router';\n\nimport { useRouter } from 'vue-router';\nimport { postSubmit } from '../api/api.js';\nimport { useStore } from 'vuex';\nexport default defineComponent({\n  components: {\n    UserOutlined,\n    LockOutlined\n  },\n\n  setup() {\n    const store = useStore();\n    localStorage.setItem(\"Flag\", \"noLogin\");\n    let message = ref('');\n    let router = useRouter();\n    const formState = reactive({\n      username: '',\n      password: '',\n      remember: true\n    });\n    var that = this;\n\n    const onFinish = values => {\n      postSubmit(values.username, values.password).then( // console.log(response),\n      response => {\n        // this.message = ''\n        console.log(response);\n\n        if (response['code'] == 1) {\n          localStorage.setItem(\"Userid\", response['data']['userId']);\n          localStorage.setItem(\"Flag\", \"isLogin\");\n          localStorage.setItem(\"userType\", response['data']['accountType']);\n          store.dispatch(\"setUser\", true);\n\n          if (response['data']['accountType'] == 2) {\n            router.push({\n              path: '/manager'\n            });\n          } else {\n            router.push({\n              path: '/worker'\n            });\n          }\n        } else if (response['code'] == 2004) {\n          message.value = 'no user!';\n        } else {\n          message.value = 'passwords error!';\n        }\n      }, response => {\n        message.value = '服务器访问错误!';\n      });\n    };\n\n    const onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n\n    const disabled = computed(() => {\n      return !(formState.username && formState.password);\n    });\n    return {\n      formState,\n      onFinish,\n      onFinishFailed,\n      disabled,\n      message\n    };\n  }\n\n});\n/**\n * \n * 1. 设置最小高度\n * 2. header 美化\n * 3. 左边导航栏美化\n * 4. 表格宽度美化\n * 5. 登录页面\n */","map":{"version":3,"mappings":"AAwDA,SAASA,eAAT,EAA0BC,QAA1B,EAAoCC,QAApC,EAA8CC,GAA9C,QAAyD,KAAzD;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,uBAA3C,C,CACA;;AACA,SAAQC,SAAR,QAAwB,YAAxB;AACA,SAAQC,UAAR,QAAyB,eAAzB;AACA,SAASC,QAAT,QAAyB,MAAzB;AAGA,eAAeR,eAAe,CAAC;AAC7BS,YAAU,EAAE;AACVL,gBADU;AAEVC;AAFU,GADiB;;AAQ7BK,OAAK,GAAG;AACN,UAAMC,KAAI,GAAIH,QAAQ,EAAtB;AACAI,gBAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,SAA7B;AACA,QAAIC,OAAM,GAAIX,GAAG,CAAC,EAAD,CAAjB;AACA,QAAIY,MAAK,GAAKT,SAAS,EAAvB;AACA,UAAMU,SAAQ,GAAIf,QAAQ,CAAC;AACzBgB,cAAQ,EAAE,EADe;AAEzBC,cAAQ,EAAE,EAFe;AAGzBC,cAAQ,EAAE;AAHe,KAAD,CAA1B;AAKA,QAAIC,IAAG,GAAI,IAAX;;AACA,UAAMC,QAAO,GAAIC,MAAK,IAAK;AACvBf,gBAAU,CACNe,MAAM,CAACL,QADD,EACWK,MAAM,CAACJ,QADlB,CAAV,CAEEK,IAFF,EAGE;AACEC,cAAO,IAAI;AACP;AACAC,eAAO,CAACC,GAAR,CAAYF,QAAZ;;AACC,YAAIA,QAAQ,CAAC,MAAD,CAAR,IAAoB,CAAxB,EAA0B;AAEvBZ,sBAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BW,QAAQ,CAAC,MAAD,CAAR,CAAiB,QAAjB,CAA/B;AACAZ,sBAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,SAA7B;AACAD,sBAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCW,QAAQ,CAAC,MAAD,CAAR,CAAiB,aAAjB,CAAjC;AACAb,eAAK,CAACgB,QAAN,CAAe,SAAf,EAA0B,IAA1B;;AAEA,cAAIH,QAAQ,CAAC,MAAD,CAAR,CAAiB,aAAjB,KAAmC,CAAvC,EAAyC;AACrCT,kBAAM,CAACa,IAAP,CAAY;AAACC,kBAAI,EAAC;AAAN,aAAZ;AACH,WAFD,MAEK;AACHd,kBAAM,CAACa,IAAP,CAAY;AAACC,kBAAI,EAAC;AAAN,aAAZ;AACF;AACH,SAZA,MAaK,IAAGL,QAAQ,CAAC,MAAD,CAAR,IAAoB,IAAvB,EACL;AACAV,iBAAO,CAACgB,KAAR,GAAgB,UAAhB;AACA,SAHK,MAID;AACFhB,iBAAO,CAACgB,KAAR,GAAgB,kBAAhB;AACF;AAEJ,OA5BL,EA6BIN,QAAO,IAAI;AACPV,eAAO,CAACgB,KAAR,GAAgB,UAAhB;AACJ,OA/BJ;AAkCH,KAnCD;;AAqCA,UAAMC,cAAa,GAAIC,SAAQ,IAAK;AAClCP,aAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBM,SAAvB;AACD,KAFD;;AAIA,UAAMC,QAAO,GAAI/B,QAAQ,CAAC,MAAM;AAC9B,aAAO,EAAEc,SAAS,CAACC,QAAV,IAAsBD,SAAS,CAACE,QAAlC,CAAP;AACD,KAFwB,CAAzB;AAGA,WAAO;AACLF,eADK;AAELK,cAFK;AAGLU,oBAHK;AAILE,cAJK;AAKLnB;AALK,KAAP;AAOD;;AAtE4B,CAAD,CAA9B;AA2EA","names":["defineComponent","reactive","computed","ref","UserOutlined","LockOutlined","useRouter","postSubmit","useStore","components","setup","store","localStorage","setItem","message","router","formState","username","password","remember","that","onFinish","values","then","response","console","log","dispatch","push","path","value","onFinishFailed","errorInfo","disabled"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/views/login.vue"],"sourcesContent":["<template>\n  <a-form\n    style=\"text-align:center\"\n    :model=\"formState\"\n    name=\"normal_login\"\n    class=\"login-form\"\n    @finish=\"onFinish\"\n    @finishFailed=\"onFinishFailed\"\n  >\n  <br>\n  <br>\n  <br>\n  <h1>欢迎登录 </h1>\n    <a-form-item\n      class=\"\"\n      label=\"Username\"\n      style=\"width:300px; text-align:center\"\n      name=\"username\"\n      :rules=\"[{ required: true, message: 'Please input your username!' }]\"\n    >\n      <a-input v-model:value=\"formState.username\">\n        <template #prefix>\n          <UserOutlined class=\"site-form-item-icon\" />\n        </template>\n      </a-input>\n    </a-form-item>\n\n    <a-form-item\n     style=\"width:300px;\"\n      label=\"Password\"\n      name=\"password\"\n      :rules=\"[{ required: true, message: 'Please input your password!' }]\"\n    >\n      <a-input-password v-model:value=\"formState.password\">\n        <template #prefix>\n          <LockOutlined class=\"site-form-item-icon\" />\n        </template>\n      </a-input-password>\n    </a-form-item>\n            <p  >  {{ message }}</p>\n    <div class=\"login-form-wrap\">\n      <a-form-item name=\"remember\" no-style>\n        <a-checkbox v-model:checked=\"formState.remember\">Remember me</a-checkbox>\n      </a-form-item>\n      <a class=\"login-form-forgot\" href=\"\">Forgot password</a>\n    </div>\n\n    <a-form-item>\n      <a-button :disabled=\"disabled\" type=\"primary\" html-type=\"submit\" class=\"login-form-button\">\n        Log in\n      </a-button>\n      \n    </a-form-item>\n  </a-form>\n</template>\n<script>\nimport { defineComponent, reactive, computed, ref } from 'vue';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons-vue';\n// import router from '@/router';\nimport {useRouter} from 'vue-router'\nimport {postSubmit} from '../api/api.js'\nimport { useStore } from 'vuex'\n\n\nexport default defineComponent({\n  components: {\n    UserOutlined,\n    LockOutlined,\n  },\n\n\n\n  setup() {\n    const store = useStore()\n    localStorage.setItem(\"Flag\", \"noLogin\");\n    let message = ref('')\n    let router  = useRouter()\n    const formState = reactive({\n      username: '',\n      password: '',\n      remember: true,\n    });\n    var that = this\n    const onFinish = values => {\n        postSubmit(\n            values.username, values.password\n        ).then(\n          // console.log(response),\n            response =>{\n                // this.message = ''\n                console.log(response)\n                 if (response['code'] == 1){\n\n                    localStorage.setItem(\"Userid\", response['data']['userId']);\n                    localStorage.setItem(\"Flag\", \"isLogin\");\n                    localStorage.setItem(\"userType\", response['data']['accountType']);\n                    store.dispatch(\"setUser\", true);\n\n                    if (response['data']['accountType'] == 2){\n                        router.push({path:'/manager'})\n                    }else{\n                      router.push({path:'/worker'})\n                    }\n                 }\n                 else if(response['code'] == 2004)\n                 {\n                 message.value = 'no user!'\n                 }\n                 else{\n                   message.value = 'passwords error!'\n                 }\n                \n            },\n            response =>{\n                message.value = '服务器访问错误!'\n            }\n\n        )\n    };\n\n    const onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n\n    const disabled = computed(() => {\n      return !(formState.username && formState.password);\n    });\n    return {\n      formState,\n      onFinish,\n      onFinishFailed,\n      disabled,\n      message,\n    };\n  },\n\n});\n\n\n/**\n * \n * 1. 设置最小高度\n * 2. header 美化\n * 3. 左边导航栏美化\n * 4. 表格宽度美化\n * 5. 登录页面\n */\n</script>\n<style>\n#components-form-demo-normal-login .login-form {\n  max-width: 300px;\n}\n#components-form-demo-normal-login .login-form-wrap {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n#components-form-demo-normal-login .login-form-forgot {\n  margin-bottom: 24px;\n}\n#components-form-demo-normal-login .login-form-button {\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}