{"ast":null,"code":"import { onBeforeUnmount, ref } from 'vue';\nimport wrapperRaf from '../raf';\n/**\n * Execute code before next frame but async\n */\n\nexport function useLayoutState(defaultState) {\n  var stateRef = ref(defaultState);\n  var tempState = stateRef.value;\n  var updateBatchRef = [];\n  var rafRef = ref();\n\n  function setFrameState(updater) {\n    wrapperRaf.cancel(rafRef.value);\n    updateBatchRef.push(updater);\n    rafRef.value = wrapperRaf(function () {\n      var prevBatch = updateBatchRef; // const prevState = stateRef.value;\n\n      updateBatchRef = [];\n      prevBatch.forEach(function (batchUpdater) {\n        tempState = batchUpdater(tempState);\n      }); // if (tempState !== stateRef.value) {\n\n      stateRef.value = tempState; // }\n    });\n  }\n\n  onBeforeUnmount(function () {\n    wrapperRaf.cancel(rafRef.value);\n  });\n  return [stateRef, setFrameState];\n}","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/_util/hooks/useLayoutState.js"],"names":["onBeforeUnmount","ref","wrapperRaf","useLayoutState","defaultState","stateRef","tempState","value","updateBatchRef","rafRef","setFrameState","updater","cancel","push","prevBatch","forEach","batchUpdater"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,GAA1B,QAAqC,KAArC;AACA,OAAOC,UAAP,MAAuB,QAAvB;AACA;AACA;AACA;;AAEA,OAAO,SAASC,cAAT,CAAwBC,YAAxB,EAAsC;AAC3C,MAAIC,QAAQ,GAAGJ,GAAG,CAACG,YAAD,CAAlB;AACA,MAAIE,SAAS,GAAGD,QAAQ,CAACE,KAAzB;AACA,MAAIC,cAAc,GAAG,EAArB;AACA,MAAIC,MAAM,GAAGR,GAAG,EAAhB;;AAEA,WAASS,aAAT,CAAuBC,OAAvB,EAAgC;AAC9BT,IAAAA,UAAU,CAACU,MAAX,CAAkBH,MAAM,CAACF,KAAzB;AACAC,IAAAA,cAAc,CAACK,IAAf,CAAoBF,OAApB;AACAF,IAAAA,MAAM,CAACF,KAAP,GAAeL,UAAU,CAAC,YAAY;AACpC,UAAIY,SAAS,GAAGN,cAAhB,CADoC,CACJ;;AAEhCA,MAAAA,cAAc,GAAG,EAAjB;AACAM,MAAAA,SAAS,CAACC,OAAV,CAAkB,UAAUC,YAAV,EAAwB;AACxCV,QAAAA,SAAS,GAAGU,YAAY,CAACV,SAAD,CAAxB;AACD,OAFD,EAJoC,CAMhC;;AAEJD,MAAAA,QAAQ,CAACE,KAAT,GAAiBD,SAAjB,CARoC,CAQR;AAC7B,KATwB,CAAzB;AAUD;;AAEDN,EAAAA,eAAe,CAAC,YAAY;AAC1BE,IAAAA,UAAU,CAACU,MAAX,CAAkBH,MAAM,CAACF,KAAzB;AACD,GAFc,CAAf;AAGA,SAAO,CAACF,QAAD,EAAWK,aAAX,CAAP;AACD","sourcesContent":["import { onBeforeUnmount, ref } from 'vue';\nimport wrapperRaf from '../raf';\n/**\n * Execute code before next frame but async\n */\n\nexport function useLayoutState(defaultState) {\n  var stateRef = ref(defaultState);\n  var tempState = stateRef.value;\n  var updateBatchRef = [];\n  var rafRef = ref();\n\n  function setFrameState(updater) {\n    wrapperRaf.cancel(rafRef.value);\n    updateBatchRef.push(updater);\n    rafRef.value = wrapperRaf(function () {\n      var prevBatch = updateBatchRef; // const prevState = stateRef.value;\n\n      updateBatchRef = [];\n      prevBatch.forEach(function (batchUpdater) {\n        tempState = batchUpdater(tempState);\n      }); // if (tempState !== stateRef.value) {\n\n      stateRef.value = tempState; // }\n    });\n  }\n\n  onBeforeUnmount(function () {\n    wrapperRaf.cancel(rafRef.value);\n  });\n  return [stateRef, setFrameState];\n}"]},"metadata":{},"sourceType":"module"}