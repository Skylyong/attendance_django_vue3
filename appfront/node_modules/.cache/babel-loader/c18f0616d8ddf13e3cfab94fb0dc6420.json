{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport XEUtils from 'xe-utils';\nimport VxeModalComponent, { allActivedModals } from './src/modal';\nimport { VXETable } from '../v-x-e-table';\nimport { dynamicApp, dynamicStore, checkDynamic } from '../dynamics';\n\nfunction openModal(options) {\n  // 使用动态组件渲染动态弹框\n  checkDynamic();\n  return new Promise(function (resolve) {\n    if (options && options.id && allActivedModals.some(function (comp) {\n      return comp.props.id === options.id;\n    })) {\n      resolve('exist');\n    } else {\n      var _onHide_1 = options.onHide;\n      var modalOpts_1 = Object.assign(options, {\n        key: XEUtils.uniqueId(),\n        modelValue: true,\n        onHide: function (params) {\n          var modalList = dynamicStore.modals;\n\n          if (_onHide_1) {\n            _onHide_1(params);\n          }\n\n          dynamicStore.modals = modalList.filter(function (item) {\n            return item.key !== modalOpts_1.key;\n          });\n          resolve(params.type);\n        }\n      });\n      dynamicStore.modals.push(modalOpts_1);\n    }\n  });\n}\n\nfunction getModal(id) {\n  return XEUtils.find(allActivedModals, function ($modal) {\n    return $modal.props.id === id;\n  });\n}\n/**\n * 全局关闭动态的活动窗口（只能用于关闭动态的创建的活动窗口）\n * 如果传 id 则关闭指定的窗口\n * 如果不传则关闭所有窗口\n */\n\n\nfunction closeModal(id) {\n  var modals = id ? [getModal(id)] : allActivedModals;\n  var restPromises = [];\n  modals.forEach(function ($modal) {\n    if ($modal) {\n      restPromises.push($modal.close());\n    }\n  });\n  return Promise.all(restPromises);\n}\n\nfunction handleOpen(defOpts, content, title, options) {\n  var opts;\n\n  if (XEUtils.isObject(content)) {\n    opts = content;\n  } else {\n    opts = {\n      content: XEUtils.toValueString(content),\n      title: title\n    };\n  }\n\n  return openModal(__assign(__assign(__assign({}, defOpts), options), opts));\n}\n\nfunction openAlert(content, title, options) {\n  return handleOpen({\n    type: 'alert',\n    showFooter: true\n  }, content, title, options);\n}\n\nfunction openConfirm(content, title, options) {\n  return handleOpen({\n    type: 'confirm',\n    status: 'question',\n    showFooter: true\n  }, content, title, options);\n}\n\nfunction openMessage(content, options) {\n  return handleOpen({\n    type: 'message',\n    mask: false,\n    lockView: false,\n    showHeader: false\n  }, content, '', options);\n}\n\nvar ModalController = {\n  get: getModal,\n  close: closeModal,\n  open: openModal,\n  alert: openAlert,\n  confirm: openConfirm,\n  message: openMessage\n};\nexport var modal = ModalController;\nexport var Modal = Object.assign(VxeModalComponent, {\n  install: function (app) {\n    app.component(VxeModalComponent.name, VxeModalComponent);\n    VXETable.modal = ModalController;\n  }\n});\ndynamicApp.component(VxeModalComponent.name, VxeModalComponent);\nexport default Modal;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vxe-table/es/modal/index.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","XEUtils","VxeModalComponent","allActivedModals","VXETable","dynamicApp","dynamicStore","checkDynamic","openModal","options","Promise","resolve","id","some","comp","props","_onHide_1","onHide","modalOpts_1","key","uniqueId","modelValue","params","modalList","modals","filter","item","type","push","getModal","find","$modal","closeModal","restPromises","forEach","close","all","handleOpen","defOpts","content","title","opts","isObject","toValueString","openAlert","showFooter","openConfirm","status","openMessage","mask","lockView","showHeader","ModalController","get","open","alert","confirm","message","modal","Modal","install","app","component","name"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport XEUtils from 'xe-utils';\nimport VxeModalComponent, { allActivedModals } from './src/modal';\nimport { VXETable } from '../v-x-e-table';\nimport { dynamicApp, dynamicStore, checkDynamic } from '../dynamics';\nfunction openModal(options) {\n    // 使用动态组件渲染动态弹框\n    checkDynamic();\n    return new Promise(function (resolve) {\n        if (options && options.id && allActivedModals.some(function (comp) { return comp.props.id === options.id; })) {\n            resolve('exist');\n        }\n        else {\n            var _onHide_1 = options.onHide;\n            var modalOpts_1 = Object.assign(options, {\n                key: XEUtils.uniqueId(),\n                modelValue: true,\n                onHide: function (params) {\n                    var modalList = dynamicStore.modals;\n                    if (_onHide_1) {\n                        _onHide_1(params);\n                    }\n                    dynamicStore.modals = modalList.filter(function (item) { return item.key !== modalOpts_1.key; });\n                    resolve(params.type);\n                }\n            });\n            dynamicStore.modals.push(modalOpts_1);\n        }\n    });\n}\nfunction getModal(id) {\n    return XEUtils.find(allActivedModals, function ($modal) { return $modal.props.id === id; });\n}\n/**\n * 全局关闭动态的活动窗口（只能用于关闭动态的创建的活动窗口）\n * 如果传 id 则关闭指定的窗口\n * 如果不传则关闭所有窗口\n */\nfunction closeModal(id) {\n    var modals = id ? [getModal(id)] : allActivedModals;\n    var restPromises = [];\n    modals.forEach(function ($modal) {\n        if ($modal) {\n            restPromises.push($modal.close());\n        }\n    });\n    return Promise.all(restPromises);\n}\nfunction handleOpen(defOpts, content, title, options) {\n    var opts;\n    if (XEUtils.isObject(content)) {\n        opts = content;\n    }\n    else {\n        opts = { content: XEUtils.toValueString(content), title: title };\n    }\n    return openModal(__assign(__assign(__assign({}, defOpts), options), opts));\n}\nfunction openAlert(content, title, options) {\n    return handleOpen({\n        type: 'alert',\n        showFooter: true\n    }, content, title, options);\n}\nfunction openConfirm(content, title, options) {\n    return handleOpen({\n        type: 'confirm',\n        status: 'question',\n        showFooter: true\n    }, content, title, options);\n}\nfunction openMessage(content, options) {\n    return handleOpen({\n        type: 'message',\n        mask: false,\n        lockView: false,\n        showHeader: false\n    }, content, '', options);\n}\nvar ModalController = {\n    get: getModal,\n    close: closeModal,\n    open: openModal,\n    alert: openAlert,\n    confirm: openConfirm,\n    message: openMessage\n};\nexport var modal = ModalController;\nexport var Modal = Object.assign(VxeModalComponent, {\n    install: function (app) {\n        app.component(VxeModalComponent.name, VxeModalComponent);\n        VXETable.modal = ModalController;\n    }\n});\ndynamicApp.component(VxeModalComponent.name, VxeModalComponent);\nexport default Modal;\n"]},"metadata":{},"sourceType":"module"}