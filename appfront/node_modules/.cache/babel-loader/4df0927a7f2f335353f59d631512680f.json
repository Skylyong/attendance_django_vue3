{"ast":null,"code":"import { createApp } from 'vue';\nimport App from './App.vue';\nimport router from './router';\nimport store from './store';\nimport Antd from 'ant-design-vue';\nimport 'ant-design-vue/dist/antd.css';\nconst app = createApp(App).use(Antd).use(router).use(store);\napp.mount(\"#app\");\nrouter.beforeEach((to, from, next) => {\n  //获取用户登录成功后储存的登录标志\n  let getFlag = localStorage.getItem(\"Flag\"); //   let getid = localStorage.getItem(\"Userid\");\n\n  let userType = localStorage.getItem(\"userType\"); //   console.log('aaaaaaaaaaaaaaaaa',getFlag, getid)\n  //   console.log('to:',to)\n  //   console.log('from:',from)\n\n  if (to.meta.isLogin) {\n    if (getFlag != \"isLogin\") {\n      next({\n        path: '/'\n      });\n    } else {\n      if (userType == to.meta.pathType) {\n        next();\n      } else {\n        next({\n          path: '/'\n        });\n      }\n    }\n  } else {\n    next();\n  } //如果登录标志存在且为isLogin，即用户已登录\n  //   if (getFlag === \"isLogin\"&&getid !== null) {\n  //       //设置vuex登录状态为已登录\n  //       store.state.isLogin = true;\n  //       next();\n  //       //如果已登录，还想想进入登录注册界面，则定向回首页\n  //       if (!to.meta.isLogin) {\n  //           //iViewUi友好提示\n  //           // iView.Message.error('请先退出登录');\n  //           next({\n  //               path: '/'\n  //           })\n  //       }\n  //       //如果登录标志不存在，即未登录\n  //   } else {\n  //       //用户想进入需要登录的页面，则定向回登录界面\n  //       if (to.meta.isLogin) {\n  //           next({\n  //               path: '/',\n  //           })\n  //           //用户进入无需登录的界面，则跳转继续\n  //       } else {\n  //           next()\n  //       }\n  //   }\n\n});\nrouter.afterEach(() => {\n  window.scroll(0, 0);\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/src/main.js"],"names":["createApp","App","router","store","Antd","app","use","mount","beforeEach","to","from","next","getFlag","localStorage","getItem","userType","meta","isLogin","path","pathType","afterEach","window","scroll"],"mappings":"AAAA,SAASA,SAAT,QAA0B,KAA1B;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,OAAO,8BAAP;AAKA,MAAMC,GAAG,GAAGL,SAAS,CAACC,GAAD,CAAT,CAAeK,GAAf,CAAmBF,IAAnB,EAAyBE,GAAzB,CAA6BJ,MAA7B,EAAqCI,GAArC,CAAyCH,KAAzC,CAAZ;AACAE,GAAG,CAACE,KAAJ,CAAU,MAAV;AAGAL,MAAM,CAACM,UAAP,CAAkB,CAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,KAAoB;AAEpC;AACA,MAAIC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAd,CAHoC,CAIpC;;AACA,MAAIC,QAAQ,GAAGF,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf,CALoC,CAMpC;AACA;AACA;;AACA,MAAIL,EAAE,CAACO,IAAH,CAAQC,OAAZ,EAAqB;AACnB,QAAIL,OAAO,IAAI,SAAf,EAA0B;AACxBD,MAAAA,IAAI,CAAC;AAAEO,QAAAA,IAAI,EAAE;AAAR,OAAD,CAAJ;AACD,KAFD,MAEO;AAEL,UAAIH,QAAQ,IAAIN,EAAE,CAACO,IAAH,CAAQG,QAAxB,EAAkC;AAChCR,QAAAA,IAAI;AACL,OAFD,MAEO;AACLA,QAAAA,IAAI,CAAC;AAAEO,UAAAA,IAAI,EAAE;AAAR,SAAD,CAAJ;AACD;AAEF;AACF,GAZD,MAYO;AACLP,IAAAA,IAAI;AACL,GAvBmC,CAyBpC;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAED,CAxDD;AA0DAT,MAAM,CAACkB,SAAP,CAAiB,MAAM;AACrBC,EAAAA,MAAM,CAACC,MAAP,CAAc,CAAd,EAAiB,CAAjB;AACD,CAFD","sourcesContent":["import { createApp } from 'vue'\nimport App from './App.vue'\nimport router from './router'\nimport store from './store'\nimport Antd from 'ant-design-vue'\nimport 'ant-design-vue/dist/antd.css'\n\n\n\n\nconst app = createApp(App).use(Antd).use(router).use(store);\napp.mount(\"#app\");\n\n\nrouter.beforeEach((to, from, next) => {\n\n  //获取用户登录成功后储存的登录标志\n  let getFlag = localStorage.getItem(\"Flag\");\n  //   let getid = localStorage.getItem(\"Userid\");\n  let userType = localStorage.getItem(\"userType\");\n  //   console.log('aaaaaaaaaaaaaaaaa',getFlag, getid)\n  //   console.log('to:',to)\n  //   console.log('from:',from)\n  if (to.meta.isLogin) {\n    if (getFlag != \"isLogin\") {\n      next({ path: '/' })\n    } else {\n\n      if (userType == to.meta.pathType) {\n        next()\n      } else {\n        next({ path: '/' })\n      }\n\n    }\n  } else {\n    next()\n  }\n\n  //如果登录标志存在且为isLogin，即用户已登录\n  //   if (getFlag === \"isLogin\"&&getid !== null) {\n\n  //       //设置vuex登录状态为已登录\n  //       store.state.isLogin = true;\n  //       next();\n\n  //       //如果已登录，还想想进入登录注册界面，则定向回首页\n  //       if (!to.meta.isLogin) {\n  //           //iViewUi友好提示\n  //           // iView.Message.error('请先退出登录');\n  //           next({\n  //               path: '/'\n  //           })\n  //       }\n\n  //       //如果登录标志不存在，即未登录\n  //   } else {\n\n  //       //用户想进入需要登录的页面，则定向回登录界面\n  //       if (to.meta.isLogin) {\n  //           next({\n  //               path: '/',\n  //           })\n  //           //用户进入无需登录的界面，则跳转继续\n  //       } else {\n  //           next()\n  //       }\n\n  //   }\n\n});\n\nrouter.afterEach(() => {\n  window.scroll(0, 0);\n});"]},"metadata":{},"sourceType":"module"}