{"ast":null,"code":"import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { ref, watch, computed, nextTick, defineComponent } from \"vue\";\nimport { cellSharedProps } from \"../cell/Cell\";\nimport { pick, extend, truthProp, numericProp, createNamespace } from \"../utils\";\nimport { COLLAPSE_KEY } from \"../collapse/Collapse\";\nimport { raf, doubleRaf, useParent } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose\";\nimport { useLazyRender } from \"../composables/use-lazy-render\";\nimport { Cell } from \"../cell\";\nconst [name, bem] = createNamespace(\"collapse-item\");\nconst CELL_SLOTS = [\"icon\", \"title\", \"value\", \"label\", \"right-icon\"];\nconst collapseItemProps = extend({}, cellSharedProps, {\n  name: numericProp,\n  isLink: truthProp,\n  disabled: Boolean,\n  readonly: Boolean,\n  lazyRender: truthProp\n});\nvar stdin_default = defineComponent({\n  name,\n  props: collapseItemProps,\n\n  setup(props, {\n    slots\n  }) {\n    const wrapperRef = ref();\n    const contentRef = ref();\n    const {\n      parent,\n      index\n    } = useParent(COLLAPSE_KEY);\n\n    if (!parent) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(\"[Vant] <CollapseItem> must be a child component of <Collapse>.\");\n      }\n\n      return;\n    }\n\n    const name2 = computed(() => {\n      var _a;\n\n      return (_a = props.name) != null ? _a : index.value;\n    });\n    const expanded = computed(() => parent.isExpanded(name2.value));\n    const show = ref(expanded.value);\n    const lazyRender = useLazyRender(() => show.value || !props.lazyRender);\n\n    const onTransitionEnd = () => {\n      if (!expanded.value) {\n        show.value = false;\n      } else if (wrapperRef.value) {\n        wrapperRef.value.style.height = \"\";\n      }\n    };\n\n    watch(expanded, (value, oldValue) => {\n      if (oldValue === null) {\n        return;\n      }\n\n      if (value) {\n        show.value = true;\n      }\n\n      const tick = value ? nextTick : raf;\n      tick(() => {\n        if (!contentRef.value || !wrapperRef.value) {\n          return;\n        }\n\n        const {\n          offsetHeight\n        } = contentRef.value;\n\n        if (offsetHeight) {\n          const contentHeight = `${offsetHeight}px`;\n          wrapperRef.value.style.height = value ? \"0\" : contentHeight;\n          doubleRaf(() => {\n            if (wrapperRef.value) {\n              wrapperRef.value.style.height = value ? contentHeight : \"0\";\n            }\n          });\n        } else {\n          onTransitionEnd();\n        }\n      });\n    });\n\n    const toggle = (newValue = !expanded.value) => {\n      parent.toggle(name2.value, newValue);\n    };\n\n    const onClickTitle = () => {\n      if (!props.disabled && !props.readonly) {\n        toggle();\n      }\n    };\n\n    const renderTitle = () => {\n      const {\n        border,\n        disabled,\n        readonly\n      } = props;\n      const attrs = pick(props, Object.keys(cellSharedProps));\n\n      if (readonly) {\n        attrs.isLink = false;\n      }\n\n      if (disabled || readonly) {\n        attrs.clickable = false;\n      }\n\n      return _createVNode(Cell, _mergeProps({\n        \"role\": \"button\",\n        \"class\": bem(\"title\", {\n          disabled,\n          expanded: expanded.value,\n          borderless: !border\n        }),\n        \"aria-expanded\": String(expanded.value),\n        \"onClick\": onClickTitle\n      }, attrs), pick(slots, CELL_SLOTS));\n    };\n\n    const renderContent = lazyRender(() => {\n      var _a;\n\n      return _withDirectives(_createVNode(\"div\", {\n        \"ref\": wrapperRef,\n        \"class\": bem(\"wrapper\"),\n        \"onTransitionend\": onTransitionEnd\n      }, [_createVNode(\"div\", {\n        \"ref\": contentRef,\n        \"class\": bem(\"content\")\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)])]), [[_vShow, show.value]]);\n    });\n    useExpose({\n      toggle\n    });\n    return () => _createVNode(\"div\", {\n      \"class\": [bem({\n        border: index.value && props.border\n      })]\n    }, [renderTitle(), renderContent()]);\n  }\n\n});\nexport { stdin_default as default };","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vant/es/collapse-item/CollapseItem.js"],"names":["withDirectives","_withDirectives","vShow","_vShow","createVNode","_createVNode","mergeProps","_mergeProps","ref","watch","computed","nextTick","defineComponent","cellSharedProps","pick","extend","truthProp","numericProp","createNamespace","COLLAPSE_KEY","raf","doubleRaf","useParent","useExpose","useLazyRender","Cell","name","bem","CELL_SLOTS","collapseItemProps","isLink","disabled","Boolean","readonly","lazyRender","stdin_default","props","setup","slots","wrapperRef","contentRef","parent","index","process","env","NODE_ENV","console","error","name2","_a","value","expanded","isExpanded","show","onTransitionEnd","style","height","oldValue","tick","offsetHeight","contentHeight","toggle","newValue","onClickTitle","renderTitle","border","attrs","Object","keys","clickable","borderless","String","renderContent","default","call"],"mappings":"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","sourcesContent":["import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode, mergeProps as _mergeProps } from \"vue\";\nimport { ref, watch, computed, nextTick, defineComponent } from \"vue\";\nimport { cellSharedProps } from \"../cell/Cell\";\nimport { pick, extend, truthProp, numericProp, createNamespace } from \"../utils\";\nimport { COLLAPSE_KEY } from \"../collapse/Collapse\";\nimport { raf, doubleRaf, useParent } from \"@vant/use\";\nimport { useExpose } from \"../composables/use-expose\";\nimport { useLazyRender } from \"../composables/use-lazy-render\";\nimport { Cell } from \"../cell\";\nconst [name, bem] = createNamespace(\"collapse-item\");\nconst CELL_SLOTS = [\"icon\", \"title\", \"value\", \"label\", \"right-icon\"];\nconst collapseItemProps = extend({}, cellSharedProps, {\n  name: numericProp,\n  isLink: truthProp,\n  disabled: Boolean,\n  readonly: Boolean,\n  lazyRender: truthProp\n});\nvar stdin_default = defineComponent({\n  name,\n  props: collapseItemProps,\n  setup(props, {\n    slots\n  }) {\n    const wrapperRef = ref();\n    const contentRef = ref();\n    const {\n      parent,\n      index\n    } = useParent(COLLAPSE_KEY);\n    if (!parent) {\n      if (process.env.NODE_ENV !== \"production\") {\n        console.error(\"[Vant] <CollapseItem> must be a child component of <Collapse>.\");\n      }\n      return;\n    }\n    const name2 = computed(() => {\n      var _a;\n      return (_a = props.name) != null ? _a : index.value;\n    });\n    const expanded = computed(() => parent.isExpanded(name2.value));\n    const show = ref(expanded.value);\n    const lazyRender = useLazyRender(() => show.value || !props.lazyRender);\n    const onTransitionEnd = () => {\n      if (!expanded.value) {\n        show.value = false;\n      } else if (wrapperRef.value) {\n        wrapperRef.value.style.height = \"\";\n      }\n    };\n    watch(expanded, (value, oldValue) => {\n      if (oldValue === null) {\n        return;\n      }\n      if (value) {\n        show.value = true;\n      }\n      const tick = value ? nextTick : raf;\n      tick(() => {\n        if (!contentRef.value || !wrapperRef.value) {\n          return;\n        }\n        const {\n          offsetHeight\n        } = contentRef.value;\n        if (offsetHeight) {\n          const contentHeight = `${offsetHeight}px`;\n          wrapperRef.value.style.height = value ? \"0\" : contentHeight;\n          doubleRaf(() => {\n            if (wrapperRef.value) {\n              wrapperRef.value.style.height = value ? contentHeight : \"0\";\n            }\n          });\n        } else {\n          onTransitionEnd();\n        }\n      });\n    });\n    const toggle = (newValue = !expanded.value) => {\n      parent.toggle(name2.value, newValue);\n    };\n    const onClickTitle = () => {\n      if (!props.disabled && !props.readonly) {\n        toggle();\n      }\n    };\n    const renderTitle = () => {\n      const {\n        border,\n        disabled,\n        readonly\n      } = props;\n      const attrs = pick(props, Object.keys(cellSharedProps));\n      if (readonly) {\n        attrs.isLink = false;\n      }\n      if (disabled || readonly) {\n        attrs.clickable = false;\n      }\n      return _createVNode(Cell, _mergeProps({\n        \"role\": \"button\",\n        \"class\": bem(\"title\", {\n          disabled,\n          expanded: expanded.value,\n          borderless: !border\n        }),\n        \"aria-expanded\": String(expanded.value),\n        \"onClick\": onClickTitle\n      }, attrs), pick(slots, CELL_SLOTS));\n    };\n    const renderContent = lazyRender(() => {\n      var _a;\n      return _withDirectives(_createVNode(\"div\", {\n        \"ref\": wrapperRef,\n        \"class\": bem(\"wrapper\"),\n        \"onTransitionend\": onTransitionEnd\n      }, [_createVNode(\"div\", {\n        \"ref\": contentRef,\n        \"class\": bem(\"content\")\n      }, [(_a = slots.default) == null ? void 0 : _a.call(slots)])]), [[_vShow, show.value]]);\n    });\n    useExpose({\n      toggle\n    });\n    return () => _createVNode(\"div\", {\n      \"class\": [bem({\n        border: index.value && props.border\n      })]\n    }, [renderTitle(), renderContent()]);\n  }\n});\nexport {\n  stdin_default as default\n};\n"]},"metadata":{},"sourceType":"module"}