{"ast":null,"code":"import Vue from 'vue';\nimport Axios from 'axios';\nconst axiosInstance = Axios.create({\n  withCredentials: tr\n}); // 通过拦截器处理csrf问题，这里的正则和匹配下标可能需要根据实际情况小改动\n\naxiosInstance.interceptors.request.use(config => {\n  config.headers['X-Requested-With'] = 'XMLHttpRequest';\n  const regex = /.*csrftoken=([^;.]*).*$/;\n  config.headers['X-CSRFToken'] = cookie.parse(document.cookie).csrftoken; // document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1]\n\n  return config;\n});\naxiosInstance.interceptors.response.use(response => {\n  return response;\n}, error => {\n  return Promise.reject(error);\n});\nVue.prototype.axios = axiosInstance;\nexport default axiosInstance;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/src/api/index.js"],"names":["Vue","Axios","axiosInstance","create","withCredentials","tr","interceptors","request","use","config","headers","regex","cookie","parse","document","csrftoken","response","error","Promise","reject","prototype","axios"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,MAAMC,aAAa,GAAGD,KAAK,CAACE,MAAN,CAAa;AAC/BC,EAAAA,eAAe,EAAEC;AADc,CAAb,CAAtB,C,CAIA;;AACAH,aAAa,CAACI,YAAd,CAA2BC,OAA3B,CAAmCC,GAAnC,CAAwCC,MAAD,IAAY;AAC/CA,EAAAA,MAAM,CAACC,OAAP,CAAe,kBAAf,IAAqC,gBAArC;AACA,QAAMC,KAAK,GAAG,yBAAd;AACAF,EAAAA,MAAM,CAACC,OAAP,CAAe,aAAf,IAAgCE,MAAM,CAACC,KAAP,CAAaC,QAAQ,CAACF,MAAtB,EAA8BG,SAA9D,CAH+C,CAGwB;;AACvE,SAAON,MAAP;AACH,CALD;AAOAP,aAAa,CAACI,YAAd,CAA2BU,QAA3B,CAAoCR,GAApC,CACIQ,QAAQ,IAAI;AACR,SAAOA,QAAP;AACH,CAHL,EAIIC,KAAK,IAAI;AACL,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CANL;AASAjB,GAAG,CAACoB,SAAJ,CAAcC,KAAd,GAAsBnB,aAAtB;AAEA,eAAeA,aAAf","sourcesContent":["import Vue from 'vue'\nimport Axios from 'axios'\n\nconst axiosInstance = Axios.create({\n    withCredentials: tr\n})\n\n// 通过拦截器处理csrf问题，这里的正则和匹配下标可能需要根据实际情况小改动\naxiosInstance.interceptors.request.use((config) => {\n    config.headers['X-Requested-With'] = 'XMLHttpRequest'\n    const regex = /.*csrftoken=([^;.]*).*$/\n    config.headers['X-CSRFToken'] = cookie.parse(document.cookie).csrftoken// document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1]\n    return config\n})\n\naxiosInstance.interceptors.response.use(\n    response => {\n        return response\n    },\n    error => {\n        return Promise.reject(error)\n    }\n)\n\nVue.prototype.axios = axiosInstance\n\nexport default axiosInstance"]},"metadata":{},"sourceType":"module"}