{"ast":null,"code":"import { workerApply } from \"../../api/api.js\";\nimport moment from \"moment\";\nimport { defineComponent, reactive, ref } from \"vue\";\nimport { message } from \"ant-design-vue\";\nexport default defineComponent({\n  setup() {\n    let submit_message = ref(\"\");\n    let applyType = ref();\n    let holidayType = ref();\n    let myDateString = ref();\n    let myData = ref();\n    applyType = 0;\n    holidayType = 0;\n    const layout = {\n      labelCol: {\n        span: 8\n      },\n      wrapperCol: {\n        span: 9\n      }\n    };\n    const validateMessages = {\n      required: \"${label} is required!\",\n      types: {\n        email: \"${label} is not a valid email!\",\n        number: \"${label} is not a valid number!\"\n      },\n      number: {\n        range: \"${label} must be between ${min} and ${max}\"\n      }\n    };\n\n    const onRangeChange = (value, dateString) => {\n      console.log(\"Selected Time: \", value);\n      console.log(\"Formatted Selected Time: \", dateString);\n      myDateString = dateString;\n      myData = value;\n    };\n\n    const onRangeOk = value => {\n      var hour = moment(myData[1]).diff(moment(myData[0]), \"hour\");\n      var day = moment(myData[1]).diff(moment(myData[0]), \"day\");\n      hour = hour - day * 24;\n      console.log(\"hour\", hour, \"day\", day);\n      formState.user.applyTime = day.toString() + \"天\" + hour.toString() + \"时\";\n      console.log(\"onOk: \", value);\n    };\n\n    const options1 = ref([{\n      value: \"0\",\n      label: \"公休\"\n    }, {\n      value: \"1\",\n      label: \"值班加班\"\n    }]);\n    const options2 = ref([{\n      value: \"0\",\n      label: \"公休请假\"\n    }, {\n      value: \"1\",\n      label: \"加班换积休\"\n    }, {\n      value: \"2\",\n      label: \"加班换公休\"\n    }]);\n\n    const focus = () => {// console.log('2222focus');\n    };\n\n    const handleChange = value => {// console.log(`1111selected ${value}`);\n    };\n\n    const handleApplyTypeChange = value => {\n      applyType = value;\n    };\n\n    const handleHolidayTypeChange = value => {\n      holidayType = value;\n    };\n\n    const formState = reactive({\n      user: {\n        applyTime: \"\",\n        applyReason: \"\"\n      }\n    });\n\n    const onFinish = () => {\n      console.log(\"Success:\", applyType, holidayType, formState.user.applyTime, formState.user.applyReason, myDateString);\n      let userid = localStorage.getItem(\"Userid\");\n      workerApply(userid, applyType, holidayType, formState.user.applyTime, formState.user.applyReason, myDateString).then(response => {\n        if (response[\"code\"] == 1) {\n          message.success(\"提交成功\");\n        } else {\n          message.error(\"提交失败\");\n        }\n      }, response => {\n        message.error(\"提交提交失败，服务器访问错误！\");\n      });\n    };\n\n    return {\n      holidayType,\n      applyType,\n      handleApplyTypeChange,\n      handleHolidayTypeChange,\n      formState,\n      onFinish,\n      layout,\n      validateMessages,\n      onRangeChange,\n      onRangeOk,\n      myDateString,\n      myData,\n      focus,\n      handleChange,\n      value1: ref(\"公休\"),\n      options1,\n      value2: ref(\"公休请假\"),\n      options2,\n      submit_message\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["workerApply","moment","defineComponent","reactive","ref","message","setup","submit_message","applyType","holidayType","myDateString","myData","layout","labelCol","span","wrapperCol","validateMessages","required","types","email","number","range","onRangeChange","value","dateString","console","log","onRangeOk","hour","diff","day","formState","user","applyTime","toString","options1","label","options2","focus","handleChange","handleApplyTypeChange","handleHolidayTypeChange","applyReason","onFinish","userid","localStorage","getItem","then","response","success","error","value1","value2"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/components/worker/workerApply.vue"],"sourcesContent":["<template>\n  <br />\n  <br />\n  <h1 style=\"text-align: center\">提交申请</h1>\n  <br />\n  <br />\n  <a-form\n    :model=\"formState\"\n    v-bind=\"layout\"\n    name=\"nest-messages\"\n    :validate-messages=\"validateMessages\"\n    @finish=\"onFinish\"\n    style=\"text-align: center\"\n  >\n    <a-form-item\n      :name=\"['user', 'email']\"\n      label=\"申请类型\"\n      :rules=\"[{ required: false }]\"\n    >\n      <a-select\n        ref=\"select\"\n        v-model:value=\"value1\"\n        style=\"width: 120px\"\n        :options=\"options1\"\n        @focus=\"focus\"\n        @change=\"handleApplyTypeChange\"\n      ></a-select>\n    </a-form-item>\n\n    <a-form-item\n      :name=\"['user', 'email']\"\n      label=\"假期种类\"\n      :rules=\"[{ required: false }]\"\n    >\n      <a-select\n        ref=\"select\"\n        v-model:value=\"value2\"\n        style=\"width: 120px\"\n        :options=\"options2\"\n        @focus=\"focus\"\n        @change=\"handleHolidayTypeChange\"\n      ></a-select>\n    </a-form-item>\n\n    <a-form-item\n      :name=\"['user', 'name']\"\n      label=\"申请时间\"\n      :rules=\"[{ required: false }]\"\n    >\n      <a-space direction=\"vertical\" :size=\"8\">\n        <a-range-picker\n          style=\"width: 225px\"\n          :show-time=\"{ format: 'HH' }\"\n          format=\"YYYY-MM-DD HH\"\n          :placeholder=\"['开始时间', '结束时间']\"\n          @change=\"onRangeChange\"\n          @ok=\"onRangeOk\"\n        />\n      </a-space>\n    </a-form-item>\n\n    <a-form-item :name=\"['user', 'email']\" label=\"申请时长\" :rules=\"[{}]\">\n      <p class=\"ant-form-text\">{{ formState.user.applyTime }}</p>\n    </a-form-item>\n\n    <a-form-item\n      :name=\"['user', 'email']\"\n      label=\"申请原因\"\n      :rules=\"[{ required: false }]\"\n    >\n      <a-input\n        style=\"height: 50px; width: 220px\"\n        v-model:value=\"formState.user.applyReason\"\n      />\n    </a-form-item>\n\n    <a-form-item :wrapper-col=\"{ ...layout.wrapperCol, offset: 8 }\">\n      <br />\n      <a-button type=\"primary\" html-type=\"Submit\">提交</a-button>\n    </a-form-item>\n  </a-form>\n</template>\n<script>\nimport { workerApply } from \"../../api/api.js\";\nimport moment from \"moment\";\nimport { defineComponent, reactive, ref } from \"vue\";\nimport { message } from \"ant-design-vue\";\n\nexport default defineComponent({\n  setup() {\n    let submit_message = ref(\"\");\n    let applyType = ref();\n    let holidayType = ref();\n    let myDateString = ref();\n    let myData = ref();\n    applyType = 0;\n    holidayType = 0;\n    const layout = {\n      labelCol: {\n        span: 8,\n      },\n      wrapperCol: {\n        span: 9,\n      },\n    };\n    const validateMessages = {\n      required: \"${label} is required!\",\n      types: {\n        email: \"${label} is not a valid email!\",\n        number: \"${label} is not a valid number!\",\n      },\n      number: {\n        range: \"${label} must be between ${min} and ${max}\",\n      },\n    };\n\n    const onRangeChange = (value, dateString) => {\n      console.log(\"Selected Time: \", value);\n      console.log(\"Formatted Selected Time: \", dateString);\n      myDateString = dateString;\n      myData = value;\n    };\n\n    const onRangeOk = (value) => {\n      var hour = moment(myData[1]).diff(moment(myData[0]), \"hour\");\n      var day = moment(myData[1]).diff(moment(myData[0]), \"day\");\n      hour = hour - day * 24;\n      console.log(\"hour\", hour, \"day\", day);\n\n      formState.user.applyTime = day.toString() + \"天\" + hour.toString() + \"时\";\n      console.log(\"onOk: \", value);\n    };\n\n    const options1 = ref([\n      {\n        value: \"0\",\n        label: \"公休\",\n      },\n      {\n        value: \"1\",\n        label: \"值班加班\",\n      },\n    ]);\n\n    const options2 = ref([\n      {\n        value: \"0\",\n        label: \"公休请假\",\n      },\n      {\n        value: \"1\",\n        label: \"加班换积休\",\n      },\n      {\n        value: \"2\",\n        label: \"加班换公休\",\n      },\n    ]);\n\n    const focus = () => {\n      // console.log('2222focus');\n    };\n\n    const handleChange = (value) => {\n      // console.log(`1111selected ${value}`);\n    };\n    const handleApplyTypeChange = (value) => {\n      applyType = value;\n    };\n    const handleHolidayTypeChange = (value) => {\n      holidayType = value;\n    };\n\n    const formState = reactive({\n      user: {\n        applyTime: \"\",\n        applyReason: \"\",\n      },\n    });\n\n    const onFinish = () => {\n      console.log(\n        \"Success:\",\n        applyType,\n        holidayType,\n        formState.user.applyTime,\n        formState.user.applyReason,\n        myDateString\n      );\n      let userid = localStorage.getItem(\"Userid\");\n\n      workerApply(\n        userid,\n        applyType,\n        holidayType,\n        formState.user.applyTime,\n        formState.user.applyReason,\n        myDateString\n      ).then(\n        (response) => {\n          if (response[\"code\"] == 1) {\n            message.success(\"提交成功\");\n          } else {\n            message.error(\"提交失败\");\n          }\n        },\n        (response) => {\n          message.error(\"提交提交失败，服务器访问错误！\");\n        }\n      );\n    };\n\n    return {\n      holidayType,\n      applyType,\n      handleApplyTypeChange,\n      handleHolidayTypeChange,\n      formState,\n      onFinish,\n      layout,\n      validateMessages,\n      onRangeChange,\n      onRangeOk,\n      myDateString,\n      myData,\n      focus,\n      handleChange,\n      value1: ref(\"公休\"),\n      options1,\n      value2: ref(\"公休请假\"),\n      options2,\n      submit_message,\n    };\n  },\n});\n</script>\n"]},"metadata":{},"sourceType":"module"}