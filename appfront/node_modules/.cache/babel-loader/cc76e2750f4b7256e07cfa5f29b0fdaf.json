{"ast":null,"code":"import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createTextVNode(\"Add\");\n\nconst _hoisted_2 = {\n  key: 0,\n  class: \"editable-cell\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"editable-cell-input-wrapper\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"editable-cell-text-wrapper\"\n};\n\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"a\", null, \"Delete\", -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_a_button = _resolveComponent(\"a-button\");\n\n  const _component_a_input = _resolveComponent(\"a-input\");\n\n  const _component_check_outlined = _resolveComponent(\"check-outlined\");\n\n  const _component_edit_outlined = _resolveComponent(\"edit-outlined\");\n\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\");\n\n  const _component_a_table = _resolveComponent(\"a-table\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_a_button, {\n    class: \"editable-add-btn\",\n    style: {\n      \"margin-bottom\": \"8px\"\n    },\n    onClick: _ctx.handleAdd\n  }, {\n    default: _withCtx(() => [_hoisted_1]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"onClick\"]), _createVNode(_component_a_table, {\n    bordered: \"\",\n    columns: _ctx.columns,\n    \"data-source\": _ctx.dataSource,\n    onChange: _ctx.handleTableChange\n  }, {\n    bodyCell: _withCtx(({\n      column,\n      text,\n      record\n    }) => [column.dataIndex === 'name' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_ctx.editableData[record.key] ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_a_input, {\n      value: _ctx.editableData[record.key].name,\n      \"onUpdate:value\": $event => _ctx.editableData[record.key].name = $event,\n      onPressEnter: $event => _ctx.save(record.key)\n    }, null, 8\n    /* PROPS */\n    , [\"value\", \"onUpdate:value\", \"onPressEnter\"]), _createVNode(_component_check_outlined, {\n      class: \"editable-cell-icon-check\",\n      onClick: $event => _ctx.save(record.key)\n    }, null, 8\n    /* PROPS */\n    , [\"onClick\"])])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createTextVNode(_toDisplayString(text || ' ') + \" \", 1\n    /* TEXT */\n    ), _createVNode(_component_edit_outlined, {\n      class: \"editable-cell-icon\",\n      onClick: $event => _ctx.edit(record.key)\n    }, null, 8\n    /* PROPS */\n    , [\"onClick\"])]))])) : column.dataIndex === 'operation' ? (_openBlock(), _createElementBlock(_Fragment, {\n      key: 1\n    }, [_ctx.dataSource.length ? (_openBlock(), _createBlock(_component_a_popconfirm, {\n      key: 0,\n      title: \"Sure to delete?\",\n      onConfirm: $event => _ctx.onDelete(record.key)\n    }, {\n      default: _withCtx(() => [_hoisted_5]),\n      _: 2\n      /* DYNAMIC */\n\n    }, 1032\n    /* PROPS, DYNAMIC_SLOTS */\n    , [\"onConfirm\"])) : _createCommentVNode(\"v-if\", true)], 2112\n    /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */\n    )) : _createCommentVNode(\"v-if\", true)]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"columns\", \"data-source\", \"onChange\"])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;iDACiF;;;;AAsBpEA,OAAK,EAAC;;;;AAC4BA,OAAK,EAAC;;;;AAI/BA,OAAK,EAAC;;;gCAYlBC,oBAAa,GAAb,EAAa,IAAb,EAAG,QAAH,EAAS;AAAA;AAAT;;;;;;;;;;;;;;;6DAvCVC,aAA+FC,mBAA/F,EAA+F;AAArFH,SAAK,EAAC,kBAA+E;AAA5DI,SAA0B,EAA1B;AAAA;AAAA,KAA4D;AAAhCC,WAAK,EAAEC;AAAyB,GAA/F;sBAAiF,MAAG;;;;GAApF;;AAAA,kBACEJ,aAoDUK,kBApDV,EAoDU;AApDDC,YAAQ,EAAR,EAoDC;AAnDPC,WAAO,EAAEH,YAmDF;AAlDP,mBAAaA,eAkDN;AAjDPI,YAAM,EAAEJ;AAiDD,GApDV;AAmBUK,YAAQ,WACd,CAWW;AAZOC,YAYP;AAZeC,UAYf;AAZqBC;AAYrB,KAXX,KADsC,CACtBF,MAAM,CAACG,SAAP,KAAgB,wBAC9BC,oBASM,KATN,cASM,CAROV,kBAAaQ,MAAM,CAACG,GAApB,mBAAXD,oBAGM,KAHN,cAGM,CAFJd,aAAwFgB,kBAAxF,EAAwF;AAAvEC,WAAK,EAAEb,kBAAaQ,MAAM,CAACG,GAApB,EAAyBG,IAAuC;kCAAhEd,kBAAaQ,MAAM,CAACG,GAApB,EAAyBG,OAAIC,MAAmC;AAAhCC,kBAAU,YAAEhB,UAAKQ,MAAM,CAACG,GAAZ;AAAoB,KAAxF;;AAAA,kDAEI,EADJf,aAA6EqB,yBAA7E,EAA6E;AAA7DvB,WAAK,EAAC,0BAAuD;AAA3BK,aAAK,YAAEC,UAAKQ,MAAM,CAACG,GAAZ;AAAoB,KAA7E;;AAAA,kBACI,CAHN,oBAIAD,oBAGM,KAHN,cAGM,mCAFDH,IAAI,WAAU,KACjB;AAAA;KACI,EADJX,aAAsEsB,wBAAtE,EAAsE;AAAvDxB,WAAK,EAAC,oBAAiD;AAA3BK,aAAK,YAAEC,UAAKQ,MAAM,CAACG,GAAZ;AAAoB,KAAtE;;AAAA,kBACI,CAHN,EAII,CATN,KAWmBL,MAAM,CAACG,SAAP,KAAgB,6BAArCC,oBAQWS,SARX,EAQW;AAAAR;AAAA,KARX,EAQW,CANDX,gBAAWoB,wBADnBC,aAMeC,uBANf,EAMe;YAAA;AAJbC,WAAK,EAAC,iBAIO;AAHZC,eAAO,YAAExB,cAASQ,MAAM,CAACG,GAAhB;AAGG,KANf;wBAKE,MAAa,CAAbc,UAAa;;;;KALf;;AAAA,yDAOS,CARX;;AAAA,0CAbsC,CAAxB;;;;GAnBlB;;AAAA","names":["class","_createElementVNode","_createVNode","_component_a_button","style","onClick","_ctx","_component_a_table","bordered","columns","onChange","bodyCell","column","text","record","dataIndex","_createElementBlock","key","_component_a_input","value","name","$event","onPressEnter","_component_check_outlined","_component_edit_outlined","_Fragment","length","_createBlock","_component_a_popconfirm","title","onConfirm","_hoisted_5"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/components/worker/workerApplyHistory.vue"],"sourcesContent":["<template>\n<a-button class=\"editable-add-btn\" style=\"margin-bottom: 8px\" @click=\"handleAdd\">Add</a-button>\n  <a-table bordered \n    :columns=\"columns\"\n    :data-source=\"dataSource\"\n    @change=\"handleTableChange\"\n  >\n  <!-- <template #bodyCell=\"{ column}\"> -->\n    <!-- <template #bodyCell=\"{  }\"> -->\n      <!-- <template v-if=\"column.dataIndex === 'operation'\">{{ text.first }} {{ text.last }}</template> -->\n    <!-- </template> -->\n\n<!-- <template v-else-if=\"column.dataIndex === 'operation'\">\n        <a-popconfirm\n          v-if=\"dataSource.length\"\n          title=\"确定删除吗?\"\n          @confirm=\"onDelete(record.key)\"\n        >\n          <a>删除</a>\n        </a-popconfirm>\n      </template> -->\n <template #bodyCell=\"{ column, text, record }\">\n      <template v-if=\"column.dataIndex === 'name'\">\n        <div class=\"editable-cell\">\n          <div v-if=\"editableData[record.key]\" class=\"editable-cell-input-wrapper\">\n            <a-input v-model:value=\"editableData[record.key].name\" @pressEnter=\"save(record.key)\" />\n            <check-outlined class=\"editable-cell-icon-check\" @click=\"save(record.key)\" />\n          </div>\n          <div v-else class=\"editable-cell-text-wrapper\">\n            {{ text || ' ' }}\n            <edit-outlined class=\"editable-cell-icon\" @click=\"edit(record.key)\" />\n          </div>\n        </div>\n      </template>\n      <template v-else-if=\"column.dataIndex === 'operation'\">\n        <a-popconfirm\n          v-if=\"dataSource.length\"\n          title=\"Sure to delete?\"\n          @confirm=\"onDelete(record.key)\"\n        >\n          <a>Delete</a>\n        </a-popconfirm>\n      </template>\n    </template>\n\n\n\n\n\n\n\n\n\n\n  </a-table>\n</template>\n\n<script>\n\n\nimport { usePagination } from 'vue-request';\nimport{getworkerApplyHistory} from '../../api/api.js'\nimport { computed, defineComponent,ref ,reactive} from 'vue';\nimport { cloneDeep } from 'lodash-es';\nimport axios from 'axios';\nimport { CheckOutlined, EditOutlined } from '@ant-design/icons-vue';\nconst columns = [\n  {\n  title: '序号',\n  dataIndex: 'id',\n  width: '8%',\n  sorter: (a, b) => a.id - b.id,\n} ,\n  {\n  title: '申请时间',\n  dataIndex: 'applyTime',\n  width: '8%',\n  sorter: (a, b) => a.id - b.id,\n} ,\n\n{\n  title: '开始时间',\n  dataIndex: 'applyStartTime',\n  sorter: true,\n  width: '8%',\n  sorter: (a, b) => a.applyStartTime - b.applyStartTime,\n} ,\n{\n  title: '结束时间',\n  dataIndex: 'applyEndTime',\n  sorter: true,\n  width: '8%',\n  sorter: (a, b) => a.applyEndTime - b.applyEndTime,\n} \n,\n{\n  title: '申请时长',\n  dataIndex: 'applyTimeLast',\n  sorter: true,\n  width: '8%',\n  sorter: (a, b) => a.timeLast - b.timeLast,\n}\n,\n{\n  title: '休假状态',\n  dataIndex: 'applyType',\n  filters: [{\n    text: '公休',\n    value: '公休',\n  }, {\n    text: '值班加班',\n    value: '值班加班',\n  }],\n  onFilter: (value, record) => record.applyType.indexOf(value) === 0,\n  sorter: (a, b) => a.applyType.length - b.applyType.length,\n  width: '12%',\n},\n{\n  title: '假期种类',\n  dataIndex: 'holidayType',\n  filters: [{\n    text: '公休请假',\n    value: '公休请假',\n  }, {\n    text: '加班换积休',\n    value: '加班换积休',\n  },\n  {\n    text: '值班换积休',\n    value: '值班换积休',\n  }\n  ],\n  onFilter: (value, record) => record.holidayType.indexOf(value) === 0,\n  sorter: (a, b) => a.holidayType.length - b.holidayType.length,\n  width: '12%',\n}\n,\n{\n  title: '申请原因',\n  dataIndex: 'applyReason',\n  width: '20%',\n  sorter: (a, b) => a.applyReason.length - b.applyReason.length,\n},\n{\n  title: '审批状态',\n  dataIndex: 'approveState',\n  sorter: (a, b) => a.approveState.length - b.approveState.length,\n  onFilter: (value, record) => record.approveState.indexOf(value) === 0,\n  width: '8%',\n    filters: [{\n    text: '通过',\n    value: '通过',\n  }, {\n    text: '不通过',\n    value: '不通过',\n  },{\n    text: '未审批',\n    value: '未审批',\n  },\n  \n  ],\n}\n,\n{\n  title: '批注',\n  dataIndex: '',\n  sorter: true,\n  width: '10%',\n},\n{\n      title: '操作',\n      dataIndex: 'operation',\n    }\n];\n\n\nexport default defineComponent({\n  \n  setup() {\n  //  const onDelete = key => {\n  //     dataSource.value = dataSource.value.filter(item => item.key !== key);\n  //   };\n\n    const handleTableChange = (pag, filters, sorter) => {\n      run({\n        results: pag.pageSize,\n        page: pag?.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order,\n        ...filters,\n      });\n    };\n       const editableData = reactive({});\n        const edit = key => {\n      editableData[key] = cloneDeep(dataSource.value.filter(item => key === item.key)[0]);\n    };\n\n    let dataSource = ref()\n\n    getworkerApplyHistory(2).then (\n       response =>{\n         if (response['code'] == 1){\n        //    data.value = \n        dataSource.value = response['data']\n        \n         }\n       \n       }\n       \n       )\n const save = key => {\n      Object.assign(dataSource.value.filter(item => key === item.key)[0], editableData[key]);\n      delete editableData[key];\n    };\n  const onDelete = key => {\n      dataSource.value = dataSource.value.filter(item => item.key !== key);\n    };\n\n    return {\n      dataSource,\n      editableData,\n      save,\n      onDelete,\n      // pagination,\n      // loading,\n      columns,\n      handleTableChange,\n    };\n  },\n\n});\n</script>\n\n\n<style lang=\"less\">\n.editable-cell {\n  position: relative;\n  .editable-cell-input-wrapper,\n  .editable-cell-text-wrapper {\n    padding-right: 24px;\n  }\n\n  .editable-cell-text-wrapper {\n    padding: 5px 24px 5px 5px;\n  }\n\n  .editable-cell-icon,\n  .editable-cell-icon-check {\n    position: absolute;\n    right: 0;\n    width: 20px;\n    cursor: pointer;\n  }\n\n  .editable-cell-icon {\n    margin-top: 4px;\n    display: none;\n  }\n\n  .editable-cell-icon-check {\n    line-height: 28px;\n  }\n\n  .editable-cell-icon:hover,\n  .editable-cell-icon-check:hover {\n    color: #108ee9;\n  }\n\n  .editable-add-btn {\n    margin-bottom: 8px;\n  }\n}\n.editable-cell:hover .editable-cell-icon {\n  display: inline-block;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}