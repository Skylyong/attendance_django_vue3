{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __spreadArray = this && this.__spreadArray || function (to, from) {\n  for (var i = 0, il = from.length, j = to.length; i < il; i++, j++) to[j] = from[i];\n\n  return to;\n};\n\nimport { defineComponent, h, ref, computed, provide, getCurrentInstance, resolveComponent, reactive, onUnmounted, watch, nextTick, onMounted } from 'vue';\nimport XEUtils from 'xe-utils';\nimport { getLastZIndex, nextZIndex, isEnableConf } from '../../tools/utils';\nimport { getOffsetHeight, getPaddingTopBottomSize, getDomNode } from '../../tools/dom';\nimport { errLog } from '../../tools/log';\nimport GlobalConfig from '../../v-x-e-table/src/conf';\nimport { VXETable } from '../../v-x-e-table';\nimport tableComponentProps from '../../table/src/props';\nimport tableComponentEmits from '../../table/src/emits';\nimport { useSize } from '../../hooks/size';\nimport { GlobalEvent, hasEventKey, EVENT_KEYS } from '../../tools/event';\nvar tableComponentPropKeys = Object.keys(tableComponentProps);\nvar tableComponentMethodKeys = ['clearAll', 'syncData', 'updateData', 'loadData', 'reloadData', 'reloadRow', 'loadColumn', 'reloadColumn', 'getRowNode', 'getColumnNode', 'getRowIndex', 'getVTRowIndex', 'getVMRowIndex', 'getColumnIndex', 'getVTColumnIndex', 'getVMColumnIndex', 'createData', 'createRow', 'revertData', 'clearData', 'isInsertByRow', 'isUpdateByRow', 'getColumns', 'getColumnById', 'getColumnByField', 'getTableColumn', 'getData', 'getCheckboxRecords', 'getParentRow', 'getRowSeq', 'getRowById', 'getRowid', 'getTableData', 'hideColumn', 'showColumn', 'resetColumn', 'refreshColumn', 'refreshScroll', 'recalculate', 'closeTooltip', 'isAllCheckboxChecked', 'isAllCheckboxIndeterminate', 'getCheckboxIndeterminateRecords', 'setCheckboxRow', 'isCheckedByCheckboxRow', 'isIndeterminateByCheckboxRow', 'toggleCheckboxRow', 'setAllCheckboxRow', 'getRadioReserveRecord', 'clearRadioReserve', 'getCheckboxReserveRecords', 'clearCheckboxReserve', 'toggleAllCheckboxRow', 'clearCheckboxRow', 'setCurrentRow', 'isCheckedByRadioRow', 'setRadioRow', 'clearCurrentRow', 'clearRadioRow', 'getCurrentRecord', 'getRadioRecord', 'getCurrentColumn', 'setCurrentColumn', 'clearCurrentColumn', 'sort', 'clearSort', 'isSort', 'getSortColumns', 'closeFilter', 'isFilter', 'isRowExpandLoaded', 'clearRowExpandLoaded', 'reloadRowExpand', 'reloadRowExpand', 'toggleRowExpand', 'setAllRowExpand', 'setRowExpand', 'isExpandByRow', 'clearRowExpand', 'clearRowExpandReserve', 'getRowExpandRecords', 'getTreeExpandRecords', 'isTreeExpandLoaded', 'clearTreeExpandLoaded', 'reloadTreeExpand', 'reloadTreeChilds', 'toggleTreeExpand', 'setAllTreeExpand', 'setTreeExpand', 'isTreeExpandByRow', 'clearTreeExpand', 'clearTreeExpandReserve', 'getScroll', 'scrollTo', 'scrollToRow', 'scrollToColumn', 'clearScroll', 'updateFooter', 'updateStatus', 'setMergeCells', 'removeInsertRow', 'removeMergeCells', 'getMergeCells', 'clearMergeCells', 'setMergeFooterItems', 'removeMergeFooterItems', 'getMergeFooterItems', 'clearMergeFooterItems', 'openTooltip', 'focus', 'blur', 'connect'];\n\nvar gridComponentEmits = __spreadArray(__spreadArray([], tableComponentEmits), ['page-change', 'form-submit', 'form-submit-invalid', 'form-reset', 'form-collapse', 'form-toggle-collapse', 'toolbar-button-click', 'toolbar-tool-click', 'zoom']);\n\nexport default defineComponent({\n  name: 'VxeGrid',\n  props: __assign(__assign({}, tableComponentProps), {\n    columns: Array,\n    pagerConfig: Object,\n    proxyConfig: Object,\n    toolbarConfig: Object,\n    formConfig: Object,\n    zoomConfig: Object,\n    size: {\n      type: String,\n      default: function () {\n        return GlobalConfig.grid.size || GlobalConfig.size;\n      }\n    }\n  }),\n  emits: gridComponentEmits,\n  setup: function (props, context) {\n    var slots = context.slots,\n        emit = context.emit;\n    var xID = XEUtils.uniqueId();\n    var instance = getCurrentInstance();\n    var computeSize = useSize(props);\n    var reactData = reactive({\n      tableLoading: false,\n      proxyInited: false,\n      isZMax: false,\n      tableData: [],\n      pendingRecords: [],\n      filterData: [],\n      formData: {},\n      sortData: [],\n      tZindex: 0,\n      tablePage: {\n        total: 0,\n        pageSize: 10,\n        currentPage: 1\n      }\n    });\n    var refElem = ref();\n    var refTable = ref();\n    var refForm = ref();\n    var refToolbar = ref();\n    var refPager = ref();\n    var refFormWrapper = ref();\n    var refToolbarWrapper = ref();\n    var refTopWrapper = ref();\n    var refBottomWrapper = ref();\n    var refPagerWrapper = ref();\n\n    var extendTableMethods = function (methodKeys) {\n      var funcs = {};\n      methodKeys.forEach(function (name) {\n        funcs[name] = function () {\n          var args = [];\n\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n\n          var $xetable = refTable.value;\n          return $xetable && $xetable[name].apply($xetable, args);\n        };\n      });\n      return funcs;\n    };\n\n    var gridExtendTableMethods = extendTableMethods(tableComponentMethodKeys);\n    tableComponentMethodKeys.forEach(function (name) {\n      gridExtendTableMethods[name] = function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        var $xetable = refTable.value;\n        return $xetable && $xetable[name].apply($xetable, args);\n      };\n    });\n    var computeProxyOpts = computed(function () {\n      return Object.assign({}, GlobalConfig.grid.proxyConfig, props.proxyConfig);\n    });\n    var computeIsMsg = computed(function () {\n      var proxyOpts = computeProxyOpts.value;\n      return proxyOpts.message !== false;\n    });\n    var computePagerOpts = computed(function () {\n      return Object.assign({}, GlobalConfig.grid.pagerConfig, props.pagerConfig);\n    });\n    var computeFormOpts = computed(function () {\n      return Object.assign({}, GlobalConfig.grid.formConfig, props.formConfig);\n    });\n    var computeToolbarOpts = computed(function () {\n      return Object.assign({}, GlobalConfig.grid.toolbarConfig, props.toolbarConfig);\n    });\n    var computeZoomOpts = computed(function () {\n      return Object.assign({}, GlobalConfig.grid.zoomConfig, props.zoomConfig);\n    });\n    var computeStyles = computed(function () {\n      return reactData.isZMax ? {\n        zIndex: reactData.tZindex\n      } : null;\n    });\n    var computeTableExtendProps = computed(function () {\n      var rest = {};\n      var gridProps = props;\n      tableComponentPropKeys.forEach(function (key) {\n        rest[key] = gridProps[key];\n      });\n      return rest;\n    });\n    var refMaps = {\n      refElem: refElem,\n      refTable: refTable,\n      refForm: refForm,\n      refToolbar: refToolbar,\n      refPager: refPager\n    };\n    var computeMaps = {\n      computeProxyOpts: computeProxyOpts,\n      computePagerOpts: computePagerOpts,\n      computeFormOpts: computeFormOpts,\n      computeToolbarOpts: computeToolbarOpts,\n      computeZoomOpts: computeZoomOpts\n    };\n    var $xegrid = {\n      xID: xID,\n      props: props,\n      context: context,\n      instance: instance,\n      reactData: reactData,\n      getRefMaps: function () {\n        return refMaps;\n      },\n      getComputeMaps: function () {\n        return computeMaps;\n      }\n    };\n    var gridMethods = {};\n\n    var handleRowClassName = function (params) {\n      var pendingRecords = reactData.pendingRecords;\n      var rowClassName = props.rowClassName;\n      var clss = [];\n\n      if (pendingRecords.some(function (item) {\n        return item === params.row;\n      })) {\n        clss.push('row--pending');\n      }\n\n      clss.push(rowClassName ? XEUtils.isFunction(rowClassName) ? rowClassName(params) : rowClassName : '');\n      return clss;\n    };\n\n    var handleActiveMethod = function (params) {\n      var editConfig = props.editConfig;\n      var pendingRecords = reactData.pendingRecords;\n      var $xetable = refTable.value;\n      var activeMethod = editConfig ? editConfig.activeMethod : null;\n      return $xetable.findRowIndexOf(pendingRecords, params.row) === -1 && (!activeMethod || activeMethod(__assign(__assign({}, params), {\n        $grid: $xegrid\n      })));\n    };\n\n    var computeTableProps = computed(function () {\n      var seqConfig = props.seqConfig,\n          pagerConfig = props.pagerConfig,\n          loading = props.loading,\n          editConfig = props.editConfig,\n          proxyConfig = props.proxyConfig;\n      var isZMax = reactData.isZMax,\n          tableLoading = reactData.tableLoading,\n          tablePage = reactData.tablePage,\n          tableData = reactData.tableData;\n      var tableExtendProps = computeTableExtendProps.value;\n      var proxyOpts = computeProxyOpts.value;\n      var tableProps = Object.assign({}, tableExtendProps);\n\n      if (isZMax) {\n        if (tableExtendProps.maxHeight) {\n          tableProps.maxHeight = 'auto';\n        } else {\n          tableProps.height = 'auto';\n        }\n      }\n\n      if (proxyConfig) {\n        tableProps.loading = loading || tableLoading;\n        tableProps.data = tableData;\n        tableProps.rowClassName = handleRowClassName;\n\n        if (proxyOpts.seq && isEnableConf(pagerConfig)) {\n          tableProps.seqConfig = Object.assign({}, seqConfig, {\n            startIndex: (tablePage.currentPage - 1) * tablePage.pageSize\n          });\n        }\n      }\n\n      if (editConfig) {\n        tableProps.editConfig = Object.assign({}, editConfig, {\n          activeMethod: handleActiveMethod\n        });\n      }\n\n      return tableProps;\n    });\n\n    var initToolbar = function () {\n      nextTick(function () {\n        var $xetable = refTable.value;\n        var $xetoolbar = refToolbar.value;\n\n        if ($xetable && $xetoolbar) {\n          $xetable.connect($xetoolbar);\n        }\n      });\n    };\n\n    var initPages = function () {\n      var pagerConfig = props.pagerConfig;\n      var tablePage = reactData.tablePage;\n      var pagerOpts = computePagerOpts.value;\n      var currentPage = pagerOpts.currentPage,\n          pageSize = pagerOpts.pageSize;\n\n      if (pagerConfig) {\n        if (currentPage) {\n          tablePage.currentPage = currentPage;\n        }\n\n        if (pageSize) {\n          tablePage.pageSize = pageSize;\n        }\n      }\n    };\n\n    var triggerPendingEvent = function (code) {\n      var pendingRecords = reactData.pendingRecords;\n      var isMsg = computeIsMsg.value;\n      var $xetable = refTable.value;\n      var selectRecords = $xetable.getCheckboxRecords();\n\n      if (selectRecords.length) {\n        var plus_1 = [];\n        var minus_1 = [];\n        selectRecords.forEach(function (data) {\n          if (pendingRecords.some(function (item) {\n            return data === item;\n          })) {\n            minus_1.push(data);\n          } else {\n            plus_1.push(data);\n          }\n        });\n\n        if (minus_1.length) {\n          reactData.pendingRecords = pendingRecords.filter(function (item) {\n            return $xetable.findRowIndexOf(minus_1, item) === -1;\n          }).concat(plus_1);\n        } else if (plus_1.length) {\n          reactData.pendingRecords = pendingRecords.concat(plus_1);\n        }\n\n        gridExtendTableMethods.clearCheckboxRow();\n      } else {\n        if (isMsg) {\n          // 检测弹窗模块\n          if (process.env.NODE_ENV === 'development') {\n            if (!VXETable.modal) {\n              errLog('vxe.error.reqModule', ['Modal']);\n            }\n          }\n\n          VXETable.modal.message({\n            id: code,\n            content: GlobalConfig.i18n('vxe.grid.selectOneRecord'),\n            status: 'warning'\n          });\n        }\n      }\n    };\n\n    var getRespMsg = function (rest, defaultMsg) {\n      var proxyOpts = computeProxyOpts.value;\n      var _a = proxyOpts.props,\n          proxyProps = _a === void 0 ? {} : _a;\n      var msg;\n\n      if (rest && proxyProps.message) {\n        msg = XEUtils.get(rest, proxyProps.message);\n      }\n\n      return msg || GlobalConfig.i18n(defaultMsg);\n    };\n\n    var handleDeleteRow = function (code, alertKey, callback) {\n      var isMsg = computeIsMsg.value;\n      var selectRecords = gridExtendTableMethods.getCheckboxRecords();\n\n      if (isMsg) {\n        if (selectRecords.length) {\n          return VXETable.modal.confirm({\n            id: \"cfm_\" + code,\n            content: GlobalConfig.i18n(alertKey),\n            escClosable: true\n          }).then(function (type) {\n            if (type === 'confirm') {\n              callback();\n            }\n          });\n        } else {\n          // 检测弹窗模块\n          if (process.env.NODE_ENV === 'development') {\n            if (!VXETable.modal) {\n              errLog('vxe.error.reqModule', ['Modal']);\n            }\n          }\n\n          VXETable.modal.message({\n            id: \"msg_\" + code,\n            content: GlobalConfig.i18n('vxe.grid.selectOneRecord'),\n            status: 'warning'\n          });\n        }\n      } else {\n        if (selectRecords.length) {\n          callback();\n        }\n      }\n\n      return Promise.resolve();\n    };\n\n    var pageChangeEvent = function (params) {\n      var proxyConfig = props.proxyConfig;\n      var tablePage = reactData.tablePage;\n      var currentPage = params.currentPage,\n          pageSize = params.pageSize;\n      tablePage.currentPage = currentPage;\n      tablePage.pageSize = pageSize;\n      gridMethods.dispatchEvent('page-change', params);\n\n      if (proxyConfig) {\n        gridMethods.commitProxy('query');\n      }\n    };\n\n    var sortChangeEvent = function (params) {\n      var $xetable = refTable.value;\n      var proxyConfig = props.proxyConfig;\n      var computeSortOpts = $xetable.getComputeMaps().computeSortOpts;\n      var sortOpts = computeSortOpts.value; // 如果是服务端排序\n\n      if (sortOpts.remote) {\n        reactData.sortData = params.sortList;\n\n        if (proxyConfig) {\n          reactData.tablePage.currentPage = 1;\n          gridMethods.commitProxy('query');\n        }\n      }\n\n      gridMethods.dispatchEvent('sort-change', params);\n    };\n\n    var filterChangeEvent = function (params) {\n      var $xetable = refTable.value;\n      var proxyConfig = props.proxyConfig;\n      var computeFilterOpts = $xetable.getComputeMaps().computeFilterOpts;\n      var filterOpts = computeFilterOpts.value; // 如果是服务端过滤\n\n      if (filterOpts.remote) {\n        reactData.filterData = params.filterList;\n\n        if (proxyConfig) {\n          reactData.tablePage.currentPage = 1;\n          gridMethods.commitProxy('query');\n        }\n      }\n\n      gridMethods.dispatchEvent('filter-change', params);\n    };\n\n    var submitFormEvent = function (params) {\n      var proxyConfig = props.proxyConfig;\n\n      if (proxyConfig) {\n        gridMethods.commitProxy('reload');\n      }\n\n      gridMethods.dispatchEvent('form-submit', params);\n    };\n\n    var resetFormEvent = function (params) {\n      var proxyConfig = props.proxyConfig;\n\n      if (proxyConfig) {\n        gridMethods.commitProxy('reload');\n      }\n\n      gridMethods.dispatchEvent('form-reset', params);\n    };\n\n    var submitInvalidEvent = function (params) {\n      gridMethods.dispatchEvent('form-submit-invalid', params);\n    };\n\n    var collapseEvent = function (params) {\n      nextTick(function () {\n        return gridExtendTableMethods.recalculate(true);\n      });\n      gridMethods.dispatchEvent('form-toggle-collapse', params);\n      gridMethods.dispatchEvent('form-collapse', params);\n    };\n\n    var handleZoom = function (isMax) {\n      var isZMax = reactData.isZMax;\n\n      if (isMax ? !isZMax : isZMax) {\n        reactData.isZMax = !isZMax;\n\n        if (reactData.tZindex < getLastZIndex()) {\n          reactData.tZindex = nextZIndex();\n        }\n      }\n\n      return nextTick().then(function () {\n        return gridExtendTableMethods.recalculate(true);\n      }).then(function () {\n        return reactData.isZMax;\n      });\n    };\n\n    var getFuncSlot = function (optSlots, slotKey) {\n      var funcSlot = optSlots[slotKey];\n\n      if (funcSlot) {\n        if (XEUtils.isString(funcSlot)) {\n          if (slots[funcSlot]) {\n            return slots[funcSlot];\n          } else {\n            if (process.env.NODE_ENV === 'development') {\n              errLog('vxe.error.notSlot', [funcSlot]);\n            }\n          }\n        } else {\n          return funcSlot;\n        }\n      }\n\n      return null;\n    };\n    /**\n     * 渲染表单\n     */\n\n\n    var renderForms = function () {\n      var formConfig = props.formConfig,\n          proxyConfig = props.proxyConfig;\n      var formData = reactData.formData;\n      var proxyOpts = computeProxyOpts.value;\n      var formOpts = computeFormOpts.value;\n      var restVNs = [];\n\n      if (isEnableConf(formConfig) || slots.form) {\n        var slotVNs = [];\n\n        if (slots.form) {\n          slotVNs = slots.form({\n            $grid: $xegrid\n          });\n        } else {\n          if (formOpts.items) {\n            var formSlots_1 = {};\n\n            if (!formOpts.inited) {\n              formOpts.inited = true;\n              var beforeItem_1 = proxyOpts.beforeItem;\n\n              if (proxyOpts && beforeItem_1) {\n                formOpts.items.forEach(function (item) {\n                  beforeItem_1({\n                    $grid: $xegrid,\n                    item: item\n                  });\n                });\n              }\n            } // 处理插槽\n\n\n            formOpts.items.forEach(function (item) {\n              XEUtils.each(item.slots, function (func) {\n                if (!XEUtils.isFunction(func)) {\n                  if (slots[func]) {\n                    formSlots_1[func] = slots[func];\n                  }\n                }\n              });\n            });\n            slotVNs.push(h(resolveComponent('vxe-form'), __assign(__assign({\n              ref: refForm\n            }, Object.assign({}, formOpts, {\n              data: proxyConfig && proxyOpts.form ? formData : formOpts.data\n            })), {\n              onSubmit: submitFormEvent,\n              onReset: resetFormEvent,\n              onSubmitInvalid: submitInvalidEvent,\n              onCollapse: collapseEvent\n            }), formSlots_1));\n          }\n        }\n\n        restVNs.push(h('div', {\n          ref: refFormWrapper,\n          class: 'vxe-grid--form-wrapper'\n        }, slotVNs));\n      }\n\n      return restVNs;\n    };\n    /**\n     * 渲染工具栏\n     */\n\n\n    var renderToolbars = function () {\n      var toolbarConfig = props.toolbarConfig;\n      var toolbarOpts = computeToolbarOpts.value;\n      var restVNs = [];\n\n      if (isEnableConf(toolbarConfig) || slots.toolbar) {\n        var slotVNs = [];\n\n        if (slots.toolbar) {\n          slotVNs = slots.toolbar({\n            $grid: $xegrid\n          });\n        } else {\n          var toolbarOptSlots = toolbarOpts.slots;\n          var buttonsSlot = void 0;\n          var toolsSlot = void 0;\n          var toolbarSlots = {};\n\n          if (toolbarOptSlots) {\n            buttonsSlot = getFuncSlot(toolbarOptSlots, 'buttons');\n            toolsSlot = getFuncSlot(toolbarOptSlots, 'tools');\n\n            if (buttonsSlot) {\n              toolbarSlots.buttons = buttonsSlot;\n            }\n\n            if (toolsSlot) {\n              toolbarSlots.tools = toolsSlot;\n            }\n          }\n\n          slotVNs.push(h(resolveComponent('vxe-toolbar'), __assign({\n            ref: refToolbar\n          }, toolbarOpts), toolbarSlots));\n        }\n\n        restVNs.push(h('div', {\n          ref: refToolbarWrapper,\n          class: 'vxe-grid--toolbar-wrapper'\n        }, slotVNs));\n      }\n\n      return restVNs;\n    };\n    /**\n     * 渲染表格顶部区域\n     */\n\n\n    var renderTops = function () {\n      if (slots.top) {\n        return [h('div', {\n          ref: refTopWrapper,\n          class: 'vxe-grid--top-wrapper'\n        }, slots.top({\n          $grid: $xegrid\n        }))];\n      }\n\n      return [];\n    };\n\n    var tableCompEvents = {};\n    tableComponentEmits.forEach(function (name) {\n      var type = XEUtils.camelCase(\"on-\" + name);\n\n      tableCompEvents[type] = function () {\n        var args = [];\n\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n\n        return emit.apply(void 0, __spreadArray([name], args));\n      };\n    });\n    /**\n     * 渲染表格\n     */\n\n    var renderTables = function () {\n      var proxyConfig = props.proxyConfig;\n      var tableProps = computeTableProps.value;\n      var proxyOpts = computeProxyOpts.value;\n      var tableOns = Object.assign({}, tableCompEvents);\n      var emptySlot = slots.empty;\n\n      if (proxyConfig) {\n        if (proxyOpts.sort) {\n          tableOns.onSortChange = sortChangeEvent;\n        }\n\n        if (proxyOpts.filter) {\n          tableOns.onFilterChange = filterChangeEvent;\n        }\n      }\n\n      return [h(resolveComponent('vxe-table'), __assign(__assign({\n        ref: refTable\n      }, tableProps), tableOns), emptySlot ? {\n        empty: function () {\n          return emptySlot({});\n        }\n      } : {})];\n    };\n    /**\n     * 渲染表格底部区域\n     */\n\n\n    var renderBottoms = function () {\n      if (slots.bottom) {\n        return [h('div', {\n          ref: refBottomWrapper,\n          class: 'vxe-grid--bottom-wrapper'\n        }, slots.bottom({\n          $grid: $xegrid\n        }))];\n      }\n\n      return [];\n    };\n    /**\n     * 渲染分页\n     */\n\n\n    var renderPagers = function () {\n      var pagerConfig = props.pagerConfig;\n      var pagerOpts = computePagerOpts.value;\n      var restVNs = [];\n\n      if (isEnableConf(pagerConfig) || slots.pager) {\n        var slotVNs = [];\n\n        if (slots.pager) {\n          slotVNs = slots.pager({\n            $grid: $xegrid\n          });\n        } else {\n          var pagerOptSlots = pagerOpts.slots;\n          var pagerSlots = {};\n          var leftSlot = void 0;\n          var rightSlot = void 0;\n\n          if (pagerOptSlots) {\n            leftSlot = getFuncSlot(pagerOptSlots, 'left');\n            rightSlot = getFuncSlot(pagerOptSlots, 'right');\n\n            if (leftSlot) {\n              pagerSlots.left = leftSlot;\n            }\n\n            if (rightSlot) {\n              pagerSlots.right = rightSlot;\n            }\n          }\n\n          slotVNs.push(h(resolveComponent('vxe-pager'), __assign(__assign(__assign({\n            ref: refPager\n          }, pagerOpts), props.proxyConfig ? reactData.tablePage : {}), {\n            onPageChange: pageChangeEvent\n          }), pagerSlots));\n        }\n\n        restVNs.push(h('div', {\n          ref: refPagerWrapper,\n          class: 'vxe-grid--pager-wrapper'\n        }, slotVNs));\n      }\n\n      return restVNs;\n    };\n\n    var initProxy = function () {\n      var proxyConfig = props.proxyConfig,\n          formConfig = props.formConfig;\n      var proxyInited = reactData.proxyInited;\n      var proxyOpts = computeProxyOpts.value;\n      var formOpts = computeFormOpts.value;\n\n      if (proxyConfig) {\n        if (isEnableConf(formConfig) && proxyOpts.form && formOpts.items) {\n          var formData_1 = {};\n          formOpts.items.forEach(function (item) {\n            var field = item.field,\n                itemRender = item.itemRender;\n\n            if (field) {\n              var itemValue = null;\n\n              if (itemRender) {\n                var defaultValue = itemRender.defaultValue;\n\n                if (XEUtils.isFunction(defaultValue)) {\n                  itemValue = defaultValue({\n                    item: item\n                  });\n                } else if (!XEUtils.isUndefined(defaultValue)) {\n                  itemValue = defaultValue;\n                }\n              }\n\n              formData_1[field] = itemValue;\n            }\n          });\n          reactData.formData = formData_1;\n        }\n\n        if (!proxyInited && proxyOpts.autoLoad !== false) {\n          reactData.proxyInited = true;\n          nextTick(function () {\n            return gridMethods.commitProxy('_init');\n          });\n        }\n      }\n    };\n\n    gridMethods = {\n      dispatchEvent: function (type, params, evnt) {\n        emit(type, Object.assign({\n          $grid: $xegrid,\n          $event: evnt\n        }, params));\n      },\n\n      /**\n       * 提交指令，支持 code 或 button\n       * @param {String/Object} code 字符串或对象\n       */\n      commitProxy: function (proxyTarget) {\n        var args = [];\n\n        for (var _i = 1; _i < arguments.length; _i++) {\n          args[_i - 1] = arguments[_i];\n        }\n\n        var toolbarConfig = props.toolbarConfig,\n            pagerConfig = props.pagerConfig,\n            editRules = props.editRules;\n        var tablePage = reactData.tablePage,\n            formData = reactData.formData;\n        var isMsg = computeIsMsg.value;\n        var proxyOpts = computeProxyOpts.value;\n        var toolbarOpts = computeToolbarOpts.value;\n        var beforeQuery = proxyOpts.beforeQuery,\n            afterQuery = proxyOpts.afterQuery,\n            beforeDelete = proxyOpts.beforeDelete,\n            afterDelete = proxyOpts.afterDelete,\n            beforeSave = proxyOpts.beforeSave,\n            afterSave = proxyOpts.afterSave,\n            _a = proxyOpts.ajax,\n            ajax = _a === void 0 ? {} : _a,\n            _b = proxyOpts.props,\n            proxyProps = _b === void 0 ? {} : _b;\n        var $xetable = refTable.value;\n        var button = null;\n        var code = null;\n\n        if (XEUtils.isString(proxyTarget)) {\n          var buttons = toolbarOpts.buttons;\n          var matchObj = toolbarConfig && buttons ? XEUtils.findTree(buttons, function (item) {\n            return item.code === proxyTarget;\n          }, {\n            children: 'dropdowns'\n          }) : null;\n          button = matchObj ? matchObj.item : null;\n          code = proxyTarget;\n        } else {\n          button = proxyTarget;\n          code = button.code;\n        }\n\n        var btnParams = button ? button.params : null;\n\n        switch (code) {\n          case 'insert':\n            $xetable.insert({});\n            break;\n\n          case 'insert_actived':\n            $xetable.insert({}).then(function (_a) {\n              var row = _a.row;\n              return $xetable.setActiveRow(row);\n            });\n            break;\n\n          case 'mark_cancel':\n            triggerPendingEvent(code);\n            break;\n\n          case 'remove':\n            return handleDeleteRow(code, 'vxe.grid.removeSelectRecord', function () {\n              return $xetable.removeCheckboxRow();\n            });\n\n          case 'import':\n            $xetable.importData(btnParams);\n            break;\n\n          case 'open_import':\n            $xetable.openImport(btnParams);\n            break;\n\n          case 'export':\n            $xetable.exportData(btnParams);\n            break;\n\n          case 'open_export':\n            $xetable.openExport(btnParams);\n            break;\n\n          case 'reset_custom':\n            $xetable.resetColumn(true);\n            break;\n\n          case '_init':\n          case 'reload':\n          case 'query':\n            {\n              var ajaxMethods = ajax.query;\n\n              if (ajaxMethods) {\n                var isInited = code === '_init';\n                var isReload = code === 'reload';\n                var sortList = [];\n                var filterList = [];\n                var pageParams = {};\n\n                if (pagerConfig) {\n                  if (isInited || isReload) {\n                    tablePage.currentPage = 1;\n                  }\n\n                  if (isEnableConf(pagerConfig)) {\n                    pageParams = __assign({}, tablePage);\n                  }\n                }\n\n                if (isInited) {\n                  var computeSortOpts = $xetable.getComputeMaps().computeSortOpts;\n                  var sortOpts = computeSortOpts.value;\n                  var defaultSort = sortOpts.defaultSort; // 如果使用默认排序\n\n                  if (defaultSort) {\n                    if (!XEUtils.isArray(defaultSort)) {\n                      defaultSort = [defaultSort];\n                    }\n\n                    sortList = defaultSort.map(function (item) {\n                      return {\n                        field: item.field,\n                        property: item.field,\n                        order: item.order\n                      };\n                    });\n                  }\n\n                  filterList = $xetable.getCheckedFilters();\n                } else {\n                  if (isReload) {\n                    reactData.pendingRecords = [];\n                    $xetable.clearAll();\n                  } else {\n                    sortList = $xetable.getSortColumns();\n                    filterList = $xetable.getCheckedFilters();\n                  }\n                }\n\n                var params = {\n                  code: code,\n                  button: button,\n                  $grid: $xegrid,\n                  page: pageParams,\n                  sort: sortList.length ? sortList[0] : {},\n                  sorts: sortList,\n                  filters: filterList,\n                  form: formData,\n                  options: ajaxMethods\n                };\n                reactData.sortData = sortList;\n                reactData.filterData = filterList;\n                reactData.tableLoading = true;\n                var applyArgs_1 = [params].concat(args);\n                return Promise.resolve((beforeQuery || ajaxMethods).apply(void 0, applyArgs_1)).catch(function (e) {\n                  return e;\n                }).then(function (rest) {\n                  reactData.tableLoading = false;\n\n                  if (rest) {\n                    if (isEnableConf(pagerConfig)) {\n                      var total = XEUtils.get(rest, proxyProps.total || 'page.total') || 0;\n                      tablePage.total = total;\n                      reactData.tableData = XEUtils.get(rest, proxyProps.result || 'result') || []; // 检验当前页码，不能超出当前最大页数\n\n                      var pageCount = Math.max(Math.ceil(total / tablePage.pageSize), 1);\n\n                      if (tablePage.currentPage > pageCount) {\n                        tablePage.currentPage = pageCount;\n                      }\n                    } else {\n                      reactData.tableData = (proxyProps.list ? XEUtils.get(rest, proxyProps.list) : rest) || [];\n                    }\n                  } else {\n                    reactData.tableData = [];\n                  }\n\n                  if (afterQuery) {\n                    afterQuery.apply(void 0, applyArgs_1);\n                  }\n                });\n              } else {\n                if (process.env.NODE_ENV === 'development') {\n                  errLog('vxe.error.notFunc', ['proxy-config.ajax.query']);\n                }\n              }\n\n              break;\n            }\n\n          case 'delete':\n            {\n              var ajaxMethods_1 = ajax.delete;\n\n              if (ajaxMethods_1) {\n                var selectRecords_1 = gridExtendTableMethods.getCheckboxRecords();\n                var removeRecords_1 = selectRecords_1.filter(function (row) {\n                  return !$xetable.isInsertByRow(row);\n                });\n                var body = {\n                  removeRecords: removeRecords_1\n                };\n                var applyArgs_2 = [{\n                  $grid: $xegrid,\n                  code: code,\n                  button: button,\n                  body: body,\n                  options: ajaxMethods_1\n                }].concat(args);\n\n                if (selectRecords_1.length) {\n                  return handleDeleteRow(code, 'vxe.grid.deleteSelectRecord', function () {\n                    if (!removeRecords_1.length) {\n                      return $xetable.remove(selectRecords_1);\n                    }\n\n                    reactData.tableLoading = true;\n                    return Promise.resolve((beforeDelete || ajaxMethods_1).apply(void 0, applyArgs_2)).then(function (rest) {\n                      reactData.tableLoading = false;\n                      reactData.pendingRecords = reactData.pendingRecords.filter(function (row) {\n                        return $xetable.findRowIndexOf(removeRecords_1, row) === -1;\n                      });\n\n                      if (isMsg) {\n                        // 检测弹窗模块\n                        if (process.env.NODE_ENV === 'development') {\n                          if (!VXETable.modal) {\n                            errLog('vxe.error.reqModule', ['Modal']);\n                          }\n                        }\n\n                        VXETable.modal.message({\n                          content: getRespMsg(rest, 'vxe.grid.delSuccess'),\n                          status: 'success'\n                        });\n                      }\n\n                      if (afterDelete) {\n                        afterDelete.apply(void 0, applyArgs_2);\n                      } else {\n                        gridMethods.commitProxy('query');\n                      }\n                    }).catch(function (rest) {\n                      reactData.tableLoading = false;\n\n                      if (isMsg) {\n                        if (process.env.NODE_ENV === 'development') {\n                          if (!VXETable.modal.message) {\n                            errLog('vxe.error.reqModule', ['Modal']);\n                          }\n                        }\n\n                        VXETable.modal.message({\n                          id: code,\n                          content: getRespMsg(rest, 'vxe.grid.operError'),\n                          status: 'error'\n                        });\n                      }\n                    });\n                  });\n                } else {\n                  if (isMsg) {\n                    // 检测弹窗模块\n                    if (process.env.NODE_ENV === 'development') {\n                      if (!VXETable.modal) {\n                        errLog('vxe.error.reqModule', ['Modal']);\n                      }\n                    }\n\n                    VXETable.modal.message({\n                      id: code,\n                      content: GlobalConfig.i18n('vxe.grid.selectOneRecord'),\n                      status: 'warning'\n                    });\n                  }\n                }\n              } else {\n                if (process.env.NODE_ENV === 'development') {\n                  errLog('vxe.error.notFunc', ['proxy-config.ajax.delete']);\n                }\n              }\n\n              break;\n            }\n\n          case 'save':\n            {\n              var ajaxMethods_2 = ajax.save;\n\n              if (ajaxMethods_2) {\n                var body_1 = Object.assign({\n                  pendingRecords: reactData.pendingRecords\n                }, $xetable.getRecordset());\n                var insertRecords_1 = body_1.insertRecords,\n                    removeRecords_2 = body_1.removeRecords,\n                    updateRecords_1 = body_1.updateRecords,\n                    pendingRecords_1 = body_1.pendingRecords;\n                var applyArgs_3 = [{\n                  $grid: $xegrid,\n                  code: code,\n                  button: button,\n                  body: body_1,\n                  options: ajaxMethods_2\n                }].concat(args); // 排除掉新增且标记为删除的数据\n\n                if (insertRecords_1.length) {\n                  body_1.pendingRecords = pendingRecords_1.filter(function (row) {\n                    return $xetable.findRowIndexOf(insertRecords_1, row) === -1;\n                  });\n                } // 排除已标记为删除的数据\n\n\n                if (pendingRecords_1.length) {\n                  body_1.insertRecords = insertRecords_1.filter(function (row) {\n                    return $xetable.findRowIndexOf(pendingRecords_1, row) === -1;\n                  });\n                }\n\n                var restPromise = Promise.resolve();\n\n                if (editRules) {\n                  // 只校验新增和修改的数据\n                  restPromise = $xetable.validate(body_1.insertRecords.concat(updateRecords_1));\n                }\n\n                return restPromise.then(function (errMap) {\n                  if (errMap) {\n                    // 如果校验不通过\n                    return;\n                  }\n\n                  if (body_1.insertRecords.length || removeRecords_2.length || updateRecords_1.length || body_1.pendingRecords.length) {\n                    reactData.tableLoading = true;\n                    return Promise.resolve((beforeSave || ajaxMethods_2).apply(void 0, applyArgs_3)).then(function (rest) {\n                      reactData.tableLoading = false;\n                      reactData.pendingRecords = [];\n\n                      if (isMsg) {\n                        // 检测弹窗模块\n                        if (process.env.NODE_ENV === 'development') {\n                          if (!VXETable.modal) {\n                            errLog('vxe.error.reqModule', ['Modal']);\n                          }\n                        }\n\n                        VXETable.modal.message({\n                          content: getRespMsg(rest, 'vxe.grid.saveSuccess'),\n                          status: 'success'\n                        });\n                      }\n\n                      if (afterSave) {\n                        afterSave.apply(void 0, applyArgs_3);\n                      } else {\n                        gridMethods.commitProxy('query');\n                      }\n                    }).catch(function (rest) {\n                      reactData.tableLoading = false;\n\n                      if (isMsg) {\n                        // 检测弹窗模块\n                        if (process.env.NODE_ENV === 'development') {\n                          if (!VXETable.modal) {\n                            errLog('vxe.error.reqModule', ['Modal']);\n                          }\n                        }\n\n                        VXETable.modal.message({\n                          id: code,\n                          content: getRespMsg(rest, 'vxe.grid.operError'),\n                          status: 'error'\n                        });\n                      }\n                    });\n                  } else {\n                    if (isMsg) {\n                      // 检测弹窗模块\n                      if (process.env.NODE_ENV === 'development') {\n                        if (!VXETable.modal) {\n                          errLog('vxe.error.reqModule', ['Modal']);\n                        }\n                      }\n\n                      VXETable.modal.message({\n                        id: code,\n                        content: GlobalConfig.i18n('vxe.grid.dataUnchanged'),\n                        status: 'info'\n                      });\n                    }\n                  }\n                });\n              } else {\n                if (process.env.NODE_ENV === 'development') {\n                  errLog('vxe.error.notFunc', ['proxy-config.ajax.save']);\n                }\n              }\n\n              break;\n            }\n\n          default:\n            {\n              var btnMethod = VXETable.commands.get(code);\n\n              if (btnMethod) {\n                btnMethod.apply(void 0, __spreadArray([{\n                  code: code,\n                  button: button,\n                  $grid: $xegrid,\n                  $table: $xetable\n                }], args));\n              }\n            }\n        }\n\n        return nextTick();\n      },\n      zoom: function () {\n        if (reactData.isZMax) {\n          return gridMethods.revert();\n        }\n\n        return gridMethods.maximize();\n      },\n      isMaximized: function () {\n        return reactData.isZMax;\n      },\n      maximize: function () {\n        return handleZoom(true);\n      },\n      revert: function () {\n        return handleZoom();\n      },\n      getFormItems: function (itemIndex) {\n        var formOpts = computeFormOpts.value;\n        var formConfig = props.formConfig;\n        var items = formOpts.items;\n        var itemList = [];\n        XEUtils.eachTree(isEnableConf(formConfig) && items ? items : [], function (item) {\n          itemList.push(item);\n        }, {\n          children: 'children'\n        });\n        return XEUtils.isUndefined(itemIndex) ? itemList : itemList[itemIndex];\n      },\n      getPendingRecords: function () {\n        return reactData.pendingRecords;\n      },\n      getProxyInfo: function () {\n        if (props.proxyConfig) {\n          var sortData = reactData.sortData;\n          return {\n            data: reactData.tableData,\n            filter: reactData.filterData,\n            form: reactData.formData,\n            sort: sortData.length ? sortData[0] : {},\n            sorts: sortData,\n            pager: reactData.tablePage,\n            pendingRecords: reactData.pendingRecords\n          };\n        }\n\n        return null;\n      }\n    }; // 检查插槽\n\n    if (process.env.NODE_ENV === 'development') {\n      gridMethods.loadColumn = function (columns) {\n        var $xetable = refTable.value;\n        XEUtils.eachTree(columns, function (column) {\n          if (column.slots) {\n            XEUtils.each(column.slots, function (func) {\n              if (!XEUtils.isFunction(func)) {\n                if (!slots[func]) {\n                  errLog('vxe.error.notSlot', [func]);\n                }\n              }\n            });\n          }\n        });\n        return $xetable.loadColumn(columns);\n      };\n\n      gridMethods.reloadColumn = function (columns) {\n        gridExtendTableMethods.clearAll();\n        return gridMethods.loadColumn(columns);\n      };\n    }\n\n    var gridPrivateMethods = {\n      extendTableMethods: extendTableMethods,\n      callSlot: function (slotFunc, params) {\n        if (slotFunc) {\n          if (XEUtils.isString(slotFunc)) {\n            slotFunc = slots[slotFunc] || null;\n          }\n\n          if (XEUtils.isFunction(slotFunc)) {\n            return slotFunc(params);\n          }\n        }\n\n        return [];\n      },\n\n      /**\n       * 获取需要排除的高度\n       */\n      getExcludeHeight: function () {\n        var height = props.height;\n        var isZMax = reactData.isZMax;\n        var el = refElem.value;\n        var formWrapper = refFormWrapper.value;\n        var toolbarWrapper = refToolbarWrapper.value;\n        var topWrapper = refTopWrapper.value;\n        var bottomWrapper = refBottomWrapper.value;\n        var pagerWrapper = refPagerWrapper.value;\n        var parentPaddingSize = isZMax || height !== 'auto' ? 0 : getPaddingTopBottomSize(el.parentNode);\n        return parentPaddingSize + getPaddingTopBottomSize(el) + getOffsetHeight(formWrapper) + getOffsetHeight(toolbarWrapper) + getOffsetHeight(topWrapper) + getOffsetHeight(bottomWrapper) + getOffsetHeight(pagerWrapper);\n      },\n      getParentHeight: function () {\n        var el = refElem.value;\n\n        if (el) {\n          return (reactData.isZMax ? getDomNode().visibleHeight : XEUtils.toNumber(getComputedStyle(el.parentNode).height)) - gridPrivateMethods.getExcludeHeight();\n        }\n\n        return 0;\n      },\n      triggerToolbarBtnEvent: function (button, evnt) {\n        gridMethods.commitProxy(button, evnt);\n        gridMethods.dispatchEvent('toolbar-button-click', {\n          code: button.code,\n          button: button\n        }, evnt);\n      },\n      triggerToolbarTolEvent: function (tool, evnt) {\n        gridMethods.commitProxy(tool, evnt);\n        gridMethods.dispatchEvent('toolbar-tool-click', {\n          code: tool.code,\n          tool: tool,\n          $event: evnt\n        });\n      },\n      triggerZoomEvent: function (evnt) {\n        gridMethods.zoom();\n        gridMethods.dispatchEvent('zoom', {\n          type: reactData.isZMax ? 'max' : 'revert'\n        }, evnt);\n      }\n    };\n    Object.assign($xegrid, gridExtendTableMethods, gridMethods, gridPrivateMethods);\n    watch(function () {\n      return props.columns;\n    }, function (value) {\n      nextTick(function () {\n        return $xegrid.loadColumn(value || []);\n      });\n    });\n    watch(function () {\n      return props.toolbarConfig;\n    }, function (value) {\n      if (value) {\n        initToolbar();\n      }\n    });\n    watch(function () {\n      return props.proxyConfig;\n    }, function () {\n      initProxy();\n    });\n    watch(function () {\n      return props.pagerConfig;\n    }, function () {\n      initPages();\n    });\n\n    var handleGlobalKeydownEvent = function (evnt) {\n      var zoomOpts = computeZoomOpts.value;\n      var isEsc = hasEventKey(evnt, EVENT_KEYS.ESCAPE);\n\n      if (isEsc && reactData.isZMax && zoomOpts.escRestore !== false) {\n        gridPrivateMethods.triggerZoomEvent(evnt);\n      }\n    };\n\n    VXETable.hooks.forEach(function (options) {\n      var setupGrid = options.setupGrid;\n\n      if (setupGrid) {\n        var hookRest = setupGrid($xegrid);\n\n        if (hookRest && XEUtils.isObject(hookRest)) {\n          Object.assign($xegrid, hookRest);\n        }\n      }\n    });\n    onMounted(function () {\n      nextTick(function () {\n        var data = props.data,\n            columns = props.columns,\n            proxyConfig = props.proxyConfig;\n        var proxyOpts = computeProxyOpts.value;\n        var formOpts = computeFormOpts.value;\n\n        if (proxyConfig && (data || proxyOpts.form && formOpts.data)) {\n          errLog('vxe.error.errConflicts', ['grid.data', 'grid.proxy-config']);\n        }\n\n        if (columns && columns.length) {\n          $xegrid.loadColumn(columns);\n        }\n\n        initToolbar();\n        initPages();\n        initProxy();\n      });\n      GlobalEvent.on($xegrid, 'keydown', handleGlobalKeydownEvent);\n    });\n    onUnmounted(function () {\n      GlobalEvent.off($xegrid, 'keydown');\n    });\n\n    var renderVN = function () {\n      var _a;\n\n      var vSize = computeSize.value;\n      var styles = computeStyles.value;\n      return h('div', {\n        ref: refElem,\n        class: ['vxe-grid', (_a = {}, _a[\"size--\" + vSize] = vSize, _a['is--animat'] = !!props.animat, _a['is--round'] = props.round, _a['is--maximize'] = reactData.isZMax, _a['is--loading'] = props.loading || reactData.tableLoading, _a)],\n        style: styles\n      }, renderForms().concat(renderToolbars(), renderTops(), renderTables(), renderBottoms(), renderPagers()));\n    };\n\n    $xegrid.renderVN = renderVN;\n    provide('$xegrid', $xegrid);\n    return $xegrid;\n  },\n  render: function () {\n    return this.renderVN();\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vxe-table/es/grid/src/grid.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","__spreadArray","to","from","il","j","defineComponent","h","ref","computed","provide","getCurrentInstance","resolveComponent","reactive","onUnmounted","watch","nextTick","onMounted","XEUtils","getLastZIndex","nextZIndex","isEnableConf","getOffsetHeight","getPaddingTopBottomSize","getDomNode","errLog","GlobalConfig","VXETable","tableComponentProps","tableComponentEmits","useSize","GlobalEvent","hasEventKey","EVENT_KEYS","tableComponentPropKeys","keys","tableComponentMethodKeys","gridComponentEmits","name","props","columns","Array","pagerConfig","proxyConfig","toolbarConfig","formConfig","zoomConfig","size","type","String","default","grid","emits","setup","context","slots","emit","xID","uniqueId","instance","computeSize","reactData","tableLoading","proxyInited","isZMax","tableData","pendingRecords","filterData","formData","sortData","tZindex","tablePage","total","pageSize","currentPage","refElem","refTable","refForm","refToolbar","refPager","refFormWrapper","refToolbarWrapper","refTopWrapper","refBottomWrapper","refPagerWrapper","extendTableMethods","methodKeys","funcs","forEach","args","_i","$xetable","value","gridExtendTableMethods","computeProxyOpts","computeIsMsg","proxyOpts","message","computePagerOpts","computeFormOpts","computeToolbarOpts","computeZoomOpts","computeStyles","zIndex","computeTableExtendProps","rest","gridProps","key","refMaps","computeMaps","$xegrid","getRefMaps","getComputeMaps","gridMethods","handleRowClassName","params","rowClassName","clss","some","item","row","push","isFunction","handleActiveMethod","editConfig","activeMethod","findRowIndexOf","$grid","computeTableProps","seqConfig","loading","tableExtendProps","tableProps","maxHeight","height","data","seq","startIndex","initToolbar","$xetoolbar","connect","initPages","pagerOpts","triggerPendingEvent","code","isMsg","selectRecords","getCheckboxRecords","plus_1","minus_1","filter","concat","clearCheckboxRow","process","env","NODE_ENV","modal","id","content","i18n","status","getRespMsg","defaultMsg","_a","proxyProps","msg","get","handleDeleteRow","alertKey","callback","confirm","escClosable","then","Promise","resolve","pageChangeEvent","dispatchEvent","commitProxy","sortChangeEvent","computeSortOpts","sortOpts","remote","sortList","filterChangeEvent","computeFilterOpts","filterOpts","filterList","submitFormEvent","resetFormEvent","submitInvalidEvent","collapseEvent","recalculate","handleZoom","isMax","getFuncSlot","optSlots","slotKey","funcSlot","isString","renderForms","formOpts","restVNs","form","slotVNs","items","formSlots_1","inited","beforeItem_1","beforeItem","each","func","onSubmit","onReset","onSubmitInvalid","onCollapse","class","renderToolbars","toolbarOpts","toolbar","toolbarOptSlots","buttonsSlot","toolsSlot","toolbarSlots","buttons","tools","renderTops","top","tableCompEvents","camelCase","renderTables","tableOns","emptySlot","empty","sort","onSortChange","onFilterChange","renderBottoms","bottom","renderPagers","pager","pagerOptSlots","pagerSlots","leftSlot","rightSlot","left","right","onPageChange","initProxy","formData_1","field","itemRender","itemValue","defaultValue","isUndefined","autoLoad","evnt","$event","proxyTarget","editRules","beforeQuery","afterQuery","beforeDelete","afterDelete","beforeSave","afterSave","ajax","_b","button","matchObj","findTree","children","btnParams","insert","setActiveRow","removeCheckboxRow","importData","openImport","exportData","openExport","resetColumn","ajaxMethods","query","isInited","isReload","pageParams","defaultSort","isArray","map","property","order","getCheckedFilters","clearAll","getSortColumns","page","sorts","filters","options","applyArgs_1","catch","e","result","pageCount","Math","max","ceil","list","ajaxMethods_1","delete","selectRecords_1","removeRecords_1","isInsertByRow","body","removeRecords","applyArgs_2","remove","ajaxMethods_2","save","body_1","getRecordset","insertRecords_1","insertRecords","removeRecords_2","updateRecords_1","updateRecords","pendingRecords_1","applyArgs_3","restPromise","validate","errMap","btnMethod","commands","$table","zoom","revert","maximize","isMaximized","getFormItems","itemIndex","itemList","eachTree","getPendingRecords","getProxyInfo","loadColumn","column","reloadColumn","gridPrivateMethods","callSlot","slotFunc","getExcludeHeight","el","formWrapper","toolbarWrapper","topWrapper","bottomWrapper","pagerWrapper","parentPaddingSize","parentNode","getParentHeight","visibleHeight","toNumber","getComputedStyle","triggerToolbarBtnEvent","triggerToolbarTolEvent","tool","triggerZoomEvent","handleGlobalKeydownEvent","zoomOpts","isEsc","ESCAPE","escRestore","hooks","setupGrid","hookRest","isObject","on","off","renderVN","vSize","styles","animat","round","style","render"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { defineComponent, h, ref, computed, provide, getCurrentInstance, resolveComponent, reactive, onUnmounted, watch, nextTick, onMounted } from 'vue';\nimport XEUtils from 'xe-utils';\nimport { getLastZIndex, nextZIndex, isEnableConf } from '../../tools/utils';\nimport { getOffsetHeight, getPaddingTopBottomSize, getDomNode } from '../../tools/dom';\nimport { errLog } from '../../tools/log';\nimport GlobalConfig from '../../v-x-e-table/src/conf';\nimport { VXETable } from '../../v-x-e-table';\nimport tableComponentProps from '../../table/src/props';\nimport tableComponentEmits from '../../table/src/emits';\nimport { useSize } from '../../hooks/size';\nimport { GlobalEvent, hasEventKey, EVENT_KEYS } from '../../tools/event';\nvar tableComponentPropKeys = Object.keys(tableComponentProps);\nvar tableComponentMethodKeys = ['clearAll', 'syncData', 'updateData', 'loadData', 'reloadData', 'reloadRow', 'loadColumn', 'reloadColumn', 'getRowNode', 'getColumnNode', 'getRowIndex', 'getVTRowIndex', 'getVMRowIndex', 'getColumnIndex', 'getVTColumnIndex', 'getVMColumnIndex', 'createData', 'createRow', 'revertData', 'clearData', 'isInsertByRow', 'isUpdateByRow', 'getColumns', 'getColumnById', 'getColumnByField', 'getTableColumn', 'getData', 'getCheckboxRecords', 'getParentRow', 'getRowSeq', 'getRowById', 'getRowid', 'getTableData', 'hideColumn', 'showColumn', 'resetColumn', 'refreshColumn', 'refreshScroll', 'recalculate', 'closeTooltip', 'isAllCheckboxChecked', 'isAllCheckboxIndeterminate', 'getCheckboxIndeterminateRecords', 'setCheckboxRow', 'isCheckedByCheckboxRow', 'isIndeterminateByCheckboxRow', 'toggleCheckboxRow', 'setAllCheckboxRow', 'getRadioReserveRecord', 'clearRadioReserve', 'getCheckboxReserveRecords', 'clearCheckboxReserve', 'toggleAllCheckboxRow', 'clearCheckboxRow', 'setCurrentRow', 'isCheckedByRadioRow', 'setRadioRow', 'clearCurrentRow', 'clearRadioRow', 'getCurrentRecord', 'getRadioRecord', 'getCurrentColumn', 'setCurrentColumn', 'clearCurrentColumn', 'sort', 'clearSort', 'isSort', 'getSortColumns', 'closeFilter', 'isFilter', 'isRowExpandLoaded', 'clearRowExpandLoaded', 'reloadRowExpand', 'reloadRowExpand', 'toggleRowExpand', 'setAllRowExpand', 'setRowExpand', 'isExpandByRow', 'clearRowExpand', 'clearRowExpandReserve', 'getRowExpandRecords', 'getTreeExpandRecords', 'isTreeExpandLoaded', 'clearTreeExpandLoaded', 'reloadTreeExpand', 'reloadTreeChilds', 'toggleTreeExpand', 'setAllTreeExpand', 'setTreeExpand', 'isTreeExpandByRow', 'clearTreeExpand', 'clearTreeExpandReserve', 'getScroll', 'scrollTo', 'scrollToRow', 'scrollToColumn', 'clearScroll', 'updateFooter', 'updateStatus', 'setMergeCells', 'removeInsertRow', 'removeMergeCells', 'getMergeCells', 'clearMergeCells', 'setMergeFooterItems', 'removeMergeFooterItems', 'getMergeFooterItems', 'clearMergeFooterItems', 'openTooltip', 'focus', 'blur', 'connect'];\nvar gridComponentEmits = __spreadArray(__spreadArray([], tableComponentEmits), [\n    'page-change',\n    'form-submit',\n    'form-submit-invalid',\n    'form-reset',\n    'form-collapse',\n    'form-toggle-collapse',\n    'toolbar-button-click',\n    'toolbar-tool-click',\n    'zoom'\n]);\nexport default defineComponent({\n    name: 'VxeGrid',\n    props: __assign(__assign({}, tableComponentProps), { columns: Array, pagerConfig: Object, proxyConfig: Object, toolbarConfig: Object, formConfig: Object, zoomConfig: Object, size: { type: String, default: function () { return GlobalConfig.grid.size || GlobalConfig.size; } } }),\n    emits: gridComponentEmits,\n    setup: function (props, context) {\n        var slots = context.slots, emit = context.emit;\n        var xID = XEUtils.uniqueId();\n        var instance = getCurrentInstance();\n        var computeSize = useSize(props);\n        var reactData = reactive({\n            tableLoading: false,\n            proxyInited: false,\n            isZMax: false,\n            tableData: [],\n            pendingRecords: [],\n            filterData: [],\n            formData: {},\n            sortData: [],\n            tZindex: 0,\n            tablePage: {\n                total: 0,\n                pageSize: 10,\n                currentPage: 1\n            }\n        });\n        var refElem = ref();\n        var refTable = ref();\n        var refForm = ref();\n        var refToolbar = ref();\n        var refPager = ref();\n        var refFormWrapper = ref();\n        var refToolbarWrapper = ref();\n        var refTopWrapper = ref();\n        var refBottomWrapper = ref();\n        var refPagerWrapper = ref();\n        var extendTableMethods = function (methodKeys) {\n            var funcs = {};\n            methodKeys.forEach(function (name) {\n                funcs[name] = function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    var $xetable = refTable.value;\n                    return $xetable && $xetable[name].apply($xetable, args);\n                };\n            });\n            return funcs;\n        };\n        var gridExtendTableMethods = extendTableMethods(tableComponentMethodKeys);\n        tableComponentMethodKeys.forEach(function (name) {\n            gridExtendTableMethods[name] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                var $xetable = refTable.value;\n                return $xetable && $xetable[name].apply($xetable, args);\n            };\n        });\n        var computeProxyOpts = computed(function () {\n            return Object.assign({}, GlobalConfig.grid.proxyConfig, props.proxyConfig);\n        });\n        var computeIsMsg = computed(function () {\n            var proxyOpts = computeProxyOpts.value;\n            return proxyOpts.message !== false;\n        });\n        var computePagerOpts = computed(function () {\n            return Object.assign({}, GlobalConfig.grid.pagerConfig, props.pagerConfig);\n        });\n        var computeFormOpts = computed(function () {\n            return Object.assign({}, GlobalConfig.grid.formConfig, props.formConfig);\n        });\n        var computeToolbarOpts = computed(function () {\n            return Object.assign({}, GlobalConfig.grid.toolbarConfig, props.toolbarConfig);\n        });\n        var computeZoomOpts = computed(function () {\n            return Object.assign({}, GlobalConfig.grid.zoomConfig, props.zoomConfig);\n        });\n        var computeStyles = computed(function () {\n            return reactData.isZMax ? { zIndex: reactData.tZindex } : null;\n        });\n        var computeTableExtendProps = computed(function () {\n            var rest = {};\n            var gridProps = props;\n            tableComponentPropKeys.forEach(function (key) {\n                rest[key] = gridProps[key];\n            });\n            return rest;\n        });\n        var refMaps = {\n            refElem: refElem,\n            refTable: refTable,\n            refForm: refForm,\n            refToolbar: refToolbar,\n            refPager: refPager\n        };\n        var computeMaps = {\n            computeProxyOpts: computeProxyOpts,\n            computePagerOpts: computePagerOpts,\n            computeFormOpts: computeFormOpts,\n            computeToolbarOpts: computeToolbarOpts,\n            computeZoomOpts: computeZoomOpts\n        };\n        var $xegrid = {\n            xID: xID,\n            props: props,\n            context: context,\n            instance: instance,\n            reactData: reactData,\n            getRefMaps: function () { return refMaps; },\n            getComputeMaps: function () { return computeMaps; }\n        };\n        var gridMethods = {};\n        var handleRowClassName = function (params) {\n            var pendingRecords = reactData.pendingRecords;\n            var rowClassName = props.rowClassName;\n            var clss = [];\n            if (pendingRecords.some(function (item) { return item === params.row; })) {\n                clss.push('row--pending');\n            }\n            clss.push(rowClassName ? (XEUtils.isFunction(rowClassName) ? rowClassName(params) : rowClassName) : '');\n            return clss;\n        };\n        var handleActiveMethod = function (params) {\n            var editConfig = props.editConfig;\n            var pendingRecords = reactData.pendingRecords;\n            var $xetable = refTable.value;\n            var activeMethod = editConfig ? editConfig.activeMethod : null;\n            return $xetable.findRowIndexOf(pendingRecords, params.row) === -1 && (!activeMethod || activeMethod(__assign(__assign({}, params), { $grid: $xegrid })));\n        };\n        var computeTableProps = computed(function () {\n            var seqConfig = props.seqConfig, pagerConfig = props.pagerConfig, loading = props.loading, editConfig = props.editConfig, proxyConfig = props.proxyConfig;\n            var isZMax = reactData.isZMax, tableLoading = reactData.tableLoading, tablePage = reactData.tablePage, tableData = reactData.tableData;\n            var tableExtendProps = computeTableExtendProps.value;\n            var proxyOpts = computeProxyOpts.value;\n            var tableProps = Object.assign({}, tableExtendProps);\n            if (isZMax) {\n                if (tableExtendProps.maxHeight) {\n                    tableProps.maxHeight = 'auto';\n                }\n                else {\n                    tableProps.height = 'auto';\n                }\n            }\n            if (proxyConfig) {\n                tableProps.loading = loading || tableLoading;\n                tableProps.data = tableData;\n                tableProps.rowClassName = handleRowClassName;\n                if (proxyOpts.seq && isEnableConf(pagerConfig)) {\n                    tableProps.seqConfig = Object.assign({}, seqConfig, { startIndex: (tablePage.currentPage - 1) * tablePage.pageSize });\n                }\n            }\n            if (editConfig) {\n                tableProps.editConfig = Object.assign({}, editConfig, { activeMethod: handleActiveMethod });\n            }\n            return tableProps;\n        });\n        var initToolbar = function () {\n            nextTick(function () {\n                var $xetable = refTable.value;\n                var $xetoolbar = refToolbar.value;\n                if ($xetable && $xetoolbar) {\n                    $xetable.connect($xetoolbar);\n                }\n            });\n        };\n        var initPages = function () {\n            var pagerConfig = props.pagerConfig;\n            var tablePage = reactData.tablePage;\n            var pagerOpts = computePagerOpts.value;\n            var currentPage = pagerOpts.currentPage, pageSize = pagerOpts.pageSize;\n            if (pagerConfig) {\n                if (currentPage) {\n                    tablePage.currentPage = currentPage;\n                }\n                if (pageSize) {\n                    tablePage.pageSize = pageSize;\n                }\n            }\n        };\n        var triggerPendingEvent = function (code) {\n            var pendingRecords = reactData.pendingRecords;\n            var isMsg = computeIsMsg.value;\n            var $xetable = refTable.value;\n            var selectRecords = $xetable.getCheckboxRecords();\n            if (selectRecords.length) {\n                var plus_1 = [];\n                var minus_1 = [];\n                selectRecords.forEach(function (data) {\n                    if (pendingRecords.some(function (item) { return data === item; })) {\n                        minus_1.push(data);\n                    }\n                    else {\n                        plus_1.push(data);\n                    }\n                });\n                if (minus_1.length) {\n                    reactData.pendingRecords = pendingRecords.filter(function (item) { return $xetable.findRowIndexOf(minus_1, item) === -1; }).concat(plus_1);\n                }\n                else if (plus_1.length) {\n                    reactData.pendingRecords = pendingRecords.concat(plus_1);\n                }\n                gridExtendTableMethods.clearCheckboxRow();\n            }\n            else {\n                if (isMsg) {\n                    // 检测弹窗模块\n                    if (process.env.NODE_ENV === 'development') {\n                        if (!VXETable.modal) {\n                            errLog('vxe.error.reqModule', ['Modal']);\n                        }\n                    }\n                    VXETable.modal.message({ id: code, content: GlobalConfig.i18n('vxe.grid.selectOneRecord'), status: 'warning' });\n                }\n            }\n        };\n        var getRespMsg = function (rest, defaultMsg) {\n            var proxyOpts = computeProxyOpts.value;\n            var _a = proxyOpts.props, proxyProps = _a === void 0 ? {} : _a;\n            var msg;\n            if (rest && proxyProps.message) {\n                msg = XEUtils.get(rest, proxyProps.message);\n            }\n            return msg || GlobalConfig.i18n(defaultMsg);\n        };\n        var handleDeleteRow = function (code, alertKey, callback) {\n            var isMsg = computeIsMsg.value;\n            var selectRecords = gridExtendTableMethods.getCheckboxRecords();\n            if (isMsg) {\n                if (selectRecords.length) {\n                    return VXETable.modal.confirm({ id: \"cfm_\" + code, content: GlobalConfig.i18n(alertKey), escClosable: true }).then(function (type) {\n                        if (type === 'confirm') {\n                            callback();\n                        }\n                    });\n                }\n                else {\n                    // 检测弹窗模块\n                    if (process.env.NODE_ENV === 'development') {\n                        if (!VXETable.modal) {\n                            errLog('vxe.error.reqModule', ['Modal']);\n                        }\n                    }\n                    VXETable.modal.message({ id: \"msg_\" + code, content: GlobalConfig.i18n('vxe.grid.selectOneRecord'), status: 'warning' });\n                }\n            }\n            else {\n                if (selectRecords.length) {\n                    callback();\n                }\n            }\n            return Promise.resolve();\n        };\n        var pageChangeEvent = function (params) {\n            var proxyConfig = props.proxyConfig;\n            var tablePage = reactData.tablePage;\n            var currentPage = params.currentPage, pageSize = params.pageSize;\n            tablePage.currentPage = currentPage;\n            tablePage.pageSize = pageSize;\n            gridMethods.dispatchEvent('page-change', params);\n            if (proxyConfig) {\n                gridMethods.commitProxy('query');\n            }\n        };\n        var sortChangeEvent = function (params) {\n            var $xetable = refTable.value;\n            var proxyConfig = props.proxyConfig;\n            var computeSortOpts = $xetable.getComputeMaps().computeSortOpts;\n            var sortOpts = computeSortOpts.value;\n            // 如果是服务端排序\n            if (sortOpts.remote) {\n                reactData.sortData = params.sortList;\n                if (proxyConfig) {\n                    reactData.tablePage.currentPage = 1;\n                    gridMethods.commitProxy('query');\n                }\n            }\n            gridMethods.dispatchEvent('sort-change', params);\n        };\n        var filterChangeEvent = function (params) {\n            var $xetable = refTable.value;\n            var proxyConfig = props.proxyConfig;\n            var computeFilterOpts = $xetable.getComputeMaps().computeFilterOpts;\n            var filterOpts = computeFilterOpts.value;\n            // 如果是服务端过滤\n            if (filterOpts.remote) {\n                reactData.filterData = params.filterList;\n                if (proxyConfig) {\n                    reactData.tablePage.currentPage = 1;\n                    gridMethods.commitProxy('query');\n                }\n            }\n            gridMethods.dispatchEvent('filter-change', params);\n        };\n        var submitFormEvent = function (params) {\n            var proxyConfig = props.proxyConfig;\n            if (proxyConfig) {\n                gridMethods.commitProxy('reload');\n            }\n            gridMethods.dispatchEvent('form-submit', params);\n        };\n        var resetFormEvent = function (params) {\n            var proxyConfig = props.proxyConfig;\n            if (proxyConfig) {\n                gridMethods.commitProxy('reload');\n            }\n            gridMethods.dispatchEvent('form-reset', params);\n        };\n        var submitInvalidEvent = function (params) {\n            gridMethods.dispatchEvent('form-submit-invalid', params);\n        };\n        var collapseEvent = function (params) {\n            nextTick(function () { return gridExtendTableMethods.recalculate(true); });\n            gridMethods.dispatchEvent('form-toggle-collapse', params);\n            gridMethods.dispatchEvent('form-collapse', params);\n        };\n        var handleZoom = function (isMax) {\n            var isZMax = reactData.isZMax;\n            if (isMax ? !isZMax : isZMax) {\n                reactData.isZMax = !isZMax;\n                if (reactData.tZindex < getLastZIndex()) {\n                    reactData.tZindex = nextZIndex();\n                }\n            }\n            return nextTick().then(function () { return gridExtendTableMethods.recalculate(true); }).then(function () { return reactData.isZMax; });\n        };\n        var getFuncSlot = function (optSlots, slotKey) {\n            var funcSlot = optSlots[slotKey];\n            if (funcSlot) {\n                if (XEUtils.isString(funcSlot)) {\n                    if (slots[funcSlot]) {\n                        return slots[funcSlot];\n                    }\n                    else {\n                        if (process.env.NODE_ENV === 'development') {\n                            errLog('vxe.error.notSlot', [funcSlot]);\n                        }\n                    }\n                }\n                else {\n                    return funcSlot;\n                }\n            }\n            return null;\n        };\n        /**\n         * 渲染表单\n         */\n        var renderForms = function () {\n            var formConfig = props.formConfig, proxyConfig = props.proxyConfig;\n            var formData = reactData.formData;\n            var proxyOpts = computeProxyOpts.value;\n            var formOpts = computeFormOpts.value;\n            var restVNs = [];\n            if (isEnableConf(formConfig) || slots.form) {\n                var slotVNs = [];\n                if (slots.form) {\n                    slotVNs = slots.form({ $grid: $xegrid });\n                }\n                else {\n                    if (formOpts.items) {\n                        var formSlots_1 = {};\n                        if (!formOpts.inited) {\n                            formOpts.inited = true;\n                            var beforeItem_1 = proxyOpts.beforeItem;\n                            if (proxyOpts && beforeItem_1) {\n                                formOpts.items.forEach(function (item) {\n                                    beforeItem_1({ $grid: $xegrid, item: item });\n                                });\n                            }\n                        }\n                        // 处理插槽\n                        formOpts.items.forEach(function (item) {\n                            XEUtils.each(item.slots, function (func) {\n                                if (!XEUtils.isFunction(func)) {\n                                    if (slots[func]) {\n                                        formSlots_1[func] = slots[func];\n                                    }\n                                }\n                            });\n                        });\n                        slotVNs.push(h(resolveComponent('vxe-form'), __assign(__assign({ ref: refForm }, Object.assign({}, formOpts, {\n                            data: proxyConfig && proxyOpts.form ? formData : formOpts.data\n                        })), { onSubmit: submitFormEvent, onReset: resetFormEvent, onSubmitInvalid: submitInvalidEvent, onCollapse: collapseEvent }), formSlots_1));\n                    }\n                }\n                restVNs.push(h('div', {\n                    ref: refFormWrapper,\n                    class: 'vxe-grid--form-wrapper'\n                }, slotVNs));\n            }\n            return restVNs;\n        };\n        /**\n         * 渲染工具栏\n         */\n        var renderToolbars = function () {\n            var toolbarConfig = props.toolbarConfig;\n            var toolbarOpts = computeToolbarOpts.value;\n            var restVNs = [];\n            if (isEnableConf(toolbarConfig) || slots.toolbar) {\n                var slotVNs = [];\n                if (slots.toolbar) {\n                    slotVNs = slots.toolbar({ $grid: $xegrid });\n                }\n                else {\n                    var toolbarOptSlots = toolbarOpts.slots;\n                    var buttonsSlot = void 0;\n                    var toolsSlot = void 0;\n                    var toolbarSlots = {};\n                    if (toolbarOptSlots) {\n                        buttonsSlot = getFuncSlot(toolbarOptSlots, 'buttons');\n                        toolsSlot = getFuncSlot(toolbarOptSlots, 'tools');\n                        if (buttonsSlot) {\n                            toolbarSlots.buttons = buttonsSlot;\n                        }\n                        if (toolsSlot) {\n                            toolbarSlots.tools = toolsSlot;\n                        }\n                    }\n                    slotVNs.push(h(resolveComponent('vxe-toolbar'), __assign({ ref: refToolbar }, toolbarOpts), toolbarSlots));\n                }\n                restVNs.push(h('div', {\n                    ref: refToolbarWrapper,\n                    class: 'vxe-grid--toolbar-wrapper'\n                }, slotVNs));\n            }\n            return restVNs;\n        };\n        /**\n         * 渲染表格顶部区域\n         */\n        var renderTops = function () {\n            if (slots.top) {\n                return [\n                    h('div', {\n                        ref: refTopWrapper,\n                        class: 'vxe-grid--top-wrapper'\n                    }, slots.top({ $grid: $xegrid }))\n                ];\n            }\n            return [];\n        };\n        var tableCompEvents = {};\n        tableComponentEmits.forEach(function (name) {\n            var type = XEUtils.camelCase(\"on-\" + name);\n            tableCompEvents[type] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return emit.apply(void 0, __spreadArray([name], args));\n            };\n        });\n        /**\n         * 渲染表格\n         */\n        var renderTables = function () {\n            var proxyConfig = props.proxyConfig;\n            var tableProps = computeTableProps.value;\n            var proxyOpts = computeProxyOpts.value;\n            var tableOns = Object.assign({}, tableCompEvents);\n            var emptySlot = slots.empty;\n            if (proxyConfig) {\n                if (proxyOpts.sort) {\n                    tableOns.onSortChange = sortChangeEvent;\n                }\n                if (proxyOpts.filter) {\n                    tableOns.onFilterChange = filterChangeEvent;\n                }\n            }\n            return [\n                h(resolveComponent('vxe-table'), __assign(__assign({ ref: refTable }, tableProps), tableOns), emptySlot ? {\n                    empty: function () { return emptySlot({}); }\n                } : {})\n            ];\n        };\n        /**\n         * 渲染表格底部区域\n         */\n        var renderBottoms = function () {\n            if (slots.bottom) {\n                return [\n                    h('div', {\n                        ref: refBottomWrapper,\n                        class: 'vxe-grid--bottom-wrapper'\n                    }, slots.bottom({ $grid: $xegrid }))\n                ];\n            }\n            return [];\n        };\n        /**\n         * 渲染分页\n         */\n        var renderPagers = function () {\n            var pagerConfig = props.pagerConfig;\n            var pagerOpts = computePagerOpts.value;\n            var restVNs = [];\n            if (isEnableConf(pagerConfig) || slots.pager) {\n                var slotVNs = [];\n                if (slots.pager) {\n                    slotVNs = slots.pager({ $grid: $xegrid });\n                }\n                else {\n                    var pagerOptSlots = pagerOpts.slots;\n                    var pagerSlots = {};\n                    var leftSlot = void 0;\n                    var rightSlot = void 0;\n                    if (pagerOptSlots) {\n                        leftSlot = getFuncSlot(pagerOptSlots, 'left');\n                        rightSlot = getFuncSlot(pagerOptSlots, 'right');\n                        if (leftSlot) {\n                            pagerSlots.left = leftSlot;\n                        }\n                        if (rightSlot) {\n                            pagerSlots.right = rightSlot;\n                        }\n                    }\n                    slotVNs.push(h(resolveComponent('vxe-pager'), __assign(__assign(__assign({ ref: refPager }, pagerOpts), (props.proxyConfig ? reactData.tablePage : {})), { onPageChange: pageChangeEvent }), pagerSlots));\n                }\n                restVNs.push(h('div', {\n                    ref: refPagerWrapper,\n                    class: 'vxe-grid--pager-wrapper'\n                }, slotVNs));\n            }\n            return restVNs;\n        };\n        var initProxy = function () {\n            var proxyConfig = props.proxyConfig, formConfig = props.formConfig;\n            var proxyInited = reactData.proxyInited;\n            var proxyOpts = computeProxyOpts.value;\n            var formOpts = computeFormOpts.value;\n            if (proxyConfig) {\n                if (isEnableConf(formConfig) && proxyOpts.form && formOpts.items) {\n                    var formData_1 = {};\n                    formOpts.items.forEach(function (item) {\n                        var field = item.field, itemRender = item.itemRender;\n                        if (field) {\n                            var itemValue = null;\n                            if (itemRender) {\n                                var defaultValue = itemRender.defaultValue;\n                                if (XEUtils.isFunction(defaultValue)) {\n                                    itemValue = defaultValue({ item: item });\n                                }\n                                else if (!XEUtils.isUndefined(defaultValue)) {\n                                    itemValue = defaultValue;\n                                }\n                            }\n                            formData_1[field] = itemValue;\n                        }\n                    });\n                    reactData.formData = formData_1;\n                }\n                if (!proxyInited && proxyOpts.autoLoad !== false) {\n                    reactData.proxyInited = true;\n                    nextTick(function () { return gridMethods.commitProxy('_init'); });\n                }\n            }\n        };\n        gridMethods = {\n            dispatchEvent: function (type, params, evnt) {\n                emit(type, Object.assign({ $grid: $xegrid, $event: evnt }, params));\n            },\n            /**\n             * 提交指令，支持 code 或 button\n             * @param {String/Object} code 字符串或对象\n             */\n            commitProxy: function (proxyTarget) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                var toolbarConfig = props.toolbarConfig, pagerConfig = props.pagerConfig, editRules = props.editRules;\n                var tablePage = reactData.tablePage, formData = reactData.formData;\n                var isMsg = computeIsMsg.value;\n                var proxyOpts = computeProxyOpts.value;\n                var toolbarOpts = computeToolbarOpts.value;\n                var beforeQuery = proxyOpts.beforeQuery, afterQuery = proxyOpts.afterQuery, beforeDelete = proxyOpts.beforeDelete, afterDelete = proxyOpts.afterDelete, beforeSave = proxyOpts.beforeSave, afterSave = proxyOpts.afterSave, _a = proxyOpts.ajax, ajax = _a === void 0 ? {} : _a, _b = proxyOpts.props, proxyProps = _b === void 0 ? {} : _b;\n                var $xetable = refTable.value;\n                var button = null;\n                var code = null;\n                if (XEUtils.isString(proxyTarget)) {\n                    var buttons = toolbarOpts.buttons;\n                    var matchObj = toolbarConfig && buttons ? XEUtils.findTree(buttons, function (item) { return item.code === proxyTarget; }, { children: 'dropdowns' }) : null;\n                    button = matchObj ? matchObj.item : null;\n                    code = proxyTarget;\n                }\n                else {\n                    button = proxyTarget;\n                    code = button.code;\n                }\n                var btnParams = button ? button.params : null;\n                switch (code) {\n                    case 'insert':\n                        $xetable.insert({});\n                        break;\n                    case 'insert_actived':\n                        $xetable.insert({}).then(function (_a) {\n                            var row = _a.row;\n                            return $xetable.setActiveRow(row);\n                        });\n                        break;\n                    case 'mark_cancel':\n                        triggerPendingEvent(code);\n                        break;\n                    case 'remove':\n                        return handleDeleteRow(code, 'vxe.grid.removeSelectRecord', function () { return $xetable.removeCheckboxRow(); });\n                    case 'import':\n                        $xetable.importData(btnParams);\n                        break;\n                    case 'open_import':\n                        $xetable.openImport(btnParams);\n                        break;\n                    case 'export':\n                        $xetable.exportData(btnParams);\n                        break;\n                    case 'open_export':\n                        $xetable.openExport(btnParams);\n                        break;\n                    case 'reset_custom':\n                        $xetable.resetColumn(true);\n                        break;\n                    case '_init':\n                    case 'reload':\n                    case 'query': {\n                        var ajaxMethods = ajax.query;\n                        if (ajaxMethods) {\n                            var isInited = code === '_init';\n                            var isReload = code === 'reload';\n                            var sortList = [];\n                            var filterList = [];\n                            var pageParams = {};\n                            if (pagerConfig) {\n                                if (isInited || isReload) {\n                                    tablePage.currentPage = 1;\n                                }\n                                if (isEnableConf(pagerConfig)) {\n                                    pageParams = __assign({}, tablePage);\n                                }\n                            }\n                            if (isInited) {\n                                var computeSortOpts = $xetable.getComputeMaps().computeSortOpts;\n                                var sortOpts = computeSortOpts.value;\n                                var defaultSort = sortOpts.defaultSort;\n                                // 如果使用默认排序\n                                if (defaultSort) {\n                                    if (!XEUtils.isArray(defaultSort)) {\n                                        defaultSort = [defaultSort];\n                                    }\n                                    sortList = defaultSort.map(function (item) {\n                                        return {\n                                            field: item.field,\n                                            property: item.field,\n                                            order: item.order\n                                        };\n                                    });\n                                }\n                                filterList = $xetable.getCheckedFilters();\n                            }\n                            else {\n                                if (isReload) {\n                                    reactData.pendingRecords = [];\n                                    $xetable.clearAll();\n                                }\n                                else {\n                                    sortList = $xetable.getSortColumns();\n                                    filterList = $xetable.getCheckedFilters();\n                                }\n                            }\n                            var params = {\n                                code: code,\n                                button: button,\n                                $grid: $xegrid,\n                                page: pageParams,\n                                sort: sortList.length ? sortList[0] : {},\n                                sorts: sortList,\n                                filters: filterList,\n                                form: formData,\n                                options: ajaxMethods\n                            };\n                            reactData.sortData = sortList;\n                            reactData.filterData = filterList;\n                            reactData.tableLoading = true;\n                            var applyArgs_1 = [params].concat(args);\n                            return Promise.resolve((beforeQuery || ajaxMethods).apply(void 0, applyArgs_1))\n                                .catch(function (e) { return e; })\n                                .then(function (rest) {\n                                reactData.tableLoading = false;\n                                if (rest) {\n                                    if (isEnableConf(pagerConfig)) {\n                                        var total = XEUtils.get(rest, proxyProps.total || 'page.total') || 0;\n                                        tablePage.total = total;\n                                        reactData.tableData = XEUtils.get(rest, proxyProps.result || 'result') || [];\n                                        // 检验当前页码，不能超出当前最大页数\n                                        var pageCount = Math.max(Math.ceil(total / tablePage.pageSize), 1);\n                                        if (tablePage.currentPage > pageCount) {\n                                            tablePage.currentPage = pageCount;\n                                        }\n                                    }\n                                    else {\n                                        reactData.tableData = (proxyProps.list ? XEUtils.get(rest, proxyProps.list) : rest) || [];\n                                    }\n                                }\n                                else {\n                                    reactData.tableData = [];\n                                }\n                                if (afterQuery) {\n                                    afterQuery.apply(void 0, applyArgs_1);\n                                }\n                            });\n                        }\n                        else {\n                            if (process.env.NODE_ENV === 'development') {\n                                errLog('vxe.error.notFunc', ['proxy-config.ajax.query']);\n                            }\n                        }\n                        break;\n                    }\n                    case 'delete': {\n                        var ajaxMethods_1 = ajax.delete;\n                        if (ajaxMethods_1) {\n                            var selectRecords_1 = gridExtendTableMethods.getCheckboxRecords();\n                            var removeRecords_1 = selectRecords_1.filter(function (row) { return !$xetable.isInsertByRow(row); });\n                            var body = { removeRecords: removeRecords_1 };\n                            var applyArgs_2 = [{ $grid: $xegrid, code: code, button: button, body: body, options: ajaxMethods_1 }].concat(args);\n                            if (selectRecords_1.length) {\n                                return handleDeleteRow(code, 'vxe.grid.deleteSelectRecord', function () {\n                                    if (!removeRecords_1.length) {\n                                        return $xetable.remove(selectRecords_1);\n                                    }\n                                    reactData.tableLoading = true;\n                                    return Promise.resolve((beforeDelete || ajaxMethods_1).apply(void 0, applyArgs_2))\n                                        .then(function (rest) {\n                                        reactData.tableLoading = false;\n                                        reactData.pendingRecords = reactData.pendingRecords.filter(function (row) { return $xetable.findRowIndexOf(removeRecords_1, row) === -1; });\n                                        if (isMsg) {\n                                            // 检测弹窗模块\n                                            if (process.env.NODE_ENV === 'development') {\n                                                if (!VXETable.modal) {\n                                                    errLog('vxe.error.reqModule', ['Modal']);\n                                                }\n                                            }\n                                            VXETable.modal.message({ content: getRespMsg(rest, 'vxe.grid.delSuccess'), status: 'success' });\n                                        }\n                                        if (afterDelete) {\n                                            afterDelete.apply(void 0, applyArgs_2);\n                                        }\n                                        else {\n                                            gridMethods.commitProxy('query');\n                                        }\n                                    })\n                                        .catch(function (rest) {\n                                        reactData.tableLoading = false;\n                                        if (isMsg) {\n                                            if (process.env.NODE_ENV === 'development') {\n                                                if (!VXETable.modal.message) {\n                                                    errLog('vxe.error.reqModule', ['Modal']);\n                                                }\n                                            }\n                                            VXETable.modal.message({ id: code, content: getRespMsg(rest, 'vxe.grid.operError'), status: 'error' });\n                                        }\n                                    });\n                                });\n                            }\n                            else {\n                                if (isMsg) {\n                                    // 检测弹窗模块\n                                    if (process.env.NODE_ENV === 'development') {\n                                        if (!VXETable.modal) {\n                                            errLog('vxe.error.reqModule', ['Modal']);\n                                        }\n                                    }\n                                    VXETable.modal.message({ id: code, content: GlobalConfig.i18n('vxe.grid.selectOneRecord'), status: 'warning' });\n                                }\n                            }\n                        }\n                        else {\n                            if (process.env.NODE_ENV === 'development') {\n                                errLog('vxe.error.notFunc', ['proxy-config.ajax.delete']);\n                            }\n                        }\n                        break;\n                    }\n                    case 'save': {\n                        var ajaxMethods_2 = ajax.save;\n                        if (ajaxMethods_2) {\n                            var body_1 = Object.assign({ pendingRecords: reactData.pendingRecords }, $xetable.getRecordset());\n                            var insertRecords_1 = body_1.insertRecords, removeRecords_2 = body_1.removeRecords, updateRecords_1 = body_1.updateRecords, pendingRecords_1 = body_1.pendingRecords;\n                            var applyArgs_3 = [{ $grid: $xegrid, code: code, button: button, body: body_1, options: ajaxMethods_2 }].concat(args);\n                            // 排除掉新增且标记为删除的数据\n                            if (insertRecords_1.length) {\n                                body_1.pendingRecords = pendingRecords_1.filter(function (row) { return $xetable.findRowIndexOf(insertRecords_1, row) === -1; });\n                            }\n                            // 排除已标记为删除的数据\n                            if (pendingRecords_1.length) {\n                                body_1.insertRecords = insertRecords_1.filter(function (row) { return $xetable.findRowIndexOf(pendingRecords_1, row) === -1; });\n                            }\n                            var restPromise = Promise.resolve();\n                            if (editRules) {\n                                // 只校验新增和修改的数据\n                                restPromise = $xetable.validate(body_1.insertRecords.concat(updateRecords_1));\n                            }\n                            return restPromise.then(function (errMap) {\n                                if (errMap) {\n                                    // 如果校验不通过\n                                    return;\n                                }\n                                if (body_1.insertRecords.length || removeRecords_2.length || updateRecords_1.length || body_1.pendingRecords.length) {\n                                    reactData.tableLoading = true;\n                                    return Promise.resolve((beforeSave || ajaxMethods_2).apply(void 0, applyArgs_3))\n                                        .then(function (rest) {\n                                        reactData.tableLoading = false;\n                                        reactData.pendingRecords = [];\n                                        if (isMsg) {\n                                            // 检测弹窗模块\n                                            if (process.env.NODE_ENV === 'development') {\n                                                if (!VXETable.modal) {\n                                                    errLog('vxe.error.reqModule', ['Modal']);\n                                                }\n                                            }\n                                            VXETable.modal.message({ content: getRespMsg(rest, 'vxe.grid.saveSuccess'), status: 'success' });\n                                        }\n                                        if (afterSave) {\n                                            afterSave.apply(void 0, applyArgs_3);\n                                        }\n                                        else {\n                                            gridMethods.commitProxy('query');\n                                        }\n                                    })\n                                        .catch(function (rest) {\n                                        reactData.tableLoading = false;\n                                        if (isMsg) {\n                                            // 检测弹窗模块\n                                            if (process.env.NODE_ENV === 'development') {\n                                                if (!VXETable.modal) {\n                                                    errLog('vxe.error.reqModule', ['Modal']);\n                                                }\n                                            }\n                                            VXETable.modal.message({ id: code, content: getRespMsg(rest, 'vxe.grid.operError'), status: 'error' });\n                                        }\n                                    });\n                                }\n                                else {\n                                    if (isMsg) {\n                                        // 检测弹窗模块\n                                        if (process.env.NODE_ENV === 'development') {\n                                            if (!VXETable.modal) {\n                                                errLog('vxe.error.reqModule', ['Modal']);\n                                            }\n                                        }\n                                        VXETable.modal.message({ id: code, content: GlobalConfig.i18n('vxe.grid.dataUnchanged'), status: 'info' });\n                                    }\n                                }\n                            });\n                        }\n                        else {\n                            if (process.env.NODE_ENV === 'development') {\n                                errLog('vxe.error.notFunc', ['proxy-config.ajax.save']);\n                            }\n                        }\n                        break;\n                    }\n                    default: {\n                        var btnMethod = VXETable.commands.get(code);\n                        if (btnMethod) {\n                            btnMethod.apply(void 0, __spreadArray([{ code: code, button: button, $grid: $xegrid, $table: $xetable }], args));\n                        }\n                    }\n                }\n                return nextTick();\n            },\n            zoom: function () {\n                if (reactData.isZMax) {\n                    return gridMethods.revert();\n                }\n                return gridMethods.maximize();\n            },\n            isMaximized: function () {\n                return reactData.isZMax;\n            },\n            maximize: function () {\n                return handleZoom(true);\n            },\n            revert: function () {\n                return handleZoom();\n            },\n            getFormItems: function (itemIndex) {\n                var formOpts = computeFormOpts.value;\n                var formConfig = props.formConfig;\n                var items = formOpts.items;\n                var itemList = [];\n                XEUtils.eachTree(isEnableConf(formConfig) && items ? items : [], function (item) {\n                    itemList.push(item);\n                }, { children: 'children' });\n                return XEUtils.isUndefined(itemIndex) ? itemList : itemList[itemIndex];\n            },\n            getPendingRecords: function () {\n                return reactData.pendingRecords;\n            },\n            getProxyInfo: function () {\n                if (props.proxyConfig) {\n                    var sortData = reactData.sortData;\n                    return {\n                        data: reactData.tableData,\n                        filter: reactData.filterData,\n                        form: reactData.formData,\n                        sort: sortData.length ? sortData[0] : {},\n                        sorts: sortData,\n                        pager: reactData.tablePage,\n                        pendingRecords: reactData.pendingRecords\n                    };\n                }\n                return null;\n            }\n        };\n        // 检查插槽\n        if (process.env.NODE_ENV === 'development') {\n            gridMethods.loadColumn = function (columns) {\n                var $xetable = refTable.value;\n                XEUtils.eachTree(columns, function (column) {\n                    if (column.slots) {\n                        XEUtils.each(column.slots, function (func) {\n                            if (!XEUtils.isFunction(func)) {\n                                if (!slots[func]) {\n                                    errLog('vxe.error.notSlot', [func]);\n                                }\n                            }\n                        });\n                    }\n                });\n                return $xetable.loadColumn(columns);\n            };\n            gridMethods.reloadColumn = function (columns) {\n                gridExtendTableMethods.clearAll();\n                return gridMethods.loadColumn(columns);\n            };\n        }\n        var gridPrivateMethods = {\n            extendTableMethods: extendTableMethods,\n            callSlot: function (slotFunc, params) {\n                if (slotFunc) {\n                    if (XEUtils.isString(slotFunc)) {\n                        slotFunc = slots[slotFunc] || null;\n                    }\n                    if (XEUtils.isFunction(slotFunc)) {\n                        return slotFunc(params);\n                    }\n                }\n                return [];\n            },\n            /**\n             * 获取需要排除的高度\n             */\n            getExcludeHeight: function () {\n                var height = props.height;\n                var isZMax = reactData.isZMax;\n                var el = refElem.value;\n                var formWrapper = refFormWrapper.value;\n                var toolbarWrapper = refToolbarWrapper.value;\n                var topWrapper = refTopWrapper.value;\n                var bottomWrapper = refBottomWrapper.value;\n                var pagerWrapper = refPagerWrapper.value;\n                var parentPaddingSize = isZMax || height !== 'auto' ? 0 : getPaddingTopBottomSize(el.parentNode);\n                return parentPaddingSize + getPaddingTopBottomSize(el) + getOffsetHeight(formWrapper) + getOffsetHeight(toolbarWrapper) + getOffsetHeight(topWrapper) + getOffsetHeight(bottomWrapper) + getOffsetHeight(pagerWrapper);\n            },\n            getParentHeight: function () {\n                var el = refElem.value;\n                if (el) {\n                    return (reactData.isZMax ? getDomNode().visibleHeight : XEUtils.toNumber(getComputedStyle(el.parentNode).height)) - gridPrivateMethods.getExcludeHeight();\n                }\n                return 0;\n            },\n            triggerToolbarBtnEvent: function (button, evnt) {\n                gridMethods.commitProxy(button, evnt);\n                gridMethods.dispatchEvent('toolbar-button-click', { code: button.code, button: button }, evnt);\n            },\n            triggerToolbarTolEvent: function (tool, evnt) {\n                gridMethods.commitProxy(tool, evnt);\n                gridMethods.dispatchEvent('toolbar-tool-click', { code: tool.code, tool: tool, $event: evnt });\n            },\n            triggerZoomEvent: function (evnt) {\n                gridMethods.zoom();\n                gridMethods.dispatchEvent('zoom', { type: reactData.isZMax ? 'max' : 'revert' }, evnt);\n            }\n        };\n        Object.assign($xegrid, gridExtendTableMethods, gridMethods, gridPrivateMethods);\n        watch(function () { return props.columns; }, function (value) {\n            nextTick(function () { return $xegrid.loadColumn(value || []); });\n        });\n        watch(function () { return props.toolbarConfig; }, function (value) {\n            if (value) {\n                initToolbar();\n            }\n        });\n        watch(function () { return props.proxyConfig; }, function () {\n            initProxy();\n        });\n        watch(function () { return props.pagerConfig; }, function () {\n            initPages();\n        });\n        var handleGlobalKeydownEvent = function (evnt) {\n            var zoomOpts = computeZoomOpts.value;\n            var isEsc = hasEventKey(evnt, EVENT_KEYS.ESCAPE);\n            if (isEsc && reactData.isZMax && zoomOpts.escRestore !== false) {\n                gridPrivateMethods.triggerZoomEvent(evnt);\n            }\n        };\n        VXETable.hooks.forEach(function (options) {\n            var setupGrid = options.setupGrid;\n            if (setupGrid) {\n                var hookRest = setupGrid($xegrid);\n                if (hookRest && XEUtils.isObject(hookRest)) {\n                    Object.assign($xegrid, hookRest);\n                }\n            }\n        });\n        onMounted(function () {\n            nextTick(function () {\n                var data = props.data, columns = props.columns, proxyConfig = props.proxyConfig;\n                var proxyOpts = computeProxyOpts.value;\n                var formOpts = computeFormOpts.value;\n                if (proxyConfig && (data || (proxyOpts.form && formOpts.data))) {\n                    errLog('vxe.error.errConflicts', ['grid.data', 'grid.proxy-config']);\n                }\n                if (columns && columns.length) {\n                    $xegrid.loadColumn(columns);\n                }\n                initToolbar();\n                initPages();\n                initProxy();\n            });\n            GlobalEvent.on($xegrid, 'keydown', handleGlobalKeydownEvent);\n        });\n        onUnmounted(function () {\n            GlobalEvent.off($xegrid, 'keydown');\n        });\n        var renderVN = function () {\n            var _a;\n            var vSize = computeSize.value;\n            var styles = computeStyles.value;\n            return h('div', {\n                ref: refElem,\n                class: ['vxe-grid', (_a = {},\n                        _a[\"size--\" + vSize] = vSize,\n                        _a['is--animat'] = !!props.animat,\n                        _a['is--round'] = props.round,\n                        _a['is--maximize'] = reactData.isZMax,\n                        _a['is--loading'] = props.loading || reactData.tableLoading,\n                        _a)],\n                style: styles\n            }, renderForms().concat(renderToolbars(), renderTops(), renderTables(), renderBottoms(), renderPagers()));\n        };\n        $xegrid.renderVN = renderVN;\n        provide('$xegrid', $xegrid);\n        return $xegrid;\n    },\n    render: function () {\n        return this.renderVN();\n    }\n});\n"]},"metadata":{},"sourceType":"module"}