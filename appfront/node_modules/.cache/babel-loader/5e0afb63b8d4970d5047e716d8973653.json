{"ast":null,"code":"var staticStrUndefined = require('./staticStrUndefined');\n\nvar staticDocument = require('./staticDocument');\n\nvar staticWindow = require('./staticWindow');\n\nvar assign = require('./assign');\n\nvar arrayEach = require('./arrayEach');\n/* eslint-disable valid-typeof */\n\n\nfunction isBrowseStorage(storage) {\n  try {\n    var testKey = '__xe_t';\n    storage.setItem(testKey, 1);\n    storage.removeItem(testKey);\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction isBrowseType(type) {\n  return navigator.userAgent.indexOf(type) > -1;\n}\n/**\r\n  * 获取浏览器内核\r\n  * @return Object\r\n  */\n\n\nfunction browse() {\n  var $body, isChrome, isEdge;\n  var isMobile = false;\n  var result = {\n    isNode: false,\n    isMobile: isMobile,\n    isPC: false,\n    isDoc: !!staticDocument\n  };\n\n  if (!staticWindow && typeof process !== staticStrUndefined) {\n    result.isNode = true;\n  } else {\n    isEdge = isBrowseType('Edge');\n    isChrome = isBrowseType('Chrome');\n    isMobile = /(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent);\n\n    if (result.isDoc) {\n      $body = staticDocument.body || staticDocument.documentElement;\n      arrayEach(['webkit', 'khtml', 'moz', 'ms', 'o'], function (core) {\n        result['-' + core] = !!$body[core + 'MatchesSelector'];\n      });\n    }\n\n    assign(result, {\n      edge: isEdge,\n      firefox: isBrowseType('Firefox'),\n      msie: !isEdge && result['-ms'],\n      safari: !isChrome && !isEdge && isBrowseType('Safari'),\n      isMobile: isMobile,\n      isPC: !isMobile,\n      isLocalStorage: isBrowseStorage(staticWindow.localStorage),\n      isSessionStorage: isBrowseStorage(staticWindow.sessionStorage)\n    });\n  }\n\n  return result;\n}\n\nmodule.exports = browse;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/xe-utils/browse.js"],"names":["staticStrUndefined","require","staticDocument","staticWindow","assign","arrayEach","isBrowseStorage","storage","testKey","setItem","removeItem","e","isBrowseType","type","navigator","userAgent","indexOf","browse","$body","isChrome","isEdge","isMobile","result","isNode","isPC","isDoc","process","test","body","documentElement","core","edge","firefox","msie","safari","isLocalStorage","localStorage","isSessionStorage","sessionStorage","module","exports"],"mappings":"AAAA,IAAIA,kBAAkB,GAAGC,OAAO,CAAC,sBAAD,CAAhC;;AACA,IAAIC,cAAc,GAAGD,OAAO,CAAC,kBAAD,CAA5B;;AACA,IAAIE,YAAY,GAAGF,OAAO,CAAC,gBAAD,CAA1B;;AAEA,IAAIG,MAAM,GAAGH,OAAO,CAAC,UAAD,CAApB;;AACA,IAAII,SAAS,GAAGJ,OAAO,CAAC,aAAD,CAAvB;AAEA;;;AACA,SAASK,eAAT,CAA0BC,OAA1B,EAAmC;AACjC,MAAI;AACF,QAAIC,OAAO,GAAG,QAAd;AACAD,IAAAA,OAAO,CAACE,OAAR,CAAgBD,OAAhB,EAAyB,CAAzB;AACAD,IAAAA,OAAO,CAACG,UAAR,CAAmBF,OAAnB;AACA,WAAO,IAAP;AACD,GALD,CAKE,OAAOG,CAAP,EAAU;AACV,WAAO,KAAP;AACD;AACF;;AAED,SAASC,YAAT,CAAuBC,IAAvB,EAA6B;AAC3B,SAAOC,SAAS,CAACC,SAAV,CAAoBC,OAApB,CAA4BH,IAA5B,IAAoC,CAAC,CAA5C;AACD;AAED;AACA;AACA;AACA;;;AACA,SAASI,MAAT,GAAmB;AACjB,MAAIC,KAAJ,EAAWC,QAAX,EAAqBC,MAArB;AACA,MAAIC,QAAQ,GAAG,KAAf;AACA,MAAIC,MAAM,GAAG;AACXC,IAAAA,MAAM,EAAE,KADG;AAEXF,IAAAA,QAAQ,EAAEA,QAFC;AAGXG,IAAAA,IAAI,EAAE,KAHK;AAIXC,IAAAA,KAAK,EAAE,CAAC,CAACvB;AAJE,GAAb;;AAMA,MAAI,CAACC,YAAD,IAAiB,OAAOuB,OAAP,KAAmB1B,kBAAxC,EAA4D;AAC1DsB,IAAAA,MAAM,CAACC,MAAP,GAAgB,IAAhB;AACD,GAFD,MAEO;AACLH,IAAAA,MAAM,GAAGR,YAAY,CAAC,MAAD,CAArB;AACAO,IAAAA,QAAQ,GAAGP,YAAY,CAAC,QAAD,CAAvB;AACAS,IAAAA,QAAQ,GAAG,sEAAsEM,IAAtE,CAA2Eb,SAAS,CAACC,SAArF,CAAX;;AACA,QAAIO,MAAM,CAACG,KAAX,EAAkB;AAChBP,MAAAA,KAAK,GAAGhB,cAAc,CAAC0B,IAAf,IAAuB1B,cAAc,CAAC2B,eAA9C;AACAxB,MAAAA,SAAS,CAAC,CAAC,QAAD,EAAW,OAAX,EAAoB,KAApB,EAA2B,IAA3B,EAAiC,GAAjC,CAAD,EAAwC,UAAUyB,IAAV,EAAgB;AAC/DR,QAAAA,MAAM,CAAC,MAAMQ,IAAP,CAAN,GAAqB,CAAC,CAACZ,KAAK,CAACY,IAAI,GAAG,iBAAR,CAA5B;AACD,OAFQ,CAAT;AAGD;;AACD1B,IAAAA,MAAM,CAACkB,MAAD,EAAS;AACbS,MAAAA,IAAI,EAAEX,MADO;AAEbY,MAAAA,OAAO,EAAEpB,YAAY,CAAC,SAAD,CAFR;AAGbqB,MAAAA,IAAI,EAAE,CAACb,MAAD,IAAWE,MAAM,CAAC,KAAD,CAHV;AAIbY,MAAAA,MAAM,EAAE,CAACf,QAAD,IAAa,CAACC,MAAd,IAAwBR,YAAY,CAAC,QAAD,CAJ/B;AAKbS,MAAAA,QAAQ,EAAEA,QALG;AAMbG,MAAAA,IAAI,EAAE,CAACH,QANM;AAObc,MAAAA,cAAc,EAAE7B,eAAe,CAACH,YAAY,CAACiC,YAAd,CAPlB;AAQbC,MAAAA,gBAAgB,EAAE/B,eAAe,CAACH,YAAY,CAACmC,cAAd;AARpB,KAAT,CAAN;AAUD;;AACD,SAAOhB,MAAP;AACD;;AAEDiB,MAAM,CAACC,OAAP,GAAiBvB,MAAjB","sourcesContent":["var staticStrUndefined = require('./staticStrUndefined')\r\nvar staticDocument = require('./staticDocument')\r\nvar staticWindow = require('./staticWindow')\r\n\r\nvar assign = require('./assign')\r\nvar arrayEach = require('./arrayEach')\r\n\r\n/* eslint-disable valid-typeof */\r\nfunction isBrowseStorage (storage) {\r\n  try {\r\n    var testKey = '__xe_t'\r\n    storage.setItem(testKey, 1)\r\n    storage.removeItem(testKey)\r\n    return true\r\n  } catch (e) {\r\n    return false\r\n  }\r\n}\r\n\r\nfunction isBrowseType (type) {\r\n  return navigator.userAgent.indexOf(type) > -1\r\n}\r\n\r\n/**\r\n  * 获取浏览器内核\r\n  * @return Object\r\n  */\r\nfunction browse () {\r\n  var $body, isChrome, isEdge\r\n  var isMobile = false\r\n  var result = {\r\n    isNode: false,\r\n    isMobile: isMobile,\r\n    isPC: false,\r\n    isDoc: !!staticDocument\r\n  }\r\n  if (!staticWindow && typeof process !== staticStrUndefined) {\r\n    result.isNode = true\r\n  } else {\r\n    isEdge = isBrowseType('Edge')\r\n    isChrome = isBrowseType('Chrome')\r\n    isMobile = /(Android|webOS|iPhone|iPad|iPod|SymbianOS|BlackBerry|Windows Phone)/.test(navigator.userAgent)\r\n    if (result.isDoc) {\r\n      $body = staticDocument.body || staticDocument.documentElement\r\n      arrayEach(['webkit', 'khtml', 'moz', 'ms', 'o'], function (core) {\r\n        result['-' + core] = !!$body[core + 'MatchesSelector']\r\n      })\r\n    }\r\n    assign(result, {\r\n      edge: isEdge,\r\n      firefox: isBrowseType('Firefox'),\r\n      msie: !isEdge && result['-ms'],\r\n      safari: !isChrome && !isEdge && isBrowseType('Safari'),\r\n      isMobile: isMobile,\r\n      isPC: !isMobile,\r\n      isLocalStorage: isBrowseStorage(staticWindow.localStorage),\r\n      isSessionStorage: isBrowseStorage(staticWindow.sessionStorage)\r\n    })\r\n  }\r\n  return result\r\n}\r\n\r\nmodule.exports = browse\r\n"]},"metadata":{},"sourceType":"script"}