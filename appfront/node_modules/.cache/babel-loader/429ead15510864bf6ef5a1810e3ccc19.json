{"ast":null,"code":"import supportsPassive from '../../_util/supportsPassive';\nimport { watch, onMounted } from 'vue';\nvar SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  var touched = false;\n  var touchY = 0;\n  var element = null; // Smooth scroll\n\n  var interval = null;\n\n  var cleanUpEvents = function cleanUpEvents() {\n    if (element) {\n      element.removeEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (touched) {\n      var currentY = Math.ceil(e.touches[0].pageY);\n      var offsetY = touchY - currentY;\n      touchY = currentY;\n\n      if (callback(offsetY)) {\n        e.preventDefault();\n      } // Smooth interval\n\n\n      clearInterval(interval);\n      interval = setInterval(function () {\n        offsetY *= SMOOTH_PTG;\n\n        if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n          clearInterval(interval);\n        }\n      }, 16);\n    }\n  };\n\n  var onTouchEnd = function onTouchEnd() {\n    touched = false;\n    cleanUpEvents();\n  };\n\n  var onTouchStart = function onTouchStart(e) {\n    cleanUpEvents();\n\n    if (e.touches.length === 1 && !touched) {\n      touched = true;\n      touchY = Math.ceil(e.touches[0].pageY);\n      element = e.target;\n      element.addEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  onMounted(function () {\n    watch(inVirtual, function (val) {\n      listRef.value.removeEventListener('touchstart', onTouchStart, supportsPassive ? {\n        passive: false\n      } : false);\n      cleanUpEvents();\n      clearInterval(interval);\n\n      if (val) {\n        listRef.value.addEventListener('touchstart', onTouchStart, supportsPassive ? {\n          passive: false\n        } : false);\n      }\n    }, {\n      immediate: true\n    });\n  });\n}","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-virtual-list/hooks/useMobileTouchMove.js"],"names":["supportsPassive","watch","onMounted","SMOOTH_PTG","useMobileTouchMove","inVirtual","listRef","callback","touched","touchY","element","interval","cleanUpEvents","removeEventListener","onTouchMove","passive","onTouchEnd","e","currentY","Math","ceil","touches","pageY","offsetY","preventDefault","clearInterval","setInterval","abs","onTouchStart","length","target","addEventListener","val","value","immediate"],"mappings":"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","sourcesContent":["import supportsPassive from '../../_util/supportsPassive';\nimport { watch, onMounted } from 'vue';\nvar SMOOTH_PTG = 14 / 15;\nexport default function useMobileTouchMove(inVirtual, listRef, callback) {\n  var touched = false;\n  var touchY = 0;\n  var element = null; // Smooth scroll\n\n  var interval = null;\n\n  var cleanUpEvents = function cleanUpEvents() {\n    if (element) {\n      element.removeEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.removeEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  var onTouchMove = function onTouchMove(e) {\n    if (touched) {\n      var currentY = Math.ceil(e.touches[0].pageY);\n      var offsetY = touchY - currentY;\n      touchY = currentY;\n\n      if (callback(offsetY)) {\n        e.preventDefault();\n      } // Smooth interval\n\n\n      clearInterval(interval);\n      interval = setInterval(function () {\n        offsetY *= SMOOTH_PTG;\n\n        if (!callback(offsetY, true) || Math.abs(offsetY) <= 0.1) {\n          clearInterval(interval);\n        }\n      }, 16);\n    }\n  };\n\n  var onTouchEnd = function onTouchEnd() {\n    touched = false;\n    cleanUpEvents();\n  };\n\n  var onTouchStart = function onTouchStart(e) {\n    cleanUpEvents();\n\n    if (e.touches.length === 1 && !touched) {\n      touched = true;\n      touchY = Math.ceil(e.touches[0].pageY);\n      element = e.target;\n      element.addEventListener('touchmove', onTouchMove, supportsPassive ? {\n        passive: false\n      } : false);\n      element.addEventListener('touchend', onTouchEnd);\n    }\n  };\n\n  onMounted(function () {\n    watch(inVirtual, function (val) {\n      listRef.value.removeEventListener('touchstart', onTouchStart, supportsPassive ? {\n        passive: false\n      } : false);\n      cleanUpEvents();\n      clearInterval(interval);\n\n      if (val) {\n        listRef.value.addEventListener('touchstart', onTouchStart, supportsPassive ? {\n          passive: false\n        } : false);\n      }\n    }, {\n      immediate: true\n    });\n  });\n}"]},"metadata":{},"sourceType":"module"}