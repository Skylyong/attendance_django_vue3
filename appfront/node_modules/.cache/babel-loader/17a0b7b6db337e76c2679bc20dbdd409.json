{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOptionProps, hasProp, getEvents, findDOMNode } from '../../_util/props-util';\nimport { cloneElement } from '../../_util/vnode';\nimport createChainedFunction from '../../_util/createChainedFunction';\nimport KeyCode from '../../_util/KeyCode';\nimport placements from './picker/placements';\nimport Trigger from '../../vc-trigger';\nimport moment from 'moment';\nimport isNil from 'lodash-es/isNil';\nimport { defineComponent } from 'vue';\nvar TimeType = {\n  validator: function validator(value) {\n    if (Array.isArray(value)) {\n      return value.length === 0 || value.findIndex(function (val) {\n        return !isNil(val) && !moment.isMoment(val);\n      }) === -1;\n    } else {\n      return isNil(value) || moment.isMoment(value);\n    }\n  }\n};\n\nfunction refFn(field, component) {\n  this[field] = component;\n}\n\nvar Picker = defineComponent({\n  name: 'Picker',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: {\n    animation: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n    disabled: PropTypes.looseBool,\n    transitionName: PropTypes.string,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.func]),\n    // onChange: PropTypes.func,\n    // onOpenChange: PropTypes.func,\n    getCalendarContainer: PropTypes.func,\n    calendar: PropTypes.any,\n    open: PropTypes.looseBool,\n    defaultOpen: PropTypes.looseBool.def(false),\n    prefixCls: PropTypes.string.def('rc-calendar-picker'),\n    placement: PropTypes.any.def('bottomLeft'),\n    value: TimeType,\n    defaultValue: TimeType,\n    align: PropTypes.object.def(function () {\n      return {};\n    }),\n    dropdownClassName: PropTypes.string,\n    dateRender: PropTypes.func,\n    children: PropTypes.func\n  },\n  data: function data() {\n    var props = this.$props;\n    this.calendarElement = null;\n    this.saveCalendarRef = refFn.bind(this, 'calendarInstance');\n    var open;\n\n    if (hasProp(this, 'open')) {\n      open = props.open;\n    } else {\n      open = props.defaultOpen;\n    }\n\n    var value = props.value || props.defaultValue;\n    return {\n      sOpen: open,\n      sValue: value\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.setState({\n        sValue: val\n      });\n    },\n    open: function open(val) {\n      this.setState({\n        sOpen: val\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.preSOpen = this.sOpen;\n  },\n  updated: function updated() {\n    if (!this.preSOpen && this.sOpen) {\n      // setTimeout is for making sure saveCalendarRef happen before focusCalendar\n      this.focusTimeout = setTimeout(this.focusCalendar, 100);\n    }\n\n    this.preSOpen = this.sOpen;\n  },\n  beforeUnmount: function beforeUnmount() {\n    clearTimeout(this.focusTimeout);\n  },\n  methods: {\n    onCalendarKeyDown: function onCalendarKeyDown(event) {\n      if (event.keyCode === KeyCode.ESC) {\n        event.stopPropagation();\n        this.closeCalendar(this.focus);\n      }\n    },\n    onCalendarSelect: function onCalendarSelect(value) {\n      var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var props = this.$props;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      var calendarProps = getOptionProps(props.calendar);\n\n      if (cause.source === 'keyboard' || cause.source === 'dateInputSelect' || !calendarProps.timePicker && cause.source !== 'dateInput' || cause.source === 'todayButton') {\n        this.closeCalendar(this.focus);\n      }\n\n      this.__emit('change', value);\n    },\n    onKeyDown: function onKeyDown(event) {\n      if (!this.sOpen && (event.keyCode === KeyCode.DOWN || event.keyCode === KeyCode.ENTER)) {\n        this.openCalendar();\n        event.preventDefault();\n      }\n    },\n    onCalendarOk: function onCalendarOk() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarClear: function onCalendarClear() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarBlur: function onCalendarBlur() {\n      this.setOpen(false);\n    },\n    onVisibleChange: function onVisibleChange(open) {\n      this.setOpen(open);\n    },\n    getCalendarElement: function getCalendarElement() {\n      var props = this.$props;\n      var calendarProps = getOptionProps(props.calendar);\n      var calendarEvents = getEvents(props.calendar);\n      var value = this.sValue;\n      var defaultValue = value;\n      var extraProps = {\n        ref: this.saveCalendarRef,\n        defaultValue: defaultValue || calendarProps.defaultValue,\n        selectedValue: value,\n        onKeydown: this.onCalendarKeyDown,\n        onOk: createChainedFunction(calendarEvents.onOk, this.onCalendarOk),\n        onSelect: createChainedFunction(calendarEvents.onSelect, this.onCalendarSelect),\n        onClear: createChainedFunction(calendarEvents.onClear, this.onCalendarClear),\n        onBlur: createChainedFunction(calendarEvents.onBlur, this.onCalendarBlur)\n      };\n      return cloneElement(props.calendar, extraProps);\n    },\n    setOpen: function setOpen(open, callback) {\n      if (this.sOpen !== open) {\n        if (!hasProp(this, 'open')) {\n          this.setState({\n            sOpen: open\n          }, callback);\n        }\n\n        this.__emit('openChange', open);\n      }\n    },\n    openCalendar: function openCalendar(callback) {\n      this.setOpen(true, callback);\n    },\n    closeCalendar: function closeCalendar(callback) {\n      this.setOpen(false, callback);\n    },\n    focus: function focus() {\n      if (!this.sOpen) {\n        findDOMNode(this).focus();\n      }\n    },\n    focusCalendar: function focusCalendar() {\n      if (this.sOpen && !!this.calendarInstance) {\n        this.calendarInstance.focus();\n      }\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var props = getOptionProps(this);\n    var prefixCls = props.prefixCls,\n        placement = props.placement,\n        getCalendarContainer = props.getCalendarContainer,\n        align = props.align,\n        animation = props.animation,\n        disabled = props.disabled,\n        dropdownClassName = props.dropdownClassName,\n        transitionName = props.transitionName;\n    var sValue = this.sValue,\n        sOpen = this.sOpen;\n    var childrenState = {\n      value: sValue,\n      open: sOpen\n    };\n    var children = this.$slots.default(childrenState);\n\n    if (this.sOpen || !this.calendarElement) {\n      this.calendarElement = this.getCalendarElement();\n    }\n\n    return _createVNode(Trigger, {\n      \"popupAlign\": align,\n      \"builtinPlacements\": placements,\n      \"popupPlacement\": placement,\n      \"action\": disabled && !sOpen ? [] : ['click'],\n      \"destroyPopupOnHide\": true,\n      \"getPopupContainer\": getCalendarContainer,\n      \"popupStyle\": this.$attrs.style || {},\n      \"popupAnimation\": animation,\n      \"popupTransitionName\": transitionName,\n      \"popupVisible\": sOpen,\n      \"onPopupVisibleChange\": this.onVisibleChange,\n      \"prefixCls\": prefixCls,\n      \"popupClassName\": dropdownClassName,\n      \"popup\": this.calendarElement\n    }, {\n      default: function _default() {\n        return [cloneElement(children, {\n          onKeydown: _this.onKeyDown\n        })];\n      }\n    });\n  }\n});\nexport default Picker;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-calendar/src/Picker.js"],"names":["createVNode","_createVNode","PropTypes","BaseMixin","getOptionProps","hasProp","getEvents","findDOMNode","cloneElement","createChainedFunction","KeyCode","placements","Trigger","moment","isNil","defineComponent","TimeType","validator","value","Array","isArray","length","findIndex","val","isMoment","refFn","field","component","Picker","name","mixins","inheritAttrs","props","animation","oneOfType","func","string","disabled","looseBool","transitionName","format","array","getCalendarContainer","calendar","any","open","defaultOpen","def","prefixCls","placement","defaultValue","align","object","dropdownClassName","dateRender","children","data","$props","calendarElement","saveCalendarRef","bind","sOpen","sValue","watch","setState","mounted","preSOpen","updated","focusTimeout","setTimeout","focusCalendar","beforeUnmount","clearTimeout","methods","onCalendarKeyDown","event","keyCode","ESC","stopPropagation","closeCalendar","focus","onCalendarSelect","cause","arguments","undefined","calendarProps","source","timePicker","__emit","onKeyDown","DOWN","ENTER","openCalendar","preventDefault","onCalendarOk","onCalendarClear","onCalendarBlur","setOpen","onVisibleChange","getCalendarElement","calendarEvents","extraProps","ref","selectedValue","onKeydown","onOk","onSelect","onClear","onBlur","callback","calendarInstance","render","_this","childrenState","$slots","default","$attrs","style","_default"],"mappings":"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","sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { getOptionProps, hasProp, getEvents, findDOMNode } from '../../_util/props-util';\nimport { cloneElement } from '../../_util/vnode';\nimport createChainedFunction from '../../_util/createChainedFunction';\nimport KeyCode from '../../_util/KeyCode';\nimport placements from './picker/placements';\nimport Trigger from '../../vc-trigger';\nimport moment from 'moment';\nimport isNil from 'lodash-es/isNil';\nimport { defineComponent } from 'vue';\nvar TimeType = {\n  validator: function validator(value) {\n    if (Array.isArray(value)) {\n      return value.length === 0 || value.findIndex(function (val) {\n        return !isNil(val) && !moment.isMoment(val);\n      }) === -1;\n    } else {\n      return isNil(value) || moment.isMoment(value);\n    }\n  }\n};\n\nfunction refFn(field, component) {\n  this[field] = component;\n}\n\nvar Picker = defineComponent({\n  name: 'Picker',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: {\n    animation: PropTypes.oneOfType([PropTypes.func, PropTypes.string]),\n    disabled: PropTypes.looseBool,\n    transitionName: PropTypes.string,\n    format: PropTypes.oneOfType([PropTypes.string, PropTypes.array, PropTypes.func]),\n    // onChange: PropTypes.func,\n    // onOpenChange: PropTypes.func,\n    getCalendarContainer: PropTypes.func,\n    calendar: PropTypes.any,\n    open: PropTypes.looseBool,\n    defaultOpen: PropTypes.looseBool.def(false),\n    prefixCls: PropTypes.string.def('rc-calendar-picker'),\n    placement: PropTypes.any.def('bottomLeft'),\n    value: TimeType,\n    defaultValue: TimeType,\n    align: PropTypes.object.def(function () {\n      return {};\n    }),\n    dropdownClassName: PropTypes.string,\n    dateRender: PropTypes.func,\n    children: PropTypes.func\n  },\n  data: function data() {\n    var props = this.$props;\n    this.calendarElement = null;\n    this.saveCalendarRef = refFn.bind(this, 'calendarInstance');\n    var open;\n\n    if (hasProp(this, 'open')) {\n      open = props.open;\n    } else {\n      open = props.defaultOpen;\n    }\n\n    var value = props.value || props.defaultValue;\n    return {\n      sOpen: open,\n      sValue: value\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.setState({\n        sValue: val\n      });\n    },\n    open: function open(val) {\n      this.setState({\n        sOpen: val\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.preSOpen = this.sOpen;\n  },\n  updated: function updated() {\n    if (!this.preSOpen && this.sOpen) {\n      // setTimeout is for making sure saveCalendarRef happen before focusCalendar\n      this.focusTimeout = setTimeout(this.focusCalendar, 100);\n    }\n\n    this.preSOpen = this.sOpen;\n  },\n  beforeUnmount: function beforeUnmount() {\n    clearTimeout(this.focusTimeout);\n  },\n  methods: {\n    onCalendarKeyDown: function onCalendarKeyDown(event) {\n      if (event.keyCode === KeyCode.ESC) {\n        event.stopPropagation();\n        this.closeCalendar(this.focus);\n      }\n    },\n    onCalendarSelect: function onCalendarSelect(value) {\n      var cause = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var props = this.$props;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      var calendarProps = getOptionProps(props.calendar);\n\n      if (cause.source === 'keyboard' || cause.source === 'dateInputSelect' || !calendarProps.timePicker && cause.source !== 'dateInput' || cause.source === 'todayButton') {\n        this.closeCalendar(this.focus);\n      }\n\n      this.__emit('change', value);\n    },\n    onKeyDown: function onKeyDown(event) {\n      if (!this.sOpen && (event.keyCode === KeyCode.DOWN || event.keyCode === KeyCode.ENTER)) {\n        this.openCalendar();\n        event.preventDefault();\n      }\n    },\n    onCalendarOk: function onCalendarOk() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarClear: function onCalendarClear() {\n      this.closeCalendar(this.focus);\n    },\n    onCalendarBlur: function onCalendarBlur() {\n      this.setOpen(false);\n    },\n    onVisibleChange: function onVisibleChange(open) {\n      this.setOpen(open);\n    },\n    getCalendarElement: function getCalendarElement() {\n      var props = this.$props;\n      var calendarProps = getOptionProps(props.calendar);\n      var calendarEvents = getEvents(props.calendar);\n      var value = this.sValue;\n      var defaultValue = value;\n      var extraProps = {\n        ref: this.saveCalendarRef,\n        defaultValue: defaultValue || calendarProps.defaultValue,\n        selectedValue: value,\n        onKeydown: this.onCalendarKeyDown,\n        onOk: createChainedFunction(calendarEvents.onOk, this.onCalendarOk),\n        onSelect: createChainedFunction(calendarEvents.onSelect, this.onCalendarSelect),\n        onClear: createChainedFunction(calendarEvents.onClear, this.onCalendarClear),\n        onBlur: createChainedFunction(calendarEvents.onBlur, this.onCalendarBlur)\n      };\n      return cloneElement(props.calendar, extraProps);\n    },\n    setOpen: function setOpen(open, callback) {\n      if (this.sOpen !== open) {\n        if (!hasProp(this, 'open')) {\n          this.setState({\n            sOpen: open\n          }, callback);\n        }\n\n        this.__emit('openChange', open);\n      }\n    },\n    openCalendar: function openCalendar(callback) {\n      this.setOpen(true, callback);\n    },\n    closeCalendar: function closeCalendar(callback) {\n      this.setOpen(false, callback);\n    },\n    focus: function focus() {\n      if (!this.sOpen) {\n        findDOMNode(this).focus();\n      }\n    },\n    focusCalendar: function focusCalendar() {\n      if (this.sOpen && !!this.calendarInstance) {\n        this.calendarInstance.focus();\n      }\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var props = getOptionProps(this);\n    var prefixCls = props.prefixCls,\n        placement = props.placement,\n        getCalendarContainer = props.getCalendarContainer,\n        align = props.align,\n        animation = props.animation,\n        disabled = props.disabled,\n        dropdownClassName = props.dropdownClassName,\n        transitionName = props.transitionName;\n    var sValue = this.sValue,\n        sOpen = this.sOpen;\n    var childrenState = {\n      value: sValue,\n      open: sOpen\n    };\n    var children = this.$slots.default(childrenState);\n\n    if (this.sOpen || !this.calendarElement) {\n      this.calendarElement = this.getCalendarElement();\n    }\n\n    return _createVNode(Trigger, {\n      \"popupAlign\": align,\n      \"builtinPlacements\": placements,\n      \"popupPlacement\": placement,\n      \"action\": disabled && !sOpen ? [] : ['click'],\n      \"destroyPopupOnHide\": true,\n      \"getPopupContainer\": getCalendarContainer,\n      \"popupStyle\": this.$attrs.style || {},\n      \"popupAnimation\": animation,\n      \"popupTransitionName\": transitionName,\n      \"popupVisible\": sOpen,\n      \"onPopupVisibleChange\": this.onVisibleChange,\n      \"prefixCls\": prefixCls,\n      \"popupClassName\": dropdownClassName,\n      \"popup\": this.calendarElement\n    }, {\n      default: function _default() {\n        return [cloneElement(children, {\n          onKeydown: _this.onKeyDown\n        })];\n      }\n    });\n  }\n});\nexport default Picker;"]},"metadata":{},"sourceType":"module"}