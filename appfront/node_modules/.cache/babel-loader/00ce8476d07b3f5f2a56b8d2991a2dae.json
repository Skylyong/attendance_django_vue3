{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\n\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_4 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"欢迎登录 \", -1\n/* HOISTED */\n);\n\nconst _hoisted_5 = {\n  class: \"login-form-wrap\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"Remember me\");\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"a\", {\n  class: \"login-form-forgot\",\n  href: \"\"\n}, \"Forgot password\", -1\n/* HOISTED */\n);\n\nconst _hoisted_8 = /*#__PURE__*/_createTextVNode(\" Log in \");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_UserOutlined = _resolveComponent(\"UserOutlined\");\n\n  const _component_a_input = _resolveComponent(\"a-input\");\n\n  const _component_a_form_item = _resolveComponent(\"a-form-item\");\n\n  const _component_LockOutlined = _resolveComponent(\"LockOutlined\");\n\n  const _component_a_input_password = _resolveComponent(\"a-input-password\");\n\n  const _component_a_checkbox = _resolveComponent(\"a-checkbox\");\n\n  const _component_a_button = _resolveComponent(\"a-button\");\n\n  const _component_a_form = _resolveComponent(\"a-form\");\n\n  return _openBlock(), _createBlock(_component_a_form, {\n    model: _ctx.formState,\n    name: \"normal_login\",\n    class: \"login-form\",\n    onFinish: _ctx.onFinish,\n    onFinishFailed: _ctx.onFinishFailed\n  }, {\n    default: _withCtx(() => [_hoisted_1, _hoisted_2, _hoisted_3, _hoisted_4, _createVNode(_component_a_form_item, {\n      label: \"Username\",\n      name: \"username\",\n      rules: [{\n        required: true,\n        message: 'Please input your username!'\n      }]\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_input, {\n        value: _ctx.formState.username,\n        \"onUpdate:value\": _cache[0] || (_cache[0] = $event => _ctx.formState.username = $event)\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_UserOutlined, {\n          class: \"site-form-item-icon\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"value\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createVNode(_component_a_form_item, {\n      label: \"Password\",\n      name: \"password\",\n      rules: [{\n        required: true,\n        message: 'Please input your password!'\n      }]\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_input_password, {\n        value: _ctx.formState.password,\n        \"onUpdate:value\": _cache[1] || (_cache[1] = $event => _ctx.formState.password = $event)\n      }, {\n        prefix: _withCtx(() => [_createVNode(_component_LockOutlined, {\n          class: \"site-form-item-icon\"\n        })]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"value\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _createElementVNode(\"p\", null, _toDisplayString(_ctx.message), 1\n    /* TEXT */\n    ), _createElementVNode(\"div\", _hoisted_5, [_createVNode(_component_a_form_item, {\n      name: \"remember\",\n      \"no-style\": \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_a_checkbox, {\n        checked: _ctx.formState.remember,\n        \"onUpdate:checked\": _cache[2] || (_cache[2] = $event => _ctx.formState.remember = $event)\n      }, {\n        default: _withCtx(() => [_hoisted_6]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"checked\"])]),\n      _: 1\n      /* STABLE */\n\n    }), _hoisted_7]), _createVNode(_component_a_form_item, null, {\n      default: _withCtx(() => [_createVNode(_component_a_button, {\n        disabled: _ctx.disabled,\n        type: \"primary\",\n        \"html-type\": \"submit\",\n        class: \"login-form-button\"\n      }, {\n        default: _withCtx(() => [_hoisted_8]),\n        _: 1\n        /* STABLE */\n\n      }, 8\n      /* PROPS */\n      , [\"disabled\"])]),\n      _: 1\n      /* STABLE */\n\n    })]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"model\", \"onFinish\", \"onFinishFailed\"]);\n}","map":{"version":3,"mappings":";;gCAQEA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;gCACAA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;gCACAA,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;gCACAA,oBAAc,IAAd,EAAc,IAAd,EAAI,OAAJ,EAAS;AAAA;AAAT;;;AAyBOC,OAAK,EAAC;;;iDAE0C;;gCAEnDD,oBAAwD,GAAxD,EAAwD;AAArDC,OAAK,EAAC,mBAA+C;AAA3BC,MAAI,EAAC;AAAsB,CAAxD,EAAqC,iBAArC,EAAoD;AAAA;AAApD;;iDAI2F;;;;;;;;;;;;;;;;;;;uBA3C/FC,aAgDSC,iBAhDT,EAgDS;AA/CNC,SAAK,EAAEC,cA+CD;AA9CPC,QAAI,EAAC,cA8CE;AA7CPN,SAAK,EAAC,YA6CC;AA5CNO,YAAM,EAAEF,aA4CF;AA3CNG,kBAAY,EAAEH;AA2CR,GAhDT;sBAOA,MAAI,CAAJI,UAAI,EACJC,UADI,EAEJC,UAFI,EAGJC,UAHI,EAIFC,aAUcC,sBAVd,EAUc;AATZC,WAAK,EAAC,UASM;AARZT,UAAI,EAAC,UAQO;AAPXU,WAAK,EAAE;AAAAC;AAAAC;AAAA;AAOI,KAVd;wBAKE,MAIU,CAJVL,aAIUM,kBAJV,EAIU;AAJOC,aAAK,EAAEf,eAAUgB,QAIxB;8DAJchB,eAAUgB,WAAQC;AAIhC,OAJV;AACaC,cAAM,WACf,MAA4C,CAA5CV,aAA4CW,uBAA5C,EAA4C;AAA9BxB,eAAK,EAAC;AAAwB,SAA5C,CAA4C,CAD7B;;;;OADnB;;AAAA,kBAIU;;;;KATZ,CAJE,EAgBFa,aAUcC,sBAVd,EAUc;AATZC,WAAK,EAAC,UASM;AARZT,UAAI,EAAC,UAQO;AAPXU,WAAK,EAAE;AAAAC;AAAAC;AAAA;AAOI,KAVd;wBAKE,MAImB,CAJnBL,aAImBY,2BAJnB,EAImB;AAJOL,aAAK,EAAEf,eAAUqB,QAIxB;8DAJcrB,eAAUqB,WAAQJ;AAIhC,OAJnB;AACaC,cAAM,WACf,MAA4C,CAA5CV,aAA4Cc,uBAA5C,EAA4C;AAA9B3B,eAAK,EAAC;AAAwB,SAA5C,CAA4C,CAD7B;;;;OADnB;;AAAA,kBAImB;;;;KATrB,CAhBE,EA2BMD,oBAAwB,GAAxB,EAAwB,IAAxB,EAAwB6B,iBAAdvB,YAAc,CAAxB,EAAiB;AAAA;AAAjB,KA3BN,EA4BFN,oBAKM,KALN,cAKM,CAJJc,aAEcC,sBAFd,EAEc;AAFDR,UAAI,EAAC,UAEJ;AAFe;AAEf,KAFd;wBACE,MAAyE,CAAzEO,aAAyEgB,qBAAzE,EAAyE;AAArDC,eAAO,EAAEzB,eAAU0B,QAAkC;gEAA5C1B,eAAU0B,WAAQT;AAA0B,OAAzE;0BAAiD,MAAW;;;;OAA5D;;AAAA,oBAAyE;;;;KAD3E,CAII,EADJU,UACI,CALN,CA5BE,EAmCFnB,aAKcC,sBALd,EAKc,IALd,EAKc;wBAJZ,MAEW,CAFXD,aAEWoB,mBAFX,EAEW;AAFAC,gBAAQ,EAAE7B,aAEV;AAFoB8B,YAAI,EAAC,SAEzB;AAFmC,qBAAU,QAE7C;AAFsDnC,aAAK,EAAC;AAE5D,OAFX;0BAA2F,MAE3F;;;;OAFA;;AAAA,qBAEW,EAEC;;;;AAAA,KALd,CAnCE;;;;GAPJ;;AAAA","names":["_createElementVNode","class","href","_createBlock","_component_a_form","model","_ctx","name","onFinish","onFinishFailed","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_a_form_item","label","rules","required","message","_component_a_input","value","username","$event","prefix","_component_UserOutlined","_component_a_input_password","password","_component_LockOutlined","_toDisplayString","_component_a_checkbox","checked","remember","_hoisted_7","_component_a_button","disabled","type"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/views/login.vue"],"sourcesContent":["<template>\n  <a-form\n    :model=\"formState\"\n    name=\"normal_login\"\n    class=\"login-form\"\n    @finish=\"onFinish\"\n    @finishFailed=\"onFinishFailed\"\n  >\n  <br>\n  <br>\n  <br>\n  <h1>欢迎登录 </h1>\n    <a-form-item\n      label=\"Username\"\n      name=\"username\"\n      :rules=\"[{ required: true, message: 'Please input your username!' }]\"\n    >\n      <a-input v-model:value=\"formState.username\">\n        <template #prefix>\n          <UserOutlined class=\"site-form-item-icon\" />\n        </template>\n      </a-input>\n    </a-form-item>\n\n    <a-form-item\n      label=\"Password\"\n      name=\"password\"\n      :rules=\"[{ required: true, message: 'Please input your password!' }]\"\n    >\n      <a-input-password v-model:value=\"formState.password\">\n        <template #prefix>\n          <LockOutlined class=\"site-form-item-icon\" />\n        </template>\n      </a-input-password>\n    </a-form-item>\n            <p  >  {{ message }}</p>\n    <div class=\"login-form-wrap\">\n      <a-form-item name=\"remember\" no-style>\n        <a-checkbox v-model:checked=\"formState.remember\">Remember me</a-checkbox>\n      </a-form-item>\n      <a class=\"login-form-forgot\" href=\"\">Forgot password</a>\n    </div>\n\n    <a-form-item>\n      <a-button :disabled=\"disabled\" type=\"primary\" html-type=\"submit\" class=\"login-form-button\">\n        Log in\n      </a-button>\n      \n    </a-form-item>\n  </a-form>\n</template>\n<script>\nimport { defineComponent, reactive, computed, ref } from 'vue';\nimport { UserOutlined, LockOutlined } from '@ant-design/icons-vue';\n// import router from '@/router';\nimport {useRouter} from 'vue-router'\nimport {postSubmit} from '../api/api.js'\nexport default defineComponent({\n  components: {\n    UserOutlined,\n    LockOutlined,\n  },\n\n  setup() {\n    let message = ref('')\n    let router  = useRouter()\n    const formState = reactive({\n      username: '',\n      password: '',\n      remember: true,\n    });\n    var that = this\n    const onFinish = values => {\n        postSubmit(\n            values.username, values.password\n        ).then(\n          // console.log(response),\n            response =>{\n                // this.message = ''\n                console.log(response)\n                 if (response['code'] == 1){\n\n                    localStorage.setItem(\"Userid\", res.data.userid);\n               localStorage.setItem(\"Flag\", \"isLogin\");\n        that.$store.dispatch(\"userLogin\", true);\n\n                    if (response['data']['accountType'] == 2){\n                        router.push({path:'/manager'})\n                    }else{\n                      router.push({path:'/worker'})\n                    }\n                 }\n                 else if(response['code'] == 2004)\n                 {\n                 message.value = 'no user!'\n                 }\n                 else{\n                   message.value = 'passwords error!'\n                 }\n                \n            },\n            response =>{\n                message.value = '服务器访问错误!'\n            }\n\n        )\n    };\n\n    const onFinishFailed = errorInfo => {\n      console.log('Failed:', errorInfo);\n    };\n\n    const disabled = computed(() => {\n      return !(formState.username && formState.password);\n    });\n    return {\n      formState,\n      onFinish,\n      onFinishFailed,\n      disabled,\n      message,\n    };\n  },\n\n});\n\n\n/**\n * \n * 1. 设置最小高度\n * 2. header 美化\n * 3. 左边导航栏美化\n * 4. 表格宽度美化\n * 5. 登录页面\n */\n</script>\n<style>\n#components-form-demo-normal-login .login-form {\n  max-width: 300px;\n}\n#components-form-demo-normal-login .login-form-wrap {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n#components-form-demo-normal-login .login-form-forgot {\n  margin-bottom: 24px;\n}\n#components-form-demo-normal-login .login-form-button {\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}