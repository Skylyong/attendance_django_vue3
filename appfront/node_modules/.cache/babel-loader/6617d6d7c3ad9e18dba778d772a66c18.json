{"ast":null,"code":"var setupDefaults = require('./setupDefaults');\n\nvar staticWeekTime = require('./staticWeekTime');\n\nvar isNumber = require('./isNumber');\n\nvar isValidDate = require('./isValidDate');\n\nvar getWhatWeek = require('./getWhatWeek');\n\nvar helperGetDateTime = require('./helperGetDateTime');\n\nfunction helperCreateGetDateWeek(getStartDate) {\n  return function (date, firstDay) {\n    var viewStartDay = isNumber(firstDay) ? firstDay : setupDefaults.firstDayOfWeek;\n    var targetDate = getWhatWeek(date, 0, viewStartDay, viewStartDay);\n\n    if (isValidDate(targetDate)) {\n      var targetOffsetDate = new Date(targetDate.getFullYear(), targetDate.getMonth(), targetDate.getDate());\n      var targerStartDate = getStartDate(targetDate);\n      var targetFirstDay = targerStartDate.getDay();\n\n      if (targetFirstDay > viewStartDay) {\n        targerStartDate.setDate(7 - targetFirstDay + viewStartDay + 1);\n      }\n\n      if (targetFirstDay < viewStartDay) {\n        targerStartDate.setDate(viewStartDay - targetFirstDay + 1);\n      }\n\n      return Math.floor((helperGetDateTime(targetOffsetDate) - helperGetDateTime(targerStartDate)) / staticWeekTime + 1);\n    }\n\n    return NaN;\n  };\n}\n\nmodule.exports = helperCreateGetDateWeek;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/xe-utils/helperCreateGetDateWeek.js"],"names":["setupDefaults","require","staticWeekTime","isNumber","isValidDate","getWhatWeek","helperGetDateTime","helperCreateGetDateWeek","getStartDate","date","firstDay","viewStartDay","firstDayOfWeek","targetDate","targetOffsetDate","Date","getFullYear","getMonth","getDate","targerStartDate","targetFirstDay","getDay","setDate","Math","floor","NaN","module","exports"],"mappings":"AAAA,IAAIA,aAAa,GAAGC,OAAO,CAAC,iBAAD,CAA3B;;AAEA,IAAIC,cAAc,GAAGD,OAAO,CAAC,kBAAD,CAA5B;;AAEA,IAAIE,QAAQ,GAAGF,OAAO,CAAC,YAAD,CAAtB;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,eAAD,CAAzB;;AACA,IAAII,WAAW,GAAGJ,OAAO,CAAC,eAAD,CAAzB;;AAEA,IAAIK,iBAAiB,GAAGL,OAAO,CAAC,qBAAD,CAA/B;;AAEA,SAASM,uBAAT,CAAkCC,YAAlC,EAAgD;AAC9C,SAAO,UAAUC,IAAV,EAAgBC,QAAhB,EAA0B;AAC/B,QAAIC,YAAY,GAAGR,QAAQ,CAACO,QAAD,CAAR,GAAqBA,QAArB,GAAgCV,aAAa,CAACY,cAAjE;AACA,QAAIC,UAAU,GAAGR,WAAW,CAACI,IAAD,EAAO,CAAP,EAAUE,YAAV,EAAwBA,YAAxB,CAA5B;;AACA,QAAIP,WAAW,CAACS,UAAD,CAAf,EAA6B;AAC3B,UAAIC,gBAAgB,GAAG,IAAIC,IAAJ,CAASF,UAAU,CAACG,WAAX,EAAT,EAAmCH,UAAU,CAACI,QAAX,EAAnC,EAA0DJ,UAAU,CAACK,OAAX,EAA1D,CAAvB;AACA,UAAIC,eAAe,GAAGX,YAAY,CAACK,UAAD,CAAlC;AACA,UAAIO,cAAc,GAAGD,eAAe,CAACE,MAAhB,EAArB;;AACA,UAAID,cAAc,GAAGT,YAArB,EAAmC;AACjCQ,QAAAA,eAAe,CAACG,OAAhB,CAAwB,IAAIF,cAAJ,GAAqBT,YAArB,GAAoC,CAA5D;AACD;;AACD,UAAIS,cAAc,GAAGT,YAArB,EAAmC;AACjCQ,QAAAA,eAAe,CAACG,OAAhB,CAAwBX,YAAY,GAAGS,cAAf,GAAgC,CAAxD;AACD;;AACD,aAAOG,IAAI,CAACC,KAAL,CAAW,CAAClB,iBAAiB,CAACQ,gBAAD,CAAjB,GAAsCR,iBAAiB,CAACa,eAAD,CAAxD,IAA6EjB,cAA7E,GAA8F,CAAzG,CAAP;AACD;;AACD,WAAOuB,GAAP;AACD,GAhBD;AAiBD;;AAEDC,MAAM,CAACC,OAAP,GAAiBpB,uBAAjB","sourcesContent":["var setupDefaults = require('./setupDefaults')\r\n\r\nvar staticWeekTime = require('./staticWeekTime')\r\n\r\nvar isNumber = require('./isNumber')\r\nvar isValidDate = require('./isValidDate')\r\nvar getWhatWeek = require('./getWhatWeek')\r\n\r\nvar helperGetDateTime = require('./helperGetDateTime')\r\n\r\nfunction helperCreateGetDateWeek (getStartDate) {\r\n  return function (date, firstDay) {\r\n    var viewStartDay = isNumber(firstDay) ? firstDay : setupDefaults.firstDayOfWeek\r\n    var targetDate = getWhatWeek(date, 0, viewStartDay, viewStartDay)\r\n    if (isValidDate(targetDate)) {\r\n      var targetOffsetDate = new Date(targetDate.getFullYear(), targetDate.getMonth(), targetDate.getDate())\r\n      var targerStartDate = getStartDate(targetDate)\r\n      var targetFirstDay = targerStartDate.getDay()\r\n      if (targetFirstDay > viewStartDay) {\r\n        targerStartDate.setDate(7 - targetFirstDay + viewStartDay + 1)\r\n      }\r\n      if (targetFirstDay < viewStartDay) {\r\n        targerStartDate.setDate(viewStartDay - targetFirstDay + 1)\r\n      }\r\n      return Math.floor((helperGetDateTime(targetOffsetDate) - helperGetDateTime(targerStartDate)) / staticWeekTime + 1)\r\n    }\r\n    return NaN\r\n  }\r\n}\r\n\r\nmodule.exports = helperCreateGetDateWeek\r\n"]},"metadata":{},"sourceType":"script"}