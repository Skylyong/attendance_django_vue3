{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _vue = require(\"vue\");\n\nvar _Event = _interopRequireDefault(require(\"./css-animation/Event\"));\n\nvar _raf = _interopRequireDefault(require(\"./raf\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar _propsUtil = require(\"./props-util\");\n\nvar styleForPesudo; // Where el is the DOM element you'd like to test for visibility\n\nfunction isHidden(element) {\n  if (process.env.NODE_ENV === 'test') {\n    return false;\n  }\n\n  return !element || element.offsetParent === null;\n}\n\nfunction isNotGrey(color) {\n  // eslint-disable-next-line no-useless-escape\n  var match = (color || '').match(/rgba?\\((\\d*), (\\d*), (\\d*)(, [\\.\\d]*)?\\)/);\n\n  if (match && match[1] && match[2] && match[3]) {\n    return !(match[1] === match[2] && match[2] === match[3]);\n  }\n\n  return true;\n}\n\nvar _default = (0, _vue.defineComponent)({\n  name: 'Wave',\n  props: ['insertExtraNode'],\n  setup: function setup() {\n    var configProvider = (0, _vue.inject)('configProvider', _configProvider.defaultConfigProvider);\n    return {\n      configProvider: configProvider\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    (0, _vue.nextTick)(function () {\n      var node = (0, _propsUtil.findDOMNode)(_this);\n\n      if (node.nodeType !== 1) {\n        return;\n      }\n\n      _this.instance = _this.bindAnimationEvent(node);\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.instance) {\n      this.instance.cancel();\n    }\n\n    if (this.clickWaveTimeoutId) {\n      clearTimeout(this.clickWaveTimeoutId);\n    }\n  },\n  methods: {\n    onClick: function onClick(node, waveColor) {\n      if (!node || isHidden(node) || node.className.indexOf('-leave') >= 0) {\n        return;\n      }\n\n      var insertExtraNode = this.$props.insertExtraNode;\n      this.extraNode = document.createElement('div');\n      var extraNode = this.extraNode;\n      extraNode.className = 'ant-click-animating-node';\n      var attributeName = this.getAttributeName();\n      node.removeAttribute(attributeName);\n      node.setAttribute(attributeName, 'true'); // Not white or transparent or grey\n\n      styleForPesudo = styleForPesudo || document.createElement('style');\n\n      if (waveColor && waveColor !== '#ffffff' && waveColor !== 'rgb(255, 255, 255)' && isNotGrey(waveColor) && !/rgba\\(\\d*, \\d*, \\d*, 0\\)/.test(waveColor) && // any transparent rgba color\n      waveColor !== 'transparent') {\n        // Add nonce if CSP exist\n        if (this.csp && this.csp.nonce) {\n          styleForPesudo.nonce = this.csp.nonce;\n        }\n\n        extraNode.style.borderColor = waveColor;\n        styleForPesudo.innerHTML = \"\\n        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\\n          --antd-wave-shadow-color: \".concat(waveColor, \";\\n        }\");\n\n        if (!document.body.contains(styleForPesudo)) {\n          document.body.appendChild(styleForPesudo);\n        }\n      }\n\n      if (insertExtraNode) {\n        node.appendChild(extraNode);\n      }\n\n      _Event.default.addStartEventListener(node, this.onTransitionStart);\n\n      _Event.default.addEndEventListener(node, this.onTransitionEnd);\n    },\n    onTransitionStart: function onTransitionStart(e) {\n      if (this._.isUnmounted) return;\n      var node = (0, _propsUtil.findDOMNode)(this);\n\n      if (!e || e.target !== node) {\n        return;\n      }\n\n      if (!this.animationStart) {\n        this.resetEffect(node);\n      }\n    },\n    onTransitionEnd: function onTransitionEnd(e) {\n      if (!e || e.animationName !== 'fadeEffect') {\n        return;\n      }\n\n      this.resetEffect(e.target);\n    },\n    getAttributeName: function getAttributeName() {\n      var insertExtraNode = this.$props.insertExtraNode;\n      return insertExtraNode ? 'ant-click-animating' : 'ant-click-animating-without-extra-node';\n    },\n    bindAnimationEvent: function bindAnimationEvent(node) {\n      var _this2 = this;\n\n      if (!node || !node.getAttribute || node.getAttribute('disabled') || node.className.indexOf('disabled') >= 0) {\n        return;\n      }\n\n      var onClick = function onClick(e) {\n        // Fix radio button click twice\n        if (e.target.tagName === 'INPUT' || isHidden(e.target)) {\n          return;\n        }\n\n        _this2.resetEffect(node); // Get wave color from target\n\n\n        var waveColor = getComputedStyle(node).getPropertyValue('border-top-color') || // Firefox Compatible\n        getComputedStyle(node).getPropertyValue('border-color') || getComputedStyle(node).getPropertyValue('background-color');\n        _this2.clickWaveTimeoutId = window.setTimeout(function () {\n          return _this2.onClick(node, waveColor);\n        }, 0);\n\n        _raf.default.cancel(_this2.animationStartId);\n\n        _this2.animationStart = true; // Render to trigger transition event cost 3 frames. Let's delay 10 frames to reset this.\n\n        _this2.animationStartId = (0, _raf.default)(function () {\n          _this2.animationStart = false;\n        }, 10);\n      };\n\n      node.addEventListener('click', onClick, true);\n      return {\n        cancel: function cancel() {\n          node.removeEventListener('click', onClick, true);\n        }\n      };\n    },\n    resetEffect: function resetEffect(node) {\n      if (!node || node === this.extraNode || !(node instanceof Element)) {\n        return;\n      }\n\n      var insertExtraNode = this.$props.insertExtraNode;\n      var attributeName = this.getAttributeName();\n      node.setAttribute(attributeName, 'false'); // edge has bug on `removeAttribute` #14466\n\n      if (styleForPesudo) {\n        styleForPesudo.innerHTML = '';\n      }\n\n      if (insertExtraNode && this.extraNode && node.contains(this.extraNode)) {\n        node.removeChild(this.extraNode);\n      }\n\n      _Event.default.removeStartEventListener(node, this.onTransitionStart);\n\n      _Event.default.removeEndEventListener(node, this.onTransitionEnd);\n    }\n  },\n  render: function render() {\n    var _a, _b;\n\n    var csp = this.configProvider.csp;\n\n    if (csp) {\n      this.csp = csp;\n    }\n\n    return (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)[0];\n  }\n});\n\nexports.default = _default;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/lib/_util/wave.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","default","_vue","_Event","_raf","_configProvider","_propsUtil","styleForPesudo","isHidden","element","process","env","NODE_ENV","offsetParent","isNotGrey","color","match","_default","defineComponent","name","props","setup","configProvider","inject","defaultConfigProvider","mounted","_this","nextTick","node","findDOMNode","nodeType","instance","bindAnimationEvent","beforeUnmount","cancel","clickWaveTimeoutId","clearTimeout","methods","onClick","waveColor","className","indexOf","insertExtraNode","$props","extraNode","document","createElement","attributeName","getAttributeName","removeAttribute","setAttribute","test","csp","nonce","style","borderColor","innerHTML","concat","body","contains","appendChild","addStartEventListener","onTransitionStart","addEndEventListener","onTransitionEnd","e","_","isUnmounted","target","animationStart","resetEffect","animationName","_this2","getAttribute","tagName","getComputedStyle","getPropertyValue","window","setTimeout","animationStartId","addEventListener","removeEventListener","Element","removeChild","removeStartEventListener","removeEndEventListener","render","_a","_b","$slots","call"],"mappings":"AAAA;;AAEA,IAAIA,sBAAsB,GAAGC,OAAO,CAAC,8CAAD,CAApC;;AAEAC,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,IAAI,GAAGN,OAAO,CAAC,KAAD,CAAlB;;AAEA,IAAIO,MAAM,GAAGR,sBAAsB,CAACC,OAAO,CAAC,uBAAD,CAAR,CAAnC;;AAEA,IAAIQ,IAAI,GAAGT,sBAAsB,CAACC,OAAO,CAAC,OAAD,CAAR,CAAjC;;AAEA,IAAIS,eAAe,GAAGT,OAAO,CAAC,oBAAD,CAA7B;;AAEA,IAAIU,UAAU,GAAGV,OAAO,CAAC,cAAD,CAAxB;;AAEA,IAAIW,cAAJ,C,CAAoB;;AAEpB,SAASC,QAAT,CAAkBC,OAAlB,EAA2B;AACzB,MAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,MAA7B,EAAqC;AACnC,WAAO,KAAP;AACD;;AAED,SAAO,CAACH,OAAD,IAAYA,OAAO,CAACI,YAAR,KAAyB,IAA5C;AACD;;AAED,SAASC,SAAT,CAAmBC,KAAnB,EAA0B;AACxB;AACA,MAAIC,KAAK,GAAG,CAACD,KAAK,IAAI,EAAV,EAAcC,KAAd,CAAoB,0CAApB,CAAZ;;AAEA,MAAIA,KAAK,IAAIA,KAAK,CAAC,CAAD,CAAd,IAAqBA,KAAK,CAAC,CAAD,CAA1B,IAAiCA,KAAK,CAAC,CAAD,CAA1C,EAA+C;AAC7C,WAAO,EAAEA,KAAK,CAAC,CAAD,CAAL,KAAaA,KAAK,CAAC,CAAD,CAAlB,IAAyBA,KAAK,CAAC,CAAD,CAAL,KAAaA,KAAK,CAAC,CAAD,CAA7C,CAAP;AACD;;AAED,SAAO,IAAP;AACD;;AAED,IAAIC,QAAQ,GAAG,CAAC,GAAGf,IAAI,CAACgB,eAAT,EAA0B;AACvCC,EAAAA,IAAI,EAAE,MADiC;AAEvCC,EAAAA,KAAK,EAAE,CAAC,iBAAD,CAFgC;AAGvCC,EAAAA,KAAK,EAAE,SAASA,KAAT,GAAiB;AACtB,QAAIC,cAAc,GAAG,CAAC,GAAGpB,IAAI,CAACqB,MAAT,EAAiB,gBAAjB,EAAmClB,eAAe,CAACmB,qBAAnD,CAArB;AACA,WAAO;AACLF,MAAAA,cAAc,EAAEA;AADX,KAAP;AAGD,GARsC;AASvCG,EAAAA,OAAO,EAAE,SAASA,OAAT,GAAmB;AAC1B,QAAIC,KAAK,GAAG,IAAZ;;AAEA,KAAC,GAAGxB,IAAI,CAACyB,QAAT,EAAmB,YAAY;AAC7B,UAAIC,IAAI,GAAG,CAAC,GAAGtB,UAAU,CAACuB,WAAf,EAA4BH,KAA5B,CAAX;;AAEA,UAAIE,IAAI,CAACE,QAAL,KAAkB,CAAtB,EAAyB;AACvB;AACD;;AAEDJ,MAAAA,KAAK,CAACK,QAAN,GAAiBL,KAAK,CAACM,kBAAN,CAAyBJ,IAAzB,CAAjB;AACD,KARD;AASD,GArBsC;AAsBvCK,EAAAA,aAAa,EAAE,SAASA,aAAT,GAAyB;AACtC,QAAI,KAAKF,QAAT,EAAmB;AACjB,WAAKA,QAAL,CAAcG,MAAd;AACD;;AAED,QAAI,KAAKC,kBAAT,EAA6B;AAC3BC,MAAAA,YAAY,CAAC,KAAKD,kBAAN,CAAZ;AACD;AACF,GA9BsC;AA+BvCE,EAAAA,OAAO,EAAE;AACPC,IAAAA,OAAO,EAAE,SAASA,OAAT,CAAiBV,IAAjB,EAAuBW,SAAvB,EAAkC;AACzC,UAAI,CAACX,IAAD,IAASpB,QAAQ,CAACoB,IAAD,CAAjB,IAA2BA,IAAI,CAACY,SAAL,CAAeC,OAAf,CAAuB,QAAvB,KAAoC,CAAnE,EAAsE;AACpE;AACD;;AAED,UAAIC,eAAe,GAAG,KAAKC,MAAL,CAAYD,eAAlC;AACA,WAAKE,SAAL,GAAiBC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAAjB;AACA,UAAIF,SAAS,GAAG,KAAKA,SAArB;AACAA,MAAAA,SAAS,CAACJ,SAAV,GAAsB,0BAAtB;AACA,UAAIO,aAAa,GAAG,KAAKC,gBAAL,EAApB;AACApB,MAAAA,IAAI,CAACqB,eAAL,CAAqBF,aAArB;AACAnB,MAAAA,IAAI,CAACsB,YAAL,CAAkBH,aAAlB,EAAiC,MAAjC,EAXyC,CAWC;;AAE1CxC,MAAAA,cAAc,GAAGA,cAAc,IAAIsC,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAnC;;AAEA,UAAIP,SAAS,IAAIA,SAAS,KAAK,SAA3B,IAAwCA,SAAS,KAAK,oBAAtD,IAA8EzB,SAAS,CAACyB,SAAD,CAAvF,IAAsG,CAAC,2BAA2BY,IAA3B,CAAgCZ,SAAhC,CAAvG,IAAqJ;AACzJA,MAAAA,SAAS,KAAK,aADd,EAC6B;AAC3B;AACA,YAAI,KAAKa,GAAL,IAAY,KAAKA,GAAL,CAASC,KAAzB,EAAgC;AAC9B9C,UAAAA,cAAc,CAAC8C,KAAf,GAAuB,KAAKD,GAAL,CAASC,KAAhC;AACD;;AAEDT,QAAAA,SAAS,CAACU,KAAV,CAAgBC,WAAhB,GAA8BhB,SAA9B;AACAhC,QAAAA,cAAc,CAACiD,SAAf,GAA2B,sIAAsIC,MAAtI,CAA6IlB,SAA7I,EAAwJ,cAAxJ,CAA3B;;AAEA,YAAI,CAACM,QAAQ,CAACa,IAAT,CAAcC,QAAd,CAAuBpD,cAAvB,CAAL,EAA6C;AAC3CsC,UAAAA,QAAQ,CAACa,IAAT,CAAcE,WAAd,CAA0BrD,cAA1B;AACD;AACF;;AAED,UAAImC,eAAJ,EAAqB;AACnBd,QAAAA,IAAI,CAACgC,WAAL,CAAiBhB,SAAjB;AACD;;AAEDzC,MAAAA,MAAM,CAACF,OAAP,CAAe4D,qBAAf,CAAqCjC,IAArC,EAA2C,KAAKkC,iBAAhD;;AAEA3D,MAAAA,MAAM,CAACF,OAAP,CAAe8D,mBAAf,CAAmCnC,IAAnC,EAAyC,KAAKoC,eAA9C;AACD,KAtCM;AAuCPF,IAAAA,iBAAiB,EAAE,SAASA,iBAAT,CAA2BG,CAA3B,EAA8B;AAC/C,UAAI,KAAKC,CAAL,CAAOC,WAAX,EAAwB;AACxB,UAAIvC,IAAI,GAAG,CAAC,GAAGtB,UAAU,CAACuB,WAAf,EAA4B,IAA5B,CAAX;;AAEA,UAAI,CAACoC,CAAD,IAAMA,CAAC,CAACG,MAAF,KAAaxC,IAAvB,EAA6B;AAC3B;AACD;;AAED,UAAI,CAAC,KAAKyC,cAAV,EAA0B;AACxB,aAAKC,WAAL,CAAiB1C,IAAjB;AACD;AACF,KAlDM;AAmDPoC,IAAAA,eAAe,EAAE,SAASA,eAAT,CAAyBC,CAAzB,EAA4B;AAC3C,UAAI,CAACA,CAAD,IAAMA,CAAC,CAACM,aAAF,KAAoB,YAA9B,EAA4C;AAC1C;AACD;;AAED,WAAKD,WAAL,CAAiBL,CAAC,CAACG,MAAnB;AACD,KAzDM;AA0DPpB,IAAAA,gBAAgB,EAAE,SAASA,gBAAT,GAA4B;AAC5C,UAAIN,eAAe,GAAG,KAAKC,MAAL,CAAYD,eAAlC;AACA,aAAOA,eAAe,GAAG,qBAAH,GAA2B,wCAAjD;AACD,KA7DM;AA8DPV,IAAAA,kBAAkB,EAAE,SAASA,kBAAT,CAA4BJ,IAA5B,EAAkC;AACpD,UAAI4C,MAAM,GAAG,IAAb;;AAEA,UAAI,CAAC5C,IAAD,IAAS,CAACA,IAAI,CAAC6C,YAAf,IAA+B7C,IAAI,CAAC6C,YAAL,CAAkB,UAAlB,CAA/B,IAAgE7C,IAAI,CAACY,SAAL,CAAeC,OAAf,CAAuB,UAAvB,KAAsC,CAA1G,EAA6G;AAC3G;AACD;;AAED,UAAIH,OAAO,GAAG,SAASA,OAAT,CAAiB2B,CAAjB,EAAoB;AAChC;AACA,YAAIA,CAAC,CAACG,MAAF,CAASM,OAAT,KAAqB,OAArB,IAAgClE,QAAQ,CAACyD,CAAC,CAACG,MAAH,CAA5C,EAAwD;AACtD;AACD;;AAEDI,QAAAA,MAAM,CAACF,WAAP,CAAmB1C,IAAnB,EANgC,CAMN;;;AAG1B,YAAIW,SAAS,GAAGoC,gBAAgB,CAAC/C,IAAD,CAAhB,CAAuBgD,gBAAvB,CAAwC,kBAAxC,KAA+D;AAC/ED,QAAAA,gBAAgB,CAAC/C,IAAD,CAAhB,CAAuBgD,gBAAvB,CAAwC,cAAxC,CADgB,IAC2CD,gBAAgB,CAAC/C,IAAD,CAAhB,CAAuBgD,gBAAvB,CAAwC,kBAAxC,CAD3D;AAEAJ,QAAAA,MAAM,CAACrC,kBAAP,GAA4B0C,MAAM,CAACC,UAAP,CAAkB,YAAY;AACxD,iBAAON,MAAM,CAAClC,OAAP,CAAeV,IAAf,EAAqBW,SAArB,CAAP;AACD,SAF2B,EAEzB,CAFyB,CAA5B;;AAIAnC,QAAAA,IAAI,CAACH,OAAL,CAAaiC,MAAb,CAAoBsC,MAAM,CAACO,gBAA3B;;AAEAP,QAAAA,MAAM,CAACH,cAAP,GAAwB,IAAxB,CAjBgC,CAiBF;;AAE9BG,QAAAA,MAAM,CAACO,gBAAP,GAA0B,CAAC,GAAG3E,IAAI,CAACH,OAAT,EAAkB,YAAY;AACtDuE,UAAAA,MAAM,CAACH,cAAP,GAAwB,KAAxB;AACD,SAFyB,EAEvB,EAFuB,CAA1B;AAGD,OAtBD;;AAwBAzC,MAAAA,IAAI,CAACoD,gBAAL,CAAsB,OAAtB,EAA+B1C,OAA/B,EAAwC,IAAxC;AACA,aAAO;AACLJ,QAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxBN,UAAAA,IAAI,CAACqD,mBAAL,CAAyB,OAAzB,EAAkC3C,OAAlC,EAA2C,IAA3C;AACD;AAHI,OAAP;AAKD,KAnGM;AAoGPgC,IAAAA,WAAW,EAAE,SAASA,WAAT,CAAqB1C,IAArB,EAA2B;AACtC,UAAI,CAACA,IAAD,IAASA,IAAI,KAAK,KAAKgB,SAAvB,IAAoC,EAAEhB,IAAI,YAAYsD,OAAlB,CAAxC,EAAoE;AAClE;AACD;;AAED,UAAIxC,eAAe,GAAG,KAAKC,MAAL,CAAYD,eAAlC;AACA,UAAIK,aAAa,GAAG,KAAKC,gBAAL,EAApB;AACApB,MAAAA,IAAI,CAACsB,YAAL,CAAkBH,aAAlB,EAAiC,OAAjC,EAPsC,CAOK;;AAE3C,UAAIxC,cAAJ,EAAoB;AAClBA,QAAAA,cAAc,CAACiD,SAAf,GAA2B,EAA3B;AACD;;AAED,UAAId,eAAe,IAAI,KAAKE,SAAxB,IAAqChB,IAAI,CAAC+B,QAAL,CAAc,KAAKf,SAAnB,CAAzC,EAAwE;AACtEhB,QAAAA,IAAI,CAACuD,WAAL,CAAiB,KAAKvC,SAAtB;AACD;;AAEDzC,MAAAA,MAAM,CAACF,OAAP,CAAemF,wBAAf,CAAwCxD,IAAxC,EAA8C,KAAKkC,iBAAnD;;AAEA3D,MAAAA,MAAM,CAACF,OAAP,CAAeoF,sBAAf,CAAsCzD,IAAtC,EAA4C,KAAKoC,eAAjD;AACD;AAxHM,GA/B8B;AAyJvCsB,EAAAA,MAAM,EAAE,SAASA,MAAT,GAAkB;AACxB,QAAIC,EAAJ,EAAQC,EAAR;;AAEA,QAAIpC,GAAG,GAAG,KAAK9B,cAAL,CAAoB8B,GAA9B;;AAEA,QAAIA,GAAJ,EAAS;AACP,WAAKA,GAAL,GAAWA,GAAX;AACD;;AAED,WAAO,CAACoC,EAAE,GAAG,CAACD,EAAE,GAAG,KAAKE,MAAX,EAAmBxF,OAAzB,MAAsC,IAAtC,IAA8CuF,EAAE,KAAK,KAAK,CAA1D,GAA8D,KAAK,CAAnE,GAAuEA,EAAE,CAACE,IAAH,CAAQH,EAAR,EAAY,CAAZ,CAA9E;AACD;AAnKsC,CAA1B,CAAf;;AAsKAxF,OAAO,CAACE,OAAR,GAAkBgB,QAAlB","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _vue = require(\"vue\");\n\nvar _Event = _interopRequireDefault(require(\"./css-animation/Event\"));\n\nvar _raf = _interopRequireDefault(require(\"./raf\"));\n\nvar _configProvider = require(\"../config-provider\");\n\nvar _propsUtil = require(\"./props-util\");\n\nvar styleForPesudo; // Where el is the DOM element you'd like to test for visibility\n\nfunction isHidden(element) {\n  if (process.env.NODE_ENV === 'test') {\n    return false;\n  }\n\n  return !element || element.offsetParent === null;\n}\n\nfunction isNotGrey(color) {\n  // eslint-disable-next-line no-useless-escape\n  var match = (color || '').match(/rgba?\\((\\d*), (\\d*), (\\d*)(, [\\.\\d]*)?\\)/);\n\n  if (match && match[1] && match[2] && match[3]) {\n    return !(match[1] === match[2] && match[2] === match[3]);\n  }\n\n  return true;\n}\n\nvar _default = (0, _vue.defineComponent)({\n  name: 'Wave',\n  props: ['insertExtraNode'],\n  setup: function setup() {\n    var configProvider = (0, _vue.inject)('configProvider', _configProvider.defaultConfigProvider);\n    return {\n      configProvider: configProvider\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    (0, _vue.nextTick)(function () {\n      var node = (0, _propsUtil.findDOMNode)(_this);\n\n      if (node.nodeType !== 1) {\n        return;\n      }\n\n      _this.instance = _this.bindAnimationEvent(node);\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.instance) {\n      this.instance.cancel();\n    }\n\n    if (this.clickWaveTimeoutId) {\n      clearTimeout(this.clickWaveTimeoutId);\n    }\n  },\n  methods: {\n    onClick: function onClick(node, waveColor) {\n      if (!node || isHidden(node) || node.className.indexOf('-leave') >= 0) {\n        return;\n      }\n\n      var insertExtraNode = this.$props.insertExtraNode;\n      this.extraNode = document.createElement('div');\n      var extraNode = this.extraNode;\n      extraNode.className = 'ant-click-animating-node';\n      var attributeName = this.getAttributeName();\n      node.removeAttribute(attributeName);\n      node.setAttribute(attributeName, 'true'); // Not white or transparent or grey\n\n      styleForPesudo = styleForPesudo || document.createElement('style');\n\n      if (waveColor && waveColor !== '#ffffff' && waveColor !== 'rgb(255, 255, 255)' && isNotGrey(waveColor) && !/rgba\\(\\d*, \\d*, \\d*, 0\\)/.test(waveColor) && // any transparent rgba color\n      waveColor !== 'transparent') {\n        // Add nonce if CSP exist\n        if (this.csp && this.csp.nonce) {\n          styleForPesudo.nonce = this.csp.nonce;\n        }\n\n        extraNode.style.borderColor = waveColor;\n        styleForPesudo.innerHTML = \"\\n        [ant-click-animating-without-extra-node='true']::after, .ant-click-animating-node {\\n          --antd-wave-shadow-color: \".concat(waveColor, \";\\n        }\");\n\n        if (!document.body.contains(styleForPesudo)) {\n          document.body.appendChild(styleForPesudo);\n        }\n      }\n\n      if (insertExtraNode) {\n        node.appendChild(extraNode);\n      }\n\n      _Event.default.addStartEventListener(node, this.onTransitionStart);\n\n      _Event.default.addEndEventListener(node, this.onTransitionEnd);\n    },\n    onTransitionStart: function onTransitionStart(e) {\n      if (this._.isUnmounted) return;\n      var node = (0, _propsUtil.findDOMNode)(this);\n\n      if (!e || e.target !== node) {\n        return;\n      }\n\n      if (!this.animationStart) {\n        this.resetEffect(node);\n      }\n    },\n    onTransitionEnd: function onTransitionEnd(e) {\n      if (!e || e.animationName !== 'fadeEffect') {\n        return;\n      }\n\n      this.resetEffect(e.target);\n    },\n    getAttributeName: function getAttributeName() {\n      var insertExtraNode = this.$props.insertExtraNode;\n      return insertExtraNode ? 'ant-click-animating' : 'ant-click-animating-without-extra-node';\n    },\n    bindAnimationEvent: function bindAnimationEvent(node) {\n      var _this2 = this;\n\n      if (!node || !node.getAttribute || node.getAttribute('disabled') || node.className.indexOf('disabled') >= 0) {\n        return;\n      }\n\n      var onClick = function onClick(e) {\n        // Fix radio button click twice\n        if (e.target.tagName === 'INPUT' || isHidden(e.target)) {\n          return;\n        }\n\n        _this2.resetEffect(node); // Get wave color from target\n\n\n        var waveColor = getComputedStyle(node).getPropertyValue('border-top-color') || // Firefox Compatible\n        getComputedStyle(node).getPropertyValue('border-color') || getComputedStyle(node).getPropertyValue('background-color');\n        _this2.clickWaveTimeoutId = window.setTimeout(function () {\n          return _this2.onClick(node, waveColor);\n        }, 0);\n\n        _raf.default.cancel(_this2.animationStartId);\n\n        _this2.animationStart = true; // Render to trigger transition event cost 3 frames. Let's delay 10 frames to reset this.\n\n        _this2.animationStartId = (0, _raf.default)(function () {\n          _this2.animationStart = false;\n        }, 10);\n      };\n\n      node.addEventListener('click', onClick, true);\n      return {\n        cancel: function cancel() {\n          node.removeEventListener('click', onClick, true);\n        }\n      };\n    },\n    resetEffect: function resetEffect(node) {\n      if (!node || node === this.extraNode || !(node instanceof Element)) {\n        return;\n      }\n\n      var insertExtraNode = this.$props.insertExtraNode;\n      var attributeName = this.getAttributeName();\n      node.setAttribute(attributeName, 'false'); // edge has bug on `removeAttribute` #14466\n\n      if (styleForPesudo) {\n        styleForPesudo.innerHTML = '';\n      }\n\n      if (insertExtraNode && this.extraNode && node.contains(this.extraNode)) {\n        node.removeChild(this.extraNode);\n      }\n\n      _Event.default.removeStartEventListener(node, this.onTransitionStart);\n\n      _Event.default.removeEndEventListener(node, this.onTransitionEnd);\n    }\n  },\n  render: function render() {\n    var _a, _b;\n\n    var csp = this.configProvider.csp;\n\n    if (csp) {\n      this.csp = csp;\n    }\n\n    return (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a)[0];\n  }\n});\n\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}