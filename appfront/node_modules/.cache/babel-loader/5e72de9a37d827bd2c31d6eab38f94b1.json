{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../../_util/vue-types';\nimport BaseMixin from '../../../_util/BaseMixin';\nimport { hasProp } from '../../../_util/props-util';\nimport moment from 'moment';\nimport { isAllowedDate as _isAllowedDate, getTodayTime } from '../util/index';\n\nfunction noop() {}\n\nexport function getNowByCurrentStateValue(value) {\n  var ret;\n\n  if (value) {\n    ret = getTodayTime(value);\n  } else {\n    ret = moment();\n  }\n\n  return ret;\n}\n\nfunction isMoment(value) {\n  if (Array.isArray(value)) {\n    return value.length === 0 || value.findIndex(function (val) {\n      return val === undefined || moment.isMoment(val);\n    }) !== -1;\n  } else {\n    return value === undefined || moment.isMoment(value);\n  }\n}\n\nvar MomentType = PropTypes.custom(isMoment);\nvar CalendarMixin = {\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  name: 'CalendarMixinWrapper',\n  props: {\n    value: MomentType,\n    defaultValue: MomentType\n  },\n  data: function data() {\n    if (this.onKeyDown === undefined) {\n      this.onKeyDown = noop;\n    }\n\n    if (this.onBlur === undefined) {\n      this.onBlur = noop;\n    }\n\n    var props = this.$props;\n    var sValue = props.value || props.defaultValue || getNowByCurrentStateValue();\n    return {\n      sValue: sValue,\n      sSelectedValue: props.selectedValue || props.defaultSelectedValue\n    };\n  },\n  watch: {\n    value: function value(val) {\n      var sValue = val || this.defaultValue || getNowByCurrentStateValue(this.sValue);\n      this.setState({\n        sValue: sValue\n      });\n    },\n    selectedValue: function selectedValue(val) {\n      this.setState({\n        sSelectedValue: val\n      });\n    }\n  },\n  methods: {\n    onSelect: function onSelect(value, cause) {\n      if (value) {\n        this.setValue(value);\n      }\n\n      this.setSelectedValue(value, cause);\n    },\n    renderRoot: function renderRoot(newProps) {\n      var _className;\n\n      var props = _extends(_extends({}, this.$props), this.$attrs);\n\n      var prefixCls = props.prefixCls;\n      var className = (_className = {}, _defineProperty(_className, prefixCls, 1), _defineProperty(_className, \"\".concat(prefixCls, \"-hidden\"), !props.visible), _defineProperty(_className, props.class, !!props.class), _defineProperty(_className, newProps.class, !!newProps.class), _className);\n      return _createVNode(\"div\", {\n        \"ref\": this.saveRoot,\n        \"class\": className,\n        \"tabindex\": \"0\",\n        \"onKeydown\": this.onKeyDown || noop,\n        \"onBlur\": this.onBlur || noop\n      }, [newProps.children]);\n    },\n    setSelectedValue: function setSelectedValue(selectedValue, cause) {\n      // if (this.isAllowedDate(selectedValue)) {\n      if (!hasProp(this, 'selectedValue')) {\n        this.setState({\n          sSelectedValue: selectedValue\n        });\n      }\n\n      this.__emit('select', selectedValue, cause); // }\n\n    },\n    setValue: function setValue(value) {\n      var originalValue = this.sValue;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      if (originalValue && value && !originalValue.isSame(value) || !originalValue && value || originalValue && !value) {\n        this.__emit('change', value);\n      }\n    },\n    isAllowedDate: function isAllowedDate(value) {\n      var disabledDate = this.disabledDate;\n      var disabledTime = this.disabledTime;\n      return _isAllowedDate(value, disabledDate, disabledTime);\n    }\n  }\n};\nexport default CalendarMixin;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-calendar/src/mixin/CalendarMixin.js"],"names":["_defineProperty","_extends","createVNode","_createVNode","PropTypes","BaseMixin","hasProp","moment","isAllowedDate","_isAllowedDate","getTodayTime","noop","getNowByCurrentStateValue","value","ret","isMoment","Array","isArray","length","findIndex","val","undefined","MomentType","custom","CalendarMixin","mixins","inheritAttrs","name","props","defaultValue","data","onKeyDown","onBlur","$props","sValue","sSelectedValue","selectedValue","defaultSelectedValue","watch","setState","methods","onSelect","cause","setValue","setSelectedValue","renderRoot","newProps","_className","$attrs","prefixCls","className","concat","visible","class","saveRoot","children","__emit","originalValue","isSame","disabledDate","disabledTime"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../../_util/vue-types';\nimport BaseMixin from '../../../_util/BaseMixin';\nimport { hasProp } from '../../../_util/props-util';\nimport moment from 'moment';\nimport { isAllowedDate as _isAllowedDate, getTodayTime } from '../util/index';\n\nfunction noop() {}\n\nexport function getNowByCurrentStateValue(value) {\n  var ret;\n\n  if (value) {\n    ret = getTodayTime(value);\n  } else {\n    ret = moment();\n  }\n\n  return ret;\n}\n\nfunction isMoment(value) {\n  if (Array.isArray(value)) {\n    return value.length === 0 || value.findIndex(function (val) {\n      return val === undefined || moment.isMoment(val);\n    }) !== -1;\n  } else {\n    return value === undefined || moment.isMoment(value);\n  }\n}\n\nvar MomentType = PropTypes.custom(isMoment);\nvar CalendarMixin = {\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  name: 'CalendarMixinWrapper',\n  props: {\n    value: MomentType,\n    defaultValue: MomentType\n  },\n  data: function data() {\n    if (this.onKeyDown === undefined) {\n      this.onKeyDown = noop;\n    }\n\n    if (this.onBlur === undefined) {\n      this.onBlur = noop;\n    }\n\n    var props = this.$props;\n    var sValue = props.value || props.defaultValue || getNowByCurrentStateValue();\n    return {\n      sValue: sValue,\n      sSelectedValue: props.selectedValue || props.defaultSelectedValue\n    };\n  },\n  watch: {\n    value: function value(val) {\n      var sValue = val || this.defaultValue || getNowByCurrentStateValue(this.sValue);\n      this.setState({\n        sValue: sValue\n      });\n    },\n    selectedValue: function selectedValue(val) {\n      this.setState({\n        sSelectedValue: val\n      });\n    }\n  },\n  methods: {\n    onSelect: function onSelect(value, cause) {\n      if (value) {\n        this.setValue(value);\n      }\n\n      this.setSelectedValue(value, cause);\n    },\n    renderRoot: function renderRoot(newProps) {\n      var _className;\n\n      var props = _extends(_extends({}, this.$props), this.$attrs);\n\n      var prefixCls = props.prefixCls;\n      var className = (_className = {}, _defineProperty(_className, prefixCls, 1), _defineProperty(_className, \"\".concat(prefixCls, \"-hidden\"), !props.visible), _defineProperty(_className, props.class, !!props.class), _defineProperty(_className, newProps.class, !!newProps.class), _className);\n      return _createVNode(\"div\", {\n        \"ref\": this.saveRoot,\n        \"class\": className,\n        \"tabindex\": \"0\",\n        \"onKeydown\": this.onKeyDown || noop,\n        \"onBlur\": this.onBlur || noop\n      }, [newProps.children]);\n    },\n    setSelectedValue: function setSelectedValue(selectedValue, cause) {\n      // if (this.isAllowedDate(selectedValue)) {\n      if (!hasProp(this, 'selectedValue')) {\n        this.setState({\n          sSelectedValue: selectedValue\n        });\n      }\n\n      this.__emit('select', selectedValue, cause); // }\n\n    },\n    setValue: function setValue(value) {\n      var originalValue = this.sValue;\n\n      if (!hasProp(this, 'value')) {\n        this.setState({\n          sValue: value\n        });\n      }\n\n      if (originalValue && value && !originalValue.isSame(value) || !originalValue && value || originalValue && !value) {\n        this.__emit('change', value);\n      }\n    },\n    isAllowedDate: function isAllowedDate(value) {\n      var disabledDate = this.disabledDate;\n      var disabledTime = this.disabledTime;\n      return _isAllowedDate(value, disabledDate, disabledTime);\n    }\n  }\n};\nexport default CalendarMixin;"]},"metadata":{},"sourceType":"module"}