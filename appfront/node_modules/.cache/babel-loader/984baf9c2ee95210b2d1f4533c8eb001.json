{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport { defineComponent, h, onUnmounted, inject, ref, onMounted } from 'vue';\nimport XEUtils from 'xe-utils';\nimport GlobalConfig from '../../v-x-e-table/src/conf';\nimport { VXETable } from '../../v-x-e-table';\nimport { getFuncText, isEnableConf } from '../../tools/utils';\nimport { createItem, watchItem, destroyItem, assemItem } from './util';\nimport { renderTitle } from './render';\nexport var formItemProps = {\n  title: String,\n  field: String,\n  span: [String, Number],\n  align: String,\n  titleAlign: String,\n  titleWidth: [String, Number],\n  className: [String, Function],\n  titleOverflow: {\n    type: [Boolean, String],\n    default: null\n  },\n  titlePrefix: Object,\n  titleSuffix: Object,\n  resetValue: {\n    default: null\n  },\n  visibleMethod: Function,\n  visible: {\n    type: Boolean,\n    default: null\n  },\n  folding: Boolean,\n  collapseNode: Boolean,\n  itemRender: Object\n};\nexport default defineComponent({\n  name: 'VxeFormItem',\n  props: formItemProps,\n  setup: function (props, _a) {\n    var slots = _a.slots;\n    var refElem = ref();\n    var $xeform = inject('$xeform', {});\n    var formGather = inject('xeformgather', null);\n    var formItem = createItem($xeform, props);\n    formItem.slots = slots;\n    watchItem(props, formItem);\n    onMounted(function () {\n      assemItem($xeform, refElem.value, formItem, formGather);\n    });\n    onUnmounted(function () {\n      destroyItem($xeform, formItem);\n    });\n\n    var renderItem = function ($xeform, item) {\n      var props = $xeform.props,\n          reactData = $xeform.reactData;\n      var data = props.data,\n          rules = props.rules,\n          allTitleOverflow = props.titleOverflow;\n      var collapseAll = reactData.collapseAll;\n      var computeValidOpts = $xeform.getComputeMaps().computeValidOpts;\n      var validOpts = computeValidOpts.value;\n      var slots = item.slots,\n          title = item.title,\n          visible = item.visible,\n          folding = item.folding,\n          visibleMethod = item.visibleMethod,\n          field = item.field,\n          collapseNode = item.collapseNode,\n          itemRender = item.itemRender,\n          showError = item.showError,\n          errRule = item.errRule,\n          className = item.className,\n          titleOverflow = item.titleOverflow;\n      var compConf = isEnableConf(itemRender) ? VXETable.renderer.get(itemRender.name) : null;\n      var defaultSlot = slots ? slots.default : null;\n      var titleSlot = slots ? slots.title : null;\n      var span = item.span || props.span;\n      var align = item.align || props.align;\n      var titleAlign = item.titleAlign || props.titleAlign;\n      var titleWidth = item.titleWidth || props.titleWidth;\n      var itemOverflow = XEUtils.isUndefined(titleOverflow) || XEUtils.isNull(titleOverflow) ? allTitleOverflow : titleOverflow;\n      var showEllipsis = itemOverflow === 'ellipsis';\n      var showTitle = itemOverflow === 'title';\n      var showTooltip = itemOverflow === true || itemOverflow === 'tooltip';\n      var hasEllipsis = showTitle || showTooltip || showEllipsis;\n      var itemVisibleMethod = visibleMethod;\n      var params = {\n        data: data,\n        property: field,\n        item: item,\n        $form: $xeform\n      };\n      var isRequired = false;\n\n      if (rules) {\n        var itemRules = rules[field];\n\n        if (itemRules) {\n          isRequired = itemRules.some(function (rule) {\n            return rule.required;\n          });\n        }\n      }\n\n      if (!itemVisibleMethod && compConf && compConf.itemVisibleMethod) {\n        itemVisibleMethod = compConf.itemVisibleMethod;\n      }\n\n      var contentVNs = [];\n\n      if (defaultSlot) {\n        contentVNs = $xeform.callSlot(defaultSlot, params);\n      } else if (compConf && compConf.renderItemContent) {\n        contentVNs = compConf.renderItemContent(itemRender, params);\n      } else if (field) {\n        contentVNs = [\"\" + XEUtils.get(data, field)];\n      }\n\n      if (collapseNode) {\n        contentVNs.push(h('div', {\n          class: 'vxe-form--item-trigger-node',\n          onClick: $xeform.toggleCollapseEvent\n        }, [h('span', {\n          class: 'vxe-form--item-trigger-text'\n        }, collapseAll ? GlobalConfig.i18n('vxe.form.unfolding') : GlobalConfig.i18n('vxe.form.folding')), h('i', {\n          class: ['vxe-form--item-trigger-icon', collapseAll ? GlobalConfig.icon.FORM_FOLDING : GlobalConfig.icon.FORM_UNFOLDING]\n        })]));\n      }\n\n      if (errRule && validOpts.showMessage) {\n        contentVNs.push(h('div', {\n          class: 'vxe-form--item-valid',\n          style: errRule.maxWidth ? {\n            width: errRule.maxWidth + \"px\"\n          } : null\n        }, errRule.message));\n      }\n\n      var ons = showTooltip ? {\n        onMouseenter: function (evnt) {\n          $xeform.triggerTitleTipEvent(evnt, params);\n        },\n        onMouseleave: $xeform.handleTitleTipLeaveEvent\n      } : {};\n      return h('div', {\n        ref: refElem,\n        class: ['vxe-form--item', item.id, span ? \"vxe-col--\" + span + \" is--span\" : '', className ? XEUtils.isFunction(className) ? className(params) : className : '', {\n          'is--title': title,\n          'is--required': isRequired,\n          'is--hidden': visible === false || folding && collapseAll,\n          'is--active': !itemVisibleMethod || itemVisibleMethod(params),\n          'is--error': showError\n        }]\n      }, [h('div', {\n        class: 'vxe-form--item-inner'\n      }, [title || titleSlot ? h('div', __assign({\n        class: ['vxe-form--item-title', titleAlign ? \"align--\" + titleAlign : null, {\n          'is--ellipsis': hasEllipsis\n        }],\n        style: titleWidth ? {\n          width: isNaN(titleWidth) ? titleWidth : titleWidth + \"px\"\n        } : null,\n        title: showTitle ? getFuncText(title) : null\n      }, ons), renderTitle($xeform, item)) : null, h('div', {\n        class: ['vxe-form--item-content', align ? \"align--\" + align : null]\n      }, contentVNs)])]);\n    };\n\n    var renderVN = function () {\n      var formProps = $xeform ? $xeform.props : null;\n      return formProps && formProps.customLayout ? renderItem($xeform, formItem) : h('div', {\n        ref: refElem\n      });\n    };\n\n    return renderVN;\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vxe-table/es/form/src/form-item.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","defineComponent","h","onUnmounted","inject","ref","onMounted","XEUtils","GlobalConfig","VXETable","getFuncText","isEnableConf","createItem","watchItem","destroyItem","assemItem","renderTitle","formItemProps","title","String","field","span","Number","align","titleAlign","titleWidth","className","Function","titleOverflow","type","Boolean","default","titlePrefix","titleSuffix","resetValue","visibleMethod","visible","folding","collapseNode","itemRender","name","props","setup","_a","slots","refElem","$xeform","formGather","formItem","value","renderItem","item","reactData","data","rules","allTitleOverflow","collapseAll","computeValidOpts","getComputeMaps","validOpts","showError","errRule","compConf","renderer","get","defaultSlot","titleSlot","itemOverflow","isUndefined","isNull","showEllipsis","showTitle","showTooltip","hasEllipsis","itemVisibleMethod","params","property","$form","isRequired","itemRules","some","rule","required","contentVNs","callSlot","renderItemContent","push","class","onClick","toggleCollapseEvent","i18n","icon","FORM_FOLDING","FORM_UNFOLDING","showMessage","style","maxWidth","width","message","ons","onMouseenter","evnt","triggerTitleTipEvent","onMouseleave","handleTitleTipLeaveEvent","id","isFunction","isNaN","renderVN","formProps","customLayout"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport { defineComponent, h, onUnmounted, inject, ref, onMounted } from 'vue';\nimport XEUtils from 'xe-utils';\nimport GlobalConfig from '../../v-x-e-table/src/conf';\nimport { VXETable } from '../../v-x-e-table';\nimport { getFuncText, isEnableConf } from '../../tools/utils';\nimport { createItem, watchItem, destroyItem, assemItem } from './util';\nimport { renderTitle } from './render';\nexport var formItemProps = {\n    title: String,\n    field: String,\n    span: [String, Number],\n    align: String,\n    titleAlign: String,\n    titleWidth: [String, Number],\n    className: [String, Function],\n    titleOverflow: { type: [Boolean, String], default: null },\n    titlePrefix: Object,\n    titleSuffix: Object,\n    resetValue: { default: null },\n    visibleMethod: Function,\n    visible: { type: Boolean, default: null },\n    folding: Boolean,\n    collapseNode: Boolean,\n    itemRender: Object\n};\nexport default defineComponent({\n    name: 'VxeFormItem',\n    props: formItemProps,\n    setup: function (props, _a) {\n        var slots = _a.slots;\n        var refElem = ref();\n        var $xeform = inject('$xeform', {});\n        var formGather = inject('xeformgather', null);\n        var formItem = createItem($xeform, props);\n        formItem.slots = slots;\n        watchItem(props, formItem);\n        onMounted(function () {\n            assemItem($xeform, refElem.value, formItem, formGather);\n        });\n        onUnmounted(function () {\n            destroyItem($xeform, formItem);\n        });\n        var renderItem = function ($xeform, item) {\n            var props = $xeform.props, reactData = $xeform.reactData;\n            var data = props.data, rules = props.rules, allTitleOverflow = props.titleOverflow;\n            var collapseAll = reactData.collapseAll;\n            var computeValidOpts = $xeform.getComputeMaps().computeValidOpts;\n            var validOpts = computeValidOpts.value;\n            var slots = item.slots, title = item.title, visible = item.visible, folding = item.folding, visibleMethod = item.visibleMethod, field = item.field, collapseNode = item.collapseNode, itemRender = item.itemRender, showError = item.showError, errRule = item.errRule, className = item.className, titleOverflow = item.titleOverflow;\n            var compConf = isEnableConf(itemRender) ? VXETable.renderer.get(itemRender.name) : null;\n            var defaultSlot = slots ? slots.default : null;\n            var titleSlot = slots ? slots.title : null;\n            var span = item.span || props.span;\n            var align = item.align || props.align;\n            var titleAlign = item.titleAlign || props.titleAlign;\n            var titleWidth = item.titleWidth || props.titleWidth;\n            var itemOverflow = (XEUtils.isUndefined(titleOverflow) || XEUtils.isNull(titleOverflow)) ? allTitleOverflow : titleOverflow;\n            var showEllipsis = itemOverflow === 'ellipsis';\n            var showTitle = itemOverflow === 'title';\n            var showTooltip = itemOverflow === true || itemOverflow === 'tooltip';\n            var hasEllipsis = showTitle || showTooltip || showEllipsis;\n            var itemVisibleMethod = visibleMethod;\n            var params = { data: data, property: field, item: item, $form: $xeform };\n            var isRequired = false;\n            if (rules) {\n                var itemRules = rules[field];\n                if (itemRules) {\n                    isRequired = itemRules.some(function (rule) { return rule.required; });\n                }\n            }\n            if (!itemVisibleMethod && compConf && compConf.itemVisibleMethod) {\n                itemVisibleMethod = compConf.itemVisibleMethod;\n            }\n            var contentVNs = [];\n            if (defaultSlot) {\n                contentVNs = $xeform.callSlot(defaultSlot, params);\n            }\n            else if (compConf && compConf.renderItemContent) {\n                contentVNs = compConf.renderItemContent(itemRender, params);\n            }\n            else if (field) {\n                contentVNs = [\"\" + XEUtils.get(data, field)];\n            }\n            if (collapseNode) {\n                contentVNs.push(h('div', {\n                    class: 'vxe-form--item-trigger-node',\n                    onClick: $xeform.toggleCollapseEvent\n                }, [\n                    h('span', {\n                        class: 'vxe-form--item-trigger-text'\n                    }, collapseAll ? GlobalConfig.i18n('vxe.form.unfolding') : GlobalConfig.i18n('vxe.form.folding')),\n                    h('i', {\n                        class: ['vxe-form--item-trigger-icon', collapseAll ? GlobalConfig.icon.FORM_FOLDING : GlobalConfig.icon.FORM_UNFOLDING]\n                    })\n                ]));\n            }\n            if (errRule && validOpts.showMessage) {\n                contentVNs.push(h('div', {\n                    class: 'vxe-form--item-valid',\n                    style: errRule.maxWidth ? {\n                        width: errRule.maxWidth + \"px\"\n                    } : null\n                }, errRule.message));\n            }\n            var ons = showTooltip ? {\n                onMouseenter: function (evnt) {\n                    $xeform.triggerTitleTipEvent(evnt, params);\n                },\n                onMouseleave: $xeform.handleTitleTipLeaveEvent\n            } : {};\n            return h('div', {\n                ref: refElem,\n                class: ['vxe-form--item', item.id, span ? \"vxe-col--\" + span + \" is--span\" : '', className ? (XEUtils.isFunction(className) ? className(params) : className) : '', {\n                        'is--title': title,\n                        'is--required': isRequired,\n                        'is--hidden': visible === false || (folding && collapseAll),\n                        'is--active': !itemVisibleMethod || itemVisibleMethod(params),\n                        'is--error': showError\n                    }]\n            }, [\n                h('div', {\n                    class: 'vxe-form--item-inner'\n                }, [\n                    title || titleSlot ? h('div', __assign({ class: ['vxe-form--item-title', titleAlign ? \"align--\" + titleAlign : null, {\n                                'is--ellipsis': hasEllipsis\n                            }], style: titleWidth ? {\n                            width: isNaN(titleWidth) ? titleWidth : titleWidth + \"px\"\n                        } : null, title: showTitle ? getFuncText(title) : null }, ons), renderTitle($xeform, item)) : null,\n                    h('div', {\n                        class: ['vxe-form--item-content', align ? \"align--\" + align : null]\n                    }, contentVNs)\n                ])\n            ]);\n        };\n        var renderVN = function () {\n            var formProps = $xeform ? $xeform.props : null;\n            return formProps && formProps.customLayout ? renderItem($xeform, formItem) : h('div', {\n                ref: refElem\n            });\n        };\n        return renderVN;\n    }\n});\n"]},"metadata":{},"sourceType":"module"}