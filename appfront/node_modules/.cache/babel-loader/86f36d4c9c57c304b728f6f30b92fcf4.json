{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment, createTextVNode as _createTextVNode, createVNode as _createVNode } from \"vue\";\nimport TransBtn from '../TransBtn';\nimport Input from './Input';\nimport { computed, defineComponent, onMounted, ref, watch } from 'vue';\nimport classNames from '../../_util/classNames';\nimport pickAttrs from '../../_util/pickAttrs';\nimport PropTypes from '../../_util/vue-types';\nimport Overflow from '../../vc-overflow';\nvar props = {\n  id: PropTypes.string,\n  prefixCls: PropTypes.string,\n  values: PropTypes.array,\n  open: PropTypes.looseBool,\n  searchValue: PropTypes.string,\n  inputRef: PropTypes.any,\n  placeholder: PropTypes.any,\n  disabled: PropTypes.looseBool,\n  mode: PropTypes.string,\n  showSearch: PropTypes.looseBool,\n  autofocus: PropTypes.looseBool,\n  autocomplete: PropTypes.string,\n  accessibilityIndex: PropTypes.number,\n  tabindex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  removeIcon: PropTypes.VNodeChild,\n  choiceTransitionName: PropTypes.string,\n  maxTagCount: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  maxTagTextLength: PropTypes.number,\n  maxTagPlaceholder: PropTypes.any.def(function () {\n    return function (omittedValues) {\n      return \"+ \".concat(omittedValues.length, \" ...\");\n    };\n  }),\n  tagRender: PropTypes.func,\n  onToggleOpen: {\n    type: Function\n  },\n  onSelect: PropTypes.func,\n  onInputChange: PropTypes.func,\n  onInputPaste: PropTypes.func,\n  onInputKeyDown: PropTypes.func,\n  onInputMouseDown: PropTypes.func,\n  onInputCompositionStart: PropTypes.func,\n  onInputCompositionEnd: PropTypes.func\n};\n\nvar onPreventMouseDown = function onPreventMouseDown(event) {\n  event.preventDefault();\n  event.stopPropagation();\n};\n\nvar SelectSelector = defineComponent({\n  name: 'MultipleSelectSelector',\n  inheritAttrs: false,\n  props: props,\n  setup: function setup(props) {\n    var measureRef = ref();\n    var inputWidth = ref(0);\n    var focused = ref(false);\n    var selectionPrefixCls = computed(function () {\n      return \"\".concat(props.prefixCls, \"-selection\");\n    }); // ===================== Search ======================\n\n    var inputValue = computed(function () {\n      return props.open || props.mode === 'tags' ? props.searchValue : '';\n    });\n    var inputEditable = computed(function () {\n      return props.mode === 'tags' || props.showSearch && (props.open || focused.value);\n    }); // We measure width and set to the input immediately\n\n    onMounted(function () {\n      watch(inputValue, function () {\n        inputWidth.value = measureRef.value.scrollWidth;\n      }, {\n        flush: 'post',\n        immediate: true\n      });\n    }); // ===================== Render ======================\n    // >>> Render Selector Node. Includes Item & Rest\n\n    function defaultRenderSelector(content, itemDisabled, closable, onClose) {\n      return _createVNode(\"span\", {\n        \"class\": classNames(\"\".concat(selectionPrefixCls.value, \"-item\"), _defineProperty({}, \"\".concat(selectionPrefixCls.value, \"-item-disabled\"), itemDisabled))\n      }, [_createVNode(\"span\", {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-item-content\")\n      }, [content]), closable && _createVNode(TransBtn, {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-item-remove\"),\n        \"onMousedown\": onPreventMouseDown,\n        \"onClick\": onClose,\n        \"customizeIcon\": props.removeIcon\n      }, {\n        default: function _default() {\n          return [_createTextVNode(\"\\xD7\")];\n        }\n      })]);\n    }\n\n    function customizeRenderSelector(value, content, itemDisabled, closable, onClose) {\n      var onMouseDown = function onMouseDown(e) {\n        onPreventMouseDown(e);\n        props.onToggleOpen(!open);\n      };\n\n      return _createVNode(\"span\", {\n        \"onMousedown\": onMouseDown\n      }, [props.tagRender({\n        label: content,\n        value: value,\n        disabled: itemDisabled,\n        closable: closable,\n        onClose: onClose\n      })]);\n    }\n\n    function renderItem(_ref) {\n      var itemDisabled = _ref.disabled,\n          label = _ref.label,\n          value = _ref.value;\n      var closable = !props.disabled && !itemDisabled;\n      var displayLabel = label;\n\n      if (typeof props.maxTagTextLength === 'number') {\n        if (typeof label === 'string' || typeof label === 'number') {\n          var strLabel = String(displayLabel);\n\n          if (strLabel.length > props.maxTagTextLength) {\n            displayLabel = \"\".concat(strLabel.slice(0, props.maxTagTextLength), \"...\");\n          }\n        }\n      }\n\n      var onClose = function onClose(event) {\n        if (event) event.stopPropagation();\n        props.onSelect(value, {\n          selected: false\n        });\n      };\n\n      return typeof props.tagRender === 'function' ? customizeRenderSelector(value, displayLabel, itemDisabled, closable, onClose) : defaultRenderSelector(displayLabel, itemDisabled, closable, onClose);\n    }\n\n    function renderRest(omittedValues) {\n      var _props$maxTagPlacehol = props.maxTagPlaceholder,\n          maxTagPlaceholder = _props$maxTagPlacehol === void 0 ? function (omittedValues) {\n        return \"+ \".concat(omittedValues.length, \" ...\");\n      } : _props$maxTagPlacehol;\n      var content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n      return defaultRenderSelector(content, false);\n    }\n\n    return function () {\n      var id = props.id,\n          prefixCls = props.prefixCls,\n          values = props.values,\n          open = props.open,\n          inputRef = props.inputRef,\n          placeholder = props.placeholder,\n          disabled = props.disabled,\n          autofocus = props.autofocus,\n          autocomplete = props.autocomplete,\n          accessibilityIndex = props.accessibilityIndex,\n          tabindex = props.tabindex,\n          onInputChange = props.onInputChange,\n          onInputPaste = props.onInputPaste,\n          onInputKeyDown = props.onInputKeyDown,\n          onInputMouseDown = props.onInputMouseDown,\n          onInputCompositionStart = props.onInputCompositionStart,\n          onInputCompositionEnd = props.onInputCompositionEnd; // >>> Input Node\n\n      var inputNode = _createVNode(\"div\", {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-search\"),\n        \"style\": {\n          width: inputWidth.value + 'px'\n        },\n        \"key\": \"input\"\n      }, [_createVNode(Input, {\n        \"inputRef\": inputRef,\n        \"open\": open,\n        \"prefixCls\": prefixCls,\n        \"id\": id,\n        \"inputElement\": null,\n        \"disabled\": disabled,\n        \"autofocus\": autofocus,\n        \"autocomplete\": autocomplete,\n        \"editable\": inputEditable.value,\n        \"accessibilityIndex\": accessibilityIndex,\n        \"value\": inputValue.value,\n        \"onKeydown\": onInputKeyDown,\n        \"onMousedown\": onInputMouseDown,\n        \"onChange\": onInputChange,\n        \"onPaste\": onInputPaste,\n        \"onCompositionstart\": onInputCompositionStart,\n        \"onCompositionend\": onInputCompositionEnd,\n        \"tabindex\": tabindex,\n        \"attrs\": pickAttrs(props, true),\n        \"onFocus\": function onFocus() {\n          return focused.value = true;\n        },\n        \"onBlur\": function onBlur() {\n          return focused.value = false;\n        }\n      }, null), _createVNode(\"span\", {\n        \"ref\": measureRef,\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-search-mirror\"),\n        \"aria-hidden\": true\n      }, [inputValue.value, _createTextVNode(\"\\xA0\")])]); // >>> Selections\n\n\n      var selectionNode = _createVNode(Overflow, {\n        \"prefixCls\": \"\".concat(selectionPrefixCls.value, \"-overflow\"),\n        \"data\": values,\n        \"renderItem\": renderItem,\n        \"renderRest\": renderRest,\n        \"suffix\": inputNode,\n        \"itemKey\": \"key\",\n        \"maxCount\": props.maxTagCount,\n        \"key\": \"overflow\"\n      }, null);\n\n      return _createVNode(_Fragment, null, [selectionNode, !values.length && !inputValue.value && _createVNode(\"span\", {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-placeholder\")\n      }, [placeholder])]);\n    };\n  }\n});\nexport default SelectSelector;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/ant-design-vue/es/vc-select/Selector/MultipleSelector.js"],"names":["_defineProperty","Fragment","_Fragment","createTextVNode","_createTextVNode","createVNode","_createVNode","TransBtn","Input","computed","defineComponent","onMounted","ref","watch","classNames","pickAttrs","PropTypes","Overflow","props","id","string","prefixCls","values","array","open","looseBool","searchValue","inputRef","any","placeholder","disabled","mode","showSearch","autofocus","autocomplete","accessibilityIndex","number","tabindex","oneOfType","removeIcon","VNodeChild","choiceTransitionName","maxTagCount","maxTagTextLength","maxTagPlaceholder","def","omittedValues","concat","length","tagRender","func","onToggleOpen","type","Function","onSelect","onInputChange","onInputPaste","onInputKeyDown","onInputMouseDown","onInputCompositionStart","onInputCompositionEnd","onPreventMouseDown","event","preventDefault","stopPropagation","SelectSelector","name","inheritAttrs","setup","measureRef","inputWidth","focused","selectionPrefixCls","inputValue","inputEditable","value","scrollWidth","flush","immediate","defaultRenderSelector","content","itemDisabled","closable","onClose","default","_default","customizeRenderSelector","onMouseDown","e","label","renderItem","_ref","displayLabel","strLabel","String","slice","selected","renderRest","_props$maxTagPlacehol","inputNode","width","onFocus","onBlur","selectionNode"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { Fragment as _Fragment, createTextVNode as _createTextVNode, createVNode as _createVNode } from \"vue\";\nimport TransBtn from '../TransBtn';\nimport Input from './Input';\nimport { computed, defineComponent, onMounted, ref, watch } from 'vue';\nimport classNames from '../../_util/classNames';\nimport pickAttrs from '../../_util/pickAttrs';\nimport PropTypes from '../../_util/vue-types';\nimport Overflow from '../../vc-overflow';\nvar props = {\n  id: PropTypes.string,\n  prefixCls: PropTypes.string,\n  values: PropTypes.array,\n  open: PropTypes.looseBool,\n  searchValue: PropTypes.string,\n  inputRef: PropTypes.any,\n  placeholder: PropTypes.any,\n  disabled: PropTypes.looseBool,\n  mode: PropTypes.string,\n  showSearch: PropTypes.looseBool,\n  autofocus: PropTypes.looseBool,\n  autocomplete: PropTypes.string,\n  accessibilityIndex: PropTypes.number,\n  tabindex: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  removeIcon: PropTypes.VNodeChild,\n  choiceTransitionName: PropTypes.string,\n  maxTagCount: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  maxTagTextLength: PropTypes.number,\n  maxTagPlaceholder: PropTypes.any.def(function () {\n    return function (omittedValues) {\n      return \"+ \".concat(omittedValues.length, \" ...\");\n    };\n  }),\n  tagRender: PropTypes.func,\n  onToggleOpen: {\n    type: Function\n  },\n  onSelect: PropTypes.func,\n  onInputChange: PropTypes.func,\n  onInputPaste: PropTypes.func,\n  onInputKeyDown: PropTypes.func,\n  onInputMouseDown: PropTypes.func,\n  onInputCompositionStart: PropTypes.func,\n  onInputCompositionEnd: PropTypes.func\n};\n\nvar onPreventMouseDown = function onPreventMouseDown(event) {\n  event.preventDefault();\n  event.stopPropagation();\n};\n\nvar SelectSelector = defineComponent({\n  name: 'MultipleSelectSelector',\n  inheritAttrs: false,\n  props: props,\n  setup: function setup(props) {\n    var measureRef = ref();\n    var inputWidth = ref(0);\n    var focused = ref(false);\n    var selectionPrefixCls = computed(function () {\n      return \"\".concat(props.prefixCls, \"-selection\");\n    }); // ===================== Search ======================\n\n    var inputValue = computed(function () {\n      return props.open || props.mode === 'tags' ? props.searchValue : '';\n    });\n    var inputEditable = computed(function () {\n      return props.mode === 'tags' || props.showSearch && (props.open || focused.value);\n    }); // We measure width and set to the input immediately\n\n    onMounted(function () {\n      watch(inputValue, function () {\n        inputWidth.value = measureRef.value.scrollWidth;\n      }, {\n        flush: 'post',\n        immediate: true\n      });\n    }); // ===================== Render ======================\n    // >>> Render Selector Node. Includes Item & Rest\n\n    function defaultRenderSelector(content, itemDisabled, closable, onClose) {\n      return _createVNode(\"span\", {\n        \"class\": classNames(\"\".concat(selectionPrefixCls.value, \"-item\"), _defineProperty({}, \"\".concat(selectionPrefixCls.value, \"-item-disabled\"), itemDisabled))\n      }, [_createVNode(\"span\", {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-item-content\")\n      }, [content]), closable && _createVNode(TransBtn, {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-item-remove\"),\n        \"onMousedown\": onPreventMouseDown,\n        \"onClick\": onClose,\n        \"customizeIcon\": props.removeIcon\n      }, {\n        default: function _default() {\n          return [_createTextVNode(\"\\xD7\")];\n        }\n      })]);\n    }\n\n    function customizeRenderSelector(value, content, itemDisabled, closable, onClose) {\n      var onMouseDown = function onMouseDown(e) {\n        onPreventMouseDown(e);\n        props.onToggleOpen(!open);\n      };\n\n      return _createVNode(\"span\", {\n        \"onMousedown\": onMouseDown\n      }, [props.tagRender({\n        label: content,\n        value: value,\n        disabled: itemDisabled,\n        closable: closable,\n        onClose: onClose\n      })]);\n    }\n\n    function renderItem(_ref) {\n      var itemDisabled = _ref.disabled,\n          label = _ref.label,\n          value = _ref.value;\n      var closable = !props.disabled && !itemDisabled;\n      var displayLabel = label;\n\n      if (typeof props.maxTagTextLength === 'number') {\n        if (typeof label === 'string' || typeof label === 'number') {\n          var strLabel = String(displayLabel);\n\n          if (strLabel.length > props.maxTagTextLength) {\n            displayLabel = \"\".concat(strLabel.slice(0, props.maxTagTextLength), \"...\");\n          }\n        }\n      }\n\n      var onClose = function onClose(event) {\n        if (event) event.stopPropagation();\n        props.onSelect(value, {\n          selected: false\n        });\n      };\n\n      return typeof props.tagRender === 'function' ? customizeRenderSelector(value, displayLabel, itemDisabled, closable, onClose) : defaultRenderSelector(displayLabel, itemDisabled, closable, onClose);\n    }\n\n    function renderRest(omittedValues) {\n      var _props$maxTagPlacehol = props.maxTagPlaceholder,\n          maxTagPlaceholder = _props$maxTagPlacehol === void 0 ? function (omittedValues) {\n        return \"+ \".concat(omittedValues.length, \" ...\");\n      } : _props$maxTagPlacehol;\n      var content = typeof maxTagPlaceholder === 'function' ? maxTagPlaceholder(omittedValues) : maxTagPlaceholder;\n      return defaultRenderSelector(content, false);\n    }\n\n    return function () {\n      var id = props.id,\n          prefixCls = props.prefixCls,\n          values = props.values,\n          open = props.open,\n          inputRef = props.inputRef,\n          placeholder = props.placeholder,\n          disabled = props.disabled,\n          autofocus = props.autofocus,\n          autocomplete = props.autocomplete,\n          accessibilityIndex = props.accessibilityIndex,\n          tabindex = props.tabindex,\n          onInputChange = props.onInputChange,\n          onInputPaste = props.onInputPaste,\n          onInputKeyDown = props.onInputKeyDown,\n          onInputMouseDown = props.onInputMouseDown,\n          onInputCompositionStart = props.onInputCompositionStart,\n          onInputCompositionEnd = props.onInputCompositionEnd; // >>> Input Node\n\n      var inputNode = _createVNode(\"div\", {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-search\"),\n        \"style\": {\n          width: inputWidth.value + 'px'\n        },\n        \"key\": \"input\"\n      }, [_createVNode(Input, {\n        \"inputRef\": inputRef,\n        \"open\": open,\n        \"prefixCls\": prefixCls,\n        \"id\": id,\n        \"inputElement\": null,\n        \"disabled\": disabled,\n        \"autofocus\": autofocus,\n        \"autocomplete\": autocomplete,\n        \"editable\": inputEditable.value,\n        \"accessibilityIndex\": accessibilityIndex,\n        \"value\": inputValue.value,\n        \"onKeydown\": onInputKeyDown,\n        \"onMousedown\": onInputMouseDown,\n        \"onChange\": onInputChange,\n        \"onPaste\": onInputPaste,\n        \"onCompositionstart\": onInputCompositionStart,\n        \"onCompositionend\": onInputCompositionEnd,\n        \"tabindex\": tabindex,\n        \"attrs\": pickAttrs(props, true),\n        \"onFocus\": function onFocus() {\n          return focused.value = true;\n        },\n        \"onBlur\": function onBlur() {\n          return focused.value = false;\n        }\n      }, null), _createVNode(\"span\", {\n        \"ref\": measureRef,\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-search-mirror\"),\n        \"aria-hidden\": true\n      }, [inputValue.value, _createTextVNode(\"\\xA0\")])]); // >>> Selections\n\n\n      var selectionNode = _createVNode(Overflow, {\n        \"prefixCls\": \"\".concat(selectionPrefixCls.value, \"-overflow\"),\n        \"data\": values,\n        \"renderItem\": renderItem,\n        \"renderRest\": renderRest,\n        \"suffix\": inputNode,\n        \"itemKey\": \"key\",\n        \"maxCount\": props.maxTagCount,\n        \"key\": \"overflow\"\n      }, null);\n\n      return _createVNode(_Fragment, null, [selectionNode, !values.length && !inputValue.value && _createVNode(\"span\", {\n        \"class\": \"\".concat(selectionPrefixCls.value, \"-placeholder\")\n      }, [placeholder])]);\n    };\n  }\n});\nexport default SelectSelector;"]},"metadata":{},"sourceType":"module"}