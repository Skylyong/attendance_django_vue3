{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { defineComponent, provide, withDirectives } from 'vue';\nimport classNames from '../../_util/classNames';\nimport omit from 'omit.js';\nimport KeyCode from '../../_util/KeyCode';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { hasProp, getOptionProps, initDefaultProps } from '../../_util/props-util';\nimport warning from 'warning';\nimport { getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection } from './util';\nimport KeywordTrigger from './KeywordTrigger';\nimport { vcMentionsProps, defaultProps } from './mentionsProps';\nimport antInput from '../../_util/antInputDirective';\n\nfunction noop() {}\n\nvar Mentions = {\n  name: 'Mentions',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(vcMentionsProps, defaultProps),\n  created: function created() {\n    this.mentionsContext = provide('mentionsContext', this);\n  },\n  data: function data() {\n    var _this$$props = this.$props,\n        _this$$props$value = _this$$props.value,\n        value = _this$$props$value === void 0 ? '' : _this$$props$value,\n        _this$$props$defaultV = _this$$props.defaultValue,\n        defaultValue = _this$$props$defaultV === void 0 ? '' : _this$$props$defaultV;\n    warning(this.$props.children, 'please children prop replace slots.default');\n    return {\n      _value: !hasProp(this, 'value') ? defaultValue : value,\n      measuring: false,\n      measureLocation: 0,\n      measureText: null,\n      measurePrefix: '',\n      activeIndex: 0,\n      isFocus: false\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.$data._value = val;\n    }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var measuring = _this.$data.measuring; // Sync measure div top with textarea for rc-trigger usage\n\n      if (measuring) {\n        _this.$refs.measure.scrollTop = _this.$refs.textarea.scrollTop;\n      }\n    });\n  },\n  methods: {\n    triggerChange: function triggerChange(value) {\n      var props = getOptionProps(this);\n\n      if (!('value' in props)) {\n        this.setState({\n          _value: value\n        });\n      } else {\n        this.$forceUpdate();\n      }\n\n      this.__emit('change', value);\n    },\n    onChange: function onChange(_ref) {\n      var _ref$target = _ref.target,\n          value = _ref$target.value,\n          composing = _ref$target.composing,\n          isComposing = _ref.isComposing;\n      if (isComposing || composing) return;\n      this.triggerChange(value);\n    },\n    onKeyDown: function onKeyDown(event) {\n      var which = event.which;\n      var _this$$data = this.$data,\n          activeIndex = _this$$data.activeIndex,\n          measuring = _this$$data.measuring; // Skip if not measuring\n\n      if (!measuring) {\n        return;\n      }\n\n      if (which === KeyCode.UP || which === KeyCode.DOWN) {\n        // Control arrow function\n        var optionLen = this.getOptions().length;\n        var offset = which === KeyCode.UP ? -1 : 1;\n        var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n        this.setState({\n          activeIndex: newActiveIndex\n        });\n        event.preventDefault();\n      } else if (which === KeyCode.ESC) {\n        this.stopMeasure();\n      } else if (which === KeyCode.ENTER) {\n        // Measure hit\n        event.preventDefault();\n        var options = this.getOptions();\n\n        if (!options.length) {\n          this.stopMeasure();\n          return;\n        }\n\n        var option = options[activeIndex];\n        this.selectOption(option);\n      }\n    },\n\n    /**\n     * When to start measure:\n     * 1. When user press `prefix`\n     * 2. When measureText !== prevMeasureText\n     *  - If measure hit\n     *  - If measuring\n     *\n     * When to stop measure:\n     * 1. Selection is out of range\n     * 2. Contains `space`\n     * 3. ESC or select one\n     */\n    onKeyUp: function onKeyUp(event) {\n      var key = event.key,\n          which = event.which;\n      var _this$$data2 = this.$data,\n          prevMeasureText = _this$$data2.measureText,\n          measuring = _this$$data2.measuring;\n      var _this$$props2 = this.$props,\n          _this$$props2$prefix = _this$$props2.prefix,\n          prefix = _this$$props2$prefix === void 0 ? '' : _this$$props2$prefix,\n          validateSearch = _this$$props2.validateSearch;\n      var target = event.target;\n\n      if (target.composing) {\n        return;\n      }\n\n      var selectionStartText = getBeforeSelectionText(target);\n\n      var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, prefix),\n          measureIndex = _getLastMeasureIndex.location,\n          measurePrefix = _getLastMeasureIndex.prefix; // Skip if match the white key list\n\n\n      if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n        return;\n      }\n\n      if (measureIndex !== -1) {\n        var measureText = selectionStartText.slice(measureIndex + measurePrefix.length);\n        var validateMeasure = validateSearch(measureText, this.$props);\n        var matchOption = !!this.getOptions(measureText).length;\n\n        if (validateMeasure) {\n          if (key === measurePrefix || measuring || measureText !== prevMeasureText && matchOption) {\n            this.startMeasure(measureText, measurePrefix, measureIndex);\n          }\n        } else if (measuring) {\n          // Stop if measureText is invalidate\n          this.stopMeasure();\n        }\n        /**\n         * We will trigger `onSearch` to developer since they may use for async update.\n         * If met `space` means user finished searching.\n         */\n\n\n        if (validateMeasure) {\n          this.__emit('search', measureText, measurePrefix);\n        }\n      } else if (measuring) {\n        this.stopMeasure();\n      }\n    },\n    onInputFocus: function onInputFocus(event) {\n      this.onFocus(event);\n    },\n    onInputBlur: function onInputBlur(event) {\n      this.onBlur(event);\n    },\n    onDropdownFocus: function onDropdownFocus() {\n      this.onFocus();\n    },\n    onDropdownBlur: function onDropdownBlur() {\n      this.onBlur();\n    },\n    onFocus: function onFocus(event) {\n      window.clearTimeout(this.focusId);\n      var isFocus = this.$data.isFocus;\n\n      if (!isFocus && event) {\n        this.__emit('focus', event);\n      }\n\n      this.setState({\n        isFocus: true\n      });\n    },\n    onBlur: function onBlur(event) {\n      var _this2 = this;\n\n      this.focusId = window.setTimeout(function () {\n        _this2.setState({\n          isFocus: false\n        });\n\n        _this2.stopMeasure();\n\n        _this2.__emit('blur', event);\n      }, 100);\n    },\n    selectOption: function selectOption(option) {\n      var _this3 = this;\n\n      var _this$$data3 = this.$data,\n          value = _this$$data3._value,\n          measureLocation = _this$$data3.measureLocation,\n          measurePrefix = _this$$data3.measurePrefix;\n      var split = this.$props.split;\n      var _option$value = option.value,\n          mentionValue = _option$value === void 0 ? '' : _option$value;\n\n      var _replaceWithMeasure = replaceWithMeasure(value, {\n        measureLocation: measureLocation,\n        targetText: mentionValue,\n        prefix: measurePrefix,\n        selectionStart: this.$refs.textarea.selectionStart,\n        split: split\n      }),\n          text = _replaceWithMeasure.text,\n          selectionLocation = _replaceWithMeasure.selectionLocation;\n\n      this.triggerChange(text);\n      this.stopMeasure(function () {\n        // We need restore the selection position\n        setInputSelection(_this3.$refs.textarea, selectionLocation);\n      });\n\n      this.__emit('select', option, measurePrefix);\n    },\n    setActiveIndex: function setActiveIndex(activeIndex) {\n      this.setState({\n        activeIndex: activeIndex\n      });\n    },\n    getOptions: function getOptions(measureText) {\n      var targetMeasureText = measureText || this.$data.measureText || '';\n      var _this$$props3 = this.$props,\n          filterOption = _this$$props3.filterOption,\n          _this$$props3$childre = _this$$props3.children,\n          children = _this$$props3$childre === void 0 ? [] : _this$$props3$childre;\n      var list = (Array.isArray(children) ? children : [children]).map(function (item) {\n        var _a, _b;\n\n        return _extends(_extends({}, getOptionProps(item)), {\n          children: (_b = (_a = item.children).default) === null || _b === void 0 ? void 0 : _b.call(_a)\n        });\n      }).filter(function (option) {\n        /** Return all result if `filterOption` is false. */\n        if (filterOption === false) {\n          return true;\n        }\n\n        return filterOption(targetMeasureText, option);\n      });\n      return list;\n    },\n    startMeasure: function startMeasure(measureText, measurePrefix, measureLocation) {\n      this.setState({\n        measuring: true,\n        measureText: measureText,\n        measurePrefix: measurePrefix,\n        measureLocation: measureLocation,\n        activeIndex: 0\n      });\n    },\n    stopMeasure: function stopMeasure(callback) {\n      this.setState({\n        measuring: false,\n        measureLocation: 0,\n        measureText: null\n      }, callback);\n    },\n    focus: function focus() {\n      this.$refs.textarea.focus();\n    },\n    blur: function blur() {\n      this.$refs.textarea.blur();\n    }\n  },\n  render: function render() {\n    var _this$$data4 = this.$data,\n        value = _this$$data4._value,\n        measureLocation = _this$$data4.measureLocation,\n        measurePrefix = _this$$data4.measurePrefix,\n        measuring = _this$$data4.measuring;\n\n    var _a = getOptionProps(this),\n        prefixCls = _a.prefixCls,\n        placement = _a.placement,\n        transitionName = _a.transitionName,\n        notFoundContent = _a.notFoundContent,\n        getPopupContainer = _a.getPopupContainer,\n        restProps = __rest(_a, [\"prefixCls\", \"placement\", \"transitionName\", \"notFoundContent\", \"getPopupContainer\"]);\n\n    var _b = this.$attrs,\n        className = _b.class,\n        style = _b.style,\n        otherAttrs = __rest(_b, [\"class\", \"style\"]);\n\n    var inputProps = omit(restProps, ['value', 'defaultValue', 'prefix', 'split', 'children', 'validateSearch', 'filterOption']);\n    var options = measuring ? this.getOptions() : [];\n\n    var textareaProps = _extends(_extends(_extends({}, inputProps), otherAttrs), {\n      onChange: noop,\n      onSelect: noop,\n      value: value,\n      onInput: this.onChange,\n      onBlur: this.onInputBlur,\n      onKeydown: this.onKeyDown,\n      onKeyup: this.onKeyUp,\n      onFocus: this.onInputFocus\n    });\n\n    return _createVNode(\"div\", {\n      \"class\": classNames(prefixCls, className),\n      \"style\": style\n    }, [withDirectives(_createVNode(\"textarea\", _objectSpread({\n      \"ref\": \"textarea\"\n    }, textareaProps), null), [[antInput]]), measuring && _createVNode(\"div\", {\n      \"ref\": \"measure\",\n      \"class\": \"\".concat(prefixCls, \"-measure\")\n    }, [value.slice(0, measureLocation), _createVNode(KeywordTrigger, {\n      \"prefixCls\": prefixCls,\n      \"transitionName\": transitionName,\n      \"placement\": placement,\n      \"options\": options,\n      \"visible\": true,\n      \"getPopupContainer\": getPopupContainer\n    }, {\n      default: function _default() {\n        return [_createVNode(\"span\", null, [measurePrefix])];\n      }\n    }), value.slice(measureLocation + measurePrefix.length)])]);\n  }\n};\nexport default defineComponent(Mentions);","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-mentions/src/Mentions.js"],"names":["_objectSpread","_extends","createVNode","_createVNode","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","defineComponent","provide","withDirectives","classNames","omit","KeyCode","BaseMixin","hasProp","getOptionProps","initDefaultProps","warning","getBeforeSelectionText","getLastMeasureIndex","replaceWithMeasure","setInputSelection","KeywordTrigger","vcMentionsProps","defaultProps","antInput","noop","Mentions","name","mixins","inheritAttrs","props","created","mentionsContext","data","_this$$props","$props","_this$$props$value","value","_this$$props$defaultV","defaultValue","children","_value","measuring","measureLocation","measureText","measurePrefix","activeIndex","isFocus","watch","val","$data","updated","_this","$nextTick","$refs","measure","scrollTop","textarea","methods","triggerChange","setState","$forceUpdate","__emit","onChange","_ref","_ref$target","target","composing","isComposing","onKeyDown","event","which","_this$$data","UP","DOWN","optionLen","getOptions","offset","newActiveIndex","preventDefault","ESC","stopMeasure","ENTER","options","option","selectOption","onKeyUp","key","_this$$data2","prevMeasureText","_this$$props2","_this$$props2$prefix","prefix","validateSearch","selectionStartText","_getLastMeasureIndex","measureIndex","location","slice","validateMeasure","matchOption","startMeasure","onInputFocus","onFocus","onInputBlur","onBlur","onDropdownFocus","onDropdownBlur","window","clearTimeout","focusId","_this2","setTimeout","_this3","_this$$data3","split","_option$value","mentionValue","_replaceWithMeasure","targetText","selectionStart","text","selectionLocation","setActiveIndex","targetMeasureText","_this$$props3","filterOption","_this$$props3$childre","list","Array","isArray","map","item","_a","_b","default","filter","callback","focus","blur","render","_this$$data4","prefixCls","placement","transitionName","notFoundContent","getPopupContainer","restProps","$attrs","className","class","style","otherAttrs","inputProps","textareaProps","onSelect","onInput","onKeydown","onKeyup","concat","_default"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) {\n    if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  }\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\n\nimport { defineComponent, provide, withDirectives } from 'vue';\nimport classNames from '../../_util/classNames';\nimport omit from 'omit.js';\nimport KeyCode from '../../_util/KeyCode';\nimport BaseMixin from '../../_util/BaseMixin';\nimport { hasProp, getOptionProps, initDefaultProps } from '../../_util/props-util';\nimport warning from 'warning';\nimport { getBeforeSelectionText, getLastMeasureIndex, replaceWithMeasure, setInputSelection } from './util';\nimport KeywordTrigger from './KeywordTrigger';\nimport { vcMentionsProps, defaultProps } from './mentionsProps';\nimport antInput from '../../_util/antInputDirective';\n\nfunction noop() {}\n\nvar Mentions = {\n  name: 'Mentions',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(vcMentionsProps, defaultProps),\n  created: function created() {\n    this.mentionsContext = provide('mentionsContext', this);\n  },\n  data: function data() {\n    var _this$$props = this.$props,\n        _this$$props$value = _this$$props.value,\n        value = _this$$props$value === void 0 ? '' : _this$$props$value,\n        _this$$props$defaultV = _this$$props.defaultValue,\n        defaultValue = _this$$props$defaultV === void 0 ? '' : _this$$props$defaultV;\n    warning(this.$props.children, 'please children prop replace slots.default');\n    return {\n      _value: !hasProp(this, 'value') ? defaultValue : value,\n      measuring: false,\n      measureLocation: 0,\n      measureText: null,\n      measurePrefix: '',\n      activeIndex: 0,\n      isFocus: false\n    };\n  },\n  watch: {\n    value: function value(val) {\n      this.$data._value = val;\n    }\n  },\n  updated: function updated() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      var measuring = _this.$data.measuring; // Sync measure div top with textarea for rc-trigger usage\n\n      if (measuring) {\n        _this.$refs.measure.scrollTop = _this.$refs.textarea.scrollTop;\n      }\n    });\n  },\n  methods: {\n    triggerChange: function triggerChange(value) {\n      var props = getOptionProps(this);\n\n      if (!('value' in props)) {\n        this.setState({\n          _value: value\n        });\n      } else {\n        this.$forceUpdate();\n      }\n\n      this.__emit('change', value);\n    },\n    onChange: function onChange(_ref) {\n      var _ref$target = _ref.target,\n          value = _ref$target.value,\n          composing = _ref$target.composing,\n          isComposing = _ref.isComposing;\n      if (isComposing || composing) return;\n      this.triggerChange(value);\n    },\n    onKeyDown: function onKeyDown(event) {\n      var which = event.which;\n      var _this$$data = this.$data,\n          activeIndex = _this$$data.activeIndex,\n          measuring = _this$$data.measuring; // Skip if not measuring\n\n      if (!measuring) {\n        return;\n      }\n\n      if (which === KeyCode.UP || which === KeyCode.DOWN) {\n        // Control arrow function\n        var optionLen = this.getOptions().length;\n        var offset = which === KeyCode.UP ? -1 : 1;\n        var newActiveIndex = (activeIndex + offset + optionLen) % optionLen;\n        this.setState({\n          activeIndex: newActiveIndex\n        });\n        event.preventDefault();\n      } else if (which === KeyCode.ESC) {\n        this.stopMeasure();\n      } else if (which === KeyCode.ENTER) {\n        // Measure hit\n        event.preventDefault();\n        var options = this.getOptions();\n\n        if (!options.length) {\n          this.stopMeasure();\n          return;\n        }\n\n        var option = options[activeIndex];\n        this.selectOption(option);\n      }\n    },\n\n    /**\n     * When to start measure:\n     * 1. When user press `prefix`\n     * 2. When measureText !== prevMeasureText\n     *  - If measure hit\n     *  - If measuring\n     *\n     * When to stop measure:\n     * 1. Selection is out of range\n     * 2. Contains `space`\n     * 3. ESC or select one\n     */\n    onKeyUp: function onKeyUp(event) {\n      var key = event.key,\n          which = event.which;\n      var _this$$data2 = this.$data,\n          prevMeasureText = _this$$data2.measureText,\n          measuring = _this$$data2.measuring;\n      var _this$$props2 = this.$props,\n          _this$$props2$prefix = _this$$props2.prefix,\n          prefix = _this$$props2$prefix === void 0 ? '' : _this$$props2$prefix,\n          validateSearch = _this$$props2.validateSearch;\n      var target = event.target;\n\n      if (target.composing) {\n        return;\n      }\n\n      var selectionStartText = getBeforeSelectionText(target);\n\n      var _getLastMeasureIndex = getLastMeasureIndex(selectionStartText, prefix),\n          measureIndex = _getLastMeasureIndex.location,\n          measurePrefix = _getLastMeasureIndex.prefix; // Skip if match the white key list\n\n\n      if ([KeyCode.ESC, KeyCode.UP, KeyCode.DOWN, KeyCode.ENTER].indexOf(which) !== -1) {\n        return;\n      }\n\n      if (measureIndex !== -1) {\n        var measureText = selectionStartText.slice(measureIndex + measurePrefix.length);\n        var validateMeasure = validateSearch(measureText, this.$props);\n        var matchOption = !!this.getOptions(measureText).length;\n\n        if (validateMeasure) {\n          if (key === measurePrefix || measuring || measureText !== prevMeasureText && matchOption) {\n            this.startMeasure(measureText, measurePrefix, measureIndex);\n          }\n        } else if (measuring) {\n          // Stop if measureText is invalidate\n          this.stopMeasure();\n        }\n        /**\n         * We will trigger `onSearch` to developer since they may use for async update.\n         * If met `space` means user finished searching.\n         */\n\n\n        if (validateMeasure) {\n          this.__emit('search', measureText, measurePrefix);\n        }\n      } else if (measuring) {\n        this.stopMeasure();\n      }\n    },\n    onInputFocus: function onInputFocus(event) {\n      this.onFocus(event);\n    },\n    onInputBlur: function onInputBlur(event) {\n      this.onBlur(event);\n    },\n    onDropdownFocus: function onDropdownFocus() {\n      this.onFocus();\n    },\n    onDropdownBlur: function onDropdownBlur() {\n      this.onBlur();\n    },\n    onFocus: function onFocus(event) {\n      window.clearTimeout(this.focusId);\n      var isFocus = this.$data.isFocus;\n\n      if (!isFocus && event) {\n        this.__emit('focus', event);\n      }\n\n      this.setState({\n        isFocus: true\n      });\n    },\n    onBlur: function onBlur(event) {\n      var _this2 = this;\n\n      this.focusId = window.setTimeout(function () {\n        _this2.setState({\n          isFocus: false\n        });\n\n        _this2.stopMeasure();\n\n        _this2.__emit('blur', event);\n      }, 100);\n    },\n    selectOption: function selectOption(option) {\n      var _this3 = this;\n\n      var _this$$data3 = this.$data,\n          value = _this$$data3._value,\n          measureLocation = _this$$data3.measureLocation,\n          measurePrefix = _this$$data3.measurePrefix;\n      var split = this.$props.split;\n      var _option$value = option.value,\n          mentionValue = _option$value === void 0 ? '' : _option$value;\n\n      var _replaceWithMeasure = replaceWithMeasure(value, {\n        measureLocation: measureLocation,\n        targetText: mentionValue,\n        prefix: measurePrefix,\n        selectionStart: this.$refs.textarea.selectionStart,\n        split: split\n      }),\n          text = _replaceWithMeasure.text,\n          selectionLocation = _replaceWithMeasure.selectionLocation;\n\n      this.triggerChange(text);\n      this.stopMeasure(function () {\n        // We need restore the selection position\n        setInputSelection(_this3.$refs.textarea, selectionLocation);\n      });\n\n      this.__emit('select', option, measurePrefix);\n    },\n    setActiveIndex: function setActiveIndex(activeIndex) {\n      this.setState({\n        activeIndex: activeIndex\n      });\n    },\n    getOptions: function getOptions(measureText) {\n      var targetMeasureText = measureText || this.$data.measureText || '';\n      var _this$$props3 = this.$props,\n          filterOption = _this$$props3.filterOption,\n          _this$$props3$childre = _this$$props3.children,\n          children = _this$$props3$childre === void 0 ? [] : _this$$props3$childre;\n      var list = (Array.isArray(children) ? children : [children]).map(function (item) {\n        var _a, _b;\n\n        return _extends(_extends({}, getOptionProps(item)), {\n          children: (_b = (_a = item.children).default) === null || _b === void 0 ? void 0 : _b.call(_a)\n        });\n      }).filter(function (option) {\n        /** Return all result if `filterOption` is false. */\n        if (filterOption === false) {\n          return true;\n        }\n\n        return filterOption(targetMeasureText, option);\n      });\n      return list;\n    },\n    startMeasure: function startMeasure(measureText, measurePrefix, measureLocation) {\n      this.setState({\n        measuring: true,\n        measureText: measureText,\n        measurePrefix: measurePrefix,\n        measureLocation: measureLocation,\n        activeIndex: 0\n      });\n    },\n    stopMeasure: function stopMeasure(callback) {\n      this.setState({\n        measuring: false,\n        measureLocation: 0,\n        measureText: null\n      }, callback);\n    },\n    focus: function focus() {\n      this.$refs.textarea.focus();\n    },\n    blur: function blur() {\n      this.$refs.textarea.blur();\n    }\n  },\n  render: function render() {\n    var _this$$data4 = this.$data,\n        value = _this$$data4._value,\n        measureLocation = _this$$data4.measureLocation,\n        measurePrefix = _this$$data4.measurePrefix,\n        measuring = _this$$data4.measuring;\n\n    var _a = getOptionProps(this),\n        prefixCls = _a.prefixCls,\n        placement = _a.placement,\n        transitionName = _a.transitionName,\n        notFoundContent = _a.notFoundContent,\n        getPopupContainer = _a.getPopupContainer,\n        restProps = __rest(_a, [\"prefixCls\", \"placement\", \"transitionName\", \"notFoundContent\", \"getPopupContainer\"]);\n\n    var _b = this.$attrs,\n        className = _b.class,\n        style = _b.style,\n        otherAttrs = __rest(_b, [\"class\", \"style\"]);\n\n    var inputProps = omit(restProps, ['value', 'defaultValue', 'prefix', 'split', 'children', 'validateSearch', 'filterOption']);\n    var options = measuring ? this.getOptions() : [];\n\n    var textareaProps = _extends(_extends(_extends({}, inputProps), otherAttrs), {\n      onChange: noop,\n      onSelect: noop,\n      value: value,\n      onInput: this.onChange,\n      onBlur: this.onInputBlur,\n      onKeydown: this.onKeyDown,\n      onKeyup: this.onKeyUp,\n      onFocus: this.onInputFocus\n    });\n\n    return _createVNode(\"div\", {\n      \"class\": classNames(prefixCls, className),\n      \"style\": style\n    }, [withDirectives(_createVNode(\"textarea\", _objectSpread({\n      \"ref\": \"textarea\"\n    }, textareaProps), null), [[antInput]]), measuring && _createVNode(\"div\", {\n      \"ref\": \"measure\",\n      \"class\": \"\".concat(prefixCls, \"-measure\")\n    }, [value.slice(0, measureLocation), _createVNode(KeywordTrigger, {\n      \"prefixCls\": prefixCls,\n      \"transitionName\": transitionName,\n      \"placement\": placement,\n      \"options\": options,\n      \"visible\": true,\n      \"getPopupContainer\": getPopupContainer\n    }, {\n      default: function _default() {\n        return [_createVNode(\"span\", null, [measurePrefix])];\n      }\n    }), value.slice(measureLocation + measurePrefix.length)])]);\n  }\n};\nexport default defineComponent(Mentions);"]},"metadata":{},"sourceType":"module"}