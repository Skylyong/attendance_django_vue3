{"ast":null,"code":"import { defineComponent, h, ref, computed, onUnmounted, watch, reactive, nextTick } from 'vue';\nimport XEUtils from 'xe-utils';\nimport GlobalConfig from '../../v-x-e-table/src/conf';\nimport { useSize } from '../../hooks/size';\nimport { createResizeEvent } from '../../tools/resize';\nimport { browse } from '../../tools/dom';\nimport { GlobalEvent } from '../../tools/event';\nexport default defineComponent({\n  name: 'VxeList',\n  props: {\n    data: Array,\n    height: [Number, String],\n    maxHeight: [Number, String],\n    loading: Boolean,\n    className: [String, Function],\n    size: {\n      type: String,\n      default: function () {\n        return GlobalConfig.list.size || GlobalConfig.size;\n      }\n    },\n    autoResize: {\n      type: Boolean,\n      default: function () {\n        return GlobalConfig.list.autoResize;\n      }\n    },\n    syncResize: [Boolean, String, Number],\n    scrollY: Object\n  },\n  emits: ['scroll'],\n  setup: function (props, context) {\n    var slots = context.slots,\n        emit = context.emit;\n    var xID = XEUtils.uniqueId();\n    var computeSize = useSize(props);\n    var reactData = reactive({\n      scrollYLoad: false,\n      bodyHeight: 0,\n      rowHeight: 0,\n      topSpaceHeight: 0,\n      items: []\n    });\n    var refElem = ref();\n    var refVirtualWrapper = ref();\n    var refVirtualBody = ref();\n    var internalData = {\n      fullData: [],\n      lastScrollLeft: 0,\n      lastScrollTop: 0,\n      scrollYStore: {\n        startIndex: 0,\n        endIndex: 0,\n        visibleSize: 0,\n        offsetSize: 0,\n        rowHeight: 0\n      }\n    };\n    var refMaps = {\n      refElem: refElem\n    };\n    var $xelist = {\n      xID: xID,\n      props: props,\n      context: context,\n      reactData: reactData,\n      internalData: internalData,\n      getRefMaps: function () {\n        return refMaps;\n      }\n    };\n    var listMethods = {};\n    var computeSYOpts = computed(function () {\n      return Object.assign({}, GlobalConfig.list.scrollY, props.scrollY);\n    });\n    var computeStyles = computed(function () {\n      var height = props.height,\n          maxHeight = props.maxHeight;\n      var style = {};\n\n      if (height) {\n        style.height = \"\" + (isNaN(height) ? height : height + \"px\");\n      } else if (maxHeight) {\n        style.height = 'auto';\n        style.maxHeight = \"\" + (isNaN(maxHeight) ? maxHeight : maxHeight + \"px\");\n      }\n\n      return style;\n    });\n\n    var updateYSpace = function () {\n      var scrollYLoad = reactData.scrollYLoad;\n      var scrollYStore = internalData.scrollYStore,\n          fullData = internalData.fullData;\n      reactData.bodyHeight = scrollYLoad ? fullData.length * scrollYStore.rowHeight : 0;\n      reactData.topSpaceHeight = scrollYLoad ? Math.max(scrollYStore.startIndex * scrollYStore.rowHeight, 0) : 0;\n    };\n\n    var handleData = function () {\n      var scrollYLoad = reactData.scrollYLoad;\n      var fullData = internalData.fullData,\n          scrollYStore = internalData.scrollYStore;\n      reactData.items = scrollYLoad ? fullData.slice(scrollYStore.startIndex, scrollYStore.endIndex) : fullData.slice(0);\n      return nextTick();\n    };\n\n    var updateYData = function () {\n      handleData();\n      updateYSpace();\n    };\n\n    var computeScrollLoad = function () {\n      return nextTick().then(function () {\n        var scrollYLoad = reactData.scrollYLoad;\n        var scrollYStore = internalData.scrollYStore;\n        var virtualBodyElem = refVirtualBody.value;\n        var sYOpts = computeSYOpts.value;\n        var rowHeight = 0;\n        var firstItemElem;\n\n        if (virtualBodyElem) {\n          if (sYOpts.sItem) {\n            firstItemElem = virtualBodyElem.querySelector(sYOpts.sItem);\n          }\n\n          if (!firstItemElem) {\n            firstItemElem = virtualBodyElem.children[0];\n          }\n        }\n\n        if (firstItemElem) {\n          rowHeight = firstItemElem.offsetHeight;\n        }\n\n        rowHeight = Math.max(20, rowHeight);\n        scrollYStore.rowHeight = rowHeight; // 计算 Y 逻辑\n\n        if (scrollYLoad) {\n          var scrollBodyElem = refVirtualWrapper.value;\n          var visibleYSize = Math.max(8, Math.ceil(scrollBodyElem.clientHeight / rowHeight));\n          var offsetYSize = sYOpts.oSize ? XEUtils.toNumber(sYOpts.oSize) : browse.edge ? 10 : 0;\n          scrollYStore.offsetSize = offsetYSize;\n          scrollYStore.visibleSize = visibleYSize;\n          scrollYStore.endIndex = Math.max(scrollYStore.startIndex, visibleYSize + offsetYSize, scrollYStore.endIndex);\n          updateYData();\n        } else {\n          updateYSpace();\n        }\n\n        reactData.rowHeight = rowHeight;\n      });\n    };\n    /**\n     * 清除滚动条\n     */\n\n\n    var clearScroll = function () {\n      var scrollBodyElem = refVirtualWrapper.value;\n\n      if (scrollBodyElem) {\n        scrollBodyElem.scrollTop = 0;\n      }\n\n      return nextTick();\n    };\n    /**\n     * 如果有滚动条，则滚动到对应的位置\n     * @param {Number} scrollLeft 左距离\n     * @param {Number} scrollTop 上距离\n     */\n\n\n    var scrollTo = function (scrollLeft, scrollTop) {\n      var scrollBodyElem = refVirtualWrapper.value;\n\n      if (XEUtils.isNumber(scrollLeft)) {\n        scrollBodyElem.scrollLeft = scrollLeft;\n      }\n\n      if (XEUtils.isNumber(scrollTop)) {\n        scrollBodyElem.scrollTop = scrollTop;\n      }\n\n      if (reactData.scrollYLoad) {\n        return new Promise(function (resolve) {\n          return setTimeout(function () {\n            return resolve(nextTick());\n          }, 50);\n        });\n      }\n\n      return nextTick();\n    };\n    /**\n     * 刷新滚动条\n     */\n\n\n    var refreshScroll = function () {\n      var lastScrollLeft = internalData.lastScrollLeft,\n          lastScrollTop = internalData.lastScrollTop;\n      return clearScroll().then(function () {\n        if (lastScrollLeft || lastScrollTop) {\n          internalData.lastScrollLeft = 0;\n          internalData.lastScrollTop = 0;\n          return scrollTo(lastScrollLeft, lastScrollTop);\n        }\n      });\n    };\n    /**\n     * 重新计算列表\n     */\n\n\n    var recalculate = function () {\n      var el = refElem.value;\n\n      if (el.clientWidth && el.clientHeight) {\n        return computeScrollLoad();\n      }\n\n      return Promise.resolve();\n    };\n\n    var loadYData = function (evnt) {\n      var scrollYStore = internalData.scrollYStore;\n      var startIndex = scrollYStore.startIndex,\n          endIndex = scrollYStore.endIndex,\n          visibleSize = scrollYStore.visibleSize,\n          offsetSize = scrollYStore.offsetSize,\n          rowHeight = scrollYStore.rowHeight;\n      var scrollBodyElem = evnt.target;\n      var scrollTop = scrollBodyElem.scrollTop;\n      var toVisibleIndex = Math.floor(scrollTop / rowHeight);\n      var offsetStartIndex = Math.max(0, toVisibleIndex - 1 - offsetSize);\n      var offsetEndIndex = toVisibleIndex + visibleSize + offsetSize;\n\n      if (toVisibleIndex <= startIndex || toVisibleIndex >= endIndex - visibleSize - 1) {\n        if (startIndex !== offsetStartIndex || endIndex !== offsetEndIndex) {\n          scrollYStore.startIndex = offsetStartIndex;\n          scrollYStore.endIndex = offsetEndIndex;\n          updateYData();\n        }\n      }\n    };\n\n    var scrollEvent = function (evnt) {\n      var scrollBodyElem = evnt.target;\n      var scrollTop = scrollBodyElem.scrollTop;\n      var scrollLeft = scrollBodyElem.scrollLeft;\n      var isX = scrollLeft !== internalData.lastScrollLeft;\n      var isY = scrollTop !== internalData.lastScrollTop;\n      internalData.lastScrollTop = scrollTop;\n      internalData.lastScrollLeft = scrollLeft;\n\n      if (reactData.scrollYLoad) {\n        loadYData(evnt);\n      }\n\n      listMethods.dispatchEvent('scroll', {\n        scrollLeft: scrollLeft,\n        scrollTop: scrollTop,\n        isX: isX,\n        isY: isY\n      }, evnt);\n    };\n\n    listMethods = {\n      dispatchEvent: function (type, params, evnt) {\n        emit(type, Object.assign({\n          $list: $xelist,\n          $event: evnt\n        }, params));\n      },\n\n      /**\n       * 加载数据\n       * @param {Array} datas 数据\n       */\n      loadData: function (datas) {\n        var scrollYStore = internalData.scrollYStore;\n        var sYOpts = computeSYOpts.value;\n        var fullData = datas || [];\n        Object.assign(scrollYStore, {\n          startIndex: 0,\n          endIndex: 1,\n          visibleSize: 0\n        });\n        internalData.fullData = fullData;\n        reactData.scrollYLoad = !!sYOpts.enabled && sYOpts.gt > -1 && sYOpts.gt <= fullData.length;\n        handleData();\n        return computeScrollLoad().then(function () {\n          refreshScroll();\n        });\n      },\n\n      /**\n       * 重新加载数据\n       * @param {Array} datas 数据\n       */\n      reloadData: function (datas) {\n        clearScroll();\n        return listMethods.loadData(datas);\n      },\n      recalculate: recalculate,\n      scrollTo: scrollTo,\n      refreshScroll: refreshScroll,\n      clearScroll: clearScroll\n    };\n    Object.assign($xelist, listMethods);\n    watch(function () {\n      return props.data;\n    }, function (value) {\n      listMethods.loadData(value || []);\n    });\n    watch(function () {\n      return props.syncResize;\n    }, function (value) {\n      if (value) {\n        recalculate();\n        nextTick(function () {\n          return setTimeout(function () {\n            return recalculate();\n          });\n        });\n      }\n    });\n    var resizeObserver;\n    nextTick(function () {\n      GlobalEvent.on($xelist, 'resize', function () {\n        recalculate();\n      });\n\n      if (props.autoResize) {\n        var el = refElem.value;\n        resizeObserver = createResizeEvent(function () {\n          return recalculate();\n        });\n        resizeObserver.observe(el);\n      }\n\n      listMethods.loadData(props.data || []);\n    });\n    onUnmounted(function () {\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n\n      GlobalEvent.off($xelist, 'resize');\n    });\n\n    var renderVN = function () {\n      var _a;\n\n      var className = props.className,\n          loading = props.loading;\n      var bodyHeight = reactData.bodyHeight,\n          topSpaceHeight = reactData.topSpaceHeight,\n          items = reactData.items;\n      var vSize = computeSize.value;\n      var styles = computeStyles.value;\n      return h('div', {\n        ref: refElem,\n        class: ['vxe-list', className ? XEUtils.isFunction(className) ? className({\n          $list: $xelist\n        }) : className : '', (_a = {}, _a[\"size--\" + vSize] = vSize, _a['is--loading'] = loading, _a)]\n      }, [h('div', {\n        ref: refVirtualWrapper,\n        class: 'vxe-list--virtual-wrapper',\n        style: styles,\n        onScroll: scrollEvent\n      }, [h('div', {\n        class: 'vxe-list--y-space',\n        style: {\n          height: bodyHeight ? bodyHeight + \"px\" : ''\n        }\n      }), h('div', {\n        ref: refVirtualBody,\n        class: 'vxe-list--body',\n        style: {\n          marginTop: topSpaceHeight ? topSpaceHeight + \"px\" : ''\n        }\n      }, slots.default ? slots.default({\n        items: items,\n        $list: $xelist\n      }) : [])]), h('div', {\n        class: ['vxe-list--loading vxe-loading', {\n          'is--visible': loading\n        }]\n      }, [h('div', {\n        class: 'vxe-loading--spinner'\n      })])]);\n    };\n\n    $xelist.renderVN = renderVN;\n    return $xelist;\n  },\n  render: function () {\n    return this.renderVN();\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vxe-table/es/list/src/list.js"],"names":["defineComponent","h","ref","computed","onUnmounted","watch","reactive","nextTick","XEUtils","GlobalConfig","useSize","createResizeEvent","browse","GlobalEvent","name","props","data","Array","height","Number","String","maxHeight","loading","Boolean","className","Function","size","type","default","list","autoResize","syncResize","scrollY","Object","emits","setup","context","slots","emit","xID","uniqueId","computeSize","reactData","scrollYLoad","bodyHeight","rowHeight","topSpaceHeight","items","refElem","refVirtualWrapper","refVirtualBody","internalData","fullData","lastScrollLeft","lastScrollTop","scrollYStore","startIndex","endIndex","visibleSize","offsetSize","refMaps","$xelist","getRefMaps","listMethods","computeSYOpts","assign","computeStyles","style","isNaN","updateYSpace","length","Math","max","handleData","slice","updateYData","computeScrollLoad","then","virtualBodyElem","value","sYOpts","firstItemElem","sItem","querySelector","children","offsetHeight","scrollBodyElem","visibleYSize","ceil","clientHeight","offsetYSize","oSize","toNumber","edge","clearScroll","scrollTop","scrollTo","scrollLeft","isNumber","Promise","resolve","setTimeout","refreshScroll","recalculate","el","clientWidth","loadYData","evnt","target","toVisibleIndex","floor","offsetStartIndex","offsetEndIndex","scrollEvent","isX","isY","dispatchEvent","params","$list","$event","loadData","datas","enabled","gt","reloadData","resizeObserver","on","observe","disconnect","off","renderVN","_a","vSize","styles","class","isFunction","onScroll","marginTop","render"],"mappings":"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","sourcesContent":["import { defineComponent, h, ref, computed, onUnmounted, watch, reactive, nextTick } from 'vue';\nimport XEUtils from 'xe-utils';\nimport GlobalConfig from '../../v-x-e-table/src/conf';\nimport { useSize } from '../../hooks/size';\nimport { createResizeEvent } from '../../tools/resize';\nimport { browse } from '../../tools/dom';\nimport { GlobalEvent } from '../../tools/event';\nexport default defineComponent({\n    name: 'VxeList',\n    props: {\n        data: Array,\n        height: [Number, String],\n        maxHeight: [Number, String],\n        loading: Boolean,\n        className: [String, Function],\n        size: { type: String, default: function () { return GlobalConfig.list.size || GlobalConfig.size; } },\n        autoResize: { type: Boolean, default: function () { return GlobalConfig.list.autoResize; } },\n        syncResize: [Boolean, String, Number],\n        scrollY: Object\n    },\n    emits: [\n        'scroll'\n    ],\n    setup: function (props, context) {\n        var slots = context.slots, emit = context.emit;\n        var xID = XEUtils.uniqueId();\n        var computeSize = useSize(props);\n        var reactData = reactive({\n            scrollYLoad: false,\n            bodyHeight: 0,\n            rowHeight: 0,\n            topSpaceHeight: 0,\n            items: []\n        });\n        var refElem = ref();\n        var refVirtualWrapper = ref();\n        var refVirtualBody = ref();\n        var internalData = {\n            fullData: [],\n            lastScrollLeft: 0,\n            lastScrollTop: 0,\n            scrollYStore: {\n                startIndex: 0,\n                endIndex: 0,\n                visibleSize: 0,\n                offsetSize: 0,\n                rowHeight: 0\n            }\n        };\n        var refMaps = {\n            refElem: refElem\n        };\n        var $xelist = {\n            xID: xID,\n            props: props,\n            context: context,\n            reactData: reactData,\n            internalData: internalData,\n            getRefMaps: function () { return refMaps; }\n        };\n        var listMethods = {};\n        var computeSYOpts = computed(function () {\n            return Object.assign({}, GlobalConfig.list.scrollY, props.scrollY);\n        });\n        var computeStyles = computed(function () {\n            var height = props.height, maxHeight = props.maxHeight;\n            var style = {};\n            if (height) {\n                style.height = \"\" + (isNaN(height) ? height : height + \"px\");\n            }\n            else if (maxHeight) {\n                style.height = 'auto';\n                style.maxHeight = \"\" + (isNaN(maxHeight) ? maxHeight : maxHeight + \"px\");\n            }\n            return style;\n        });\n        var updateYSpace = function () {\n            var scrollYLoad = reactData.scrollYLoad;\n            var scrollYStore = internalData.scrollYStore, fullData = internalData.fullData;\n            reactData.bodyHeight = scrollYLoad ? fullData.length * scrollYStore.rowHeight : 0;\n            reactData.topSpaceHeight = scrollYLoad ? Math.max(scrollYStore.startIndex * scrollYStore.rowHeight, 0) : 0;\n        };\n        var handleData = function () {\n            var scrollYLoad = reactData.scrollYLoad;\n            var fullData = internalData.fullData, scrollYStore = internalData.scrollYStore;\n            reactData.items = scrollYLoad ? fullData.slice(scrollYStore.startIndex, scrollYStore.endIndex) : fullData.slice(0);\n            return nextTick();\n        };\n        var updateYData = function () {\n            handleData();\n            updateYSpace();\n        };\n        var computeScrollLoad = function () {\n            return nextTick().then(function () {\n                var scrollYLoad = reactData.scrollYLoad;\n                var scrollYStore = internalData.scrollYStore;\n                var virtualBodyElem = refVirtualBody.value;\n                var sYOpts = computeSYOpts.value;\n                var rowHeight = 0;\n                var firstItemElem;\n                if (virtualBodyElem) {\n                    if (sYOpts.sItem) {\n                        firstItemElem = virtualBodyElem.querySelector(sYOpts.sItem);\n                    }\n                    if (!firstItemElem) {\n                        firstItemElem = virtualBodyElem.children[0];\n                    }\n                }\n                if (firstItemElem) {\n                    rowHeight = firstItemElem.offsetHeight;\n                }\n                rowHeight = Math.max(20, rowHeight);\n                scrollYStore.rowHeight = rowHeight;\n                // 计算 Y 逻辑\n                if (scrollYLoad) {\n                    var scrollBodyElem = refVirtualWrapper.value;\n                    var visibleYSize = Math.max(8, Math.ceil(scrollBodyElem.clientHeight / rowHeight));\n                    var offsetYSize = sYOpts.oSize ? XEUtils.toNumber(sYOpts.oSize) : (browse.edge ? 10 : 0);\n                    scrollYStore.offsetSize = offsetYSize;\n                    scrollYStore.visibleSize = visibleYSize;\n                    scrollYStore.endIndex = Math.max(scrollYStore.startIndex, visibleYSize + offsetYSize, scrollYStore.endIndex);\n                    updateYData();\n                }\n                else {\n                    updateYSpace();\n                }\n                reactData.rowHeight = rowHeight;\n            });\n        };\n        /**\n         * 清除滚动条\n         */\n        var clearScroll = function () {\n            var scrollBodyElem = refVirtualWrapper.value;\n            if (scrollBodyElem) {\n                scrollBodyElem.scrollTop = 0;\n            }\n            return nextTick();\n        };\n        /**\n         * 如果有滚动条，则滚动到对应的位置\n         * @param {Number} scrollLeft 左距离\n         * @param {Number} scrollTop 上距离\n         */\n        var scrollTo = function (scrollLeft, scrollTop) {\n            var scrollBodyElem = refVirtualWrapper.value;\n            if (XEUtils.isNumber(scrollLeft)) {\n                scrollBodyElem.scrollLeft = scrollLeft;\n            }\n            if (XEUtils.isNumber(scrollTop)) {\n                scrollBodyElem.scrollTop = scrollTop;\n            }\n            if (reactData.scrollYLoad) {\n                return new Promise(function (resolve) { return setTimeout(function () { return resolve(nextTick()); }, 50); });\n            }\n            return nextTick();\n        };\n        /**\n         * 刷新滚动条\n         */\n        var refreshScroll = function () {\n            var lastScrollLeft = internalData.lastScrollLeft, lastScrollTop = internalData.lastScrollTop;\n            return clearScroll().then(function () {\n                if (lastScrollLeft || lastScrollTop) {\n                    internalData.lastScrollLeft = 0;\n                    internalData.lastScrollTop = 0;\n                    return scrollTo(lastScrollLeft, lastScrollTop);\n                }\n            });\n        };\n        /**\n         * 重新计算列表\n         */\n        var recalculate = function () {\n            var el = refElem.value;\n            if (el.clientWidth && el.clientHeight) {\n                return computeScrollLoad();\n            }\n            return Promise.resolve();\n        };\n        var loadYData = function (evnt) {\n            var scrollYStore = internalData.scrollYStore;\n            var startIndex = scrollYStore.startIndex, endIndex = scrollYStore.endIndex, visibleSize = scrollYStore.visibleSize, offsetSize = scrollYStore.offsetSize, rowHeight = scrollYStore.rowHeight;\n            var scrollBodyElem = evnt.target;\n            var scrollTop = scrollBodyElem.scrollTop;\n            var toVisibleIndex = Math.floor(scrollTop / rowHeight);\n            var offsetStartIndex = Math.max(0, toVisibleIndex - 1 - offsetSize);\n            var offsetEndIndex = toVisibleIndex + visibleSize + offsetSize;\n            if (toVisibleIndex <= startIndex || toVisibleIndex >= endIndex - visibleSize - 1) {\n                if (startIndex !== offsetStartIndex || endIndex !== offsetEndIndex) {\n                    scrollYStore.startIndex = offsetStartIndex;\n                    scrollYStore.endIndex = offsetEndIndex;\n                    updateYData();\n                }\n            }\n        };\n        var scrollEvent = function (evnt) {\n            var scrollBodyElem = evnt.target;\n            var scrollTop = scrollBodyElem.scrollTop;\n            var scrollLeft = scrollBodyElem.scrollLeft;\n            var isX = scrollLeft !== internalData.lastScrollLeft;\n            var isY = scrollTop !== internalData.lastScrollTop;\n            internalData.lastScrollTop = scrollTop;\n            internalData.lastScrollLeft = scrollLeft;\n            if (reactData.scrollYLoad) {\n                loadYData(evnt);\n            }\n            listMethods.dispatchEvent('scroll', { scrollLeft: scrollLeft, scrollTop: scrollTop, isX: isX, isY: isY }, evnt);\n        };\n        listMethods = {\n            dispatchEvent: function (type, params, evnt) {\n                emit(type, Object.assign({ $list: $xelist, $event: evnt }, params));\n            },\n            /**\n             * 加载数据\n             * @param {Array} datas 数据\n             */\n            loadData: function (datas) {\n                var scrollYStore = internalData.scrollYStore;\n                var sYOpts = computeSYOpts.value;\n                var fullData = datas || [];\n                Object.assign(scrollYStore, {\n                    startIndex: 0,\n                    endIndex: 1,\n                    visibleSize: 0\n                });\n                internalData.fullData = fullData;\n                reactData.scrollYLoad = !!sYOpts.enabled && sYOpts.gt > -1 && sYOpts.gt <= fullData.length;\n                handleData();\n                return computeScrollLoad().then(function () {\n                    refreshScroll();\n                });\n            },\n            /**\n             * 重新加载数据\n             * @param {Array} datas 数据\n             */\n            reloadData: function (datas) {\n                clearScroll();\n                return listMethods.loadData(datas);\n            },\n            recalculate: recalculate,\n            scrollTo: scrollTo,\n            refreshScroll: refreshScroll,\n            clearScroll: clearScroll\n        };\n        Object.assign($xelist, listMethods);\n        watch(function () { return props.data; }, function (value) {\n            listMethods.loadData(value || []);\n        });\n        watch(function () { return props.syncResize; }, function (value) {\n            if (value) {\n                recalculate();\n                nextTick(function () { return setTimeout(function () { return recalculate(); }); });\n            }\n        });\n        var resizeObserver;\n        nextTick(function () {\n            GlobalEvent.on($xelist, 'resize', function () {\n                recalculate();\n            });\n            if (props.autoResize) {\n                var el = refElem.value;\n                resizeObserver = createResizeEvent(function () { return recalculate(); });\n                resizeObserver.observe(el);\n            }\n            listMethods.loadData(props.data || []);\n        });\n        onUnmounted(function () {\n            if (resizeObserver) {\n                resizeObserver.disconnect();\n            }\n            GlobalEvent.off($xelist, 'resize');\n        });\n        var renderVN = function () {\n            var _a;\n            var className = props.className, loading = props.loading;\n            var bodyHeight = reactData.bodyHeight, topSpaceHeight = reactData.topSpaceHeight, items = reactData.items;\n            var vSize = computeSize.value;\n            var styles = computeStyles.value;\n            return h('div', {\n                ref: refElem,\n                class: ['vxe-list', className ? (XEUtils.isFunction(className) ? className({ $list: $xelist }) : className) : '', (_a = {},\n                        _a[\"size--\" + vSize] = vSize,\n                        _a['is--loading'] = loading,\n                        _a)]\n            }, [\n                h('div', {\n                    ref: refVirtualWrapper,\n                    class: 'vxe-list--virtual-wrapper',\n                    style: styles,\n                    onScroll: scrollEvent\n                }, [\n                    h('div', {\n                        class: 'vxe-list--y-space',\n                        style: {\n                            height: bodyHeight ? bodyHeight + \"px\" : ''\n                        }\n                    }),\n                    h('div', {\n                        ref: refVirtualBody,\n                        class: 'vxe-list--body',\n                        style: {\n                            marginTop: topSpaceHeight ? topSpaceHeight + \"px\" : ''\n                        }\n                    }, slots.default ? slots.default({ items: items, $list: $xelist }) : [])\n                ]),\n                h('div', {\n                    class: ['vxe-list--loading vxe-loading', {\n                            'is--visible': loading\n                        }]\n                }, [\n                    h('div', {\n                        class: 'vxe-loading--spinner'\n                    })\n                ])\n            ]);\n        };\n        $xelist.renderVN = renderVN;\n        return $xelist;\n    },\n    render: function () {\n        return this.renderVN();\n    }\n});\n"]},"metadata":{},"sourceType":"module"}