{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps, findDOMNode, getSlot } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash-es/debounce';\nimport throttle from 'lodash-es/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\nimport { watchEffect, defineComponent } from 'vue';\nvar lazyLoadProps = {\n  debounce: PropTypes.looseBool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default defineComponent({\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      watchEffect(function () {\n        if (!_this.visible) {\n          _this.lazyLoadHandler(_this.$props);\n        }\n      });\n\n      var eventNode = _this.getEventNode();\n\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n\n    this.detachListeners();\n  },\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(findDOMNode(this));\n    },\n    getOffset: function getOffset() {\n      var _this$$props = this.$props,\n          offset = _this$$props.offset,\n          offsetVertical = _this$$props.offsetVertical,\n          offsetHorizontal = _this$$props.offsetHorizontal,\n          offsetTop = _this$$props.offsetTop,\n          offsetBottom = _this$$props.offsetBottom,\n          offsetLeft = _this$$props.offsetLeft,\n          offsetRight = _this$$props.offsetRight,\n          threshold = _this$$props.threshold;\n\n      var _offsetAll = threshold || offset;\n\n      var _offsetVertical = offsetVertical || _offsetAll;\n\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n\n      if (!this._.isMounted) {\n        return;\n      }\n\n      var offset = this.getOffset();\n      var node = findDOMNode(this);\n      var eventNode = this.getEventNode();\n\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({\n          visible: true\n        }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render() {\n    var children = getSlot(this);\n\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n\n    var _this$$props2 = this.$props,\n        height = _this$$props2.height,\n        width = _this$$props2.width,\n        ElementType = _this$$props2.elementType;\n    var visible = this.visible;\n    var className = this.$attrs.class;\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n\n    var elClasses = _defineProperty({\n      LazyLoad: true,\n      'is-visible': visible\n    }, className, className);\n\n    return _createVNode(ElementType, {\n      \"class\": elClasses,\n      \"style\": elStyles\n    }, {\n      default: function _default() {\n        return [visible ? children[0] : null];\n      }\n    });\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-lazy-load/src/LazyLoad.js"],"names":["_defineProperty","createVNode","_createVNode","PropTypes","BaseMixin","addEventListener","initDefaultProps","findDOMNode","getSlot","warning","debounce","throttle","parentScroll","inViewport","watchEffect","defineComponent","lazyLoadProps","looseBool","elementType","string","height","oneOfType","number","offset","offsetBottom","offsetHorizontal","offsetLeft","offsetRight","offsetTop","offsetVertical","threshold","width","name","mixins","inheritAttrs","props","data","lazyLoadHandler","visible","mounted","_this","$nextTick","$props","eventNode","getEventNode","flush","resizeHander","window","scrollHander","beforeUnmount","cancel","detachListeners","methods","getOffset","_this$$props","_offsetAll","_offsetVertical","_offsetHorizontal","top","bottom","left","right","_this2","_","isMounted","node","setState","__emit","remove","render","children","length","_this$$props2","ElementType","className","$attrs","class","elStyles","elClasses","LazyLoad","default","_default"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport BaseMixin from '../../_util/BaseMixin';\nimport addEventListener from '../../vc-util/Dom/addEventListener';\nimport { initDefaultProps, findDOMNode, getSlot } from '../../_util/props-util';\nimport warning from '../../_util/warning';\nimport debounce from 'lodash-es/debounce';\nimport throttle from 'lodash-es/throttle';\nimport parentScroll from './utils/parentScroll';\nimport inViewport from './utils/inViewport';\nimport { watchEffect, defineComponent } from 'vue';\nvar lazyLoadProps = {\n  debounce: PropTypes.looseBool,\n  elementType: PropTypes.string,\n  height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  offset: PropTypes.number,\n  offsetBottom: PropTypes.number,\n  offsetHorizontal: PropTypes.number,\n  offsetLeft: PropTypes.number,\n  offsetRight: PropTypes.number,\n  offsetTop: PropTypes.number,\n  offsetVertical: PropTypes.number,\n  threshold: PropTypes.number,\n  throttle: PropTypes.number,\n  width: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nexport default defineComponent({\n  name: 'LazyLoad',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(lazyLoadProps, {\n    elementType: 'div',\n    debounce: true,\n    offset: 0,\n    offsetBottom: 0,\n    offsetHorizontal: 0,\n    offsetLeft: 0,\n    offsetRight: 0,\n    offsetTop: 0,\n    offsetVertical: 0,\n    throttle: 250\n  }),\n  data: function data() {\n    if (this.throttle > 0) {\n      if (this.debounce) {\n        this.lazyLoadHandler = debounce(this.lazyLoadHandler, this.throttle);\n      } else {\n        this.lazyLoadHandler = throttle(this.lazyLoadHandler, this.throttle);\n      }\n    }\n\n    return {\n      visible: false\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      watchEffect(function () {\n        if (!_this.visible) {\n          _this.lazyLoadHandler(_this.$props);\n        }\n      });\n\n      var eventNode = _this.getEventNode();\n\n      if (_this.lazyLoadHandler.flush) {\n        _this.lazyLoadHandler.flush();\n      }\n\n      _this.resizeHander = addEventListener(window, 'resize', _this.lazyLoadHandler);\n      _this.scrollHander = addEventListener(eventNode, 'scroll', _this.lazyLoadHandler);\n    });\n  },\n  beforeUnmount: function beforeUnmount() {\n    if (this.lazyLoadHandler.cancel) {\n      this.lazyLoadHandler.cancel();\n    }\n\n    this.detachListeners();\n  },\n  methods: {\n    getEventNode: function getEventNode() {\n      return parentScroll(findDOMNode(this));\n    },\n    getOffset: function getOffset() {\n      var _this$$props = this.$props,\n          offset = _this$$props.offset,\n          offsetVertical = _this$$props.offsetVertical,\n          offsetHorizontal = _this$$props.offsetHorizontal,\n          offsetTop = _this$$props.offsetTop,\n          offsetBottom = _this$$props.offsetBottom,\n          offsetLeft = _this$$props.offsetLeft,\n          offsetRight = _this$$props.offsetRight,\n          threshold = _this$$props.threshold;\n\n      var _offsetAll = threshold || offset;\n\n      var _offsetVertical = offsetVertical || _offsetAll;\n\n      var _offsetHorizontal = offsetHorizontal || _offsetAll;\n\n      return {\n        top: offsetTop || _offsetVertical,\n        bottom: offsetBottom || _offsetVertical,\n        left: offsetLeft || _offsetHorizontal,\n        right: offsetRight || _offsetHorizontal\n      };\n    },\n    lazyLoadHandler: function lazyLoadHandler() {\n      var _this2 = this;\n\n      if (!this._.isMounted) {\n        return;\n      }\n\n      var offset = this.getOffset();\n      var node = findDOMNode(this);\n      var eventNode = this.getEventNode();\n\n      if (inViewport(node, eventNode, offset)) {\n        this.setState({\n          visible: true\n        }, function () {\n          _this2.__emit('contentVisible');\n        });\n        this.detachListeners();\n      }\n    },\n    detachListeners: function detachListeners() {\n      this.resizeHander && this.resizeHander.remove();\n      this.scrollHander && this.scrollHander.remove();\n    }\n  },\n  render: function render() {\n    var children = getSlot(this);\n\n    if (children.length !== 1) {\n      warning(false, 'lazyLoad组件只能包含一个子元素');\n      return null;\n    }\n\n    var _this$$props2 = this.$props,\n        height = _this$$props2.height,\n        width = _this$$props2.width,\n        ElementType = _this$$props2.elementType;\n    var visible = this.visible;\n    var className = this.$attrs.class;\n    var elStyles = {\n      height: typeof height === 'number' ? height + 'px' : height,\n      width: typeof width === 'number' ? width + 'px' : width\n    };\n\n    var elClasses = _defineProperty({\n      LazyLoad: true,\n      'is-visible': visible\n    }, className, className);\n\n    return _createVNode(ElementType, {\n      \"class\": elClasses,\n      \"style\": elStyles\n    }, {\n      default: function _default() {\n        return [visible ? children[0] : null];\n      }\n    });\n  }\n});"]},"metadata":{},"sourceType":"module"}