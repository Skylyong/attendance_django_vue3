{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport { initDefaultProps, getSlot } from '../../_util/props-util';\nimport BaseMixin from '../../_util/BaseMixin';\nimport AjaxUpload from './AjaxUploader';\nimport IframeUpload from './IframeUploader';\nimport { defineComponent, nextTick } from 'vue';\n\nfunction empty() {}\n\nvar uploadProps = {\n  componentTag: PropTypes.string,\n  prefixCls: PropTypes.string,\n  action: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  name: PropTypes.string,\n  multipart: PropTypes.looseBool,\n  directory: PropTypes.looseBool,\n  onError: PropTypes.func,\n  onSuccess: PropTypes.func,\n  onProgress: PropTypes.func,\n  onStart: PropTypes.func,\n  data: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n  headers: PropTypes.object,\n  accept: PropTypes.string,\n  multiple: PropTypes.looseBool,\n  disabled: PropTypes.looseBool,\n  beforeUpload: PropTypes.func,\n  customRequest: PropTypes.func,\n  onReady: PropTypes.func,\n  withCredentials: PropTypes.looseBool,\n  supportServerRender: PropTypes.looseBool,\n  openFileDialogOnClick: PropTypes.looseBool,\n  method: PropTypes.string\n};\nexport default defineComponent({\n  name: 'Upload',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(uploadProps, {\n    componentTag: 'span',\n    prefixCls: 'rc-upload',\n    data: {},\n    headers: {},\n    name: 'file',\n    multipart: false,\n    onReady: empty,\n    onStart: empty,\n    onError: empty,\n    onSuccess: empty,\n    supportServerRender: false,\n    multiple: false,\n    beforeUpload: empty,\n    withCredentials: false,\n    openFileDialogOnClick: true\n  }),\n  data: function data() {\n    this.Component = null;\n    return {// Component: null, // 组件作为响应式数据，性能比较低，采用强制刷新\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.supportServerRender) {\n        _this.Component = _this.getComponent();\n\n        _this.$forceUpdate();\n\n        nextTick(function () {\n          _this.__emit('ready');\n        });\n      }\n    });\n  },\n  methods: {\n    getComponent: function getComponent() {\n      return typeof File !== 'undefined' ? AjaxUpload : IframeUpload;\n    },\n    abort: function abort(file) {\n      this.$refs.uploaderRef.abort(file);\n    }\n  },\n  render: function render() {\n    var _this2 = this;\n\n    var componentProps = _extends(_extends(_extends({}, this.$props), {\n      ref: 'uploaderRef'\n    }), this.$attrs);\n\n    if (this.supportServerRender) {\n      var _ComponentUploader = this.Component;\n\n      if (_ComponentUploader) {\n        return _createVNode(_ComponentUploader, componentProps, {\n          default: function _default() {\n            return [getSlot(_this2)];\n          }\n        });\n      }\n\n      return null;\n    }\n\n    var ComponentUploader = this.getComponent();\n    return _createVNode(ComponentUploader, componentProps, {\n      default: function _default() {\n        return [getSlot(_this2)];\n      }\n    });\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-upload/src/Upload.js"],"names":["_extends","createVNode","_createVNode","PropTypes","initDefaultProps","getSlot","BaseMixin","AjaxUpload","IframeUpload","defineComponent","nextTick","empty","uploadProps","componentTag","string","prefixCls","action","oneOfType","func","name","multipart","looseBool","directory","onError","onSuccess","onProgress","onStart","data","object","headers","accept","multiple","disabled","beforeUpload","customRequest","onReady","withCredentials","supportServerRender","openFileDialogOnClick","method","mixins","inheritAttrs","props","Component","mounted","_this","$nextTick","getComponent","$forceUpdate","__emit","methods","File","abort","file","$refs","uploaderRef","render","_this2","componentProps","$props","ref","$attrs","_ComponentUploader","default","_default","ComponentUploader"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport PropTypes from '../../_util/vue-types';\nimport { initDefaultProps, getSlot } from '../../_util/props-util';\nimport BaseMixin from '../../_util/BaseMixin';\nimport AjaxUpload from './AjaxUploader';\nimport IframeUpload from './IframeUploader';\nimport { defineComponent, nextTick } from 'vue';\n\nfunction empty() {}\n\nvar uploadProps = {\n  componentTag: PropTypes.string,\n  prefixCls: PropTypes.string,\n  action: PropTypes.oneOfType([PropTypes.string, PropTypes.func]),\n  name: PropTypes.string,\n  multipart: PropTypes.looseBool,\n  directory: PropTypes.looseBool,\n  onError: PropTypes.func,\n  onSuccess: PropTypes.func,\n  onProgress: PropTypes.func,\n  onStart: PropTypes.func,\n  data: PropTypes.oneOfType([PropTypes.object, PropTypes.func]),\n  headers: PropTypes.object,\n  accept: PropTypes.string,\n  multiple: PropTypes.looseBool,\n  disabled: PropTypes.looseBool,\n  beforeUpload: PropTypes.func,\n  customRequest: PropTypes.func,\n  onReady: PropTypes.func,\n  withCredentials: PropTypes.looseBool,\n  supportServerRender: PropTypes.looseBool,\n  openFileDialogOnClick: PropTypes.looseBool,\n  method: PropTypes.string\n};\nexport default defineComponent({\n  name: 'Upload',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: initDefaultProps(uploadProps, {\n    componentTag: 'span',\n    prefixCls: 'rc-upload',\n    data: {},\n    headers: {},\n    name: 'file',\n    multipart: false,\n    onReady: empty,\n    onStart: empty,\n    onError: empty,\n    onSuccess: empty,\n    supportServerRender: false,\n    multiple: false,\n    beforeUpload: empty,\n    withCredentials: false,\n    openFileDialogOnClick: true\n  }),\n  data: function data() {\n    this.Component = null;\n    return {// Component: null, // 组件作为响应式数据，性能比较低，采用强制刷新\n    };\n  },\n  mounted: function mounted() {\n    var _this = this;\n\n    this.$nextTick(function () {\n      if (_this.supportServerRender) {\n        _this.Component = _this.getComponent();\n\n        _this.$forceUpdate();\n\n        nextTick(function () {\n          _this.__emit('ready');\n        });\n      }\n    });\n  },\n  methods: {\n    getComponent: function getComponent() {\n      return typeof File !== 'undefined' ? AjaxUpload : IframeUpload;\n    },\n    abort: function abort(file) {\n      this.$refs.uploaderRef.abort(file);\n    }\n  },\n  render: function render() {\n    var _this2 = this;\n\n    var componentProps = _extends(_extends(_extends({}, this.$props), {\n      ref: 'uploaderRef'\n    }), this.$attrs);\n\n    if (this.supportServerRender) {\n      var _ComponentUploader = this.Component;\n\n      if (_ComponentUploader) {\n        return _createVNode(_ComponentUploader, componentProps, {\n          default: function _default() {\n            return [getSlot(_this2)];\n          }\n        });\n      }\n\n      return null;\n    }\n\n    var ComponentUploader = this.getComponent();\n    return _createVNode(ComponentUploader, componentProps, {\n      default: function _default() {\n        return [getSlot(_this2)];\n      }\n    });\n  }\n});"]},"metadata":{},"sourceType":"module"}