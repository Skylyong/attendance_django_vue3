{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport { watch, computed, defineComponent } from \"vue\";\nimport { raf, cancelRaf } from \"@vant/use\";\nimport { isObject, truthProp, numericProp, getSizeStyle, makeStringProp, makeNumberProp, makeNumericProp, createNamespace } from \"../utils\";\nconst [name, bem] = createNamespace(\"circle\");\nlet uid = 0;\n\nconst format = rate => Math.min(Math.max(+rate, 0), 100);\n\nfunction getPath(clockwise, viewBoxSize) {\n  const sweepFlag = clockwise ? 1 : 0;\n  return `M ${viewBoxSize / 2} ${viewBoxSize / 2} m 0, -500 a 500, 500 0 1, ${sweepFlag} 0, 1000 a 500, 500 0 1, ${sweepFlag} 0, -1000`;\n}\n\nconst circleProps = {\n  text: String,\n  size: numericProp,\n  fill: makeStringProp(\"none\"),\n  rate: makeNumericProp(100),\n  speed: makeNumericProp(0),\n  color: [String, Object],\n  clockwise: truthProp,\n  layerColor: String,\n  currentRate: makeNumberProp(0),\n  strokeWidth: makeNumericProp(40),\n  strokeLinecap: String,\n  startPosition: makeStringProp(\"top\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: circleProps,\n  emits: [\"update:currentRate\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const id = `van-circle-${uid++}`;\n    const viewBoxSize = computed(() => +props.strokeWidth + 1e3);\n    const path = computed(() => getPath(props.clockwise, viewBoxSize.value));\n    const svgStyle = computed(() => {\n      const ROTATE_ANGLE_MAP = {\n        top: 0,\n        right: 90,\n        bottom: 180,\n        left: 270\n      };\n      const angleValue = ROTATE_ANGLE_MAP[props.startPosition];\n\n      if (angleValue) {\n        return {\n          transform: `rotate(${angleValue}deg)`\n        };\n      }\n    });\n    watch(() => props.rate, rate => {\n      let rafId;\n      const startTime = Date.now();\n      const startRate = props.currentRate;\n      const endRate = format(rate);\n      const duration = Math.abs((startRate - endRate) * 1e3 / +props.speed);\n\n      const animate = () => {\n        const now = Date.now();\n        const progress = Math.min((now - startTime) / duration, 1);\n        const rate2 = progress * (endRate - startRate) + startRate;\n        emit(\"update:currentRate\", format(parseFloat(rate2.toFixed(1))));\n\n        if (endRate > startRate ? rate2 < endRate : rate2 > endRate) {\n          rafId = raf(animate);\n        }\n      };\n\n      if (props.speed) {\n        if (rafId) {\n          cancelRaf(rafId);\n        }\n\n        rafId = raf(animate);\n      } else {\n        emit(\"update:currentRate\", endRate);\n      }\n    }, {\n      immediate: true\n    });\n\n    const renderHover = () => {\n      const PERIMETER = 3140;\n      const {\n        strokeWidth,\n        currentRate,\n        strokeLinecap\n      } = props;\n      const offset = PERIMETER * currentRate / 100;\n      const color = isObject(props.color) ? `url(#${id})` : props.color;\n      const style = {\n        stroke: color,\n        strokeWidth: `${+strokeWidth + 1}px`,\n        strokeLinecap,\n        strokeDasharray: `${offset}px ${PERIMETER}px`\n      };\n      return _createVNode(\"path\", {\n        \"d\": path.value,\n        \"style\": style,\n        \"class\": bem(\"hover\"),\n        \"stroke\": color\n      }, null);\n    };\n\n    const renderLayer = () => {\n      const style = {\n        fill: props.fill,\n        stroke: props.layerColor,\n        strokeWidth: `${props.strokeWidth}px`\n      };\n      return _createVNode(\"path\", {\n        \"class\": bem(\"layer\"),\n        \"style\": style,\n        \"d\": path.value\n      }, null);\n    };\n\n    const renderGradient = () => {\n      const {\n        color\n      } = props;\n\n      if (!isObject(color)) {\n        return;\n      }\n\n      const Stops = Object.keys(color).sort((a, b) => parseFloat(a) - parseFloat(b)).map((key, index) => _createVNode(\"stop\", {\n        \"key\": index,\n        \"offset\": key,\n        \"stop-color\": color[key]\n      }, null));\n      return _createVNode(\"defs\", null, [_createVNode(\"linearGradient\", {\n        \"id\": id,\n        \"x1\": \"100%\",\n        \"y1\": \"0%\",\n        \"x2\": \"0%\",\n        \"y2\": \"0%\"\n      }, [Stops])]);\n    };\n\n    const renderText = () => {\n      if (slots.default) {\n        return slots.default();\n      }\n\n      if (props.text) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"text\")\n        }, [props.text]);\n      }\n    };\n\n    return () => _createVNode(\"div\", {\n      \"class\": bem(),\n      \"style\": getSizeStyle(props.size)\n    }, [_createVNode(\"svg\", {\n      \"viewBox\": `0 0 ${viewBoxSize.value} ${viewBoxSize.value}`,\n      \"style\": svgStyle.value\n    }, [renderGradient(), renderLayer(), renderHover()]), renderText()]);\n  }\n\n});\nexport { stdin_default as default };","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vant/es/circle/Circle.js"],"names":["createVNode","_createVNode","watch","computed","defineComponent","raf","cancelRaf","isObject","truthProp","numericProp","getSizeStyle","makeStringProp","makeNumberProp","makeNumericProp","createNamespace","name","bem","uid","format","rate","Math","min","max","getPath","clockwise","viewBoxSize","sweepFlag","circleProps","text","String","size","fill","speed","color","Object","layerColor","currentRate","strokeWidth","strokeLinecap","startPosition","stdin_default","props","emits","setup","emit","slots","id","path","value","svgStyle","ROTATE_ANGLE_MAP","top","right","bottom","left","angleValue","transform","rafId","startTime","Date","now","startRate","endRate","duration","abs","animate","progress","rate2","parseFloat","toFixed","immediate","renderHover","PERIMETER","offset","style","stroke","strokeDasharray","renderLayer","renderGradient","Stops","keys","sort","a","b","map","key","index","renderText","default"],"mappings":"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","sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport { watch, computed, defineComponent } from \"vue\";\nimport { raf, cancelRaf } from \"@vant/use\";\nimport { isObject, truthProp, numericProp, getSizeStyle, makeStringProp, makeNumberProp, makeNumericProp, createNamespace } from \"../utils\";\nconst [name, bem] = createNamespace(\"circle\");\nlet uid = 0;\nconst format = (rate) => Math.min(Math.max(+rate, 0), 100);\nfunction getPath(clockwise, viewBoxSize) {\n  const sweepFlag = clockwise ? 1 : 0;\n  return `M ${viewBoxSize / 2} ${viewBoxSize / 2} m 0, -500 a 500, 500 0 1, ${sweepFlag} 0, 1000 a 500, 500 0 1, ${sweepFlag} 0, -1000`;\n}\nconst circleProps = {\n  text: String,\n  size: numericProp,\n  fill: makeStringProp(\"none\"),\n  rate: makeNumericProp(100),\n  speed: makeNumericProp(0),\n  color: [String, Object],\n  clockwise: truthProp,\n  layerColor: String,\n  currentRate: makeNumberProp(0),\n  strokeWidth: makeNumericProp(40),\n  strokeLinecap: String,\n  startPosition: makeStringProp(\"top\")\n};\nvar stdin_default = defineComponent({\n  name,\n  props: circleProps,\n  emits: [\"update:currentRate\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const id = `van-circle-${uid++}`;\n    const viewBoxSize = computed(() => +props.strokeWidth + 1e3);\n    const path = computed(() => getPath(props.clockwise, viewBoxSize.value));\n    const svgStyle = computed(() => {\n      const ROTATE_ANGLE_MAP = {\n        top: 0,\n        right: 90,\n        bottom: 180,\n        left: 270\n      };\n      const angleValue = ROTATE_ANGLE_MAP[props.startPosition];\n      if (angleValue) {\n        return {\n          transform: `rotate(${angleValue}deg)`\n        };\n      }\n    });\n    watch(() => props.rate, (rate) => {\n      let rafId;\n      const startTime = Date.now();\n      const startRate = props.currentRate;\n      const endRate = format(rate);\n      const duration = Math.abs((startRate - endRate) * 1e3 / +props.speed);\n      const animate = () => {\n        const now = Date.now();\n        const progress = Math.min((now - startTime) / duration, 1);\n        const rate2 = progress * (endRate - startRate) + startRate;\n        emit(\"update:currentRate\", format(parseFloat(rate2.toFixed(1))));\n        if (endRate > startRate ? rate2 < endRate : rate2 > endRate) {\n          rafId = raf(animate);\n        }\n      };\n      if (props.speed) {\n        if (rafId) {\n          cancelRaf(rafId);\n        }\n        rafId = raf(animate);\n      } else {\n        emit(\"update:currentRate\", endRate);\n      }\n    }, {\n      immediate: true\n    });\n    const renderHover = () => {\n      const PERIMETER = 3140;\n      const {\n        strokeWidth,\n        currentRate,\n        strokeLinecap\n      } = props;\n      const offset = PERIMETER * currentRate / 100;\n      const color = isObject(props.color) ? `url(#${id})` : props.color;\n      const style = {\n        stroke: color,\n        strokeWidth: `${+strokeWidth + 1}px`,\n        strokeLinecap,\n        strokeDasharray: `${offset}px ${PERIMETER}px`\n      };\n      return _createVNode(\"path\", {\n        \"d\": path.value,\n        \"style\": style,\n        \"class\": bem(\"hover\"),\n        \"stroke\": color\n      }, null);\n    };\n    const renderLayer = () => {\n      const style = {\n        fill: props.fill,\n        stroke: props.layerColor,\n        strokeWidth: `${props.strokeWidth}px`\n      };\n      return _createVNode(\"path\", {\n        \"class\": bem(\"layer\"),\n        \"style\": style,\n        \"d\": path.value\n      }, null);\n    };\n    const renderGradient = () => {\n      const {\n        color\n      } = props;\n      if (!isObject(color)) {\n        return;\n      }\n      const Stops = Object.keys(color).sort((a, b) => parseFloat(a) - parseFloat(b)).map((key, index) => _createVNode(\"stop\", {\n        \"key\": index,\n        \"offset\": key,\n        \"stop-color\": color[key]\n      }, null));\n      return _createVNode(\"defs\", null, [_createVNode(\"linearGradient\", {\n        \"id\": id,\n        \"x1\": \"100%\",\n        \"y1\": \"0%\",\n        \"x2\": \"0%\",\n        \"y2\": \"0%\"\n      }, [Stops])]);\n    };\n    const renderText = () => {\n      if (slots.default) {\n        return slots.default();\n      }\n      if (props.text) {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"text\")\n        }, [props.text]);\n      }\n    };\n    return () => _createVNode(\"div\", {\n      \"class\": bem(),\n      \"style\": getSizeStyle(props.size)\n    }, [_createVNode(\"svg\", {\n      \"viewBox\": `0 0 ${viewBoxSize.value} ${viewBoxSize.value}`,\n      \"style\": svgStyle.value\n    }, [renderGradient(), renderLayer(), renderHover()]), renderText()]);\n  }\n});\nexport {\n  stdin_default as default\n};\n"]},"metadata":{},"sourceType":"module"}