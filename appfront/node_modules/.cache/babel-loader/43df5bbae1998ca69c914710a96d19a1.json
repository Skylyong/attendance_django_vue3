{"ast":null,"code":"import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, computed, Teleport, Transition, defineComponent } from \"vue\";\nimport { truthProp, numericProp, getZIndexStyle, makeStringProp, makeNumericProp, stopPropagation, createNamespace, HAPTICS_FEEDBACK } from \"../utils\";\nimport { useClickAway } from \"@vant/use\";\nimport NumberKeyboardKey from \"./NumberKeyboardKey\";\nconst [name, bem] = createNamespace(\"number-keyboard\");\nconst numberKeyboardProps = {\n  show: Boolean,\n  title: String,\n  theme: makeStringProp(\"default\"),\n  zIndex: numericProp,\n  teleport: [String, Object],\n  maxlength: makeNumericProp(Infinity),\n  modelValue: makeStringProp(\"\"),\n  transition: truthProp,\n  blurOnClose: truthProp,\n  showDeleteKey: truthProp,\n  randomKeyOrder: Boolean,\n  closeButtonText: String,\n  deleteButtonText: String,\n  closeButtonLoading: Boolean,\n  hideOnClickOutside: truthProp,\n  safeAreaInsetBottom: truthProp,\n  extraKey: {\n    type: [String, Array],\n    default: \"\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: numberKeyboardProps,\n  emits: [\"show\", \"hide\", \"blur\", \"input\", \"close\", \"delete\", \"update:modelValue\"],\n\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const root = ref();\n\n    const genBasicKeys = () => {\n      const keys2 = Array(9).fill(\"\").map((_, i) => ({\n        text: i + 1\n      }));\n\n      if (props.randomKeyOrder) {\n        keys2.sort(() => Math.random() > 0.5 ? 1 : -1);\n      }\n\n      return keys2;\n    };\n\n    const genDefaultKeys = () => [...genBasicKeys(), {\n      text: props.extraKey,\n      type: \"extra\"\n    }, {\n      text: 0\n    }, {\n      text: props.showDeleteKey ? props.deleteButtonText : \"\",\n      type: props.showDeleteKey ? \"delete\" : \"\"\n    }];\n\n    const genCustomKeys = () => {\n      const keys2 = genBasicKeys();\n      const {\n        extraKey\n      } = props;\n      const extraKeys = Array.isArray(extraKey) ? extraKey : [extraKey];\n\n      if (extraKeys.length === 1) {\n        keys2.push({\n          text: 0,\n          wider: true\n        }, {\n          text: extraKeys[0],\n          type: \"extra\"\n        });\n      } else if (extraKeys.length === 2) {\n        keys2.push({\n          text: extraKeys[0],\n          type: \"extra\"\n        }, {\n          text: 0\n        }, {\n          text: extraKeys[1],\n          type: \"extra\"\n        });\n      }\n\n      return keys2;\n    };\n\n    const keys = computed(() => props.theme === \"custom\" ? genCustomKeys() : genDefaultKeys());\n\n    const onBlur = () => {\n      if (props.show) {\n        emit(\"blur\");\n      }\n    };\n\n    const onClose = () => {\n      emit(\"close\");\n\n      if (props.blurOnClose) {\n        onBlur();\n      }\n    };\n\n    const onAnimationEnd = () => emit(props.show ? \"show\" : \"hide\");\n\n    const onPress = (text, type) => {\n      if (text === \"\") {\n        if (type === \"extra\") {\n          onBlur();\n        }\n\n        return;\n      }\n\n      const value = props.modelValue;\n\n      if (type === \"delete\") {\n        emit(\"delete\");\n        emit(\"update:modelValue\", value.slice(0, value.length - 1));\n      } else if (type === \"close\") {\n        onClose();\n      } else if (value.length < props.maxlength) {\n        emit(\"input\", text);\n        emit(\"update:modelValue\", value + text);\n      }\n    };\n\n    const renderTitle = () => {\n      const {\n        title,\n        theme,\n        closeButtonText\n      } = props;\n      const leftSlot = slots[\"title-left\"];\n      const showClose = closeButtonText && theme === \"default\";\n      const showTitle = title || showClose || leftSlot;\n\n      if (!showTitle) {\n        return;\n      }\n\n      return _createVNode(\"div\", {\n        \"class\": bem(\"header\")\n      }, [leftSlot && _createVNode(\"span\", {\n        \"class\": bem(\"title-left\")\n      }, [leftSlot()]), title && _createVNode(\"h2\", {\n        \"class\": bem(\"title\")\n      }, [title]), showClose && _createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": [bem(\"close\"), HAPTICS_FEEDBACK],\n        \"onClick\": onClose\n      }, [closeButtonText])]);\n    };\n\n    const renderKeys = () => keys.value.map(key => {\n      const keySlots = {};\n\n      if (key.type === \"delete\") {\n        keySlots.default = slots.delete;\n      }\n\n      if (key.type === \"extra\") {\n        keySlots.default = slots[\"extra-key\"];\n      }\n\n      return _createVNode(NumberKeyboardKey, {\n        \"key\": key.text,\n        \"text\": key.text,\n        \"type\": key.type,\n        \"wider\": key.wider,\n        \"color\": key.color,\n        \"onPress\": onPress\n      }, keySlots);\n    });\n\n    const renderSidebar = () => {\n      if (props.theme === \"custom\") {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"sidebar\")\n        }, [props.showDeleteKey && _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.deleteButtonText,\n          \"type\": \"delete\",\n          \"onPress\": onPress\n        }, {\n          delete: slots.delete\n        }), _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.closeButtonText,\n          \"type\": \"close\",\n          \"color\": \"blue\",\n          \"loading\": props.closeButtonLoading,\n          \"onPress\": onPress\n        }, null)]);\n      }\n    };\n\n    watch(() => props.show, value => {\n      if (!props.transition) {\n        emit(value ? \"show\" : \"hide\");\n      }\n    });\n\n    if (props.hideOnClickOutside) {\n      useClickAway(root, onBlur, {\n        eventName: \"touchstart\"\n      });\n    }\n\n    return () => {\n      const Title = renderTitle();\n\n      const Content = _createVNode(Transition, {\n        \"name\": props.transition ? \"van-slide-up\" : \"\"\n      }, {\n        default: () => [_withDirectives(_createVNode(\"div\", {\n          \"ref\": root,\n          \"style\": getZIndexStyle(props.zIndex),\n          \"class\": bem({\n            unfit: !props.safeAreaInsetBottom,\n            \"with-title\": !!Title\n          }),\n          \"onTouchstart\": stopPropagation,\n          \"onAnimationend\": onAnimationEnd,\n          \"onWebkitAnimationEnd\": onAnimationEnd\n        }, [Title, _createVNode(\"div\", {\n          \"class\": bem(\"body\")\n        }, [_createVNode(\"div\", {\n          \"class\": bem(\"keys\")\n        }, [renderKeys()]), renderSidebar()])]), [[_vShow, props.show]])]\n      });\n\n      if (props.teleport) {\n        return _createVNode(Teleport, {\n          \"to\": props.teleport\n        }, {\n          default: () => [Content]\n        });\n      }\n\n      return Content;\n    };\n  }\n\n});\nexport { stdin_default as default };","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vant/es/number-keyboard/NumberKeyboard.js"],"names":["withDirectives","_withDirectives","vShow","_vShow","createVNode","_createVNode","ref","watch","computed","Teleport","Transition","defineComponent","truthProp","numericProp","getZIndexStyle","makeStringProp","makeNumericProp","stopPropagation","createNamespace","HAPTICS_FEEDBACK","useClickAway","NumberKeyboardKey","name","bem","numberKeyboardProps","show","Boolean","title","String","theme","zIndex","teleport","Object","maxlength","Infinity","modelValue","transition","blurOnClose","showDeleteKey","randomKeyOrder","closeButtonText","deleteButtonText","closeButtonLoading","hideOnClickOutside","safeAreaInsetBottom","extraKey","type","Array","default","stdin_default","props","emits","setup","emit","slots","root","genBasicKeys","keys2","fill","map","_","i","text","sort","Math","random","genDefaultKeys","genCustomKeys","extraKeys","isArray","length","push","wider","keys","onBlur","onClose","onAnimationEnd","onPress","value","slice","renderTitle","leftSlot","showClose","showTitle","renderKeys","key","keySlots","delete","color","renderSidebar","eventName","Title","Content","unfit"],"mappings":"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","sourcesContent":["import { withDirectives as _withDirectives, vShow as _vShow, createVNode as _createVNode } from \"vue\";\nimport { ref, watch, computed, Teleport, Transition, defineComponent } from \"vue\";\nimport { truthProp, numericProp, getZIndexStyle, makeStringProp, makeNumericProp, stopPropagation, createNamespace, HAPTICS_FEEDBACK } from \"../utils\";\nimport { useClickAway } from \"@vant/use\";\nimport NumberKeyboardKey from \"./NumberKeyboardKey\";\nconst [name, bem] = createNamespace(\"number-keyboard\");\nconst numberKeyboardProps = {\n  show: Boolean,\n  title: String,\n  theme: makeStringProp(\"default\"),\n  zIndex: numericProp,\n  teleport: [String, Object],\n  maxlength: makeNumericProp(Infinity),\n  modelValue: makeStringProp(\"\"),\n  transition: truthProp,\n  blurOnClose: truthProp,\n  showDeleteKey: truthProp,\n  randomKeyOrder: Boolean,\n  closeButtonText: String,\n  deleteButtonText: String,\n  closeButtonLoading: Boolean,\n  hideOnClickOutside: truthProp,\n  safeAreaInsetBottom: truthProp,\n  extraKey: {\n    type: [String, Array],\n    default: \"\"\n  }\n};\nvar stdin_default = defineComponent({\n  name,\n  props: numberKeyboardProps,\n  emits: [\"show\", \"hide\", \"blur\", \"input\", \"close\", \"delete\", \"update:modelValue\"],\n  setup(props, {\n    emit,\n    slots\n  }) {\n    const root = ref();\n    const genBasicKeys = () => {\n      const keys2 = Array(9).fill(\"\").map((_, i) => ({\n        text: i + 1\n      }));\n      if (props.randomKeyOrder) {\n        keys2.sort(() => Math.random() > 0.5 ? 1 : -1);\n      }\n      return keys2;\n    };\n    const genDefaultKeys = () => [...genBasicKeys(), {\n      text: props.extraKey,\n      type: \"extra\"\n    }, {\n      text: 0\n    }, {\n      text: props.showDeleteKey ? props.deleteButtonText : \"\",\n      type: props.showDeleteKey ? \"delete\" : \"\"\n    }];\n    const genCustomKeys = () => {\n      const keys2 = genBasicKeys();\n      const {\n        extraKey\n      } = props;\n      const extraKeys = Array.isArray(extraKey) ? extraKey : [extraKey];\n      if (extraKeys.length === 1) {\n        keys2.push({\n          text: 0,\n          wider: true\n        }, {\n          text: extraKeys[0],\n          type: \"extra\"\n        });\n      } else if (extraKeys.length === 2) {\n        keys2.push({\n          text: extraKeys[0],\n          type: \"extra\"\n        }, {\n          text: 0\n        }, {\n          text: extraKeys[1],\n          type: \"extra\"\n        });\n      }\n      return keys2;\n    };\n    const keys = computed(() => props.theme === \"custom\" ? genCustomKeys() : genDefaultKeys());\n    const onBlur = () => {\n      if (props.show) {\n        emit(\"blur\");\n      }\n    };\n    const onClose = () => {\n      emit(\"close\");\n      if (props.blurOnClose) {\n        onBlur();\n      }\n    };\n    const onAnimationEnd = () => emit(props.show ? \"show\" : \"hide\");\n    const onPress = (text, type) => {\n      if (text === \"\") {\n        if (type === \"extra\") {\n          onBlur();\n        }\n        return;\n      }\n      const value = props.modelValue;\n      if (type === \"delete\") {\n        emit(\"delete\");\n        emit(\"update:modelValue\", value.slice(0, value.length - 1));\n      } else if (type === \"close\") {\n        onClose();\n      } else if (value.length < props.maxlength) {\n        emit(\"input\", text);\n        emit(\"update:modelValue\", value + text);\n      }\n    };\n    const renderTitle = () => {\n      const {\n        title,\n        theme,\n        closeButtonText\n      } = props;\n      const leftSlot = slots[\"title-left\"];\n      const showClose = closeButtonText && theme === \"default\";\n      const showTitle = title || showClose || leftSlot;\n      if (!showTitle) {\n        return;\n      }\n      return _createVNode(\"div\", {\n        \"class\": bem(\"header\")\n      }, [leftSlot && _createVNode(\"span\", {\n        \"class\": bem(\"title-left\")\n      }, [leftSlot()]), title && _createVNode(\"h2\", {\n        \"class\": bem(\"title\")\n      }, [title]), showClose && _createVNode(\"button\", {\n        \"type\": \"button\",\n        \"class\": [bem(\"close\"), HAPTICS_FEEDBACK],\n        \"onClick\": onClose\n      }, [closeButtonText])]);\n    };\n    const renderKeys = () => keys.value.map((key) => {\n      const keySlots = {};\n      if (key.type === \"delete\") {\n        keySlots.default = slots.delete;\n      }\n      if (key.type === \"extra\") {\n        keySlots.default = slots[\"extra-key\"];\n      }\n      return _createVNode(NumberKeyboardKey, {\n        \"key\": key.text,\n        \"text\": key.text,\n        \"type\": key.type,\n        \"wider\": key.wider,\n        \"color\": key.color,\n        \"onPress\": onPress\n      }, keySlots);\n    });\n    const renderSidebar = () => {\n      if (props.theme === \"custom\") {\n        return _createVNode(\"div\", {\n          \"class\": bem(\"sidebar\")\n        }, [props.showDeleteKey && _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.deleteButtonText,\n          \"type\": \"delete\",\n          \"onPress\": onPress\n        }, {\n          delete: slots.delete\n        }), _createVNode(NumberKeyboardKey, {\n          \"large\": true,\n          \"text\": props.closeButtonText,\n          \"type\": \"close\",\n          \"color\": \"blue\",\n          \"loading\": props.closeButtonLoading,\n          \"onPress\": onPress\n        }, null)]);\n      }\n    };\n    watch(() => props.show, (value) => {\n      if (!props.transition) {\n        emit(value ? \"show\" : \"hide\");\n      }\n    });\n    if (props.hideOnClickOutside) {\n      useClickAway(root, onBlur, {\n        eventName: \"touchstart\"\n      });\n    }\n    return () => {\n      const Title = renderTitle();\n      const Content = _createVNode(Transition, {\n        \"name\": props.transition ? \"van-slide-up\" : \"\"\n      }, {\n        default: () => [_withDirectives(_createVNode(\"div\", {\n          \"ref\": root,\n          \"style\": getZIndexStyle(props.zIndex),\n          \"class\": bem({\n            unfit: !props.safeAreaInsetBottom,\n            \"with-title\": !!Title\n          }),\n          \"onTouchstart\": stopPropagation,\n          \"onAnimationend\": onAnimationEnd,\n          \"onWebkitAnimationEnd\": onAnimationEnd\n        }, [Title, _createVNode(\"div\", {\n          \"class\": bem(\"body\")\n        }, [_createVNode(\"div\", {\n          \"class\": bem(\"keys\")\n        }, [renderKeys()]), renderSidebar()])]), [[_vShow, props.show]])]\n      });\n      if (props.teleport) {\n        return _createVNode(Teleport, {\n          \"to\": props.teleport\n        }, {\n          default: () => [Content]\n        });\n      }\n      return Content;\n    };\n  }\n});\nexport {\n  stdin_default as default\n};\n"]},"metadata":{},"sourceType":"module"}