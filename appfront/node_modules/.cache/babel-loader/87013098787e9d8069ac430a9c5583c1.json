{"ast":null,"code":"/**\r\n  * 函数去抖；当被调用 n 毫秒后才会执行，如果在这时间内又被调用则将重新计算执行时间\r\n  *\r\n  * @param {Function} callback 回调\r\n  * @param {Number} wait 多少秒毫\r\n  * @param {Object} options 参数{leading: 是否在之前执行, trailing: 是否在之后执行}\r\n  * @return {Function}\r\n  */\nfunction debounce(callback, wait, options) {\n  var args, context;\n  var opts = options || {};\n  var runFlag = false;\n  var timeout = 0;\n  var isLeading = typeof options === 'boolean';\n  var optLeading = 'leading' in opts ? opts.leading : isLeading;\n  var optTrailing = 'trailing' in opts ? opts.trailing : !isLeading;\n\n  var runFn = function () {\n    runFlag = true;\n    timeout = 0;\n    callback.apply(context, args);\n  };\n\n  var endFn = function () {\n    if (optLeading === true) {\n      timeout = 0;\n    }\n\n    if (!runFlag && optTrailing === true) {\n      runFn();\n    }\n  };\n\n  var cancelFn = function () {\n    var rest = timeout !== 0;\n    clearTimeout(timeout);\n    timeout = 0;\n    return rest;\n  };\n\n  var debounced = function () {\n    runFlag = false;\n    args = arguments;\n    context = this;\n\n    if (timeout === 0) {\n      if (optLeading === true) {\n        runFn();\n      }\n    } else {\n      clearTimeout(timeout);\n    }\n\n    timeout = setTimeout(endFn, wait);\n  };\n\n  debounced.cancel = cancelFn;\n  return debounced;\n}\n\nmodule.exports = debounce;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/xe-utils/debounce.js"],"names":["debounce","callback","wait","options","args","context","opts","runFlag","timeout","isLeading","optLeading","leading","optTrailing","trailing","runFn","apply","endFn","cancelFn","rest","clearTimeout","debounced","arguments","setTimeout","cancel","module","exports"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,QAAT,CAAmBC,QAAnB,EAA6BC,IAA7B,EAAmCC,OAAnC,EAA4C;AAC1C,MAAIC,IAAJ,EAAUC,OAAV;AACA,MAAIC,IAAI,GAAGH,OAAO,IAAI,EAAtB;AACA,MAAII,OAAO,GAAG,KAAd;AACA,MAAIC,OAAO,GAAG,CAAd;AACA,MAAIC,SAAS,GAAG,OAAON,OAAP,KAAmB,SAAnC;AACA,MAAIO,UAAU,GAAG,aAAaJ,IAAb,GAAoBA,IAAI,CAACK,OAAzB,GAAmCF,SAApD;AACA,MAAIG,WAAW,GAAG,cAAcN,IAAd,GAAqBA,IAAI,CAACO,QAA1B,GAAqC,CAACJ,SAAxD;;AACA,MAAIK,KAAK,GAAG,YAAY;AACtBP,IAAAA,OAAO,GAAG,IAAV;AACAC,IAAAA,OAAO,GAAG,CAAV;AACAP,IAAAA,QAAQ,CAACc,KAAT,CAAeV,OAAf,EAAwBD,IAAxB;AACD,GAJD;;AAKA,MAAIY,KAAK,GAAG,YAAY;AACtB,QAAIN,UAAU,KAAK,IAAnB,EAAyB;AACvBF,MAAAA,OAAO,GAAG,CAAV;AACD;;AACD,QAAI,CAACD,OAAD,IAAYK,WAAW,KAAK,IAAhC,EAAsC;AACpCE,MAAAA,KAAK;AACN;AACF,GAPD;;AAQA,MAAIG,QAAQ,GAAG,YAAY;AACzB,QAAIC,IAAI,GAAGV,OAAO,KAAK,CAAvB;AACAW,IAAAA,YAAY,CAACX,OAAD,CAAZ;AACAA,IAAAA,OAAO,GAAG,CAAV;AACA,WAAOU,IAAP;AACD,GALD;;AAMA,MAAIE,SAAS,GAAG,YAAY;AAC1Bb,IAAAA,OAAO,GAAG,KAAV;AACAH,IAAAA,IAAI,GAAGiB,SAAP;AACAhB,IAAAA,OAAO,GAAG,IAAV;;AACA,QAAIG,OAAO,KAAK,CAAhB,EAAmB;AACjB,UAAIE,UAAU,KAAK,IAAnB,EAAyB;AACvBI,QAAAA,KAAK;AACN;AACF,KAJD,MAIO;AACLK,MAAAA,YAAY,CAACX,OAAD,CAAZ;AACD;;AACDA,IAAAA,OAAO,GAAGc,UAAU,CAACN,KAAD,EAAQd,IAAR,CAApB;AACD,GAZD;;AAaAkB,EAAAA,SAAS,CAACG,MAAV,GAAmBN,QAAnB;AACA,SAAOG,SAAP;AACD;;AAEDI,MAAM,CAACC,OAAP,GAAiBzB,QAAjB","sourcesContent":["/**\r\n  * 函数去抖；当被调用 n 毫秒后才会执行，如果在这时间内又被调用则将重新计算执行时间\r\n  *\r\n  * @param {Function} callback 回调\r\n  * @param {Number} wait 多少秒毫\r\n  * @param {Object} options 参数{leading: 是否在之前执行, trailing: 是否在之后执行}\r\n  * @return {Function}\r\n  */\r\nfunction debounce (callback, wait, options) {\r\n  var args, context\r\n  var opts = options || {}\r\n  var runFlag = false\r\n  var timeout = 0\r\n  var isLeading = typeof options === 'boolean'\r\n  var optLeading = 'leading' in opts ? opts.leading : isLeading\r\n  var optTrailing = 'trailing' in opts ? opts.trailing : !isLeading\r\n  var runFn = function () {\r\n    runFlag = true\r\n    timeout = 0\r\n    callback.apply(context, args)\r\n  }\r\n  var endFn = function () {\r\n    if (optLeading === true) {\r\n      timeout = 0\r\n    }\r\n    if (!runFlag && optTrailing === true) {\r\n      runFn()\r\n    }\r\n  }\r\n  var cancelFn = function () {\r\n    var rest = timeout !== 0\r\n    clearTimeout(timeout)\r\n    timeout = 0\r\n    return rest\r\n  }\r\n  var debounced = function () {\r\n    runFlag = false\r\n    args = arguments\r\n    context = this\r\n    if (timeout === 0) {\r\n      if (optLeading === true) {\r\n        runFn()\r\n      }\r\n    } else {\r\n      clearTimeout(timeout)\r\n    }\r\n    timeout = setTimeout(endFn, wait)\r\n  }\r\n  debounced.cancel = cancelFn\r\n  return debounced\r\n}\r\n\r\nmodule.exports = debounce\r\n"]},"metadata":{},"sourceType":"script"}