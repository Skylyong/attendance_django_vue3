{"ast":null,"code":"var staticEncodeURIComponent = require('./staticEncodeURIComponent');\n\nvar each = require('./each');\n\nvar isArray = require('./isArray');\n\nvar isNull = require('./isNull');\n\nvar isUndefined = require('./isUndefined');\n\nvar isPlainObject = require('./isPlainObject');\n\nfunction stringifyParams(resultVal, resultKey, isArr) {\n  var _arr;\n\n  var result = [];\n  each(resultVal, function (item, key) {\n    _arr = isArray(item);\n\n    if (isPlainObject(item) || _arr) {\n      result = result.concat(stringifyParams(item, resultKey + '[' + key + ']', _arr));\n    } else {\n      result.push(staticEncodeURIComponent(resultKey + '[' + (isArr ? '' : key) + ']') + '=' + staticEncodeURIComponent(isNull(item) ? '' : item));\n    }\n  });\n  return result;\n}\n/**\r\n * 序列化查询参数\r\n *\r\n * @param {Object} query 查询参数\r\n */\n\n\nfunction serialize(query) {\n  var _arr;\n\n  var params = [];\n  each(query, function (item, key) {\n    if (!isUndefined(item)) {\n      _arr = isArray(item);\n\n      if (isPlainObject(item) || _arr) {\n        params = params.concat(stringifyParams(item, key, _arr));\n      } else {\n        params.push(staticEncodeURIComponent(key) + '=' + staticEncodeURIComponent(isNull(item) ? '' : item));\n      }\n    }\n  });\n  return params.join('&').replace(/%20/g, '+');\n}\n\nmodule.exports = serialize;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/xe-utils/serialize.js"],"names":["staticEncodeURIComponent","require","each","isArray","isNull","isUndefined","isPlainObject","stringifyParams","resultVal","resultKey","isArr","_arr","result","item","key","concat","push","serialize","query","params","join","replace","module","exports"],"mappings":"AAAA,IAAIA,wBAAwB,GAAGC,OAAO,CAAC,4BAAD,CAAtC;;AAEA,IAAIC,IAAI,GAAGD,OAAO,CAAC,QAAD,CAAlB;;AACA,IAAIE,OAAO,GAAGF,OAAO,CAAC,WAAD,CAArB;;AACA,IAAIG,MAAM,GAAGH,OAAO,CAAC,UAAD,CAApB;;AACA,IAAII,WAAW,GAAGJ,OAAO,CAAC,eAAD,CAAzB;;AACA,IAAIK,aAAa,GAAGL,OAAO,CAAC,iBAAD,CAA3B;;AAEA,SAASM,eAAT,CAA0BC,SAA1B,EAAqCC,SAArC,EAAgDC,KAAhD,EAAuD;AACrD,MAAIC,IAAJ;;AACA,MAAIC,MAAM,GAAG,EAAb;AACAV,EAAAA,IAAI,CAACM,SAAD,EAAY,UAAUK,IAAV,EAAgBC,GAAhB,EAAqB;AACnCH,IAAAA,IAAI,GAAGR,OAAO,CAACU,IAAD,CAAd;;AACA,QAAIP,aAAa,CAACO,IAAD,CAAb,IAAuBF,IAA3B,EAAiC;AAC/BC,MAAAA,MAAM,GAAGA,MAAM,CAACG,MAAP,CAAcR,eAAe,CAACM,IAAD,EAAOJ,SAAS,GAAG,GAAZ,GAAkBK,GAAlB,GAAwB,GAA/B,EAAoCH,IAApC,CAA7B,CAAT;AACD,KAFD,MAEO;AACLC,MAAAA,MAAM,CAACI,IAAP,CAAYhB,wBAAwB,CAACS,SAAS,GAAG,GAAZ,IAAmBC,KAAK,GAAG,EAAH,GAAQI,GAAhC,IAAuC,GAAxC,CAAxB,GAAuE,GAAvE,GAA6Ed,wBAAwB,CAACI,MAAM,CAACS,IAAD,CAAN,GAAe,EAAf,GAAoBA,IAArB,CAAjH;AACD;AACF,GAPG,CAAJ;AAQA,SAAOD,MAAP;AACD;AAED;AACA;AACA;AACA;AACA;;;AACA,SAASK,SAAT,CAAoBC,KAApB,EAA2B;AACzB,MAAIP,IAAJ;;AACA,MAAIQ,MAAM,GAAG,EAAb;AACAjB,EAAAA,IAAI,CAACgB,KAAD,EAAQ,UAAUL,IAAV,EAAgBC,GAAhB,EAAqB;AAC/B,QAAI,CAACT,WAAW,CAACQ,IAAD,CAAhB,EAAwB;AACtBF,MAAAA,IAAI,GAAGR,OAAO,CAACU,IAAD,CAAd;;AACA,UAAIP,aAAa,CAACO,IAAD,CAAb,IAAuBF,IAA3B,EAAiC;AAC/BQ,QAAAA,MAAM,GAAGA,MAAM,CAACJ,MAAP,CAAcR,eAAe,CAACM,IAAD,EAAOC,GAAP,EAAYH,IAAZ,CAA7B,CAAT;AACD,OAFD,MAEO;AACLQ,QAAAA,MAAM,CAACH,IAAP,CAAYhB,wBAAwB,CAACc,GAAD,CAAxB,GAAgC,GAAhC,GAAsCd,wBAAwB,CAACI,MAAM,CAACS,IAAD,CAAN,GAAe,EAAf,GAAoBA,IAArB,CAA1E;AACD;AACF;AACF,GATG,CAAJ;AAUA,SAAOM,MAAM,CAACC,IAAP,CAAY,GAAZ,EAAiBC,OAAjB,CAAyB,MAAzB,EAAiC,GAAjC,CAAP;AACD;;AAEDC,MAAM,CAACC,OAAP,GAAiBN,SAAjB","sourcesContent":["var staticEncodeURIComponent = require('./staticEncodeURIComponent')\r\n\r\nvar each = require('./each')\r\nvar isArray = require('./isArray')\r\nvar isNull = require('./isNull')\r\nvar isUndefined = require('./isUndefined')\r\nvar isPlainObject = require('./isPlainObject')\r\n\r\nfunction stringifyParams (resultVal, resultKey, isArr) {\r\n  var _arr\r\n  var result = []\r\n  each(resultVal, function (item, key) {\r\n    _arr = isArray(item)\r\n    if (isPlainObject(item) || _arr) {\r\n      result = result.concat(stringifyParams(item, resultKey + '[' + key + ']', _arr))\r\n    } else {\r\n      result.push(staticEncodeURIComponent(resultKey + '[' + (isArr ? '' : key) + ']') + '=' + staticEncodeURIComponent(isNull(item) ? '' : item))\r\n    }\r\n  })\r\n  return result\r\n}\r\n\r\n/**\r\n * 序列化查询参数\r\n *\r\n * @param {Object} query 查询参数\r\n */\r\nfunction serialize (query) {\r\n  var _arr\r\n  var params = []\r\n  each(query, function (item, key) {\r\n    if (!isUndefined(item)) {\r\n      _arr = isArray(item)\r\n      if (isPlainObject(item) || _arr) {\r\n        params = params.concat(stringifyParams(item, key, _arr))\r\n      } else {\r\n        params.push(staticEncodeURIComponent(key) + '=' + staticEncodeURIComponent(isNull(item) ? '' : item))\r\n      }\r\n    }\r\n  })\r\n  return params.join('&').replace(/%20/g, '+')\r\n}\r\n\r\nmodule.exports = serialize\r\n"]},"metadata":{},"sourceType":"script"}