{"ast":null,"code":"var objectToString = require('./staticObjectToString');\n\nvar objectEach = require('./objectEach');\n\nvar arrayEach = require('./arrayEach');\n\nfunction getCativeCtor(val, args) {\n  var Ctor = val.__proto__.constructor;\n  return args ? new Ctor(args) : new Ctor();\n}\n\nfunction handleValueClone(item, isDeep) {\n  return isDeep ? copyValue(item, isDeep) : item;\n}\n\nfunction copyValue(val, isDeep) {\n  if (val) {\n    switch (objectToString.call(val)) {\n      case \"[object Object]\":\n        {\n          var restObj = Object.create(val.__proto__);\n          objectEach(val, function (item, key) {\n            restObj[key] = handleValueClone(item, isDeep);\n          });\n          return restObj;\n        }\n\n      case \"[object Date]\":\n      case \"[object RegExp]\":\n        {\n          return getCativeCtor(val, val.valueOf());\n        }\n\n      case \"[object Array]\":\n      case \"[object Arguments]\":\n        {\n          var restArr = [];\n          arrayEach(val, function (item) {\n            restArr.push(handleValueClone(item, isDeep));\n          });\n          return restArr;\n        }\n\n      case \"[object Set]\":\n        {\n          var restSet = getCativeCtor(val);\n          restSet.forEach(function (item) {\n            restSet.add(handleValueClone(item, isDeep));\n          });\n          return restSet;\n        }\n\n      case \"[object Map]\":\n        {\n          var restMap = getCativeCtor(val);\n          restMap.forEach(function (item, key) {\n            restMap.set(handleValueClone(item, isDeep));\n          });\n          return restMap;\n        }\n    }\n  }\n\n  return val;\n}\n/**\r\n  * 浅拷贝/深拷贝\r\n  *\r\n  * @param {Object} obj 对象/数组\r\n  * @param {Boolean} deep 是否深拷贝\r\n  * @return {Object}\r\n  */\n\n\nfunction clone(obj, deep) {\n  if (obj) {\n    return copyValue(obj, deep);\n  }\n\n  return obj;\n}\n\nmodule.exports = clone;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/xe-utils/clone.js"],"names":["objectToString","require","objectEach","arrayEach","getCativeCtor","val","args","Ctor","__proto__","constructor","handleValueClone","item","isDeep","copyValue","call","restObj","Object","create","key","valueOf","restArr","push","restSet","forEach","add","restMap","set","clone","obj","deep","module","exports"],"mappings":"AAAA,IAAIA,cAAc,GAAGC,OAAO,CAAC,wBAAD,CAA5B;;AAEA,IAAIC,UAAU,GAAGD,OAAO,CAAC,cAAD,CAAxB;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,aAAD,CAAvB;;AAEA,SAASG,aAAT,CAAwBC,GAAxB,EAA6BC,IAA7B,EAAmC;AACjC,MAAIC,IAAI,GAAGF,GAAG,CAACG,SAAJ,CAAcC,WAAzB;AACA,SAAOH,IAAI,GAAG,IAAIC,IAAJ,CAASD,IAAT,CAAH,GAAoB,IAAIC,IAAJ,EAA/B;AACD;;AAED,SAASG,gBAAT,CAA2BC,IAA3B,EAAiCC,MAAjC,EAAyC;AACvC,SAAOA,MAAM,GAAGC,SAAS,CAACF,IAAD,EAAOC,MAAP,CAAZ,GAA6BD,IAA1C;AACD;;AAED,SAASE,SAAT,CAAoBR,GAApB,EAAyBO,MAAzB,EAAiC;AAC/B,MAAIP,GAAJ,EAAS;AACP,YAAOL,cAAc,CAACc,IAAf,CAAoBT,GAApB,CAAP;AACE,WAAK,iBAAL;AAAwB;AACtB,cAAIU,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAcZ,GAAG,CAACG,SAAlB,CAAd;AACAN,UAAAA,UAAU,CAACG,GAAD,EAAM,UAAUM,IAAV,EAAgBO,GAAhB,EAAqB;AACnCH,YAAAA,OAAO,CAACG,GAAD,CAAP,GAAeR,gBAAgB,CAACC,IAAD,EAAOC,MAAP,CAA/B;AACD,WAFS,CAAV;AAGA,iBAAOG,OAAP;AACD;;AACD,WAAK,eAAL;AACA,WAAK,iBAAL;AAAwB;AACtB,iBAAOX,aAAa,CAACC,GAAD,EAAMA,GAAG,CAACc,OAAJ,EAAN,CAApB;AACD;;AACD,WAAK,gBAAL;AACA,WAAK,oBAAL;AAA4B;AAC1B,cAAIC,OAAO,GAAG,EAAd;AACAjB,UAAAA,SAAS,CAACE,GAAD,EAAM,UAAUM,IAAV,EAAgB;AAC7BS,YAAAA,OAAO,CAACC,IAAR,CAAaX,gBAAgB,CAACC,IAAD,EAAOC,MAAP,CAA7B;AACD,WAFQ,CAAT;AAGA,iBAAOQ,OAAP;AACD;;AACD,WAAK,cAAL;AAAqB;AACnB,cAAIE,OAAO,GAAGlB,aAAa,CAACC,GAAD,CAA3B;AACAiB,UAAAA,OAAO,CAACC,OAAR,CAAgB,UAAUZ,IAAV,EAAgB;AAC9BW,YAAAA,OAAO,CAACE,GAAR,CAAYd,gBAAgB,CAACC,IAAD,EAAOC,MAAP,CAA5B;AACD,WAFD;AAGA,iBAAOU,OAAP;AACD;;AACD,WAAK,cAAL;AAAqB;AACnB,cAAIG,OAAO,GAAGrB,aAAa,CAACC,GAAD,CAA3B;AACAoB,UAAAA,OAAO,CAACF,OAAR,CAAgB,UAAUZ,IAAV,EAAgBO,GAAhB,EAAqB;AACnCO,YAAAA,OAAO,CAACC,GAAR,CAAYhB,gBAAgB,CAACC,IAAD,EAAOC,MAAP,CAA5B;AACD,WAFD;AAGA,iBAAOa,OAAP;AACD;AAjCH;AAmCD;;AACD,SAAOpB,GAAP;AACD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,SAASsB,KAAT,CAAgBC,GAAhB,EAAqBC,IAArB,EAA2B;AACzB,MAAID,GAAJ,EAAS;AACP,WAAOf,SAAS,CAACe,GAAD,EAAMC,IAAN,CAAhB;AACD;;AACD,SAAOD,GAAP;AACD;;AAEDE,MAAM,CAACC,OAAP,GAAiBJ,KAAjB","sourcesContent":["var objectToString = require('./staticObjectToString')\r\n\r\nvar objectEach = require('./objectEach')\r\nvar arrayEach = require('./arrayEach')\r\n\r\nfunction getCativeCtor (val, args) {\r\n  var Ctor = val.__proto__.constructor\r\n  return args ? new Ctor(args) : new Ctor()\r\n}\r\n\r\nfunction handleValueClone (item, isDeep) {\r\n  return isDeep ? copyValue(item, isDeep) : item\r\n}\r\n\r\nfunction copyValue (val, isDeep) {\r\n  if (val) {\r\n    switch(objectToString.call(val)) {\r\n      case \"[object Object]\": {\r\n        var restObj = Object.create(val.__proto__)\r\n        objectEach(val, function (item, key) {\r\n          restObj[key] = handleValueClone(item, isDeep)\r\n        })\r\n        return restObj\r\n      }\r\n      case \"[object Date]\":\r\n      case \"[object RegExp]\": {\r\n        return getCativeCtor(val, val.valueOf())\r\n      }\r\n      case \"[object Array]\":\r\n      case \"[object Arguments]\":  {\r\n        var restArr = []\r\n        arrayEach(val, function (item) {\r\n          restArr.push(handleValueClone(item, isDeep))\r\n        })\r\n        return restArr\r\n      }\r\n      case \"[object Set]\": {\r\n        var restSet = getCativeCtor(val)\r\n        restSet.forEach(function (item) {\r\n          restSet.add(handleValueClone(item, isDeep))\r\n        })\r\n        return restSet\r\n      }\r\n      case \"[object Map]\": {\r\n        var restMap = getCativeCtor(val)\r\n        restMap.forEach(function (item, key) {\r\n          restMap.set(handleValueClone(item, isDeep))\r\n        })\r\n        return restMap\r\n      }\r\n    }\r\n  }\r\n  return val\r\n}\r\n\r\n/**\r\n  * 浅拷贝/深拷贝\r\n  *\r\n  * @param {Object} obj 对象/数组\r\n  * @param {Boolean} deep 是否深拷贝\r\n  * @return {Object}\r\n  */\r\nfunction clone (obj, deep) {\r\n  if (obj) {\r\n    return copyValue(obj, deep)\r\n  }\r\n  return obj\r\n}\r\n\r\nmodule.exports = clone\r\n"]},"metadata":{},"sourceType":"script"}