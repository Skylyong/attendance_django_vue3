{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, computed, watch, ref } from 'vue';\nimport PropTypes from '../_util/vue-types';\nimport classNames from '../_util/classNames';\nimport warning from '../_util/warning';\nimport FormItem from './FormItem';\nimport { getNamePath, containsNamePath } from './utils/valueUtil';\nimport { defaultValidateMessages } from './utils/messages';\nimport { allPromiseFinish } from './utils/asyncUtil';\nimport { toArray } from './utils/typeUtil';\nimport isEqual from 'lodash-es/isEqual';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport initDefaultProps from '../_util/props-util/initDefaultProps';\nimport { tuple } from '../_util/type';\nimport { useInjectSize } from '../_util/hooks/useSize';\nimport useConfigInject from '../_util/hooks/useConfigInject';\nimport { useProvideForm } from './context';\nimport useForm from './useForm';\nexport var formProps = {\n  layout: PropTypes.oneOf(tuple('horizontal', 'inline', 'vertical')),\n  labelCol: {\n    type: Object\n  },\n  wrapperCol: {\n    type: Object\n  },\n  colon: PropTypes.looseBool,\n  labelAlign: PropTypes.oneOf(tuple('left', 'right')),\n  prefixCls: PropTypes.string,\n  requiredMark: {\n    type: [String, Boolean],\n    default: undefined\n  },\n\n  /** @deprecated Will warning in future branch. Pls use `requiredMark` instead. */\n  hideRequiredMark: PropTypes.looseBool,\n  model: PropTypes.object,\n  rules: {\n    type: Object\n  },\n  validateMessages: PropTypes.object,\n  validateOnRuleChange: PropTypes.looseBool,\n  // 提交失败自动滚动到第一个错误字段\n  scrollToFirstError: {\n    type: [Boolean, Object]\n  },\n  onSubmit: PropTypes.func,\n  onFinish: PropTypes.func,\n  onFinishFailed: PropTypes.func,\n  name: PropTypes.string,\n  validateTrigger: {\n    type: [String, Array]\n  },\n  size: {\n    type: String\n  }\n};\n\nfunction isEqualName(name1, name2) {\n  return isEqual(toArray(name1), toArray(name2));\n}\n\nvar Form = defineComponent({\n  name: 'AForm',\n  inheritAttrs: false,\n  props: initDefaultProps(formProps, {\n    layout: 'horizontal',\n    hideRequiredMark: false,\n    colon: true\n  }),\n  Item: FormItem,\n  useForm: useForm,\n  emits: ['finishFailed', 'submit', 'finish'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots,\n        expose = _ref.expose,\n        attrs = _ref.attrs;\n    var size = useInjectSize(props);\n\n    var _useConfigInject = useConfigInject('form', props),\n        prefixCls = _useConfigInject.prefixCls,\n        direction = _useConfigInject.direction,\n        contextForm = _useConfigInject.form;\n\n    var requiredMark = computed(function () {\n      return props.requiredMark === '' || props.requiredMark;\n    });\n    var mergedRequiredMark = computed(function () {\n      var _a;\n\n      if (requiredMark.value !== undefined) {\n        return requiredMark.value;\n      }\n\n      if (contextForm && ((_a = contextForm.value) === null || _a === void 0 ? void 0 : _a.requiredMark) !== undefined) {\n        return contextForm.value.requiredMark;\n      }\n\n      if (props.hideRequiredMark) {\n        return false;\n      }\n\n      return true;\n    });\n    var formClassName = computed(function () {\n      var _classNames;\n\n      return classNames(prefixCls.value, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-\").concat(props.layout), true), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-hide-required-mark\"), mergedRequiredMark.value === false), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-rtl\"), direction.value === 'rtl'), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-\").concat(size.value), size.value), _classNames));\n    });\n    var lastValidatePromise = ref();\n    var fields = {};\n\n    var addField = function addField(eventKey, field) {\n      fields[eventKey] = field;\n    };\n\n    var removeField = function removeField(eventKey) {\n      delete fields[eventKey];\n    };\n\n    var getFieldsByNameList = function getFieldsByNameList(nameList) {\n      var provideNameList = !!nameList;\n      var namePathList = provideNameList ? toArray(nameList).map(getNamePath) : [];\n\n      if (!provideNameList) {\n        return Object.values(fields);\n      } else {\n        return Object.values(fields).filter(function (field) {\n          return namePathList.findIndex(function (namePath) {\n            return isEqualName(namePath, field.fieldName.value);\n          }) > -1;\n        });\n      }\n    };\n\n    var resetFields = function resetFields(name) {\n      if (!props.model) {\n        warning(false, 'Form', 'model is required for resetFields to work.');\n        return;\n      }\n\n      getFieldsByNameList(name).forEach(function (field) {\n        field.resetField();\n      });\n    };\n\n    var clearValidate = function clearValidate(name) {\n      getFieldsByNameList(name).forEach(function (field) {\n        field.clearValidate();\n      });\n    };\n\n    var handleFinishFailed = function handleFinishFailed(errorInfo) {\n      var scrollToFirstError = props.scrollToFirstError;\n      emit('finishFailed', errorInfo);\n\n      if (scrollToFirstError && errorInfo.errorFields.length) {\n        var scrollToFieldOptions = {};\n\n        if (_typeof(scrollToFirstError) === 'object') {\n          scrollToFieldOptions = scrollToFirstError;\n        }\n\n        scrollToField(errorInfo.errorFields[0].name, scrollToFieldOptions);\n      }\n    };\n\n    var validate = function validate() {\n      return validateField.apply(void 0, arguments);\n    };\n\n    var scrollToField = function scrollToField(name) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var fields = getFieldsByNameList(name);\n\n      if (fields.length) {\n        var fieldId = fields[0].fieldId.value;\n        var node = fieldId ? document.getElementById(fieldId) : null;\n\n        if (node) {\n          scrollIntoView(node, _extends({\n            scrollMode: 'if-needed',\n            block: 'nearest'\n          }, options));\n        }\n      }\n    }; // eslint-disable-next-line no-unused-vars\n\n\n    var getFieldsValue = function getFieldsValue() {\n      var nameList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var values = {};\n      Object.values(fields).forEach(function (_ref2) {\n        var fieldName = _ref2.fieldName,\n            fieldValue = _ref2.fieldValue;\n        values[fieldName.value] = fieldValue.value;\n      });\n\n      if (nameList === true) {\n        return values;\n      } else {\n        var res = {};\n        toArray(nameList).forEach(function (namePath) {\n          return res[namePath] = values[namePath];\n        });\n        return res;\n      }\n    };\n\n    var validateFields = function validateFields(nameList, options) {\n      warning(!(nameList instanceof Function), 'Form', 'validateFields/validateField/validate not support callback, please use promise instead');\n\n      if (!props.model) {\n        warning(false, 'Form', 'model is required for validateFields to work.');\n        return Promise.reject('Form `model` is required for validateFields to work.');\n      }\n\n      var provideNameList = !!nameList;\n      var namePathList = provideNameList ? toArray(nameList).map(getNamePath) : []; // Collect result in promise list\n\n      var promiseList = [];\n      Object.values(fields).forEach(function (field) {\n        var _a; // Add field if not provide `nameList`\n\n\n        if (!provideNameList) {\n          namePathList.push(field.namePath.value);\n        } // Skip if without rule\n\n\n        if (!((_a = field.rules) === null || _a === void 0 ? void 0 : _a.value.length)) {\n          return;\n        }\n\n        var fieldNamePath = field.namePath.value; // Add field validate rule in to promise list\n\n        if (!provideNameList || containsNamePath(namePathList, fieldNamePath)) {\n          var promise = field.validateRules(_extends({\n            validateMessages: _extends(_extends({}, defaultValidateMessages), props.validateMessages)\n          }, options)); // Wrap promise with field\n\n          promiseList.push(promise.then(function () {\n            return {\n              name: fieldNamePath,\n              errors: [],\n              warnings: []\n            };\n          }).catch(function (ruleErrors) {\n            var mergedErrors = [];\n            var mergedWarnings = [];\n            ruleErrors.forEach(function (_ref3) {\n              var warningOnly = _ref3.rule.warningOnly,\n                  errors = _ref3.errors;\n\n              if (warningOnly) {\n                mergedWarnings.push.apply(mergedWarnings, _toConsumableArray(errors));\n              } else {\n                mergedErrors.push.apply(mergedErrors, _toConsumableArray(errors));\n              }\n            });\n\n            if (mergedErrors.length) {\n              return Promise.reject({\n                name: fieldNamePath,\n                errors: mergedErrors,\n                warnings: mergedWarnings\n              });\n            }\n\n            return {\n              name: fieldNamePath,\n              errors: mergedErrors,\n              warnings: mergedWarnings\n            };\n          }));\n        }\n      });\n      var summaryPromise = allPromiseFinish(promiseList);\n      lastValidatePromise.value = summaryPromise;\n      var returnPromise = summaryPromise.then(function () {\n        if (lastValidatePromise.value === summaryPromise) {\n          return Promise.resolve(getFieldsValue(namePathList));\n        }\n\n        return Promise.reject([]);\n      }).catch(function (results) {\n        var errorList = results.filter(function (result) {\n          return result && result.errors.length;\n        });\n        return Promise.reject({\n          values: getFieldsValue(namePathList),\n          errorFields: errorList,\n          outOfDate: lastValidatePromise.value !== summaryPromise\n        });\n      }); // Do not throw in console\n\n      returnPromise.catch(function (e) {\n        return e;\n      });\n      return returnPromise;\n    };\n\n    var validateField = function validateField() {\n      return validateFields.apply(void 0, arguments);\n    };\n\n    var handleSubmit = function handleSubmit(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      emit('submit', e);\n\n      if (props.model) {\n        var res = validateFields();\n        res.then(function (values) {\n          emit('finish', values);\n        }).catch(function (errors) {\n          handleFinishFailed(errors);\n        });\n      }\n    };\n\n    expose({\n      resetFields: resetFields,\n      clearValidate: clearValidate,\n      validateFields: validateFields,\n      getFieldsValue: getFieldsValue,\n      validate: validate,\n      scrollToField: scrollToField\n    });\n    useProvideForm({\n      model: computed(function () {\n        return props.model;\n      }),\n      name: computed(function () {\n        return props.name;\n      }),\n      labelAlign: computed(function () {\n        return props.labelAlign;\n      }),\n      labelCol: computed(function () {\n        return props.labelCol;\n      }),\n      wrapperCol: computed(function () {\n        return props.wrapperCol;\n      }),\n      vertical: computed(function () {\n        return props.layout === 'vertical';\n      }),\n      colon: computed(function () {\n        return props.colon;\n      }),\n      requiredMark: mergedRequiredMark,\n      validateTrigger: computed(function () {\n        return props.validateTrigger;\n      }),\n      rules: computed(function () {\n        return props.rules;\n      }),\n      addField: addField,\n      removeField: removeField\n    });\n    watch(function () {\n      return props.rules;\n    }, function () {\n      if (props.validateOnRuleChange) {\n        validateFields();\n      }\n    });\n    return function () {\n      var _a;\n\n      return _createVNode(\"form\", _objectSpread(_objectSpread({}, attrs), {}, {\n        \"onSubmit\": handleSubmit,\n        \"class\": [formClassName.value, attrs.class]\n      }), [(_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport default Form;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/ant-design-vue/es/form/Form.js"],"names":["_objectSpread","_toConsumableArray","_extends","_typeof","_defineProperty","createVNode","_createVNode","defineComponent","computed","watch","ref","PropTypes","classNames","warning","FormItem","getNamePath","containsNamePath","defaultValidateMessages","allPromiseFinish","toArray","isEqual","scrollIntoView","initDefaultProps","tuple","useInjectSize","useConfigInject","useProvideForm","useForm","formProps","layout","oneOf","labelCol","type","Object","wrapperCol","colon","looseBool","labelAlign","prefixCls","string","requiredMark","String","Boolean","default","undefined","hideRequiredMark","model","object","rules","validateMessages","validateOnRuleChange","scrollToFirstError","onSubmit","func","onFinish","onFinishFailed","name","validateTrigger","Array","size","isEqualName","name1","name2","Form","inheritAttrs","props","Item","emits","setup","_ref","emit","slots","expose","attrs","_useConfigInject","direction","contextForm","form","mergedRequiredMark","_a","value","formClassName","_classNames","concat","lastValidatePromise","fields","addField","eventKey","field","removeField","getFieldsByNameList","nameList","provideNameList","namePathList","map","values","filter","findIndex","namePath","fieldName","resetFields","forEach","resetField","clearValidate","handleFinishFailed","errorInfo","errorFields","length","scrollToFieldOptions","scrollToField","validate","validateField","apply","arguments","options","fieldId","node","document","getElementById","scrollMode","block","getFieldsValue","_ref2","fieldValue","res","validateFields","Function","Promise","reject","promiseList","push","fieldNamePath","promise","validateRules","then","errors","warnings","catch","ruleErrors","mergedErrors","mergedWarnings","_ref3","warningOnly","rule","summaryPromise","returnPromise","resolve","results","errorList","result","outOfDate","e","handleSubmit","preventDefault","stopPropagation","vertical","class","call"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, computed, watch, ref } from 'vue';\nimport PropTypes from '../_util/vue-types';\nimport classNames from '../_util/classNames';\nimport warning from '../_util/warning';\nimport FormItem from './FormItem';\nimport { getNamePath, containsNamePath } from './utils/valueUtil';\nimport { defaultValidateMessages } from './utils/messages';\nimport { allPromiseFinish } from './utils/asyncUtil';\nimport { toArray } from './utils/typeUtil';\nimport isEqual from 'lodash-es/isEqual';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport initDefaultProps from '../_util/props-util/initDefaultProps';\nimport { tuple } from '../_util/type';\nimport { useInjectSize } from '../_util/hooks/useSize';\nimport useConfigInject from '../_util/hooks/useConfigInject';\nimport { useProvideForm } from './context';\nimport useForm from './useForm';\nexport var formProps = {\n  layout: PropTypes.oneOf(tuple('horizontal', 'inline', 'vertical')),\n  labelCol: {\n    type: Object\n  },\n  wrapperCol: {\n    type: Object\n  },\n  colon: PropTypes.looseBool,\n  labelAlign: PropTypes.oneOf(tuple('left', 'right')),\n  prefixCls: PropTypes.string,\n  requiredMark: {\n    type: [String, Boolean],\n    default: undefined\n  },\n\n  /** @deprecated Will warning in future branch. Pls use `requiredMark` instead. */\n  hideRequiredMark: PropTypes.looseBool,\n  model: PropTypes.object,\n  rules: {\n    type: Object\n  },\n  validateMessages: PropTypes.object,\n  validateOnRuleChange: PropTypes.looseBool,\n  // 提交失败自动滚动到第一个错误字段\n  scrollToFirstError: {\n    type: [Boolean, Object]\n  },\n  onSubmit: PropTypes.func,\n  onFinish: PropTypes.func,\n  onFinishFailed: PropTypes.func,\n  name: PropTypes.string,\n  validateTrigger: {\n    type: [String, Array]\n  },\n  size: {\n    type: String\n  }\n};\n\nfunction isEqualName(name1, name2) {\n  return isEqual(toArray(name1), toArray(name2));\n}\n\nvar Form = defineComponent({\n  name: 'AForm',\n  inheritAttrs: false,\n  props: initDefaultProps(formProps, {\n    layout: 'horizontal',\n    hideRequiredMark: false,\n    colon: true\n  }),\n  Item: FormItem,\n  useForm: useForm,\n  emits: ['finishFailed', 'submit', 'finish'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots,\n        expose = _ref.expose,\n        attrs = _ref.attrs;\n    var size = useInjectSize(props);\n\n    var _useConfigInject = useConfigInject('form', props),\n        prefixCls = _useConfigInject.prefixCls,\n        direction = _useConfigInject.direction,\n        contextForm = _useConfigInject.form;\n\n    var requiredMark = computed(function () {\n      return props.requiredMark === '' || props.requiredMark;\n    });\n    var mergedRequiredMark = computed(function () {\n      var _a;\n\n      if (requiredMark.value !== undefined) {\n        return requiredMark.value;\n      }\n\n      if (contextForm && ((_a = contextForm.value) === null || _a === void 0 ? void 0 : _a.requiredMark) !== undefined) {\n        return contextForm.value.requiredMark;\n      }\n\n      if (props.hideRequiredMark) {\n        return false;\n      }\n\n      return true;\n    });\n    var formClassName = computed(function () {\n      var _classNames;\n\n      return classNames(prefixCls.value, (_classNames = {}, _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-\").concat(props.layout), true), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-hide-required-mark\"), mergedRequiredMark.value === false), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-rtl\"), direction.value === 'rtl'), _defineProperty(_classNames, \"\".concat(prefixCls.value, \"-\").concat(size.value), size.value), _classNames));\n    });\n    var lastValidatePromise = ref();\n    var fields = {};\n\n    var addField = function addField(eventKey, field) {\n      fields[eventKey] = field;\n    };\n\n    var removeField = function removeField(eventKey) {\n      delete fields[eventKey];\n    };\n\n    var getFieldsByNameList = function getFieldsByNameList(nameList) {\n      var provideNameList = !!nameList;\n      var namePathList = provideNameList ? toArray(nameList).map(getNamePath) : [];\n\n      if (!provideNameList) {\n        return Object.values(fields);\n      } else {\n        return Object.values(fields).filter(function (field) {\n          return namePathList.findIndex(function (namePath) {\n            return isEqualName(namePath, field.fieldName.value);\n          }) > -1;\n        });\n      }\n    };\n\n    var resetFields = function resetFields(name) {\n      if (!props.model) {\n        warning(false, 'Form', 'model is required for resetFields to work.');\n        return;\n      }\n\n      getFieldsByNameList(name).forEach(function (field) {\n        field.resetField();\n      });\n    };\n\n    var clearValidate = function clearValidate(name) {\n      getFieldsByNameList(name).forEach(function (field) {\n        field.clearValidate();\n      });\n    };\n\n    var handleFinishFailed = function handleFinishFailed(errorInfo) {\n      var scrollToFirstError = props.scrollToFirstError;\n      emit('finishFailed', errorInfo);\n\n      if (scrollToFirstError && errorInfo.errorFields.length) {\n        var scrollToFieldOptions = {};\n\n        if (_typeof(scrollToFirstError) === 'object') {\n          scrollToFieldOptions = scrollToFirstError;\n        }\n\n        scrollToField(errorInfo.errorFields[0].name, scrollToFieldOptions);\n      }\n    };\n\n    var validate = function validate() {\n      return validateField.apply(void 0, arguments);\n    };\n\n    var scrollToField = function scrollToField(name) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var fields = getFieldsByNameList(name);\n\n      if (fields.length) {\n        var fieldId = fields[0].fieldId.value;\n        var node = fieldId ? document.getElementById(fieldId) : null;\n\n        if (node) {\n          scrollIntoView(node, _extends({\n            scrollMode: 'if-needed',\n            block: 'nearest'\n          }, options));\n        }\n      }\n    }; // eslint-disable-next-line no-unused-vars\n\n\n    var getFieldsValue = function getFieldsValue() {\n      var nameList = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n      var values = {};\n      Object.values(fields).forEach(function (_ref2) {\n        var fieldName = _ref2.fieldName,\n            fieldValue = _ref2.fieldValue;\n        values[fieldName.value] = fieldValue.value;\n      });\n\n      if (nameList === true) {\n        return values;\n      } else {\n        var res = {};\n        toArray(nameList).forEach(function (namePath) {\n          return res[namePath] = values[namePath];\n        });\n        return res;\n      }\n    };\n\n    var validateFields = function validateFields(nameList, options) {\n      warning(!(nameList instanceof Function), 'Form', 'validateFields/validateField/validate not support callback, please use promise instead');\n\n      if (!props.model) {\n        warning(false, 'Form', 'model is required for validateFields to work.');\n        return Promise.reject('Form `model` is required for validateFields to work.');\n      }\n\n      var provideNameList = !!nameList;\n      var namePathList = provideNameList ? toArray(nameList).map(getNamePath) : []; // Collect result in promise list\n\n      var promiseList = [];\n      Object.values(fields).forEach(function (field) {\n        var _a; // Add field if not provide `nameList`\n\n\n        if (!provideNameList) {\n          namePathList.push(field.namePath.value);\n        } // Skip if without rule\n\n\n        if (!((_a = field.rules) === null || _a === void 0 ? void 0 : _a.value.length)) {\n          return;\n        }\n\n        var fieldNamePath = field.namePath.value; // Add field validate rule in to promise list\n\n        if (!provideNameList || containsNamePath(namePathList, fieldNamePath)) {\n          var promise = field.validateRules(_extends({\n            validateMessages: _extends(_extends({}, defaultValidateMessages), props.validateMessages)\n          }, options)); // Wrap promise with field\n\n          promiseList.push(promise.then(function () {\n            return {\n              name: fieldNamePath,\n              errors: [],\n              warnings: []\n            };\n          }).catch(function (ruleErrors) {\n            var mergedErrors = [];\n            var mergedWarnings = [];\n            ruleErrors.forEach(function (_ref3) {\n              var warningOnly = _ref3.rule.warningOnly,\n                  errors = _ref3.errors;\n\n              if (warningOnly) {\n                mergedWarnings.push.apply(mergedWarnings, _toConsumableArray(errors));\n              } else {\n                mergedErrors.push.apply(mergedErrors, _toConsumableArray(errors));\n              }\n            });\n\n            if (mergedErrors.length) {\n              return Promise.reject({\n                name: fieldNamePath,\n                errors: mergedErrors,\n                warnings: mergedWarnings\n              });\n            }\n\n            return {\n              name: fieldNamePath,\n              errors: mergedErrors,\n              warnings: mergedWarnings\n            };\n          }));\n        }\n      });\n      var summaryPromise = allPromiseFinish(promiseList);\n      lastValidatePromise.value = summaryPromise;\n      var returnPromise = summaryPromise.then(function () {\n        if (lastValidatePromise.value === summaryPromise) {\n          return Promise.resolve(getFieldsValue(namePathList));\n        }\n\n        return Promise.reject([]);\n      }).catch(function (results) {\n        var errorList = results.filter(function (result) {\n          return result && result.errors.length;\n        });\n        return Promise.reject({\n          values: getFieldsValue(namePathList),\n          errorFields: errorList,\n          outOfDate: lastValidatePromise.value !== summaryPromise\n        });\n      }); // Do not throw in console\n\n      returnPromise.catch(function (e) {\n        return e;\n      });\n      return returnPromise;\n    };\n\n    var validateField = function validateField() {\n      return validateFields.apply(void 0, arguments);\n    };\n\n    var handleSubmit = function handleSubmit(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      emit('submit', e);\n\n      if (props.model) {\n        var res = validateFields();\n        res.then(function (values) {\n          emit('finish', values);\n        }).catch(function (errors) {\n          handleFinishFailed(errors);\n        });\n      }\n    };\n\n    expose({\n      resetFields: resetFields,\n      clearValidate: clearValidate,\n      validateFields: validateFields,\n      getFieldsValue: getFieldsValue,\n      validate: validate,\n      scrollToField: scrollToField\n    });\n    useProvideForm({\n      model: computed(function () {\n        return props.model;\n      }),\n      name: computed(function () {\n        return props.name;\n      }),\n      labelAlign: computed(function () {\n        return props.labelAlign;\n      }),\n      labelCol: computed(function () {\n        return props.labelCol;\n      }),\n      wrapperCol: computed(function () {\n        return props.wrapperCol;\n      }),\n      vertical: computed(function () {\n        return props.layout === 'vertical';\n      }),\n      colon: computed(function () {\n        return props.colon;\n      }),\n      requiredMark: mergedRequiredMark,\n      validateTrigger: computed(function () {\n        return props.validateTrigger;\n      }),\n      rules: computed(function () {\n        return props.rules;\n      }),\n      addField: addField,\n      removeField: removeField\n    });\n    watch(function () {\n      return props.rules;\n    }, function () {\n      if (props.validateOnRuleChange) {\n        validateFields();\n      }\n    });\n    return function () {\n      var _a;\n\n      return _createVNode(\"form\", _objectSpread(_objectSpread({}, attrs), {}, {\n        \"onSubmit\": handleSubmit,\n        \"class\": [formClassName.value, attrs.class]\n      }), [(_a = slots.default) === null || _a === void 0 ? void 0 : _a.call(slots)]);\n    };\n  }\n});\nexport default Form;"]},"metadata":{},"sourceType":"module"}