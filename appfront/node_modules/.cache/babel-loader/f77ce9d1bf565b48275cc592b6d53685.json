{"ast":null,"code":"import { defineComponent, reactive, computed, ref } from \"vue\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons-vue\"; // import router from '@/router';\n\nimport { useRouter } from \"vue-router\";\nimport { postSubmit } from \"../api/api.js\";\nimport { useStore } from \"vuex\";\nimport { message } from \"ant-design-vue\";\nexport default defineComponent({\n  components: {\n    UserOutlined,\n    LockOutlined\n  },\n\n  setup() {\n    const store = useStore();\n    localStorage.setItem(\"Flag\", \"noLogin\");\n    let router = useRouter();\n    const formState = reactive({\n      username: \"\",\n      password: \"\",\n      remember: true\n    });\n    var that = this;\n\n    const onFinish = values => {\n      postSubmit(values.username, values.password).then( // console.log(response),\n      response => {\n        // this.message = ''\n        console.log(response);\n\n        if (response[\"code\"] == 1) {\n          localStorage.setItem(\"Userid\", response[\"data\"][\"userId\"]);\n          localStorage.setItem(\"Flag\", \"isLogin\");\n          localStorage.setItem(\"userType\", response[\"data\"][\"accountType\"]);\n          store.dispatch(\"setUser\", true);\n\n          if (response[\"data\"][\"accountType\"] == 2) {\n            router.push({\n              path: \"/manager/managerApprove\"\n            });\n          } else {\n            router.push({\n              path: \"/worker/account\"\n            });\n          }\n        } else if (response[\"code\"] == 2004) {\n          message.error(\"找不到该用户！\");\n        } else {\n          message.error(\"密码错误!\");\n        }\n      }, response => {\n        message.error(\"服务器访问错误!\");\n      });\n    };\n\n    const onFinishFailed = errorInfo => {\n      console.log(\"Failed:\", errorInfo);\n    };\n\n    const disabled = computed(() => {\n      return !(formState.username && formState.password);\n    });\n    return {\n      formState,\n      onFinish,\n      onFinishFailed,\n      disabled,\n      message\n    };\n  }\n\n});","map":{"version":3,"mappings":"AA4DA,SAASA,eAAT,EAA0BC,QAA1B,EAAoCC,QAApC,EAA8CC,GAA9C,QAAyD,KAAzD;AACA,SAASC,YAAT,EAAuBC,YAAvB,QAA2C,uBAA3C,C,CACA;;AACA,SAASC,SAAT,QAA0B,YAA1B;AACA,SAASC,UAAT,QAA2B,eAA3B;AACA,SAASC,QAAT,QAAyB,MAAzB;AACA,SAASC,OAAT,QAAwB,gBAAxB;AAEA,eAAeT,eAAe,CAAC;AAC7BU,YAAU,EAAE;AACVN,gBADU;AAEVC;AAFU,GADiB;;AAM7BM,OAAK,GAAG;AACN,UAAMC,KAAI,GAAIJ,QAAQ,EAAtB;AACAK,gBAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,SAA7B;AACA,QAAIC,MAAK,GAAIT,SAAS,EAAtB;AACA,UAAMU,SAAQ,GAAIf,QAAQ,CAAC;AACzBgB,cAAQ,EAAE,EADe;AAEzBC,cAAQ,EAAE,EAFe;AAGzBC,cAAQ,EAAE;AAHe,KAAD,CAA1B;AAKA,QAAIC,IAAG,GAAI,IAAX;;AACA,UAAMC,QAAO,GAAKC,MAAD,IAAY;AAC3Bf,gBAAU,CAACe,MAAM,CAACL,QAAR,EAAkBK,MAAM,CAACJ,QAAzB,CAAV,CAA6CK,IAA7C,EACE;AACCC,cAAD,IAAc;AACZ;AACAC,eAAO,CAACC,GAAR,CAAYF,QAAZ;;AACA,YAAIA,QAAQ,CAAC,MAAD,CAAR,IAAoB,CAAxB,EAA2B;AACzBX,sBAAY,CAACC,OAAb,CAAqB,QAArB,EAA+BU,QAAQ,CAAC,MAAD,CAAR,CAAiB,QAAjB,CAA/B;AACAX,sBAAY,CAACC,OAAb,CAAqB,MAArB,EAA6B,SAA7B;AACAD,sBAAY,CAACC,OAAb,CAAqB,UAArB,EAAiCU,QAAQ,CAAC,MAAD,CAAR,CAAiB,aAAjB,CAAjC;AACAZ,eAAK,CAACe,QAAN,CAAe,SAAf,EAA0B,IAA1B;;AAEA,cAAIH,QAAQ,CAAC,MAAD,CAAR,CAAiB,aAAjB,KAAmC,CAAvC,EAA0C;AACxCT,kBAAM,CAACa,IAAP,CAAY;AAAEC,kBAAI,EAAE;AAAR,aAAZ;AACF,WAFA,MAEO;AACLd,kBAAM,CAACa,IAAP,CAAY;AAAEC,kBAAI,EAAE;AAAR,aAAZ;AACF;AACF,SAXA,MAWO,IAAIL,QAAQ,CAAC,MAAD,CAAR,IAAoB,IAAxB,EAA8B;AACnCf,iBAAO,CAACqB,KAAR,CAAc,SAAd;AACF,SAFO,MAEA;AACLrB,iBAAO,CAACqB,KAAR,CAAc,OAAd;AACF;AACD,OArBH,EAsBGN,QAAD,IAAc;AACZf,eAAO,CAACqB,KAAR,CAAc,UAAd;AACF,OAxBF;AA0BD,KA3BD;;AA6BA,UAAMC,cAAa,GAAKC,SAAD,IAAe;AACpCP,aAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBM,SAAvB;AACD,KAFD;;AAIA,UAAMC,QAAO,GAAI/B,QAAQ,CAAC,MAAM;AAC9B,aAAO,EAAEc,SAAS,CAACC,QAAV,IAAsBD,SAAS,CAACE,QAAlC,CAAP;AACD,KAFwB,CAAzB;AAGA,WAAO;AACLF,eADK;AAELK,cAFK;AAGLU,oBAHK;AAILE,cAJK;AAKLxB;AALK,KAAP;AAOD;;AA3D4B,CAAD,CAA9B","names":["defineComponent","reactive","computed","ref","UserOutlined","LockOutlined","useRouter","postSubmit","useStore","message","components","setup","store","localStorage","setItem","router","formState","username","password","remember","that","onFinish","values","then","response","console","log","dispatch","push","path","error","onFinishFailed","errorInfo","disabled"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/views/login.vue"],"sourcesContent":["<template>\n  <a-form\n    style=\"text-align: center; vertical-align: middle\"\n    :model=\"formState\"\n    name=\"normal_login\"\n    class=\"login-form\"\n    @finish=\"onFinish\"\n    @finishFailed=\"onFinishFailed\"\n  >\n    <br />\n    <br />\n    <br />\n    <h1>欢迎登录考勤系统</h1>\n    <br />\n    <a-form-item\n      label=\"用户名\"\n      style=\"width: 300px; display: inline-flex\"\n      name=\"username\"\n      :rules=\"[{ required: true, message: '请输入用户名!' }]\"\n    >\n      <a-input v-model:value=\"formState.username\">\n        <template #prefix>\n          <UserOutlined class=\"site-form-item-icon\" />\n        </template>\n      </a-input>\n    </a-form-item>\n    <br />\n    <a-form-item\n      style=\"width: 300px; display: inline-flex\"\n      label=\"密 &nbsp  码\"\n      name=\"password\"\n      :rules=\"[{ required: true, message: '请输入密码！' }]\"\n    >\n      <a-input-password v-model:value=\"formState.password\">\n        <template #prefix>\n          <LockOutlined class=\"site-form-item-icon\" />\n        </template>\n      </a-input-password>\n    </a-form-item>\n\n    <div class=\"login-form-wrap\">\n      <a-form-item name=\"remember\" no-style>\n        <a-checkbox v-model:checked=\"formState.remember\">记住我</a-checkbox>\n      </a-form-item>\n      <a class=\"login-form-forgot\" href=\"\">忘记密码</a>\n    </div>\n\n    <a-form-item>\n      <a-button\n        :disabled=\"disabled\"\n        type=\"primary\"\n        html-type=\"submit\"\n        class=\"login-form-button\"\n      >\n        登 录\n      </a-button>\n    </a-form-item>\n  </a-form>\n</template>\n<script>\nimport { defineComponent, reactive, computed, ref } from \"vue\";\nimport { UserOutlined, LockOutlined } from \"@ant-design/icons-vue\";\n// import router from '@/router';\nimport { useRouter } from \"vue-router\";\nimport { postSubmit } from \"../api/api.js\";\nimport { useStore } from \"vuex\";\nimport { message } from \"ant-design-vue\";\n\nexport default defineComponent({\n  components: {\n    UserOutlined,\n    LockOutlined,\n  },\n\n  setup() {\n    const store = useStore();\n    localStorage.setItem(\"Flag\", \"noLogin\");\n    let router = useRouter();\n    const formState = reactive({\n      username: \"\",\n      password: \"\",\n      remember: true,\n    });\n    var that = this;\n    const onFinish = (values) => {\n      postSubmit(values.username, values.password).then(\n        // console.log(response),\n        (response) => {\n          // this.message = ''\n          console.log(response);\n          if (response[\"code\"] == 1) {\n            localStorage.setItem(\"Userid\", response[\"data\"][\"userId\"]);\n            localStorage.setItem(\"Flag\", \"isLogin\");\n            localStorage.setItem(\"userType\", response[\"data\"][\"accountType\"]);\n            store.dispatch(\"setUser\", true);\n\n            if (response[\"data\"][\"accountType\"] == 2) {\n              router.push({ path: \"/manager/managerApprove\" });\n            } else {\n              router.push({ path: \"/worker/account\" });\n            }\n          } else if (response[\"code\"] == 2004) {\n            message.error(\"找不到该用户！\");\n          } else {\n            message.error(\"密码错误!\");\n          }\n        },\n        (response) => {\n          message.error(\"服务器访问错误!\");\n        }\n      );\n    };\n\n    const onFinishFailed = (errorInfo) => {\n      console.log(\"Failed:\", errorInfo);\n    };\n\n    const disabled = computed(() => {\n      return !(formState.username && formState.password);\n    });\n    return {\n      formState,\n      onFinish,\n      onFinishFailed,\n      disabled,\n      message,\n    };\n  },\n});\n</script>\n<style>\n#components-form-demo-normal-login .login-form {\n  max-width: 300px;\n}\n#components-form-demo-normal-login .login-form-wrap {\n  display: flex;\n  text-align: center;\n  align-items: center;\n  justify-content: space-between;\n}\n#components-form-demo-normal-login .login-form-forgot {\n  margin-bottom: 24px;\n}\n#components-form-demo-normal-login .login-form-button {\n  width: 100%;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}