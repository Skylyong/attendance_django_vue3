{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, reactive } from 'vue';\nimport classNames from '../_util/classNames';\nimport createRef from '../_util/createRef';\nimport raf from '../_util/raf';\nimport supportsPassive from '../_util/supportsPassive';\nimport PropTypes from '../_util/vue-types';\nvar MIN_SIZE = 20;\n\nfunction getPageY(e) {\n  return 'touches' in e ? e.touches[0].pageY : e.pageY;\n}\n\nexport default defineComponent({\n  name: 'ScrollBar',\n  inheritAttrs: false,\n  props: {\n    prefixCls: PropTypes.string,\n    scrollTop: PropTypes.number,\n    scrollHeight: PropTypes.number,\n    height: PropTypes.number,\n    count: PropTypes.number,\n    onScroll: {\n      type: Function\n    },\n    onStartMove: {\n      type: Function\n    },\n    onStopMove: {\n      type: Function\n    }\n  },\n  setup: function setup() {\n    return {\n      moveRaf: null,\n      scrollbarRef: createRef(),\n      thumbRef: createRef(),\n      visibleTimeout: null,\n      state: reactive({\n        dragging: false,\n        pageY: null,\n        startTop: null,\n        visible: false\n      })\n    };\n  },\n  watch: {\n    scrollTop: {\n      handler: function handler() {\n        this.delayHidden();\n      },\n      flush: 'post'\n    }\n  },\n  mounted: function mounted() {\n    this.scrollbarRef.current.addEventListener('touchstart', this.onScrollbarTouchStart, supportsPassive ? {\n      passive: false\n    } : false);\n    this.thumbRef.current.addEventListener('touchstart', this.onMouseDown, supportsPassive ? {\n      passive: false\n    } : false);\n  },\n  beforeUnmount: function beforeUnmount() {\n    this.removeEvents();\n    clearTimeout(this.visibleTimeout);\n  },\n  methods: {\n    delayHidden: function delayHidden() {\n      var _this = this;\n\n      clearTimeout(this.visibleTimeout);\n      this.state.visible = true;\n      this.visibleTimeout = setTimeout(function () {\n        _this.state.visible = false;\n      }, 2000);\n    },\n    onScrollbarTouchStart: function onScrollbarTouchStart(e) {\n      e.preventDefault();\n    },\n    onContainerMouseDown: function onContainerMouseDown(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    // ======================= Clean =======================\n    patchEvents: function patchEvents() {\n      window.addEventListener('mousemove', this.onMouseMove);\n      window.addEventListener('mouseup', this.onMouseUp);\n      this.thumbRef.current.addEventListener('touchmove', this.onMouseMove, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.addEventListener('touchend', this.onMouseUp);\n    },\n    removeEvents: function removeEvents() {\n      window.removeEventListener('mousemove', this.onMouseMove);\n      window.removeEventListener('mouseup', this.onMouseUp);\n      this.scrollbarRef.current.removeEventListener('touchstart', this.onScrollbarTouchStart, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.removeEventListener('touchstart', this.onMouseDown, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.removeEventListener('touchmove', this.onMouseMove, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.removeEventListener('touchend', this.onMouseUp);\n      raf.cancel(this.moveRaf);\n    },\n    // ======================= Thumb =======================\n    onMouseDown: function onMouseDown(e) {\n      var onStartMove = this.$props.onStartMove;\n\n      _extends(this.state, {\n        dragging: true,\n        pageY: getPageY(e),\n        startTop: this.getTop()\n      });\n\n      onStartMove();\n      this.patchEvents();\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    onMouseMove: function onMouseMove(e) {\n      var _this$state = this.state,\n          dragging = _this$state.dragging,\n          pageY = _this$state.pageY,\n          startTop = _this$state.startTop;\n      var onScroll = this.$props.onScroll;\n      raf.cancel(this.moveRaf);\n\n      if (dragging) {\n        var offsetY = getPageY(e) - pageY;\n        var newTop = startTop + offsetY;\n        var enableScrollRange = this.getEnableScrollRange();\n        var enableHeightRange = this.getEnableHeightRange();\n        var ptg = enableHeightRange ? newTop / enableHeightRange : 0;\n        var newScrollTop = Math.ceil(ptg * enableScrollRange);\n        this.moveRaf = raf(function () {\n          onScroll(newScrollTop);\n        });\n      }\n    },\n    onMouseUp: function onMouseUp() {\n      var onStopMove = this.$props.onStopMove;\n      this.state.dragging = false;\n      onStopMove();\n      this.removeEvents();\n    },\n    // ===================== Calculate =====================\n    getSpinHeight: function getSpinHeight() {\n      var _this$$props = this.$props,\n          height = _this$$props.height,\n          count = _this$$props.count;\n      var baseHeight = height / count * 10;\n      baseHeight = Math.max(baseHeight, MIN_SIZE);\n      baseHeight = Math.min(baseHeight, height / 2);\n      return Math.floor(baseHeight);\n    },\n    getEnableScrollRange: function getEnableScrollRange() {\n      var _this$$props2 = this.$props,\n          scrollHeight = _this$$props2.scrollHeight,\n          height = _this$$props2.height;\n      return scrollHeight - height || 0;\n    },\n    getEnableHeightRange: function getEnableHeightRange() {\n      var height = this.$props.height;\n      var spinHeight = this.getSpinHeight();\n      return height - spinHeight || 0;\n    },\n    getTop: function getTop() {\n      var scrollTop = this.$props.scrollTop;\n      var enableScrollRange = this.getEnableScrollRange();\n      var enableHeightRange = this.getEnableHeightRange();\n\n      if (scrollTop === 0 || enableScrollRange === 0) {\n        return 0;\n      }\n\n      var ptg = scrollTop / enableScrollRange;\n      return ptg * enableHeightRange;\n    },\n    // Not show scrollbar when height is large than scrollHeight\n    showScroll: function showScroll() {\n      var _this$$props3 = this.$props,\n          height = _this$$props3.height,\n          scrollHeight = _this$$props3.scrollHeight;\n      return scrollHeight > height;\n    }\n  },\n  render: function render() {\n    // eslint-disable-next-line no-unused-vars\n    var _this$state2 = this.state,\n        dragging = _this$state2.dragging,\n        visible = _this$state2.visible;\n    var prefixCls = this.$props.prefixCls;\n    var spinHeight = this.getSpinHeight() + 'px';\n    var top = this.getTop() + 'px';\n    var canScroll = this.showScroll();\n    var mergedVisible = canScroll && visible;\n    return _createVNode(\"div\", {\n      \"ref\": this.scrollbarRef,\n      \"class\": classNames(\"\".concat(prefixCls, \"-scrollbar\"), _defineProperty({}, \"\".concat(prefixCls, \"-scrollbar-show\"), canScroll)),\n      \"style\": {\n        width: '8px',\n        top: 0,\n        bottom: 0,\n        right: 0,\n        position: 'absolute',\n        display: mergedVisible ? undefined : 'none'\n      },\n      \"onMousedown\": this.onContainerMouseDown,\n      \"onMousemove\": this.delayHidden\n    }, [_createVNode(\"div\", {\n      \"ref\": this.thumbRef,\n      \"class\": classNames(\"\".concat(prefixCls, \"-scrollbar-thumb\"), _defineProperty({}, \"\".concat(prefixCls, \"-scrollbar-thumb-moving\"), dragging)),\n      \"style\": {\n        width: '100%',\n        height: spinHeight,\n        top: top,\n        left: 0,\n        position: 'absolute',\n        background: 'rgba(0, 0, 0, 0.5)',\n        borderRadius: '99px',\n        cursor: 'pointer',\n        userSelect: 'none'\n      },\n      \"onMousedown\": this.onMouseDown\n    }, null)]);\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-virtual-list/ScrollBar.js"],"names":["_defineProperty","_extends","createVNode","_createVNode","defineComponent","reactive","classNames","createRef","raf","supportsPassive","PropTypes","MIN_SIZE","getPageY","e","touches","pageY","name","inheritAttrs","props","prefixCls","string","scrollTop","number","scrollHeight","height","count","onScroll","type","Function","onStartMove","onStopMove","setup","moveRaf","scrollbarRef","thumbRef","visibleTimeout","state","dragging","startTop","visible","watch","handler","delayHidden","flush","mounted","current","addEventListener","onScrollbarTouchStart","passive","onMouseDown","beforeUnmount","removeEvents","clearTimeout","methods","_this","setTimeout","preventDefault","onContainerMouseDown","stopPropagation","patchEvents","window","onMouseMove","onMouseUp","removeEventListener","cancel","$props","getTop","_this$state","offsetY","newTop","enableScrollRange","getEnableScrollRange","enableHeightRange","getEnableHeightRange","ptg","newScrollTop","Math","ceil","getSpinHeight","_this$$props","baseHeight","max","min","floor","_this$$props2","spinHeight","showScroll","_this$$props3","render","_this$state2","top","canScroll","mergedVisible","concat","width","bottom","right","position","display","undefined","left","background","borderRadius","cursor","userSelect"],"mappings":"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","sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { defineComponent, reactive } from 'vue';\nimport classNames from '../_util/classNames';\nimport createRef from '../_util/createRef';\nimport raf from '../_util/raf';\nimport supportsPassive from '../_util/supportsPassive';\nimport PropTypes from '../_util/vue-types';\nvar MIN_SIZE = 20;\n\nfunction getPageY(e) {\n  return 'touches' in e ? e.touches[0].pageY : e.pageY;\n}\n\nexport default defineComponent({\n  name: 'ScrollBar',\n  inheritAttrs: false,\n  props: {\n    prefixCls: PropTypes.string,\n    scrollTop: PropTypes.number,\n    scrollHeight: PropTypes.number,\n    height: PropTypes.number,\n    count: PropTypes.number,\n    onScroll: {\n      type: Function\n    },\n    onStartMove: {\n      type: Function\n    },\n    onStopMove: {\n      type: Function\n    }\n  },\n  setup: function setup() {\n    return {\n      moveRaf: null,\n      scrollbarRef: createRef(),\n      thumbRef: createRef(),\n      visibleTimeout: null,\n      state: reactive({\n        dragging: false,\n        pageY: null,\n        startTop: null,\n        visible: false\n      })\n    };\n  },\n  watch: {\n    scrollTop: {\n      handler: function handler() {\n        this.delayHidden();\n      },\n      flush: 'post'\n    }\n  },\n  mounted: function mounted() {\n    this.scrollbarRef.current.addEventListener('touchstart', this.onScrollbarTouchStart, supportsPassive ? {\n      passive: false\n    } : false);\n    this.thumbRef.current.addEventListener('touchstart', this.onMouseDown, supportsPassive ? {\n      passive: false\n    } : false);\n  },\n  beforeUnmount: function beforeUnmount() {\n    this.removeEvents();\n    clearTimeout(this.visibleTimeout);\n  },\n  methods: {\n    delayHidden: function delayHidden() {\n      var _this = this;\n\n      clearTimeout(this.visibleTimeout);\n      this.state.visible = true;\n      this.visibleTimeout = setTimeout(function () {\n        _this.state.visible = false;\n      }, 2000);\n    },\n    onScrollbarTouchStart: function onScrollbarTouchStart(e) {\n      e.preventDefault();\n    },\n    onContainerMouseDown: function onContainerMouseDown(e) {\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    // ======================= Clean =======================\n    patchEvents: function patchEvents() {\n      window.addEventListener('mousemove', this.onMouseMove);\n      window.addEventListener('mouseup', this.onMouseUp);\n      this.thumbRef.current.addEventListener('touchmove', this.onMouseMove, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.addEventListener('touchend', this.onMouseUp);\n    },\n    removeEvents: function removeEvents() {\n      window.removeEventListener('mousemove', this.onMouseMove);\n      window.removeEventListener('mouseup', this.onMouseUp);\n      this.scrollbarRef.current.removeEventListener('touchstart', this.onScrollbarTouchStart, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.removeEventListener('touchstart', this.onMouseDown, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.removeEventListener('touchmove', this.onMouseMove, supportsPassive ? {\n        passive: false\n      } : false);\n      this.thumbRef.current.removeEventListener('touchend', this.onMouseUp);\n      raf.cancel(this.moveRaf);\n    },\n    // ======================= Thumb =======================\n    onMouseDown: function onMouseDown(e) {\n      var onStartMove = this.$props.onStartMove;\n\n      _extends(this.state, {\n        dragging: true,\n        pageY: getPageY(e),\n        startTop: this.getTop()\n      });\n\n      onStartMove();\n      this.patchEvents();\n      e.stopPropagation();\n      e.preventDefault();\n    },\n    onMouseMove: function onMouseMove(e) {\n      var _this$state = this.state,\n          dragging = _this$state.dragging,\n          pageY = _this$state.pageY,\n          startTop = _this$state.startTop;\n      var onScroll = this.$props.onScroll;\n      raf.cancel(this.moveRaf);\n\n      if (dragging) {\n        var offsetY = getPageY(e) - pageY;\n        var newTop = startTop + offsetY;\n        var enableScrollRange = this.getEnableScrollRange();\n        var enableHeightRange = this.getEnableHeightRange();\n        var ptg = enableHeightRange ? newTop / enableHeightRange : 0;\n        var newScrollTop = Math.ceil(ptg * enableScrollRange);\n        this.moveRaf = raf(function () {\n          onScroll(newScrollTop);\n        });\n      }\n    },\n    onMouseUp: function onMouseUp() {\n      var onStopMove = this.$props.onStopMove;\n      this.state.dragging = false;\n      onStopMove();\n      this.removeEvents();\n    },\n    // ===================== Calculate =====================\n    getSpinHeight: function getSpinHeight() {\n      var _this$$props = this.$props,\n          height = _this$$props.height,\n          count = _this$$props.count;\n      var baseHeight = height / count * 10;\n      baseHeight = Math.max(baseHeight, MIN_SIZE);\n      baseHeight = Math.min(baseHeight, height / 2);\n      return Math.floor(baseHeight);\n    },\n    getEnableScrollRange: function getEnableScrollRange() {\n      var _this$$props2 = this.$props,\n          scrollHeight = _this$$props2.scrollHeight,\n          height = _this$$props2.height;\n      return scrollHeight - height || 0;\n    },\n    getEnableHeightRange: function getEnableHeightRange() {\n      var height = this.$props.height;\n      var spinHeight = this.getSpinHeight();\n      return height - spinHeight || 0;\n    },\n    getTop: function getTop() {\n      var scrollTop = this.$props.scrollTop;\n      var enableScrollRange = this.getEnableScrollRange();\n      var enableHeightRange = this.getEnableHeightRange();\n\n      if (scrollTop === 0 || enableScrollRange === 0) {\n        return 0;\n      }\n\n      var ptg = scrollTop / enableScrollRange;\n      return ptg * enableHeightRange;\n    },\n    // Not show scrollbar when height is large than scrollHeight\n    showScroll: function showScroll() {\n      var _this$$props3 = this.$props,\n          height = _this$$props3.height,\n          scrollHeight = _this$$props3.scrollHeight;\n      return scrollHeight > height;\n    }\n  },\n  render: function render() {\n    // eslint-disable-next-line no-unused-vars\n    var _this$state2 = this.state,\n        dragging = _this$state2.dragging,\n        visible = _this$state2.visible;\n    var prefixCls = this.$props.prefixCls;\n    var spinHeight = this.getSpinHeight() + 'px';\n    var top = this.getTop() + 'px';\n    var canScroll = this.showScroll();\n    var mergedVisible = canScroll && visible;\n    return _createVNode(\"div\", {\n      \"ref\": this.scrollbarRef,\n      \"class\": classNames(\"\".concat(prefixCls, \"-scrollbar\"), _defineProperty({}, \"\".concat(prefixCls, \"-scrollbar-show\"), canScroll)),\n      \"style\": {\n        width: '8px',\n        top: 0,\n        bottom: 0,\n        right: 0,\n        position: 'absolute',\n        display: mergedVisible ? undefined : 'none'\n      },\n      \"onMousedown\": this.onContainerMouseDown,\n      \"onMousemove\": this.delayHidden\n    }, [_createVNode(\"div\", {\n      \"ref\": this.thumbRef,\n      \"class\": classNames(\"\".concat(prefixCls, \"-scrollbar-thumb\"), _defineProperty({}, \"\".concat(prefixCls, \"-scrollbar-thumb-moving\"), dragging)),\n      \"style\": {\n        width: '100%',\n        height: spinHeight,\n        top: top,\n        left: 0,\n        position: 'absolute',\n        background: 'rgba(0, 0, 0, 0.5)',\n        borderRadius: '99px',\n        cursor: 'pointer',\n        userSelect: 'none'\n      },\n      \"onMousedown\": this.onMouseDown\n    }, null)]);\n  }\n});"]},"metadata":{},"sourceType":"module"}