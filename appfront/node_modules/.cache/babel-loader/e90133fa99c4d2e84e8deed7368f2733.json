{"ast":null,"code":"import _typeof from \"@babel/runtime/helpers/esm/typeof\"; // https://github.com/yiminghe/css-animation 1.5.0\n\nimport Event from './Event';\nimport classes from '../component-classes';\nimport { requestAnimationTimeout, cancelAnimationTimeout } from '../requestAnimationTimeout';\nvar isCssAnimationSupported = Event.endEvents.length !== 0;\nvar capitalPrefixes = ['Webkit', 'Moz', 'O', // ms is special .... !\n'ms'];\nvar prefixes = ['-webkit-', '-moz-', '-o-', 'ms-', ''];\n\nfunction getStyleProperty(node, name) {\n  // old ff need null, https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\n  var style = window.getComputedStyle(node, null);\n  var ret = '';\n\n  for (var i = 0; i < prefixes.length; i++) {\n    ret = style.getPropertyValue(prefixes[i] + name);\n\n    if (ret) {\n      break;\n    }\n  }\n\n  return ret;\n}\n\nfunction fixBrowserByTimeout(node) {\n  if (isCssAnimationSupported) {\n    var transitionDelay = parseFloat(getStyleProperty(node, 'transition-delay')) || 0;\n    var transitionDuration = parseFloat(getStyleProperty(node, 'transition-duration')) || 0;\n    var animationDelay = parseFloat(getStyleProperty(node, 'animation-delay')) || 0;\n    var animationDuration = parseFloat(getStyleProperty(node, 'animation-duration')) || 0;\n    var time = Math.max(transitionDuration + transitionDelay, animationDuration + animationDelay); // sometimes, browser bug\n\n    node.rcEndAnimTimeout = setTimeout(function () {\n      node.rcEndAnimTimeout = null;\n\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }, time * 1000 + 200);\n  }\n}\n\nfunction clearBrowserBugTimeout(node) {\n  if (node.rcEndAnimTimeout) {\n    clearTimeout(node.rcEndAnimTimeout);\n    node.rcEndAnimTimeout = null;\n  }\n}\n\nvar cssAnimation = function cssAnimation(node, transitionName, endCallback) {\n  var nameIsObj = _typeof(transitionName) === 'object';\n  var className = nameIsObj ? transitionName.name : transitionName;\n  var activeClassName = nameIsObj ? transitionName.active : \"\".concat(transitionName, \"-active\");\n  var end = endCallback;\n  var start;\n  var active;\n  var nodeClasses = classes(node);\n\n  if (endCallback && Object.prototype.toString.call(endCallback) === '[object Object]') {\n    end = endCallback.end;\n    start = endCallback.start;\n    active = endCallback.active;\n  }\n\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      cancelAnimationTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n    nodeClasses.remove(className);\n    nodeClasses.remove(activeClassName);\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null; // Usually this optional end is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n\n    if (end) {\n      end();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n\n  if (start) {\n    start();\n  }\n\n  nodeClasses.add(className);\n  node.rcAnimTimeout = requestAnimationTimeout(function () {\n    node.rcAnimTimeout = null;\n    nodeClasses.add(className);\n    nodeClasses.add(activeClassName);\n\n    if (active) {\n      requestAnimationTimeout(active, 0);\n    }\n\n    fixBrowserByTimeout(node); // 30ms for firefox\n  }, 30);\n  return {\n    stop: function stop() {\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }\n  };\n};\n\ncssAnimation.style = function (node, style, callback) {\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      cancelAnimationTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null; // Usually this optional callback is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n\n    if (callback) {\n      callback();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n  node.rcAnimTimeout = requestAnimationTimeout(function () {\n    for (var s in style) {\n      if (style.hasOwnProperty(s)) {\n        node.style[s] = style[s];\n      }\n    }\n\n    node.rcAnimTimeout = null;\n    fixBrowserByTimeout(node);\n  }, 0);\n};\n\ncssAnimation.setTransition = function (node, p, value) {\n  var property = p;\n  var v = value;\n\n  if (value === undefined) {\n    v = property;\n    property = '';\n  }\n\n  property = property || '';\n  capitalPrefixes.forEach(function (prefix) {\n    node.style[\"\".concat(prefix, \"Transition\").concat(property)] = v;\n  });\n};\n\ncssAnimation.isCssAnimationSupported = isCssAnimationSupported;\nexport { isCssAnimationSupported };\nexport default cssAnimation;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/_util/css-animation/index.js"],"names":["_typeof","Event","classes","requestAnimationTimeout","cancelAnimationTimeout","isCssAnimationSupported","endEvents","length","capitalPrefixes","prefixes","getStyleProperty","node","name","style","window","getComputedStyle","ret","i","getPropertyValue","fixBrowserByTimeout","transitionDelay","parseFloat","transitionDuration","animationDelay","animationDuration","time","Math","max","rcEndAnimTimeout","setTimeout","rcEndListener","clearBrowserBugTimeout","clearTimeout","cssAnimation","transitionName","endCallback","nameIsObj","className","activeClassName","active","concat","end","start","nodeClasses","Object","prototype","toString","call","e","target","rcAnimTimeout","remove","removeEndEventListener","addEndEventListener","add","stop","callback","s","hasOwnProperty","setTransition","p","value","property","v","undefined","forEach","prefix"],"mappings":"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","sourcesContent":["import _typeof from \"@babel/runtime/helpers/esm/typeof\";\n// https://github.com/yiminghe/css-animation 1.5.0\nimport Event from './Event';\nimport classes from '../component-classes';\nimport { requestAnimationTimeout, cancelAnimationTimeout } from '../requestAnimationTimeout';\nvar isCssAnimationSupported = Event.endEvents.length !== 0;\nvar capitalPrefixes = ['Webkit', 'Moz', 'O', // ms is special .... !\n'ms'];\nvar prefixes = ['-webkit-', '-moz-', '-o-', 'ms-', ''];\n\nfunction getStyleProperty(node, name) {\n  // old ff need null, https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle\n  var style = window.getComputedStyle(node, null);\n  var ret = '';\n\n  for (var i = 0; i < prefixes.length; i++) {\n    ret = style.getPropertyValue(prefixes[i] + name);\n\n    if (ret) {\n      break;\n    }\n  }\n\n  return ret;\n}\n\nfunction fixBrowserByTimeout(node) {\n  if (isCssAnimationSupported) {\n    var transitionDelay = parseFloat(getStyleProperty(node, 'transition-delay')) || 0;\n    var transitionDuration = parseFloat(getStyleProperty(node, 'transition-duration')) || 0;\n    var animationDelay = parseFloat(getStyleProperty(node, 'animation-delay')) || 0;\n    var animationDuration = parseFloat(getStyleProperty(node, 'animation-duration')) || 0;\n    var time = Math.max(transitionDuration + transitionDelay, animationDuration + animationDelay); // sometimes, browser bug\n\n    node.rcEndAnimTimeout = setTimeout(function () {\n      node.rcEndAnimTimeout = null;\n\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }, time * 1000 + 200);\n  }\n}\n\nfunction clearBrowserBugTimeout(node) {\n  if (node.rcEndAnimTimeout) {\n    clearTimeout(node.rcEndAnimTimeout);\n    node.rcEndAnimTimeout = null;\n  }\n}\n\nvar cssAnimation = function cssAnimation(node, transitionName, endCallback) {\n  var nameIsObj = _typeof(transitionName) === 'object';\n  var className = nameIsObj ? transitionName.name : transitionName;\n  var activeClassName = nameIsObj ? transitionName.active : \"\".concat(transitionName, \"-active\");\n  var end = endCallback;\n  var start;\n  var active;\n  var nodeClasses = classes(node);\n\n  if (endCallback && Object.prototype.toString.call(endCallback) === '[object Object]') {\n    end = endCallback.end;\n    start = endCallback.start;\n    active = endCallback.active;\n  }\n\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      cancelAnimationTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n    nodeClasses.remove(className);\n    nodeClasses.remove(activeClassName);\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null; // Usually this optional end is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n\n    if (end) {\n      end();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n\n  if (start) {\n    start();\n  }\n\n  nodeClasses.add(className);\n  node.rcAnimTimeout = requestAnimationTimeout(function () {\n    node.rcAnimTimeout = null;\n    nodeClasses.add(className);\n    nodeClasses.add(activeClassName);\n\n    if (active) {\n      requestAnimationTimeout(active, 0);\n    }\n\n    fixBrowserByTimeout(node); // 30ms for firefox\n  }, 30);\n  return {\n    stop: function stop() {\n      if (node.rcEndListener) {\n        node.rcEndListener();\n      }\n    }\n  };\n};\n\ncssAnimation.style = function (node, style, callback) {\n  if (node.rcEndListener) {\n    node.rcEndListener();\n  }\n\n  node.rcEndListener = function (e) {\n    if (e && e.target !== node) {\n      return;\n    }\n\n    if (node.rcAnimTimeout) {\n      cancelAnimationTimeout(node.rcAnimTimeout);\n      node.rcAnimTimeout = null;\n    }\n\n    clearBrowserBugTimeout(node);\n    Event.removeEndEventListener(node, node.rcEndListener);\n    node.rcEndListener = null; // Usually this optional callback is used for informing an owner of\n    // a leave animation and telling it to remove the child.\n\n    if (callback) {\n      callback();\n    }\n  };\n\n  Event.addEndEventListener(node, node.rcEndListener);\n  node.rcAnimTimeout = requestAnimationTimeout(function () {\n    for (var s in style) {\n      if (style.hasOwnProperty(s)) {\n        node.style[s] = style[s];\n      }\n    }\n\n    node.rcAnimTimeout = null;\n    fixBrowserByTimeout(node);\n  }, 0);\n};\n\ncssAnimation.setTransition = function (node, p, value) {\n  var property = p;\n  var v = value;\n\n  if (value === undefined) {\n    v = property;\n    property = '';\n  }\n\n  property = property || '';\n  capitalPrefixes.forEach(function (prefix) {\n    node.style[\"\".concat(prefix, \"Transition\").concat(property)] = v;\n  });\n};\n\ncssAnimation.isCssAnimationSupported = isCssAnimationSupported;\nexport { isCssAnimationSupported };\nexport default cssAnimation;"]},"metadata":{},"sourceType":"module"}