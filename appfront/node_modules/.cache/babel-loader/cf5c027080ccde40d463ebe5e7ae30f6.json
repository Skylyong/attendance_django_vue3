{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { createVNode, render as vueRender } from 'vue';\nimport ConfirmDialog from './ConfirmDialog';\nimport { destroyFns } from './Modal';\nimport Omit from 'omit.js';\n\nvar confirm = function confirm(config) {\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n\n  var currentConfig = _extends(_extends({}, Omit(config, ['parentContext', 'appContext'])), {\n    close: close,\n    visible: true\n  });\n\n  var confirmDialogInstance = null;\n\n  function close() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    currentConfig = _extends(_extends({}, currentConfig), {\n      visible: false,\n      afterClose: destroy.bind.apply(destroy, [this].concat(args))\n    });\n    update(currentConfig);\n  }\n\n  function update(newConfig) {\n    currentConfig = _extends(_extends({}, currentConfig), newConfig);\n\n    if (confirmDialogInstance) {\n      _extends(confirmDialogInstance.component.props, currentConfig);\n\n      confirmDialogInstance.component.update();\n    }\n  }\n\n  function destroy() {\n    if (confirmDialogInstance && div.parentNode) {\n      _extends(confirmDialogInstance.component.props, {\n        vIf: false\n      }); // hack destroy\n\n\n      confirmDialogInstance.component.update();\n      confirmDialogInstance = null;\n      div.parentNode.removeChild(div);\n    }\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var triggerCancel = args.some(function (param) {\n      return param && param.triggerCancel;\n    });\n\n    if (config.onCancel && triggerCancel) {\n      config.onCancel.apply(config, args);\n    }\n\n    for (var i = 0; i < destroyFns.length; i++) {\n      var fn = destroyFns[i];\n\n      if (fn === close) {\n        destroyFns.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  var Wrapper = function Wrapper(p) {\n    return p.vIf ? _createVNode(ConfirmDialog, p, null) : null;\n  };\n\n  function render(props) {\n    var vm = createVNode(Wrapper, _extends(_extends({}, props), {\n      vIf: true\n    }));\n    vm.appContext = config.parentContext || config.appContext || vm.appContext;\n    vueRender(vm, div);\n    return vm;\n  }\n\n  confirmDialogInstance = render(currentConfig);\n  destroyFns.push(close);\n  return {\n    destroy: close,\n    update: update\n  };\n};\n\nexport default confirm;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/modal/confirm.js"],"names":["_extends","createVNode","_createVNode","render","vueRender","ConfirmDialog","destroyFns","Omit","confirm","config","div","document","createElement","body","appendChild","currentConfig","close","visible","confirmDialogInstance","_len","arguments","length","args","Array","_key","afterClose","destroy","bind","apply","concat","update","newConfig","component","props","parentNode","vIf","removeChild","_len2","_key2","triggerCancel","some","param","onCancel","i","fn","splice","Wrapper","p","vm","appContext","parentContext","push"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { createVNode, render as vueRender } from 'vue';\nimport ConfirmDialog from './ConfirmDialog';\nimport { destroyFns } from './Modal';\nimport Omit from 'omit.js';\n\nvar confirm = function confirm(config) {\n  var div = document.createElement('div');\n  document.body.appendChild(div);\n\n  var currentConfig = _extends(_extends({}, Omit(config, ['parentContext', 'appContext'])), {\n    close: close,\n    visible: true\n  });\n\n  var confirmDialogInstance = null;\n\n  function close() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    currentConfig = _extends(_extends({}, currentConfig), {\n      visible: false,\n      afterClose: destroy.bind.apply(destroy, [this].concat(args))\n    });\n    update(currentConfig);\n  }\n\n  function update(newConfig) {\n    currentConfig = _extends(_extends({}, currentConfig), newConfig);\n\n    if (confirmDialogInstance) {\n      _extends(confirmDialogInstance.component.props, currentConfig);\n\n      confirmDialogInstance.component.update();\n    }\n  }\n\n  function destroy() {\n    if (confirmDialogInstance && div.parentNode) {\n      _extends(confirmDialogInstance.component.props, {\n        vIf: false\n      }); // hack destroy\n\n\n      confirmDialogInstance.component.update();\n      confirmDialogInstance = null;\n      div.parentNode.removeChild(div);\n    }\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    var triggerCancel = args.some(function (param) {\n      return param && param.triggerCancel;\n    });\n\n    if (config.onCancel && triggerCancel) {\n      config.onCancel.apply(config, args);\n    }\n\n    for (var i = 0; i < destroyFns.length; i++) {\n      var fn = destroyFns[i];\n\n      if (fn === close) {\n        destroyFns.splice(i, 1);\n        break;\n      }\n    }\n  }\n\n  var Wrapper = function Wrapper(p) {\n    return p.vIf ? _createVNode(ConfirmDialog, p, null) : null;\n  };\n\n  function render(props) {\n    var vm = createVNode(Wrapper, _extends(_extends({}, props), {\n      vIf: true\n    }));\n    vm.appContext = config.parentContext || config.appContext || vm.appContext;\n    vueRender(vm, div);\n    return vm;\n  }\n\n  confirmDialogInstance = render(currentConfig);\n  destroyFns.push(close);\n  return {\n    destroy: close,\n    update: update\n  };\n};\n\nexport default confirm;"]},"metadata":{},"sourceType":"module"}