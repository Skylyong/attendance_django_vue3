{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent, onBeforeUnmount, onMounted, onUpdated, ref, Text, watch, watchEffect } from 'vue';\nimport Wave from '../_util/wave';\nimport buttonTypes from './buttonTypes';\nimport LoadingOutlined from '@ant-design/icons-vue/LoadingOutlined';\nimport { flattenChildren, getPropsSlot } from '../_util/props-util';\nimport useConfigInject from '../_util/hooks/useConfigInject';\nimport devWarning from '../vc-util/devWarning';\nvar rxTwoCNChar = /^[\\u4e00-\\u9fa5]{2}$/;\nvar isTwoCNChar = rxTwoCNChar.test.bind(rxTwoCNChar);\nvar props = buttonTypes();\n\nfunction isUnborderedButtonType(type) {\n  return type === 'text' || type === 'link';\n}\n\nexport default defineComponent({\n  name: 'AButton',\n  inheritAttrs: false,\n  __ANT_BUTTON: true,\n  props: props,\n  slots: ['icon'],\n  emits: ['click'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs,\n        emit = _ref.emit;\n\n    var _useConfigInject = useConfigInject('btn', props),\n        prefixCls = _useConfigInject.prefixCls,\n        autoInsertSpaceInButton = _useConfigInject.autoInsertSpaceInButton,\n        direction = _useConfigInject.direction;\n\n    var buttonNodeRef = ref(null);\n    var delayTimeoutRef = ref(undefined);\n    var isNeedInserted = false;\n    var innerLoading = ref(false);\n    var hasTwoCNChar = ref(false);\n    var autoInsertSpace = computed(function () {\n      return autoInsertSpaceInButton.value !== false;\n    }); // =============== Update Loading ===============\n\n    var loadingOrDelay = computed(function () {\n      return _typeof(props.loading) === 'object' && props.loading.delay ? props.loading.delay || true : !!props.loading;\n    });\n    watch(loadingOrDelay, function (val) {\n      clearTimeout(delayTimeoutRef.value);\n\n      if (typeof loadingOrDelay.value === 'number') {\n        delayTimeoutRef.value = window.setTimeout(function () {\n          innerLoading.value = val;\n        }, loadingOrDelay.value);\n      } else {\n        innerLoading.value = val;\n      }\n    }, {\n      immediate: true\n    });\n    var classes = computed(function () {\n      var _ref2;\n\n      var type = props.type,\n          shape = props.shape,\n          size = props.size,\n          ghost = props.ghost,\n          block = props.block,\n          danger = props.danger;\n      var pre = prefixCls.value; // large => lg\n      // small => sm\n\n      var sizeCls = '';\n\n      switch (size) {\n        case 'large':\n          sizeCls = 'lg';\n          break;\n\n        case 'small':\n          sizeCls = 'sm';\n          break;\n\n        default:\n          break;\n      }\n\n      return _ref2 = {}, _defineProperty(_ref2, \"\".concat(pre), true), _defineProperty(_ref2, \"\".concat(pre, \"-\").concat(type), type), _defineProperty(_ref2, \"\".concat(pre, \"-\").concat(shape), shape), _defineProperty(_ref2, \"\".concat(pre, \"-\").concat(sizeCls), sizeCls), _defineProperty(_ref2, \"\".concat(pre, \"-loading\"), innerLoading.value), _defineProperty(_ref2, \"\".concat(pre, \"-background-ghost\"), ghost && !isUnborderedButtonType(type)), _defineProperty(_ref2, \"\".concat(pre, \"-two-chinese-chars\"), hasTwoCNChar.value && autoInsertSpace.value), _defineProperty(_ref2, \"\".concat(pre, \"-block\"), block), _defineProperty(_ref2, \"\".concat(pre, \"-dangerous\"), !!danger), _defineProperty(_ref2, \"\".concat(pre, \"-rtl\"), direction.value === 'rtl'), _ref2;\n    });\n\n    var fixTwoCNChar = function fixTwoCNChar() {\n      // Fix for HOC usage like <FormatMessage />\n      var node = buttonNodeRef.value;\n\n      if (!node || autoInsertSpaceInButton.value === false) {\n        return;\n      }\n\n      var buttonText = node.textContent;\n\n      if (isNeedInserted && isTwoCNChar(buttonText)) {\n        if (!hasTwoCNChar.value) {\n          hasTwoCNChar.value = true;\n        }\n      } else if (hasTwoCNChar.value) {\n        hasTwoCNChar.value = false;\n      }\n    };\n\n    var handleClick = function handleClick(event) {\n      // https://github.com/ant-design/ant-design/issues/30207\n      if (innerLoading.value || props.disabled) {\n        event.preventDefault();\n        return;\n      }\n\n      emit('click', event);\n    };\n\n    var insertSpace = function insertSpace(child, needInserted) {\n      var SPACE = needInserted ? ' ' : '';\n\n      if (child.type === Text) {\n        var text = child.children.trim();\n\n        if (isTwoCNChar(text)) {\n          text = text.split('').join(SPACE);\n        }\n\n        return _createVNode(\"span\", null, [text]);\n      }\n\n      return child;\n    };\n\n    watchEffect(function () {\n      devWarning(!(props.ghost && isUnborderedButtonType(props.type)), 'Button', \"`link` or `text` button can't be a `ghost` button.\");\n    });\n    onMounted(fixTwoCNChar);\n    onUpdated(fixTwoCNChar);\n    onBeforeUnmount(function () {\n      delayTimeoutRef.value && clearTimeout(delayTimeoutRef.value);\n    });\n    return function () {\n      var children = flattenChildren(getPropsSlot(slots, props));\n      var icon = getPropsSlot(slots, props, 'icon');\n      isNeedInserted = children.length === 1 && !icon && !isUnborderedButtonType(props.type);\n      var type = props.type,\n          htmlType = props.htmlType,\n          disabled = props.disabled,\n          href = props.href,\n          title = props.title,\n          target = props.target;\n      var iconType = innerLoading.value ? 'loading' : icon;\n\n      var buttonProps = _extends(_extends({}, attrs), {\n        title: title,\n        disabled: disabled,\n        class: [classes.value, attrs.class, _defineProperty({}, \"\".concat(prefixCls.value, \"-icon-only\"), children.length === 0 && !!iconType)],\n        onClick: handleClick\n      });\n\n      var iconNode = innerLoading.value ? _createVNode(LoadingOutlined, null, null) : icon;\n      var kids = children.map(function (child) {\n        return insertSpace(child, isNeedInserted && autoInsertSpace.value);\n      });\n\n      if (href !== undefined) {\n        return _createVNode(\"a\", _objectSpread(_objectSpread({}, buttonProps), {}, {\n          \"href\": href,\n          \"target\": target,\n          \"ref\": buttonNodeRef\n        }), [iconNode, kids]);\n      }\n\n      var buttonNode = _createVNode(\"button\", _objectSpread(_objectSpread({}, buttonProps), {}, {\n        \"ref\": buttonNodeRef,\n        \"type\": htmlType\n      }), [iconNode, kids]);\n\n      if (isUnborderedButtonType(type)) {\n        return buttonNode;\n      }\n\n      return _createVNode(Wave, {\n        \"ref\": \"wave\"\n      }, {\n        default: function _default() {\n          return [buttonNode];\n        }\n      });\n    };\n  }\n});","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/button/button.js"],"names":["_objectSpread","_extends","_defineProperty","_typeof","createVNode","_createVNode","computed","defineComponent","onBeforeUnmount","onMounted","onUpdated","ref","Text","watch","watchEffect","Wave","buttonTypes","LoadingOutlined","flattenChildren","getPropsSlot","useConfigInject","devWarning","rxTwoCNChar","isTwoCNChar","test","bind","props","isUnborderedButtonType","type","name","inheritAttrs","__ANT_BUTTON","slots","emits","setup","_ref","attrs","emit","_useConfigInject","prefixCls","autoInsertSpaceInButton","direction","buttonNodeRef","delayTimeoutRef","undefined","isNeedInserted","innerLoading","hasTwoCNChar","autoInsertSpace","value","loadingOrDelay","loading","delay","val","clearTimeout","window","setTimeout","immediate","classes","_ref2","shape","size","ghost","block","danger","pre","sizeCls","concat","fixTwoCNChar","node","buttonText","textContent","handleClick","event","disabled","preventDefault","insertSpace","child","needInserted","SPACE","text","children","trim","split","join","icon","length","htmlType","href","title","target","iconType","buttonProps","class","onClick","iconNode","kids","map","buttonNode","default","_default"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { computed, defineComponent, onBeforeUnmount, onMounted, onUpdated, ref, Text, watch, watchEffect } from 'vue';\nimport Wave from '../_util/wave';\nimport buttonTypes from './buttonTypes';\nimport LoadingOutlined from '@ant-design/icons-vue/LoadingOutlined';\nimport { flattenChildren, getPropsSlot } from '../_util/props-util';\nimport useConfigInject from '../_util/hooks/useConfigInject';\nimport devWarning from '../vc-util/devWarning';\nvar rxTwoCNChar = /^[\\u4e00-\\u9fa5]{2}$/;\nvar isTwoCNChar = rxTwoCNChar.test.bind(rxTwoCNChar);\nvar props = buttonTypes();\n\nfunction isUnborderedButtonType(type) {\n  return type === 'text' || type === 'link';\n}\n\nexport default defineComponent({\n  name: 'AButton',\n  inheritAttrs: false,\n  __ANT_BUTTON: true,\n  props: props,\n  slots: ['icon'],\n  emits: ['click'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots,\n        attrs = _ref.attrs,\n        emit = _ref.emit;\n\n    var _useConfigInject = useConfigInject('btn', props),\n        prefixCls = _useConfigInject.prefixCls,\n        autoInsertSpaceInButton = _useConfigInject.autoInsertSpaceInButton,\n        direction = _useConfigInject.direction;\n\n    var buttonNodeRef = ref(null);\n    var delayTimeoutRef = ref(undefined);\n    var isNeedInserted = false;\n    var innerLoading = ref(false);\n    var hasTwoCNChar = ref(false);\n    var autoInsertSpace = computed(function () {\n      return autoInsertSpaceInButton.value !== false;\n    }); // =============== Update Loading ===============\n\n    var loadingOrDelay = computed(function () {\n      return _typeof(props.loading) === 'object' && props.loading.delay ? props.loading.delay || true : !!props.loading;\n    });\n    watch(loadingOrDelay, function (val) {\n      clearTimeout(delayTimeoutRef.value);\n\n      if (typeof loadingOrDelay.value === 'number') {\n        delayTimeoutRef.value = window.setTimeout(function () {\n          innerLoading.value = val;\n        }, loadingOrDelay.value);\n      } else {\n        innerLoading.value = val;\n      }\n    }, {\n      immediate: true\n    });\n    var classes = computed(function () {\n      var _ref2;\n\n      var type = props.type,\n          shape = props.shape,\n          size = props.size,\n          ghost = props.ghost,\n          block = props.block,\n          danger = props.danger;\n      var pre = prefixCls.value; // large => lg\n      // small => sm\n\n      var sizeCls = '';\n\n      switch (size) {\n        case 'large':\n          sizeCls = 'lg';\n          break;\n\n        case 'small':\n          sizeCls = 'sm';\n          break;\n\n        default:\n          break;\n      }\n\n      return _ref2 = {}, _defineProperty(_ref2, \"\".concat(pre), true), _defineProperty(_ref2, \"\".concat(pre, \"-\").concat(type), type), _defineProperty(_ref2, \"\".concat(pre, \"-\").concat(shape), shape), _defineProperty(_ref2, \"\".concat(pre, \"-\").concat(sizeCls), sizeCls), _defineProperty(_ref2, \"\".concat(pre, \"-loading\"), innerLoading.value), _defineProperty(_ref2, \"\".concat(pre, \"-background-ghost\"), ghost && !isUnborderedButtonType(type)), _defineProperty(_ref2, \"\".concat(pre, \"-two-chinese-chars\"), hasTwoCNChar.value && autoInsertSpace.value), _defineProperty(_ref2, \"\".concat(pre, \"-block\"), block), _defineProperty(_ref2, \"\".concat(pre, \"-dangerous\"), !!danger), _defineProperty(_ref2, \"\".concat(pre, \"-rtl\"), direction.value === 'rtl'), _ref2;\n    });\n\n    var fixTwoCNChar = function fixTwoCNChar() {\n      // Fix for HOC usage like <FormatMessage />\n      var node = buttonNodeRef.value;\n\n      if (!node || autoInsertSpaceInButton.value === false) {\n        return;\n      }\n\n      var buttonText = node.textContent;\n\n      if (isNeedInserted && isTwoCNChar(buttonText)) {\n        if (!hasTwoCNChar.value) {\n          hasTwoCNChar.value = true;\n        }\n      } else if (hasTwoCNChar.value) {\n        hasTwoCNChar.value = false;\n      }\n    };\n\n    var handleClick = function handleClick(event) {\n      // https://github.com/ant-design/ant-design/issues/30207\n      if (innerLoading.value || props.disabled) {\n        event.preventDefault();\n        return;\n      }\n\n      emit('click', event);\n    };\n\n    var insertSpace = function insertSpace(child, needInserted) {\n      var SPACE = needInserted ? ' ' : '';\n\n      if (child.type === Text) {\n        var text = child.children.trim();\n\n        if (isTwoCNChar(text)) {\n          text = text.split('').join(SPACE);\n        }\n\n        return _createVNode(\"span\", null, [text]);\n      }\n\n      return child;\n    };\n\n    watchEffect(function () {\n      devWarning(!(props.ghost && isUnborderedButtonType(props.type)), 'Button', \"`link` or `text` button can't be a `ghost` button.\");\n    });\n    onMounted(fixTwoCNChar);\n    onUpdated(fixTwoCNChar);\n    onBeforeUnmount(function () {\n      delayTimeoutRef.value && clearTimeout(delayTimeoutRef.value);\n    });\n    return function () {\n      var children = flattenChildren(getPropsSlot(slots, props));\n      var icon = getPropsSlot(slots, props, 'icon');\n      isNeedInserted = children.length === 1 && !icon && !isUnborderedButtonType(props.type);\n      var type = props.type,\n          htmlType = props.htmlType,\n          disabled = props.disabled,\n          href = props.href,\n          title = props.title,\n          target = props.target;\n      var iconType = innerLoading.value ? 'loading' : icon;\n\n      var buttonProps = _extends(_extends({}, attrs), {\n        title: title,\n        disabled: disabled,\n        class: [classes.value, attrs.class, _defineProperty({}, \"\".concat(prefixCls.value, \"-icon-only\"), children.length === 0 && !!iconType)],\n        onClick: handleClick\n      });\n\n      var iconNode = innerLoading.value ? _createVNode(LoadingOutlined, null, null) : icon;\n      var kids = children.map(function (child) {\n        return insertSpace(child, isNeedInserted && autoInsertSpace.value);\n      });\n\n      if (href !== undefined) {\n        return _createVNode(\"a\", _objectSpread(_objectSpread({}, buttonProps), {}, {\n          \"href\": href,\n          \"target\": target,\n          \"ref\": buttonNodeRef\n        }), [iconNode, kids]);\n      }\n\n      var buttonNode = _createVNode(\"button\", _objectSpread(_objectSpread({}, buttonProps), {}, {\n        \"ref\": buttonNodeRef,\n        \"type\": htmlType\n      }), [iconNode, kids]);\n\n      if (isUnborderedButtonType(type)) {\n        return buttonNode;\n      }\n\n      return _createVNode(Wave, {\n        \"ref\": \"wave\"\n      }, {\n        default: function _default() {\n          return [buttonNode];\n        }\n      });\n    };\n  }\n});"]},"metadata":{},"sourceType":"module"}