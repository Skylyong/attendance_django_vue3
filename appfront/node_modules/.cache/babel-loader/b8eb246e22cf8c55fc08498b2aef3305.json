{"ast":null,"code":"import { workerApply } from '../../api/api.js';\nimport moment from 'moment';\nimport { defineComponent, reactive, ref } from 'vue';\nimport { message } from 'ant-design-vue'; // import { message } from 'ant-design-vue';\n\nexport default defineComponent({\n  setup() {\n    let submit_message = ref('');\n    let applyType = ref();\n    let holidayType = ref();\n    let myDateString = ref();\n    let myData = ref();\n    applyType = 0;\n    holidayType = 0;\n    const layout = {\n      labelCol: {\n        span: 8\n      },\n      wrapperCol: {\n        span: 9\n      }\n    };\n    const validateMessages = {\n      required: '${label} is required!',\n      types: {\n        email: '${label} is not a valid email!',\n        number: '${label} is not a valid number!'\n      },\n      number: {\n        range: '${label} must be between ${min} and ${max}'\n      }\n    };\n\n    const onRangeChange = (value, dateString) => {\n      console.log('Selected Time: ', value);\n      console.log('Formatted Selected Time: ', dateString);\n      myDateString = dateString;\n      myData = value;\n    };\n\n    const onRangeOk = value => {\n      var hour = moment(myData[1]).diff(moment(myData[0]), 'hour');\n      var day = moment(myData[1]).diff(moment(myData[0]), 'day');\n      hour = hour - day * 24;\n      console.log('hour', hour, 'day', day);\n      formState.user.applyTime = day.toString() + '天' + hour.toString() + '时';\n      console.log('onOk: ', value);\n    };\n\n    const options1 = ref([{\n      value: '0',\n      label: '公休'\n    }, {\n      value: '1',\n      label: '值班加班'\n    }]);\n    const options2 = ref([{\n      value: '0',\n      label: '公休请假'\n    }, {\n      value: '1',\n      label: '加班换积休'\n    }, {\n      value: '2',\n      label: '加班换公休'\n    }]);\n\n    const focus = () => {\n      console.log('2222focus');\n    };\n\n    const handleChange = value => {\n      console.log(`1111selected ${value}`);\n    };\n\n    const handleApplyTypeChange = value => {\n      applyType = value;\n    };\n\n    const handleHolidayTypeChange = value => {\n      holidayType = value;\n    };\n\n    const formState = reactive({\n      user: {\n        applyTime: '',\n        applyReason: ''\n      }\n    });\n\n    const onFinish = () => {\n      console.log('Success:', applyType, holidayType, formState.user.applyTime, formState.user.applyReason, myDateString);\n      let userid = localStorage.getItem(\"Userid\");\n      workerApply(userid, applyType, holidayType, formState.user.applyTime, formState.user.applyReason, myDateString).then(response => {\n        if (response['code'] == 1) {\n          message.error('提交成功'); //  submit_message.value = '提交成功'\n          //  formState.user.applyReason = \"\"\n          //  formState.user.applyTime=\"\"\n        } else {\n          //  submit_message.value = '提交失败'\n          message.error('提交失败');\n        }\n      }, response => {\n        message.error('提交提交失败，服务器访问错误！');\n      });\n    };\n\n    return {\n      holidayType,\n      applyType,\n      handleApplyTypeChange,\n      handleHolidayTypeChange,\n      formState,\n      onFinish,\n      layout,\n      validateMessages,\n      onRangeChange,\n      onRangeOk,\n      myDateString,\n      myData,\n      focus,\n      handleChange,\n      value1: ref('公休'),\n      options1,\n      value2: ref('公休请假'),\n      options2,\n      submit_message\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["workerApply","moment","defineComponent","reactive","ref","message","setup","submit_message","applyType","holidayType","myDateString","myData","layout","labelCol","span","wrapperCol","validateMessages","required","types","email","number","range","onRangeChange","value","dateString","console","log","onRangeOk","hour","diff","day","formState","user","applyTime","toString","options1","label","options2","focus","handleChange","handleApplyTypeChange","handleHolidayTypeChange","applyReason","onFinish","userid","localStorage","getItem","then","response","error","value1","value2"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/components/worker/workerApply.vue"],"sourcesContent":["<template>\n<br>\n  <br>\n  <h1 style=\"text-align: center\">提交申请 </h1>\n  <br>\n    <br>\n  <a-form\n    :model=\"formState\"\n    v-bind=\"layout\"\n    name=\"nest-messages\"\n    :validate-messages=\"validateMessages\"\n    @finish=\"onFinish\"\n    style=\"text-align: center\"\n  >\n\n\n    <a-form-item :name=\"['user', 'email']\" label=\"申请类型\" :rules=\"[{ required: false}]\">\n\n\n    <a-select\n      ref=\"select\"\n      v-model:value=\"value1\"\n      style=\"width: 120px\"\n      :options=\"options1\"\n      @focus=\"focus\"\n      @change=\"handleApplyTypeChange\"\n    ></a-select>\n\n\n\n\n    <!-- <a-select\n      ref=\"select\"\n      v-model:value=\"value1\"\n      style=\"width: 120px\"\n      @focus=\"focus\"\n      @change=\"handleChange\"\n    >\n      <a-select-option value=\"jack\">Jack</a-select-option>\n      <a-select-option value=\"lucy\">Lucy</a-select-option>\n      <a-select-option value=\"disabled\" disabled>Disabled</a-select-option>\n      <a-select-option value=\"Yiminghe\">yiminghe</a-select-option>\n    </a-select>\n    <a-select v-model:value=\"value2\" style=\"width: 120px\" disabled>\n      <a-select-option value=\"lucy\">Lucy</a-select-option>\n    </a-select>\n    <a-select v-model:value=\"value3\" style=\"width: 120px\" loading>\n      <a-select-option value=\"lucy\">Lucy</a-select-option>\n    </a-select> -->\n\n\n\n      <!-- <a-input v-model:value=\"formState.user.email\" /> -->\n\n\n    </a-form-item>\n\n        <a-form-item :name=\"['user', 'email']\" label=\"假期种类\" :rules=\"[{ required: false }]\">\n\n    <a-select\n      ref=\"select\"\n      v-model:value=\"value2\"\n      style=\"width: 120px\"\n      :options=\"options2\"\n      @focus=\"focus\"\n      @change=\"handleHolidayTypeChange\"\n    ></a-select>\n    \n\n      <!-- <a-input v-model:value=\"formState.user.email\" /> -->\n    </a-form-item>\n\n\n    <a-form-item :name=\"['user', 'name']\" label=\"申请时间\" :rules=\"[{ required: false }]\">\n      <!-- <a-input v-model:value=\"formState.user.name\" /> -->\n<!-- <a-input v-model:value=\"formState.user.name\" /> -->\n\n  <a-space direction=\"vertical\" :size=\"8\">\n    <!-- <a-date-picker show-time placeholder=\"Select Time\" @change=\"onChange\" @ok=\"onOk\" /> -->\n    <a-range-picker\n    style=\"width: 225px\"\n      :show-time=\"{ format: 'HH' }\"\n      format=\"YYYY-MM-DD HH\"\n      :placeholder=\"['开始时间', '结束时间']\"\n      @change=\"onRangeChange\"\n      @ok=\"onRangeOk\"\n    />\n  </a-space>\n\n</a-form-item>\n\n  <a-form-item :name=\"['user', 'email']\" label=\"申请时长\" :rules=\"[{ }]\">\n\n   <p class=\"ant-form-text\"> {{formState.user.applyTime}}</p>\n      <!-- <a-input v-model:value=\"formState.user.applyTime\" /> -->\n    </a-form-item>\n\n\n\n\n    <a-form-item :name=\"['user', 'email']\" label=\"申请原因\" :rules=\"[{required: false }]\">\n      <a-input style=\"height: 50px; width: 220px\" v-model:value=\"formState.user.applyReason\" />\n    </a-form-item>\n\n<!-- <p style=\"color: blue\">{{submit_message}} </p> -->\n\n\n    <!-- <a-form-item :name=\"['user', 'age']\" label=\"Age\" :rules=\"[{ type: 'number', min: 0, max: 99 }]\">\n      <a-input-number v-model:value=\"formState.user.age\" />\n    </a-form-item>\n    <a-form-item :name=\"['user', 'website']\" label=\"Website\">\n      <a-input v-model:value=\"formState.user.website\" />\n    </a-form-item>\n    <a-form-item :name=\"['user', 'introduction']\" label=\"Introduction\">\n      <a-textarea v-model:value=\"formState.user.introduction\" />\n    </a-form-item> -->\n    <a-form-item :wrapper-col=\"{ ...layout.wrapperCol, offset: 8 }\">\n      <br>\n      <a-button type=\"primary\" html-type=\"Submit\">提交</a-button>\n    </a-form-item>\n  </a-form>\n</template>\n<script>\nimport {workerApply} from '../../api/api.js'\nimport moment from 'moment'\nimport { defineComponent, reactive,ref } from 'vue';\nimport { message } from 'ant-design-vue';\n// import { message } from 'ant-design-vue';\nexport default defineComponent({\n  setup() {\n    let submit_message =ref('')\n    let applyType = ref()\n    let holidayType= ref()\n    let myDateString = ref()\n    let myData = ref()\n    applyType = 0\n    holidayType = 0\n    const layout = {\n      labelCol: {\n        span: 8,\n      },\n      wrapperCol: {\n        span: 9,\n      },\n    };\n    const validateMessages = {\n      required: '${label} is required!',\n      types: {\n        email: '${label} is not a valid email!',\n        number: '${label} is not a valid number!',\n      },\n      number: {\n        range: '${label} must be between ${min} and ${max}',\n      },\n    };\n\n    const onRangeChange = (value, dateString) => {\n      console.log('Selected Time: ', value);\n      console.log('Formatted Selected Time: ', dateString);\n      myDateString = dateString\n      myData = value\n    };\n\n    const onRangeOk = (value) => {\n      var hour = moment(myData[1]).diff(moment(myData[0]), 'hour')\n      var day = moment(myData[1]).diff(moment(myData[0]), 'day')\n      hour = hour - day*24\n      console.log('hour', hour, 'day', day)\n\n      formState.user.applyTime = day.toString() + '天' + hour.toString() + '时'\n      console.log('onOk: ', value);\n    };\n\n\n\nconst options1 = ref([{\n      value: '0',\n      label: '公休',\n    }, {\n      value: '1',\n      label: '值班加班',\n    }]);\n\n    const options2 = ref([{\n      value: '0',\n      label: '公休请假',\n    }, {\n      value: '1',\n      label: '加班换积休',\n    },\n    {\n      value: '2',\n      label: '加班换公休',\n    }]);\n\n\n    const focus = () => {\n      console.log('2222focus');\n    };\n\n    const handleChange = value => {\n      console.log(`1111selected ${value}`);\n    };\nconst handleApplyTypeChange= value => {\n      applyType = value;\n    };\nconst handleHolidayTypeChange= value => {\n      holidayType = value;\n    };\n\n    const formState = reactive({\n      user: {\n        applyTime: '',\n        applyReason: '',\n      },\n    });\n\n    const onFinish = () => {\n      console.log('Success:', applyType, holidayType,formState.user.applyTime, formState.user.applyReason,myDateString);\n      let userid = localStorage.getItem(\"Userid\");\n     \n     workerApply(userid, applyType, holidayType,formState.user.applyTime, formState.user.applyReason, myDateString).then (\n       response =>{\n\n         if (response['code'] == 1){\n           message.error('提交成功')\n          //  submit_message.value = '提交成功'\n          //  formState.user.applyReason = \"\"\n          //  formState.user.applyTime=\"\"\n\n         }\n         else{\n          //  submit_message.value = '提交失败'\n          message.error('提交失败')\n         }\n       },response=>{\n         message.error('提交提交失败，服务器访问错误！')\n       }\n       \n       )\n\n    };\n\n\n    return {\n      holidayType,\n      applyType,\nhandleApplyTypeChange,\nhandleHolidayTypeChange,\n      formState,\n      onFinish,\n      layout,\n      validateMessages,\n      onRangeChange,\n      onRangeOk,\n      myDateString,\n      myData,\n      focus,\n      handleChange,\n      value1: ref('公休'),\n      options1,\n      value2: ref('公休请假'),\n      options2,\n      submit_message,\n    \n    };\n  },\n\n});\n</script>\n"]},"metadata":{},"sourceType":"module"}