{"ast":null,"code":"import { usePagination } from 'vue-request';\nimport { getworkerApplyHistory } from '../../api/api.js';\nimport { computed, defineComponent } from 'vue';\nimport { cloneDeep } from 'lodash-es';\nimport axios from 'axios';\nconst columns = [//   {\n//   title: '姓名',\n//   dataIndex: 'name',\n//   sorter: true,\n//   width: '5%',\n// },\n// {\n//   title: '科室',\n//   dataIndex: 'name',\n//   sorter: true,\n//   width: '5%',\n// } \n// ,\n{\n  title: '序号',\n  dataIndex: 'id',\n  sorter: true,\n  width: '8%'\n}, {\n  title: '开始时间',\n  dataIndex: 'name',\n  sorter: true,\n  width: '8%'\n}, {\n  title: '结束时间',\n  dataIndex: 'name',\n  sorter: true,\n  width: '8%'\n}, {\n  title: '申请时长',\n  dataIndex: 'name',\n  sorter: true,\n  width: '8%'\n}, {\n  title: '休假状态',\n  dataIndex: 'name',\n  filters: [{\n    text: '公休',\n    value: '公休'\n  }, {\n    text: '值班加班',\n    value: '值班加班'\n  }],\n  sorter: true,\n  width: '8%'\n}, {\n  title: '假期种类',\n  dataIndex: 'name',\n  filters: [{\n    text: '公休请假',\n    value: '公休请假'\n  }, {\n    text: '加班换积休',\n    value: '加班换积休'\n  }, {\n    text: '值班换积休',\n    value: '值班换积休'\n  }],\n  sorter: true,\n  width: '8%'\n}, {\n  title: '申请原因',\n  dataIndex: 'name',\n  sorter: true,\n  width: '10%'\n}, {\n  title: '审批状态',\n  dataIndex: 'name',\n  sorter: true,\n  width: '10%',\n  filters: [{\n    text: '通过',\n    value: '通过'\n  }, {\n    text: '不通过',\n    value: '不通过'\n  }, {\n    text: '未审批',\n    value: '未审批'\n  }]\n}, {\n  title: '批注',\n  dataIndex: 'name',\n  sorter: true,\n  width: '10%'\n}, {\n  title: '操作',\n  dataIndex: 'operation'\n} // ,\n// {\n//   title: '申请类型',\n//   dataIndex: 'name',\n//   sorter: true,\n//   width: '10%',\n// }  \n// ,\n// {\n//   title: 'Gender',\n//   dataIndex: 'gender',\n//   filters: [{\n//     text: 'Male',\n//     value: 'male',\n//   }, {\n//     text: 'Female',\n//     value: 'female',\n//   }],\n//   width: '20%',\n// }, {\n//   title: 'Email',\n//   dataIndex: 'email',\n// }\n];\n\nconst queryData = params => {\n  //  console.log(params);\n  // return getworkerApplyHistory(2);\n  // var h = axios.get('https://randomuser.me/api?noinfo', {\n  //   params,\n  // });\n  // console.log('hhhh',h)\n  var h = {\n    \"results\": [{\n      \"gender\": \"male\",\n      \"name\": {\n        \"title\": \"Mr\",\n        \"first\": \"Brayden\",\n        \"last\": \"Silva\"\n      },\n      \"location\": {\n        \"street\": {\n          \"number\": 66,\n          \"name\": \"Parker Rd\"\n        },\n        \"city\": \"Palmdale\",\n        \"state\": \"Indiana\",\n        \"country\": \"United States\",\n        \"postcode\": 66722,\n        \"coordinates\": {\n          \"latitude\": \"85.7934\",\n          \"longitude\": \"-102.3133\"\n        },\n        \"timezone\": {\n          \"offset\": \"-10:00\",\n          \"description\": \"Hawaii\"\n        }\n      },\n      \"email\": \"brayden.silva@example.com\",\n      \"login\": {\n        \"uuid\": \"1d109a4a-f980-490e-a65a-5de2e2209201\",\n        \"username\": \"greenmouse401\",\n        \"password\": \"hattrick\",\n        \"salt\": \"9KFcLc6P\",\n        \"md5\": \"9973005ef96c4a92c610efec2b906de8\",\n        \"sha1\": \"4d7a89585085b28c9839b29a98a6932d1a340bfe\",\n        \"sha256\": \"f1e61b4d7d2efebc600801d4007bd8142f1940d184f00cc79fa5482e9b1ed5b1\"\n      },\n      \"dob\": {\n        \"date\": \"1991-04-19T12:48:52.215Z\",\n        \"age\": 31\n      },\n      \"registered\": {\n        \"date\": \"2017-11-21T23:28:31.761Z\",\n        \"age\": 5\n      },\n      \"phone\": \"(811)-051-0062\",\n      \"cell\": \"(986)-686-3133\",\n      \"id\": {\n        \"name\": \"SSN\",\n        \"value\": \"919-24-2282\"\n      },\n      \"picture\": {\n        \"large\": \"https://randomuser.me/api/portraits/men/17.jpg\",\n        \"medium\": \"https://randomuser.me/api/portraits/med/men/17.jpg\",\n        \"thumbnail\": \"https://randomuser.me/api/portraits/thumb/men/17.jpg\"\n      },\n      \"nat\": \"US\"\n    }]\n  };\n  return h;\n};\n\nexport default defineComponent({\n  setup() {\n    const onDelete = key => {\n      dataSource.value = dataSource.value.filter(item => item.key !== key);\n    };\n\n    const {\n      data: dataSource,\n      run,\n      loading,\n      current,\n      pageSize\n    } = usePagination(queryData, {\n      formatResult: res => res.data.results,\n      pagination: {\n        currentKey: 'page',\n        pageSizeKey: 'results'\n      }\n    });\n    const pagination = computed(() => ({\n      total: 200,\n      current: current.value,\n      pageSize: pageSize.value\n    }));\n\n    const handleTableChange = (pag, filters, sorter) => {\n      run({\n        results: pag.pageSize,\n        page: pag?.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order,\n        ...filters\n      });\n    };\n\n    return {\n      dataSource,\n      pagination,\n      loading,\n      columns,\n      handleTableChange\n    };\n  }\n\n});","map":{"version":3,"mappings":"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","names":["usePagination","getworkerApplyHistory","computed","defineComponent","cloneDeep","axios","columns","title","dataIndex","sorter","width","filters","text","value","queryData","params","h","setup","onDelete","key","dataSource","filter","item","data","run","loading","current","pageSize","formatResult","res","results","pagination","currentKey","pageSizeKey","total","handleTableChange","pag","page","sortField","field","sortOrder","order"],"sourceRoot":"","sources":["/Users/lyong/Desktop/myproj/appfront/src/components/worker/workerApplyHistory.vue"],"sourcesContent":["<template>\n  <a-table\n    :columns=\"columns\"\n    :row-key=\"record => record.login.uuid\"\n    :data-source=\"dataSource\"\n    :pagination=\"pagination\"\n    :loading=\"loading\"\n    @change=\"handleTableChange\"\n  >\n    <template #bodyCell=\"{ column, text }\">\n      <template v-if=\"column.dataIndex === 'name'\">{{ text.first }} {{ text.last }}</template>\n    </template>\n\n<template v-if=\"column.dataIndex === 'operation'\">\n        <a-popconfirm\n          v-if=\"dataSource.length\"\n          title=\"确定删除吗?\"\n          @confirm=\"onDelete(record.key)\"\n        >\n          <a>删除</a>\n        </a-popconfirm>\n      </template>\n\n\n  </a-table>\n</template>\n\n<script>\nimport { usePagination } from 'vue-request';\nimport{getworkerApplyHistory} from '../../api/api.js'\nimport { computed, defineComponent } from 'vue';\nimport { cloneDeep } from 'lodash-es';\nimport axios from 'axios';\nconst columns = [\n//   {\n//   title: '姓名',\n//   dataIndex: 'name',\n//   sorter: true,\n//   width: '5%',\n// },\n// {\n//   title: '科室',\n//   dataIndex: 'name',\n//   sorter: true,\n//   width: '5%',\n// } \n// ,\n{\n  title: '序号',\n  dataIndex: 'id',\n  sorter: true,\n  width: '8%',\n} ,\n{\n  title: '开始时间',\n  dataIndex: 'name',\n  sorter: true,\n  width: '8%',\n} ,\n{\n  title: '结束时间',\n  dataIndex: 'name',\n  sorter: true,\n  width: '8%',\n} \n,\n{\n  title: '申请时长',\n  dataIndex: 'name',\n  sorter: true,\n  width: '8%',\n}\n,\n{\n  title: '休假状态',\n  dataIndex: 'name',\n  filters: [{\n    text: '公休',\n    value: '公休',\n  }, {\n    text: '值班加班',\n    value: '值班加班',\n  }],\n  sorter: true,\n  width: '8%',\n},\n{\n  title: '假期种类',\n  dataIndex: 'name',\n  filters: [{\n    text: '公休请假',\n    value: '公休请假',\n  }, {\n    text: '加班换积休',\n    value: '加班换积休',\n  },\n  {\n    text: '值班换积休',\n    value: '值班换积休',\n  }\n  ],\n  sorter: true,\n  width: '8%',\n}\n,\n{\n  title: '申请原因',\n  dataIndex: 'name',\n  sorter: true,\n  width: '10%',\n},\n{\n  title: '审批状态',\n  dataIndex: 'name',\n  sorter: true,\n  width: '10%',\n    filters: [{\n    text: '通过',\n    value: '通过',\n  }, {\n    text: '不通过',\n    value: '不通过',\n  },{\n    text: '未审批',\n    value: '未审批',\n  },\n  \n  ],\n}\n,\n{\n  title: '批注',\n  dataIndex: 'name',\n  sorter: true,\n  width: '10%',\n},\n{\n      title: '操作',\n      dataIndex: 'operation',\n    }\n// ,\n// {\n//   title: '申请类型',\n//   dataIndex: 'name',\n//   sorter: true,\n//   width: '10%',\n// }  \n// ,\n// {\n//   title: 'Gender',\n//   dataIndex: 'gender',\n//   filters: [{\n//     text: 'Male',\n//     value: 'male',\n//   }, {\n//     text: 'Female',\n//     value: 'female',\n//   }],\n//   width: '20%',\n// }, {\n//   title: 'Email',\n//   dataIndex: 'email',\n// }\n];\n\nconst queryData = params => {\n  //  console.log(params);\n  // return getworkerApplyHistory(2);\n  // var h = axios.get('https://randomuser.me/api?noinfo', {\n  //   params,\n  // });\n  // console.log('hhhh',h)\n  var h = {\n    \"results\": [\n        {\n            \"gender\": \"male\",\n            \"name\": {\n                \"title\": \"Mr\",\n                \"first\": \"Brayden\",\n                \"last\": \"Silva\"\n            },\n            \"location\": {\n                \"street\": {\n                    \"number\": 66,\n                    \"name\": \"Parker Rd\"\n                },\n                \"city\": \"Palmdale\",\n                \"state\": \"Indiana\",\n                \"country\": \"United States\",\n                \"postcode\": 66722,\n                \"coordinates\": {\n                    \"latitude\": \"85.7934\",\n                    \"longitude\": \"-102.3133\"\n                },\n                \"timezone\": {\n                    \"offset\": \"-10:00\",\n                    \"description\": \"Hawaii\"\n                }\n            },\n            \"email\": \"brayden.silva@example.com\",\n            \"login\": {\n                \"uuid\": \"1d109a4a-f980-490e-a65a-5de2e2209201\",\n                \"username\": \"greenmouse401\",\n                \"password\": \"hattrick\",\n                \"salt\": \"9KFcLc6P\",\n                \"md5\": \"9973005ef96c4a92c610efec2b906de8\",\n                \"sha1\": \"4d7a89585085b28c9839b29a98a6932d1a340bfe\",\n                \"sha256\": \"f1e61b4d7d2efebc600801d4007bd8142f1940d184f00cc79fa5482e9b1ed5b1\"\n            },\n            \"dob\": {\n                \"date\": \"1991-04-19T12:48:52.215Z\",\n                \"age\": 31\n            },\n            \"registered\": {\n                \"date\": \"2017-11-21T23:28:31.761Z\",\n                \"age\": 5\n            },\n            \"phone\": \"(811)-051-0062\",\n            \"cell\": \"(986)-686-3133\",\n            \"id\": {\n                \"name\": \"SSN\",\n                \"value\": \"919-24-2282\"\n            },\n            \"picture\": {\n                \"large\": \"https://randomuser.me/api/portraits/men/17.jpg\",\n                \"medium\": \"https://randomuser.me/api/portraits/med/men/17.jpg\",\n                \"thumbnail\": \"https://randomuser.me/api/portraits/thumb/men/17.jpg\"\n            },\n            \"nat\": \"US\"\n        }\n    ]\n}\n  return h\n};\n\nexport default defineComponent({\n  setup() {\n   const onDelete = key => {\n      dataSource.value = dataSource.value.filter(item => item.key !== key);\n    };\n\n    const {\n      data: dataSource,\n      run,\n      loading,\n      current,\n      pageSize,\n    } = usePagination(queryData, {\n      formatResult: res => res.data.results,\n      pagination: {\n        currentKey: 'page',\n        pageSizeKey: 'results',\n      },\n    });\n    const pagination = computed(() => ({\n      total: 200,\n      current: current.value,\n      pageSize: pageSize.value,\n    }));\n\n    const handleTableChange = (pag, filters, sorter) => {\n      run({\n        results: pag.pageSize,\n        page: pag?.current,\n        sortField: sorter.field,\n        sortOrder: sorter.order,\n        ...filters,\n      });\n    };\n\n    return {\n      dataSource,\n      pagination,\n      loading,\n      columns,\n      handleTableChange,\n    };\n  },\n\n});\n</script>\n"]},"metadata":{},"sourceType":"module"}