{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { getComponent, findDOMNode } from '../_util/props-util';\nimport PropTypes from '../_util/vue-types';\nimport arrayTreeFilter from 'array-tree-filter';\nimport BaseMixin from '../_util/BaseMixin';\nimport isEqual from 'lodash-es/isEqual';\nexport default {\n  name: 'CascaderMenus',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: {\n    value: PropTypes.array.def([]),\n    activeValue: PropTypes.array.def([]),\n    options: PropTypes.array,\n    prefixCls: PropTypes.string.def('rc-cascader-menus'),\n    expandTrigger: PropTypes.string.def('click'),\n    // onSelect: PropTypes.func,\n    visible: PropTypes.looseBool.def(false),\n    dropdownMenuColumnStyle: PropTypes.object,\n    defaultFieldNames: PropTypes.object,\n    fieldNames: PropTypes.object,\n    expandIcon: PropTypes.any,\n    loadingIcon: PropTypes.any\n  },\n  data: function data() {\n    this.menuItems = {};\n    return {};\n  },\n  watch: {\n    visible: function visible(val) {\n      var _this = this;\n\n      if (val) {\n        this.$nextTick(function () {\n          _this.scrollActiveItemToView();\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.scrollActiveItemToView();\n    });\n  },\n  methods: {\n    getFieldName: function getFieldName(name) {\n      var _this$$props = this.$props,\n          fieldNames = _this$$props.fieldNames,\n          defaultFieldNames = _this$$props.defaultFieldNames; // 防止只设置单个属性的名字\n\n      return fieldNames[name] || defaultFieldNames[name];\n    },\n    getOption: function getOption(option, menuIndex) {\n      var _this3 = this;\n\n      var prefixCls = this.prefixCls,\n          expandTrigger = this.expandTrigger;\n      var loadingIcon = getComponent(this, 'loadingIcon');\n      var expandIcon = getComponent(this, 'expandIcon');\n\n      var onSelect = function onSelect(e) {\n        _this3.__emit('select', option, menuIndex, e);\n      };\n\n      var onItemDoubleClick = function onItemDoubleClick(e) {\n        _this3.__emit('itemDoubleClick', option, menuIndex, e);\n      };\n\n      var key = option[this.getFieldName('value')];\n      var expandProps = {\n        onClick: onSelect,\n        onDblclick: onItemDoubleClick\n      };\n      var menuItemCls = \"\".concat(prefixCls, \"-menu-item\");\n      var expandIconNode = null;\n      var hasChildren = option[this.getFieldName('children')] && option[this.getFieldName('children')].length > 0;\n\n      if (hasChildren || option.isLeaf === false) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-expand\");\n\n        if (!option.loading) {\n          expandIconNode = _createVNode(\"span\", {\n            \"class\": \"\".concat(prefixCls, \"-menu-item-expand-icon\")\n          }, [expandIcon]);\n        }\n      }\n\n      if (expandTrigger === 'hover' && (hasChildren || option.isLeaf === false)) {\n        expandProps = {\n          onMouseenter: this.delayOnSelect.bind(this, onSelect),\n          onMouseleave: this.delayOnSelect.bind(this),\n          onClick: onSelect\n        };\n      }\n\n      if (this.isActiveOption(option, menuIndex)) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-active\");\n        expandProps.ref = this.saveMenuItem(menuIndex);\n      }\n\n      if (option.disabled) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-disabled\");\n      }\n\n      var loadingIconNode = null;\n\n      if (option.loading) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-loading\");\n        loadingIconNode = loadingIcon || null;\n      }\n\n      var title = '';\n\n      if (option.title) {\n        title = option.title;\n      } else if (typeof option[this.getFieldName('label')] === 'string') {\n        title = option[this.getFieldName('label')];\n      }\n\n      return _createVNode(\"li\", _objectSpread(_objectSpread({\n        \"key\": Array.isArray(key) ? key.join('__ant__') : key,\n        \"class\": menuItemCls,\n        \"title\": title\n      }, expandProps), {}, {\n        \"role\": \"menuitem\",\n        \"onMousedown\": function onMousedown(e) {\n          return e.preventDefault();\n        }\n      }), [option[this.getFieldName('label')], expandIconNode, loadingIconNode]);\n    },\n    getActiveOptions: function getActiveOptions(values) {\n      var _this4 = this;\n\n      var activeValue = values || this.activeValue;\n      var options = this.options;\n      return arrayTreeFilter(options, function (o, level) {\n        return isEqual(o[_this4.getFieldName('value')], activeValue[level]);\n      }, {\n        childrenKeyName: this.getFieldName('children')\n      });\n    },\n    getShowOptions: function getShowOptions() {\n      var _this5 = this;\n\n      var options = this.options;\n      var result = this.getActiveOptions().map(function (activeOption) {\n        return activeOption[_this5.getFieldName('children')];\n      }).filter(function (activeOption) {\n        return !!activeOption;\n      });\n      result.unshift(options);\n      return result;\n    },\n    delayOnSelect: function delayOnSelect(onSelect) {\n      var _this6 = this;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.delayTimer) {\n        clearTimeout(this.delayTimer);\n        this.delayTimer = null;\n      }\n\n      if (typeof onSelect === 'function') {\n        this.delayTimer = setTimeout(function () {\n          onSelect(args);\n          _this6.delayTimer = null;\n        }, 150);\n      }\n    },\n    scrollActiveItemToView: function scrollActiveItemToView() {\n      // scroll into view\n      var optionsLength = this.getShowOptions().length;\n\n      for (var i = 0; i < optionsLength; i++) {\n        var itemComponent = this.menuItems[i];\n\n        if (itemComponent) {\n          var target = findDOMNode(itemComponent);\n          target.parentNode.scrollTop = target.offsetTop;\n        }\n      }\n    },\n    isActiveOption: function isActiveOption(option, menuIndex) {\n      var _this$activeValue = this.activeValue,\n          activeValue = _this$activeValue === void 0 ? [] : _this$activeValue;\n      return isEqual(activeValue[menuIndex], option[this.getFieldName('value')]);\n    },\n    saveMenuItem: function saveMenuItem(index) {\n      var _this7 = this;\n\n      return function (node) {\n        _this7.menuItems[index] = node;\n      };\n    }\n  },\n  render: function render() {\n    var _this8 = this;\n\n    var prefixCls = this.prefixCls,\n        dropdownMenuColumnStyle = this.dropdownMenuColumnStyle;\n    return _createVNode(\"div\", null, [this.getShowOptions().map(function (options, menuIndex) {\n      return _createVNode(\"ul\", {\n        \"class\": \"\".concat(prefixCls, \"-menu\"),\n        \"key\": menuIndex,\n        \"style\": dropdownMenuColumnStyle\n      }, [options.map(function (option) {\n        return _this8.getOption(option, menuIndex);\n      })]);\n    })]);\n  }\n};","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/vc-cascader/Menus.js"],"names":["_objectSpread","createVNode","_createVNode","getComponent","findDOMNode","PropTypes","arrayTreeFilter","BaseMixin","isEqual","name","mixins","inheritAttrs","props","value","array","def","activeValue","options","prefixCls","string","expandTrigger","visible","looseBool","dropdownMenuColumnStyle","object","defaultFieldNames","fieldNames","expandIcon","any","loadingIcon","data","menuItems","watch","val","_this","$nextTick","scrollActiveItemToView","mounted","_this2","methods","getFieldName","_this$$props","$props","getOption","option","menuIndex","_this3","onSelect","e","__emit","onItemDoubleClick","key","expandProps","onClick","onDblclick","menuItemCls","concat","expandIconNode","hasChildren","length","isLeaf","loading","onMouseenter","delayOnSelect","bind","onMouseleave","isActiveOption","ref","saveMenuItem","disabled","loadingIconNode","title","Array","isArray","join","onMousedown","preventDefault","getActiveOptions","values","_this4","o","level","childrenKeyName","getShowOptions","_this5","result","map","activeOption","filter","unshift","_this6","_len","arguments","args","_key","delayTimer","clearTimeout","setTimeout","optionsLength","i","itemComponent","target","parentNode","scrollTop","offsetTop","_this$activeValue","index","_this7","node","render","_this8"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode } from \"vue\";\nimport { getComponent, findDOMNode } from '../_util/props-util';\nimport PropTypes from '../_util/vue-types';\nimport arrayTreeFilter from 'array-tree-filter';\nimport BaseMixin from '../_util/BaseMixin';\nimport isEqual from 'lodash-es/isEqual';\nexport default {\n  name: 'CascaderMenus',\n  mixins: [BaseMixin],\n  inheritAttrs: false,\n  props: {\n    value: PropTypes.array.def([]),\n    activeValue: PropTypes.array.def([]),\n    options: PropTypes.array,\n    prefixCls: PropTypes.string.def('rc-cascader-menus'),\n    expandTrigger: PropTypes.string.def('click'),\n    // onSelect: PropTypes.func,\n    visible: PropTypes.looseBool.def(false),\n    dropdownMenuColumnStyle: PropTypes.object,\n    defaultFieldNames: PropTypes.object,\n    fieldNames: PropTypes.object,\n    expandIcon: PropTypes.any,\n    loadingIcon: PropTypes.any\n  },\n  data: function data() {\n    this.menuItems = {};\n    return {};\n  },\n  watch: {\n    visible: function visible(val) {\n      var _this = this;\n\n      if (val) {\n        this.$nextTick(function () {\n          _this.scrollActiveItemToView();\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this2 = this;\n\n    this.$nextTick(function () {\n      _this2.scrollActiveItemToView();\n    });\n  },\n  methods: {\n    getFieldName: function getFieldName(name) {\n      var _this$$props = this.$props,\n          fieldNames = _this$$props.fieldNames,\n          defaultFieldNames = _this$$props.defaultFieldNames; // 防止只设置单个属性的名字\n\n      return fieldNames[name] || defaultFieldNames[name];\n    },\n    getOption: function getOption(option, menuIndex) {\n      var _this3 = this;\n\n      var prefixCls = this.prefixCls,\n          expandTrigger = this.expandTrigger;\n      var loadingIcon = getComponent(this, 'loadingIcon');\n      var expandIcon = getComponent(this, 'expandIcon');\n\n      var onSelect = function onSelect(e) {\n        _this3.__emit('select', option, menuIndex, e);\n      };\n\n      var onItemDoubleClick = function onItemDoubleClick(e) {\n        _this3.__emit('itemDoubleClick', option, menuIndex, e);\n      };\n\n      var key = option[this.getFieldName('value')];\n      var expandProps = {\n        onClick: onSelect,\n        onDblclick: onItemDoubleClick\n      };\n      var menuItemCls = \"\".concat(prefixCls, \"-menu-item\");\n      var expandIconNode = null;\n      var hasChildren = option[this.getFieldName('children')] && option[this.getFieldName('children')].length > 0;\n\n      if (hasChildren || option.isLeaf === false) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-expand\");\n\n        if (!option.loading) {\n          expandIconNode = _createVNode(\"span\", {\n            \"class\": \"\".concat(prefixCls, \"-menu-item-expand-icon\")\n          }, [expandIcon]);\n        }\n      }\n\n      if (expandTrigger === 'hover' && (hasChildren || option.isLeaf === false)) {\n        expandProps = {\n          onMouseenter: this.delayOnSelect.bind(this, onSelect),\n          onMouseleave: this.delayOnSelect.bind(this),\n          onClick: onSelect\n        };\n      }\n\n      if (this.isActiveOption(option, menuIndex)) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-active\");\n        expandProps.ref = this.saveMenuItem(menuIndex);\n      }\n\n      if (option.disabled) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-disabled\");\n      }\n\n      var loadingIconNode = null;\n\n      if (option.loading) {\n        menuItemCls += \" \".concat(prefixCls, \"-menu-item-loading\");\n        loadingIconNode = loadingIcon || null;\n      }\n\n      var title = '';\n\n      if (option.title) {\n        title = option.title;\n      } else if (typeof option[this.getFieldName('label')] === 'string') {\n        title = option[this.getFieldName('label')];\n      }\n\n      return _createVNode(\"li\", _objectSpread(_objectSpread({\n        \"key\": Array.isArray(key) ? key.join('__ant__') : key,\n        \"class\": menuItemCls,\n        \"title\": title\n      }, expandProps), {}, {\n        \"role\": \"menuitem\",\n        \"onMousedown\": function onMousedown(e) {\n          return e.preventDefault();\n        }\n      }), [option[this.getFieldName('label')], expandIconNode, loadingIconNode]);\n    },\n    getActiveOptions: function getActiveOptions(values) {\n      var _this4 = this;\n\n      var activeValue = values || this.activeValue;\n      var options = this.options;\n      return arrayTreeFilter(options, function (o, level) {\n        return isEqual(o[_this4.getFieldName('value')], activeValue[level]);\n      }, {\n        childrenKeyName: this.getFieldName('children')\n      });\n    },\n    getShowOptions: function getShowOptions() {\n      var _this5 = this;\n\n      var options = this.options;\n      var result = this.getActiveOptions().map(function (activeOption) {\n        return activeOption[_this5.getFieldName('children')];\n      }).filter(function (activeOption) {\n        return !!activeOption;\n      });\n      result.unshift(options);\n      return result;\n    },\n    delayOnSelect: function delayOnSelect(onSelect) {\n      var _this6 = this;\n\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n\n      if (this.delayTimer) {\n        clearTimeout(this.delayTimer);\n        this.delayTimer = null;\n      }\n\n      if (typeof onSelect === 'function') {\n        this.delayTimer = setTimeout(function () {\n          onSelect(args);\n          _this6.delayTimer = null;\n        }, 150);\n      }\n    },\n    scrollActiveItemToView: function scrollActiveItemToView() {\n      // scroll into view\n      var optionsLength = this.getShowOptions().length;\n\n      for (var i = 0; i < optionsLength; i++) {\n        var itemComponent = this.menuItems[i];\n\n        if (itemComponent) {\n          var target = findDOMNode(itemComponent);\n          target.parentNode.scrollTop = target.offsetTop;\n        }\n      }\n    },\n    isActiveOption: function isActiveOption(option, menuIndex) {\n      var _this$activeValue = this.activeValue,\n          activeValue = _this$activeValue === void 0 ? [] : _this$activeValue;\n      return isEqual(activeValue[menuIndex], option[this.getFieldName('value')]);\n    },\n    saveMenuItem: function saveMenuItem(index) {\n      var _this7 = this;\n\n      return function (node) {\n        _this7.menuItems[index] = node;\n      };\n    }\n  },\n  render: function render() {\n    var _this8 = this;\n\n    var prefixCls = this.prefixCls,\n        dropdownMenuColumnStyle = this.dropdownMenuColumnStyle;\n    return _createVNode(\"div\", null, [this.getShowOptions().map(function (options, menuIndex) {\n      return _createVNode(\"ul\", {\n        \"class\": \"\".concat(prefixCls, \"-menu\"),\n        \"key\": menuIndex,\n        \"style\": dropdownMenuColumnStyle\n      }, [options.map(function (option) {\n        return _this8.getOption(option, menuIndex);\n      })]);\n    })]);\n  }\n};"]},"metadata":{},"sourceType":"module"}