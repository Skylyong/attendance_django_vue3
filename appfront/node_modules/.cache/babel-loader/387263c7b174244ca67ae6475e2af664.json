{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport KeyCode from '../_util/KeyCode';\nimport PropTypes from '../_util/vue-types';\nimport TextArea from '../input/TextArea';\nimport EnterOutlined from '@ant-design/icons-vue/EnterOutlined';\nimport { defineComponent, ref, reactive, watch, onMounted } from 'vue';\nvar Editable = defineComponent({\n  name: 'Editable',\n  props: {\n    prefixCls: PropTypes.string,\n    value: PropTypes.string,\n    maxlength: PropTypes.number,\n    autoSize: PropTypes.oneOfType([PropTypes.looseBool, PropTypes.object]),\n    onSave: PropTypes.func,\n    onCancel: PropTypes.func,\n    onEnd: PropTypes.func,\n    onChange: PropTypes.func,\n    originContent: PropTypes.string\n  },\n  emits: ['save', 'cancel', 'end', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var state = reactive({\n      current: props.value || '',\n      lastKeyCode: undefined,\n      inComposition: false,\n      cancelFlag: false\n    });\n    watch(function () {\n      return props.value;\n    }, function (current) {\n      state.current = current;\n    });\n    var textArea = ref();\n    onMounted(function () {\n      var _a;\n\n      if (textArea.value) {\n        var resizableTextArea = (_a = textArea.value) === null || _a === void 0 ? void 0 : _a.resizableTextArea;\n        var innerTextArea = resizableTextArea === null || resizableTextArea === void 0 ? void 0 : resizableTextArea.textArea;\n        innerTextArea.focus();\n        var length = innerTextArea.value.length;\n        innerTextArea.setSelectionRange(length, length);\n      }\n    });\n\n    function saveTextAreaRef(node) {\n      textArea.value = node;\n    }\n\n    function onChange(_ref2) {\n      var value = _ref2.target.value;\n      state.current = value.replace(/[\\r\\n]/g, '');\n      emit('change', state.current);\n    }\n\n    function onCompositionStart() {\n      state.inComposition = true;\n    }\n\n    function onCompositionEnd() {\n      state.inComposition = false;\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n      } // We don't record keyCode when IME is using\n\n\n      if (state.inComposition) return;\n      state.lastKeyCode = keyCode;\n    }\n\n    function onKeyUp(e) {\n      var keyCode = e.keyCode,\n          ctrlKey = e.ctrlKey,\n          altKey = e.altKey,\n          metaKey = e.metaKey,\n          shiftKey = e.shiftKey; // Check if it's a real key\n\n      if (state.lastKeyCode === keyCode && !state.inComposition && !ctrlKey && !altKey && !metaKey && !shiftKey) {\n        if (keyCode === KeyCode.ENTER) {\n          confirmChange();\n          emit('end');\n        } else if (keyCode === KeyCode.ESC) {\n          state.current = props.originContent;\n          emit('cancel');\n        }\n      }\n    }\n\n    function onBlur() {\n      confirmChange();\n      emit('end');\n    }\n\n    function confirmChange() {\n      emit('save', state.current.trim());\n    }\n\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(props.prefixCls, \" \").concat(props.prefixCls, \"-edit-content\")\n      }, [_createVNode(TextArea, {\n        \"ref\": saveTextAreaRef,\n        \"maxlength\": props.maxlength,\n        \"value\": state.current,\n        \"onChange\": onChange,\n        \"onKeydown\": onKeyDown,\n        \"onKeyup\": onKeyUp,\n        \"onCompositionstart\": onCompositionStart,\n        \"onCompositionend\": onCompositionEnd,\n        \"onBlur\": onBlur,\n        \"autoSize\": props.autoSize === undefined || props.autoSize\n      }, null), _createVNode(EnterOutlined, {\n        \"class\": \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }, null)]);\n    };\n  }\n});\nexport default Editable;","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/node_modules/ant-design-vue/es/typography/Editable.js"],"names":["createVNode","_createVNode","KeyCode","PropTypes","TextArea","EnterOutlined","defineComponent","ref","reactive","watch","onMounted","Editable","name","props","prefixCls","string","value","maxlength","number","autoSize","oneOfType","looseBool","object","onSave","func","onCancel","onEnd","onChange","originContent","emits","setup","_ref","emit","state","current","lastKeyCode","undefined","inComposition","cancelFlag","textArea","_a","resizableTextArea","innerTextArea","focus","length","setSelectionRange","saveTextAreaRef","node","_ref2","target","replace","onCompositionStart","onCompositionEnd","onKeyDown","e","keyCode","ENTER","preventDefault","onKeyUp","ctrlKey","altKey","metaKey","shiftKey","confirmChange","ESC","onBlur","trim","concat"],"mappings":"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","sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport KeyCode from '../_util/KeyCode';\nimport PropTypes from '../_util/vue-types';\nimport TextArea from '../input/TextArea';\nimport EnterOutlined from '@ant-design/icons-vue/EnterOutlined';\nimport { defineComponent, ref, reactive, watch, onMounted } from 'vue';\nvar Editable = defineComponent({\n  name: 'Editable',\n  props: {\n    prefixCls: PropTypes.string,\n    value: PropTypes.string,\n    maxlength: PropTypes.number,\n    autoSize: PropTypes.oneOfType([PropTypes.looseBool, PropTypes.object]),\n    onSave: PropTypes.func,\n    onCancel: PropTypes.func,\n    onEnd: PropTypes.func,\n    onChange: PropTypes.func,\n    originContent: PropTypes.string\n  },\n  emits: ['save', 'cancel', 'end', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit;\n    var state = reactive({\n      current: props.value || '',\n      lastKeyCode: undefined,\n      inComposition: false,\n      cancelFlag: false\n    });\n    watch(function () {\n      return props.value;\n    }, function (current) {\n      state.current = current;\n    });\n    var textArea = ref();\n    onMounted(function () {\n      var _a;\n\n      if (textArea.value) {\n        var resizableTextArea = (_a = textArea.value) === null || _a === void 0 ? void 0 : _a.resizableTextArea;\n        var innerTextArea = resizableTextArea === null || resizableTextArea === void 0 ? void 0 : resizableTextArea.textArea;\n        innerTextArea.focus();\n        var length = innerTextArea.value.length;\n        innerTextArea.setSelectionRange(length, length);\n      }\n    });\n\n    function saveTextAreaRef(node) {\n      textArea.value = node;\n    }\n\n    function onChange(_ref2) {\n      var value = _ref2.target.value;\n      state.current = value.replace(/[\\r\\n]/g, '');\n      emit('change', state.current);\n    }\n\n    function onCompositionStart() {\n      state.inComposition = true;\n    }\n\n    function onCompositionEnd() {\n      state.inComposition = false;\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n      } // We don't record keyCode when IME is using\n\n\n      if (state.inComposition) return;\n      state.lastKeyCode = keyCode;\n    }\n\n    function onKeyUp(e) {\n      var keyCode = e.keyCode,\n          ctrlKey = e.ctrlKey,\n          altKey = e.altKey,\n          metaKey = e.metaKey,\n          shiftKey = e.shiftKey; // Check if it's a real key\n\n      if (state.lastKeyCode === keyCode && !state.inComposition && !ctrlKey && !altKey && !metaKey && !shiftKey) {\n        if (keyCode === KeyCode.ENTER) {\n          confirmChange();\n          emit('end');\n        } else if (keyCode === KeyCode.ESC) {\n          state.current = props.originContent;\n          emit('cancel');\n        }\n      }\n    }\n\n    function onBlur() {\n      confirmChange();\n      emit('end');\n    }\n\n    function confirmChange() {\n      emit('save', state.current.trim());\n    }\n\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": \"\".concat(props.prefixCls, \" \").concat(props.prefixCls, \"-edit-content\")\n      }, [_createVNode(TextArea, {\n        \"ref\": saveTextAreaRef,\n        \"maxlength\": props.maxlength,\n        \"value\": state.current,\n        \"onChange\": onChange,\n        \"onKeydown\": onKeyDown,\n        \"onKeyup\": onKeyUp,\n        \"onCompositionstart\": onCompositionStart,\n        \"onCompositionend\": onCompositionEnd,\n        \"onBlur\": onBlur,\n        \"autoSize\": props.autoSize === undefined || props.autoSize\n      }, null), _createVNode(EnterOutlined, {\n        \"class\": \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }, null)]);\n    };\n  }\n});\nexport default Editable;"]},"metadata":{},"sourceType":"module"}