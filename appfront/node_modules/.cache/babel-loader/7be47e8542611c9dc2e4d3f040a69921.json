{"ast":null,"code":"import { inBrowser } from \"../utils\";\nimport { onDeactivated, onBeforeUnmount } from \"vue\";\nimport { onMountedOrActivated } from \"@vant/use\";\n\nfunction useVisibilityChange(target, onChange) {\n  if (!inBrowser || !window.IntersectionObserver) {\n    return;\n  }\n\n  const observer = new IntersectionObserver(entries => {\n    onChange(entries[0].intersectionRatio > 0);\n  }, {\n    root: document.body\n  });\n\n  const observe = () => {\n    if (target.value) {\n      observer.observe(target.value);\n    }\n  };\n\n  const unobserve = () => {\n    if (target.value) {\n      observer.unobserve(target.value);\n    }\n  };\n\n  onDeactivated(unobserve);\n  onBeforeUnmount(unobserve);\n  onMountedOrActivated(observe);\n}\n\nexport { useVisibilityChange };","map":{"version":3,"sources":["/Users/lyong/Desktop/myproj/appfront/node_modules/vant/es/composables/use-visibility-change.js"],"names":["inBrowser","onDeactivated","onBeforeUnmount","onMountedOrActivated","useVisibilityChange","target","onChange","window","IntersectionObserver","observer","entries","intersectionRatio","root","document","body","observe","value","unobserve"],"mappings":"AAAA,SAASA,SAAT,QAA0B,UAA1B;AACA,SAASC,aAAT,EAAwBC,eAAxB,QAA+C,KAA/C;AACA,SAASC,oBAAT,QAAqC,WAArC;;AACA,SAASC,mBAAT,CAA6BC,MAA7B,EAAqCC,QAArC,EAA+C;AAC7C,MAAI,CAACN,SAAD,IAAc,CAACO,MAAM,CAACC,oBAA1B,EAAgD;AAC9C;AACD;;AACD,QAAMC,QAAQ,GAAG,IAAID,oBAAJ,CAA0BE,OAAD,IAAa;AACrDJ,IAAAA,QAAQ,CAACI,OAAO,CAAC,CAAD,CAAP,CAAWC,iBAAX,GAA+B,CAAhC,CAAR;AACD,GAFgB,EAEd;AAAEC,IAAAA,IAAI,EAAEC,QAAQ,CAACC;AAAjB,GAFc,CAAjB;;AAGA,QAAMC,OAAO,GAAG,MAAM;AACpB,QAAIV,MAAM,CAACW,KAAX,EAAkB;AAChBP,MAAAA,QAAQ,CAACM,OAAT,CAAiBV,MAAM,CAACW,KAAxB;AACD;AACF,GAJD;;AAKA,QAAMC,SAAS,GAAG,MAAM;AACtB,QAAIZ,MAAM,CAACW,KAAX,EAAkB;AAChBP,MAAAA,QAAQ,CAACQ,SAAT,CAAmBZ,MAAM,CAACW,KAA1B;AACD;AACF,GAJD;;AAKAf,EAAAA,aAAa,CAACgB,SAAD,CAAb;AACAf,EAAAA,eAAe,CAACe,SAAD,CAAf;AACAd,EAAAA,oBAAoB,CAACY,OAAD,CAApB;AACD;;AACD,SACEX,mBADF","sourcesContent":["import { inBrowser } from \"../utils\";\nimport { onDeactivated, onBeforeUnmount } from \"vue\";\nimport { onMountedOrActivated } from \"@vant/use\";\nfunction useVisibilityChange(target, onChange) {\n  if (!inBrowser || !window.IntersectionObserver) {\n    return;\n  }\n  const observer = new IntersectionObserver((entries) => {\n    onChange(entries[0].intersectionRatio > 0);\n  }, { root: document.body });\n  const observe = () => {\n    if (target.value) {\n      observer.observe(target.value);\n    }\n  };\n  const unobserve = () => {\n    if (target.value) {\n      observer.unobserve(target.value);\n    }\n  };\n  onDeactivated(unobserve);\n  onBeforeUnmount(unobserve);\n  onMountedOrActivated(observe);\n}\nexport {\n  useVisibilityChange\n};\n"]},"metadata":{},"sourceType":"module"}