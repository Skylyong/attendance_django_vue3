"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_xeUtils=_interopRequireDefault(require("xe-utils")),_dom=require("../../tools/dom"),_utils=require("../../tools/utils"),_log=require("../../tools/log"),_resize=require("../../tools/resize"),_event=require("../../tools/event"),_size=require("../../hooks/size"),_vXETable=require("../../v-x-e-table"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_cell=_interopRequireDefault(require("./cell")),_body=_interopRequireDefault(require("./body")),_props=_interopRequireDefault(require("./props")),_emits=_interopRequireDefault(require("./emits")),_util=require("./util");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var l in t=arguments[r])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__spreadArray=function(e,t){for(var r=0,n=t.length,l=e.length;r<n;r++,l++)e[l]=t[r];return e},isWebkit=_dom.browse["-webkit"]&&!_dom.browse.edge,resizableStorageKey="VXE_TABLE_CUSTOM_COLUMN_WIDTH",visibleStorageKey="VXE_TABLE_CUSTOM_COLUMN_VISIBLE",_default=(0,_vue.defineComponent)({name:"VxeTable",props:_props.default,emits:_emits.default,setup:function($,e){function v(e,t,r){return e=_xeUtils.default.get(e,r),r=_xeUtils.default.get(t,r),!(!(0,_utils.eqEmptyValue)(e)||!(0,_utils.eqEmptyValue)(r))||(_xeUtils.default.isString(e)||_xeUtils.default.isNumber(e)?""+e==""+r:_xeUtils.default.isEqual(e,r))}function c(e){var t=Ue.value.orders,e=e.order||null,e=t.indexOf(e)+1;return t[e<t.length?e:0]}function t(e,a,i){var t,u;e&&(t=$.treeConfig,u=B.visibleColumn,t?(0,_log.errLog)("vxe.error.noTree",["merge-footer-items"]):(e=!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){var t,r=e.row,n=e.col,l=e.rowspan,o=e.colspan;i&&_xeUtils.default.isNumber(r)&&(r=i[r]),_xeUtils.default.isNumber(n)&&(n=u[n]),(i?r:_xeUtils.default.isNumber(r))&&n&&(l||o)&&(l=_xeUtils.default.toNumber(l)||1,o=_xeUtils.default.toNumber(o)||1,(1<l||1<o)&&(t=_xeUtils.default.findIndexOf(a,function(e){return!(e._row!==r&&(0,_util.getRowid)(nt,e._row)!==(0,_util.getRowid)(nt,r)||e._col.id!==n&&e._col.id!==n.id)}),(e=a[t])?(e.rowspan=l,e.colspan=o,e._rowspan=l,e._colspan=o):(t=i?nt.findRowIndexOf(i,r):r,e=G.getVTColumnIndex(n),a.push({row:t,col:e,rowspan:l,colspan:o,_row:r,_col:n,_rowspan:l,_colspan:o}))))}))}function r(e,n,l){var o=[];if(e){var t=$.treeConfig,a=B.visibleColumn;if(t)throw new Error((0,_log.getLog)("vxe.error.noTree",["merge-cells"]));(e=!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){var t=e.row,r=e.col;l&&_xeUtils.default.isNumber(t)&&(t=l[t]),_xeUtils.default.isNumber(r)&&(r=a[r]);e=_xeUtils.default.findIndexOf(n,function(e){return!(e._row!==t&&(0,_util.getRowid)(nt,e._row)!==(0,_util.getRowid)(nt,t)||e._col.id!==r&&e._col.id!==r.id)});-1<e&&(e=n.splice(e,1),o.push(e[0]))})}return o}function a(){B.tableFullColumn.forEach(function(e){e.order=null})}function u(){function a(e,t,r,n,l){var o=e.id,a=e.property,i=e.fixed,u=e.type,c=e.treeNode,l={column:e,colid:o,index:t,items:r,parent:l};a&&("development"===process.env.NODE_ENV&&p[a]&&(0,_log.warnLog)("vxe.error.colRepet",["field",a]),p[a]=l),!g&&i&&(g=i),c?("development"===process.env.NODE_ENV&&s&&(0,_log.warnLog)("vxe.error.colRepet",["tree-node",c]),s=s||e):"expand"===u&&("development"===process.env.NODE_ENV&&d&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),d=d||e),"development"===process.env.NODE_ENV&&("checkbox"===u?(f&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),f=f||e):"radio"===u&&(v&&(0,_log.warnLog)("vxe.error.colRepet",["type",u]),v=v||e)),x&&!1===e.showOverflow&&(x=!1),h[o]&&(0,_log.errLog)("vxe.error.colRepet",["colId",o]),h[o]=l}var d,s,f,v,g,e=B.tableFullColumn,t=B.collectColumn,h=B.fullColumnIdData={},p=B.fullColumnFieldData={},r=Me.value,n=t.some(_utils.hasChildrenList),x=!!$.showOverflow;n?_xeUtils.default.eachTree(t,function(e,t,r,n,l,o){e.level=o.length,a(e,t,r,0,l)}):e.forEach(a),"development"===process.env.NODE_ENV&&d&&r.area&&(0,_log.errLog)("vxe.error.errConflicts",["mouse-config.area","column.type=expand"]),Y.isGroup=n,Y.treeNodeColumn=s,Y.expandColumn=d,Y.isAllOverflow=x}function _(){B.customHeight=dt("height"),B.customMaxHeight=dt("maxHeight")}function i(e,t,r){var n=0,l=t.clientWidth-1,o=l,a=o/100,i=$.fit,u=(v=Y.columnStore).resizeList,c=v.pxMinList,d=v.pxList,s=v.scaleList,f=v.scaleMinList,v=v.autoList;if(c.forEach(function(e){var t=parseInt(e.minWidth);n+=t,e.renderWidth=t}),f.forEach(function(e){var t=Math.floor(parseInt(e.minWidth)*a);n+=t,e.renderWidth=t}),s.forEach(function(e){var t=Math.floor(parseInt(e.width)*a);n+=t,e.renderWidth=t}),d.forEach(function(e){var t=parseInt(e.width);n+=t,e.renderWidth=t}),u.forEach(function(e){var t=parseInt(e.resizeWidth);n+=t,e.renderWidth=t}),a=0<(o-=n)?Math.floor(o/(f.length+c.length+v.length)):0,i?0<o&&f.concat(c).forEach(function(e){n+=a,e.renderWidth+=a}):a=40,v.forEach(function(e){var t=Math.max(a,40);e.renderWidth=t,n+=t}),i){var g=s.concat(f).concat(c).concat(v),h=g.length-1;if(0<h){var p=l-n;if(0<p){for(;0<p&&0<=h;)p--,g[h--].renderWidth++;n=l}}}s=t.offsetHeight,f=t.scrollHeight>t.clientHeight,c=0,f&&(c=Math.max(t.offsetWidth-t.clientWidth,0)),Y.scrollbarWidth=c,Y.overflowY=f,B.tableWidth=n,B.tableHeight=s,v=0,e&&(v=e.clientHeight,(0,_vue.nextTick)(function(){e&&t&&e.scrollLeft!==t.scrollLeft&&(e.scrollLeft=t.scrollLeft)})),B.headerHeight=v,c=!1,v=f=0,r?(f=r.offsetHeight,(c=n>r.clientWidth)&&(v=Math.max(f-r.clientHeight,0))):(c=l<n)&&(v=Math.max(s-t.clientHeight,0)),B.footerHeight=f,Y.overflowX=c,Y.scrollbarHeight=v,_(),Y.parentHeight=Math.max(B.headerHeight+f+20,Z.getParentHeight()),c&&Z.checkScrolling()}function b(t){var r=t.sortBy,n=t.sortType;return function(e){e=r?_xeUtils.default.isFunction(r)?r({row:e,column:t}):_xeUtils.default.get(e,r):Z.getCellLabel(e,t);return n&&"auto"!==n?"number"===n?_xeUtils.default.toNumber(e):"string"===n?_xeUtils.default.toValueString(e):e:isNaN(e)?e:_xeUtils.default.toNumber(e)}}function C(){var e=$.treeConfig,t=B.afterFullData,a=B.fullDataRowIdData,i=B.fullAllDataRowIdData,r=B.afterTreeFullData,n=Be.value;e?_xeUtils.default.eachTree(r,function(e,t,r,n){var l=(0,_util.getRowid)(nt,e),o=i[l],n=n.map(function(e,t){return t%2==0?Number(e)+1:"."}).join("");o?(o.seq=n,o._index=t):(i[l]=t={row:e,rowid:l,seq:n,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[l]=t)},{children:n.transform?n.mapChildren:n.children}):t.forEach(function(e,t){var r=(0,_util.getRowid)(nt,e),n=i[r],l=t+1;n?(n.seq=l,n._index=t):(i[r]=t={row:e,rowid:r,seq:l,index:-1,$index:-1,_index:t,items:[],parent:null,level:0},a[r]=t)})}function E(){var e=$.treeConfig,o=Y.treeExpandeds,t=Be.value;if(e&&t.transform){var a=[],i=new Map;return _xeUtils.default.eachTree(B.afterTreeFullData,function(e,t,r,n,l){(!l||i.has(l)&&-1<nt.findRowIndexOf(o,l))&&(i.set(e,1),a.push(e))},{children:t.mapChildren}),B.afterFullData=a,S(a),a}return B.afterFullData}function d(e){return nt.triggerValidate?nt.triggerValidate(e):(0,_vue.nextTick)()}function R(e,t){d("blur").catch(function(e){return e}).then(function(){nt.handleActived(t,e).then(function(){return d("change")}).catch(function(e){return e})})}function p(e,t){var r,n=B.checkboxReserveRowMap;Se.value.reserve&&(r=(0,_util.getRowid)(nt,e),t?n[r]=e:n[r]&&delete n[r])}function h(r){var n=Y.rowExpandeds,l=Y.expandLazyLoadeds,o=B.fullAllDataRowIdData[(0,_util.getRowid)(nt,r)];return new Promise(function(e){var t=Ye.value.loadMethod;t?(l.push(r),t({$table:nt,row:r,rowIndex:G.getRowIndex(r),$rowIndex:G.getVMRowIndex(r)}).catch(function(e){return e}).then(function(){o.expandLoaded=!0,_xeUtils.default.remove(l,function(e){return nt.eqRow(e,r)}),n.push(r),e((0,_vue.nextTick)().then(function(){return G.recalculate()}))})):e()})}function x(e,t){var r,n=B.rowExpandedReserveRowMap;Ye.value.reserve&&(r=(0,_util.getRowid)(nt,e),t?n[r]=e:n[r]&&delete n[r])}function s(){return(0,_vue.nextTick)().then(function(){var e=Y.scrollXLoad,t=Y.scrollYLoad,r=B.scrollXStore,n=B.scrollYStore,l=we.value,o=_e.value;e?(e=it().visibleSize,a=o.oSize?_xeUtils.default.toNumber(o.oSize):_dom.browse.msie?10:_dom.browse.edge?5:0,r.offsetSize=a,r.visibleSize=e,r.endIndex=Math.max(r.startIndex+r.visibleSize+a,r.endIndex),Z.updateScrollXData()):Z.updateScrollXSpace();var a=ut(),r=a.rowHeight,a=a.visibleSize;n.rowHeight=r,t?(l=l.oSize?_xeUtils.default.toNumber(l.oSize):_dom.browse.msie?20:_dom.browse.edge?10:0,n.offsetSize=l,n.visibleSize=a,n.endIndex=Math.max(n.startIndex+a+l,n.endIndex),Z.updateScrollYData()):Z.updateScrollYSpace(),Y.rowHeight=r,(0,_vue.nextTick)(st)})}function m(e){var t=$.keepSource,r=$.treeConfig,n=Y.editStore,g=Y.scrollYLoad,h=B.scrollYStore,l=B.scrollXStore,p=B.lastScrollLeft,x=B.lastScrollTop,o=Be.value,a=o.transform,i=[],u=e?e.slice(0):[];r&&(a?("development"===process.env.NODE_ENV&&(o.rowField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.rowField"]),o.parentField||(0,_log.errLog)("vxe.error.reqProp",["tree-config.parentField"]),o.children||(0,_log.errLog)("vxe.error.reqProp",["tree-config.children"]),o.mapChildren||(0,_log.errLog)("vxe.error.reqProp",["tree-config.mapChildren"]),o.children===o.mapChildren&&(0,_log.errLog)("vxe.error.errConflicts",["tree-config.children","tree-config.mapChildren"]),u.forEach(function(e){e[o.children]&&e[o.children].length&&(0,_log.warnLog)("vxe.error.errConflicts",["tree-config.transform","row."+o.children])})),u=(i=_xeUtils.default.toArrayTree(u,{key:o.rowField,parentKey:o.parentField,children:o.children,mapChildren:o.mapChildren})).slice(0)):i=u.slice(0)),h.startIndex=0,h.endIndex=1,l.startIndex=0,l.endIndex=1,n.insertList=[],n.removeList=[];var m=S(u);return Y.scrollYLoad=m,B.tableFullData=u,B.tableFullTreeData=i,Z.cacheRowMap(!0),B.tableSynchData=e,t&&(B.tableSourceData=_xeUtils.default.clone(u,!0)),"development"===process.env.NODE_ENV&&m&&($.height||$.maxHeight||(0,_log.errLog)("vxe.error.reqProp",["table.height | table.max-height | table.scroll-y={enabled: false}"]),$.showOverflow||(0,_log.warnLog)("vxe.error.reqProp",["table.show-overflow"]),$.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["table.span-method"])),nt.clearCellAreas&&$.mouseConfig&&(nt.clearCellAreas(),nt.clearCopyCellArea()),G.clearMergeCells(),G.clearMergeFooterItems(),Z.handleTableData(!0),G.updateFooter(),(0,_vue.nextTick)().then(function(){_(),st()}).then(function(){s()}).then(function(){var e,t,r,n,l,o,a,i,u,c,d,s,f,v;return m&&(h.endIndex=h.visibleSize),e=$.treeConfig,t=Y.expandColumn,r=Y.currentRow,n=Y.selectRow,l=Y.selection,o=Y.rowExpandeds,a=Y.treeExpandeds,i=B.fullDataRowIdData,u=B.fullAllDataRowIdData,c=B.radioReserveRow,d=Ye.value,s=Be.value,f=ye.value,v=Se.value,n&&!u[(0,_util.getRowid)(nt,n)]&&(Y.selectRow=null),f.reserve&&c&&(i[c=(0,_util.getRowid)(nt,c)]&&G.setRadioRow(i[c].row)),Y.selection=ot(l),v.reserve&&G.setCheckboxRow(at(B.checkboxReserveRowMap),!0),r&&!u[(0,_util.getRowid)(nt,r)]&&(Y.currentRow=null),Y.rowExpandeds=t?ot(o):[],t&&d.reserve&&G.setRowExpand(at(B.rowExpandedReserveRowMap),!0),Y.treeExpandeds=e?ot(a):[],e&&s.reserve&&G.setTreeExpand(at(B.treeExpandedReserveRowMap),!0),Z.checkSelectionStatus(),new Promise(function(e){(0,_vue.nextTick)().then(function(){return G.recalculate()}).then(function(){g===m?(0,_util.restoreScrollLocation)(nt,p,x).then(e):setTimeout(function(){return(0,_util.restoreScrollLocation)(nt,p,x).then(e)})})})})}function w(){var t,r,e,n,l,o,a,i,u,c,d,s,f;$.checkboxConfig&&(t=B.fullDataRowIdData,n=(e=Se.value).checkAll,e=e.checkRowKeys,n?G.setAllCheckboxRow(!0):e&&(r=[],e.forEach(function(e){t[e]&&r.push(t[e].row)}),G.setCheckboxRow(r,!0))),$.radioConfig&&(n=B.fullDataRowIdData,e=(o=ye.value).checkRowKey,o=o.reserve,e&&(n[e]&&G.setRadioRow(n[e].row),o&&(n=(0,_util.getRowkey)(nt),B.radioReserveRow=((o={})[n]=e,o)))),$.expandConfig&&(l=B.fullDataRowIdData,o=(c=Ye.value).expandAll,c=c.expandRowKeys,o?G.setAllRowExpand(!0):c&&(a=[],c.forEach(function(e){l[e]&&a.push(l[e].row)}),G.setRowExpand(a,!0))),$.treeConfig&&(i=B.tableFullData,c=(u=Be.value).expandAll,f=u.expandRowKeys,c?G.setAllTreeExpand(!0):f&&(d=[],s=(0,_util.getRowkey)(nt),f.forEach(function(t){var e=_xeUtils.default.findTree(i,function(e){return t===_xeUtils.default.get(e,s)},u);e&&d.push(e.item)}),G.setTreeExpand(d,!0))),(f=$.mergeCells)&&G.setMergeCells(f),(f=$.mergeFooterItems)&&G.setMergeFooterItems(f),(0,_vue.nextTick)(function(){return setTimeout(function(){return G.recalculate()})})}function T(){var e,t,r;!(r=$.sortConfig)||(t=(e=Ue.value).defaultSort)&&(t=!_xeUtils.default.isArray(t)?[t]:t).length&&((r.multiple?t:t.slice(0,1)).forEach(function(e,t){var r=e.field,e=e.order;r&&e&&((r=G.getColumnByField(r))&&r.sortable&&(r.order=e,r.sortTime=Date.now()+t))}),e.remote||Z.handleTableData(!0).then(st))}function f(){var e=Y.mergeList,t=Y.mergeFooterList,r=B.scrollXStore,n=r.startIndex,l=r.endIndex,o=r.offsetSize,a=(i=it()).toVisibleIndex,i=i.visibleSize,o={startIndex:Math.max(0,a-1-o),endIndex:a+i+o};ct(e.concat(t),o,"col"),t=o.startIndex,o=o.endIndex,(a<=n||l-i-1<=a)&&(n===t&&l===o||(r.startIndex=t,r.endIndex=o,Z.updateScrollXData())),G.closeTooltip()}function g(e){var t=[];return e.forEach(function(e){t.push.apply(t,e.children&&e.children.length?g(e.children):[e])}),t}function y(){var t,r,n,a=[],i=[],u=[],e=Y.isGroup,l=Y.columnStore,o=_e.value,c=B.collectColumn,d=B.tableFullColumn,s=B.scrollXStore,f=B.fullColumnIdData;e?(t=[],r=[],n=[],_xeUtils.default.eachTree(c,function(e,t,r,n,l){var o=(0,_utils.hasChildrenList)(e);l&&l.fixed&&(e.fixed=l.fixed),l&&e.fixed!==l.fixed&&(0,_log.errLog)("vxe.error.groupFixed"),o?e.visible=!!_xeUtils.default.findTree(e.children,function(e){return!(0,_utils.hasChildrenList)(e)&&e.visible}):e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)}),c.forEach(function(e){e.visible&&("left"===e.fixed?t:"right"===e.fixed?n:r).push(e)}),Y.tableGroupColumn=t.concat(r).concat(n)):d.forEach(function(e){e.visible&&("left"===e.fixed?a:"right"===e.fixed?u:i).push(e)});var v=a.concat(i).concat(u),d=!!o.enabled&&-1<o.gt&&o.gt<d.length;return Y.hasFixedColumn=0<a.length||0<u.length,Object.assign(l,{leftList:a,centerList:i,rightList:u}),d&&e&&(d=!1,"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.scrollXNotGroup")),d&&("development"===process.env.NODE_ENV&&($.showHeader&&!$.showHeaderOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-header-overflow"]),$.showFooter&&!$.showFooterOverflow&&(0,_log.warnLog)("vxe.error.reqProp",["show-footer-overflow"]),$.spanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["span-method"]),$.footerSpanMethod&&(0,_log.warnLog)("vxe.error.scrollErrProp",["footer-span-method"])),e=it().visibleSize,s.startIndex=0,s.endIndex=e,s.visibleSize=e),v.length===B.visibleColumn.length&&B.visibleColumn.every(function(e,t){return e===v[t]})||(G.clearMergeCells(),G.clearMergeFooterItems()),Y.scrollXLoad=d,v.forEach(function(e,t){e=e.id,e=f[e];e&&(e._index=t)}),B.visibleColumn=v,gt(),G.updateFooter().then(function(){return G.recalculate()}).then(function(){return Z.updateCellAreas(),G.recalculate()})}function n(e){B.collectColumn=e;var r,n,t,l,o,a,i=g(e);return B.tableFullColumn=i,u(),t=$.id,l=$.customConfig,o=B.collectColumn,a=Je.value.storage,i=!0===a||a&&a.resizable,a=!0===a||a&&a.visible,l&&(i||a)&&(r={},t?(!i||(i=lt(resizableStorageKey)[t])&&_xeUtils.default.each(i,function(e,t){r[t]={field:t,resizeWidth:e}}),!a||(a=lt(visibleStorageKey)[t])&&(a=(t=a.split("|"))[0]?t[0].split(","):[],t=t[1]?t[1].split(","):[],a.forEach(function(e){r[e]?r[e].visible=!1:r[e]={field:e,visible:!1}}),t.forEach(function(e){r[e]?r[e].visible=!0:r[e]={field:e,visible:!0}})),n={},_xeUtils.default.eachTree(o,function(e){var t=e.getKey();t&&(n[t]=e)}),_xeUtils.default.each(r,function(e,t){var r=e.visible,e=e.resizeWidth,t=n[t];t&&(_xeUtils.default.isNumber(e)&&(t.resizeWidth=e),_xeUtils.default.isBoolean(r)&&(t.visible=r))})):(0,_log.errLog)("vxe.error.reqProp",["id"])),y().then(function(){Y.scrollXLoad&&f()}),G.clearMergeCells(),G.clearMergeFooterItems(),Z.handleTableData(!0),"development"===process.env.NODE_ENV&&(Y.scrollXLoad||Y.scrollYLoad)&&Y.expandColumn&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),(0,_vue.nextTick)().then(function(){return z&&z.syncUpdate({collectColumn:e,$table:nt}),G.recalculate()})}function S(e){var t=$.treeConfig,r=we.value,e=(Be.value.transform||!t)&&!!r.enabled&&-1<r.gt&&r.gt<e.length;return Y.scrollYLoad=e}function l(e,t){var r,n=Y.treeExpandeds,l=Y.treeLazyLoadeds,o=Y.treeNodeColumn,a=B.fullAllDataRowIdData,i=B.tableFullData,u=Be.value,c=u.reserve,d=u.lazy,s=u.hasChild,f=u.children,v=u.accordion,g=u.toggleMethod,h=[],p=G.getColumnIndex(o),x=G.getVMColumnIndex(o),m=g?e.filter(function(e){return g({$table:nt,expanded:t,column:o,columnIndex:p,$columnIndex:x,row:e})}):e;return v&&(m=m.length?[m[m.length-1]]:[],(r=_xeUtils.default.findTree(i,function(e){return e===m[0]},u))&&_xeUtils.default.remove(n,function(e){return-1<r.items.indexOf(e)})),t?m.forEach(function(e){var t;-1===nt.findRowIndexOf(n,e)&&(t=a[(0,_util.getRowid)(nt,e)],d&&e[s]&&!t.treeLoaded&&-1===nt.findRowIndexOf(l,e)?h.push(ft(e)):e[f]&&e[f].length&&n.push(e))}):_xeUtils.default.remove(n,function(e){return-1<nt.findRowIndexOf(m,e)}),c&&m.forEach(function(e){return vt(e,t)}),Promise.all(h).then(function(){return G.recalculate()})}function o(e){var t=Y.mergeList,r=B.scrollYStore,n=r.startIndex,l=r.endIndex,o=r.visibleSize,a=r.offsetSize,i=r.rowHeight,e=(e.currentTarget||e.target).scrollTop,i=Math.floor(e/i),a={startIndex:Math.max(0,i-1-a),endIndex:i+o+a};ct(t,a,"row"),t=a.startIndex,a=a.endIndex,(i<=n||l-o-1<=i)&&(n===t&&l===a||(r.startIndex=t,r.endIndex=a,Z.updateScrollYData()))}function I(r){var e=Y.editStore,t=Y.ctxMenuStore,n=Y.filterStore,l=$.mouseConfig,o=J.value,a=Le.value,i=e.actived,u=te.value,c=re.value,e=ne.value;c&&((0,_dom.getEventTargetNode)(r,o,"vxe-cell--filter").flag||(0,_dom.getEventTargetNode)(r,c.$el).flag||(0,_dom.getEventTargetNode)(r,document.body,"vxe-table--ignore-clear").flag||Z.preventEvent(r,"event.clearFilter",n.args,G.closeFilter)),i.row?!1!==a.autoClear&&((n=i.args.cell)&&(0,_dom.getEventTargetNode)(r,n).flag||u&&(0,_dom.getEventTargetNode)(r,u.$el).flag||(!B._lastCallTime||B._lastCallTime+50<Date.now())&&((0,_dom.getEventTargetNode)(r,document.body,"vxe-table--ignore-clear").flag||Z.preventEvent(r,"event.clearActived",i.args,function(){var e,t;(e=(e=(e="row"===a.mode?!!(t=(e=(0,_dom.getEventTargetNode)(r,o,"vxe-body--row")).flag?G.getRowNode(e.targetElem):null)&&!nt.eqRow(t.item,i.args.row):!(0,_dom.getEventTargetNode)(r,o,"col--edit").flag)||(0,_dom.getEventTargetNode)(r,o,"vxe-header--row").flag)||(0,_dom.getEventTargetNode)(r,o,"vxe-footer--row").flag)||!$.height||Y.overflowY||(t=r.target,(0,_dom.hasClass)(t,"vxe-table--body-wrapper")&&(e=r.offsetY<t.clientHeight)),!e&&(0,_dom.getEventTargetNode)(r,o).flag||setTimeout(function(){return nt.clearActived(r)})}))):l&&((0,_dom.getEventTargetNode)(r,o).flag||xe&&(0,_dom.getEventTargetNode)(r,xe.getRefMaps().refElem.value).flag||e&&(0,_dom.getEventTargetNode)(r,e.getRefMaps().refElem.value).flag||z&&(0,_dom.getEventTargetNode)(r,z.getRefMaps().refElem.value).flag||(nt.clearSelected(),nt.clearCellAreas&&((0,_dom.getEventTargetNode)(r,document.body,"vxe-table--ignore-areas-clear").flag||Z.preventEvent(r,"event.clearAreas",{},function(){nt.clearCellAreas(),nt.clearCopyCellArea()})))),nt.closeMenu&&t.visible&&e&&!(0,_dom.getEventTargetNode)(r,e.getRefMaps().refElem.value).flag&&nt.closeMenu(),B.isActivated=(0,_dom.getEventTargetNode)(r,xe?xe.getRefMaps().refElem.value:o).flag}function D(){G.closeFilter(),nt.closeMenu&&nt.closeMenu()}function k(){G.closeTooltip(),nt.closeMenu&&nt.closeMenu()}function F(t){var r=$.mouseConfig,n=$.keyboardConfig,l=Y.filterStore,o=Y.ctxMenuStore,e=Y.editStore,a=Me.value,i=Ae.value,u=e.actived;(0,_event.hasEventKey)(t,_event.EVENT_KEYS.ESCAPE)&&Z.preventEvent(t,"event.keydown",null,function(){var e;G.dispatchEvent("keydown-start",{},t),n&&r&&a.area&&nt.handleKeyboardEvent?nt.handleKeyboardEvent(t):(u.row||l.visible||o.visible)&&(t.stopPropagation(),nt.closeMenu&&nt.closeMenu(),G.closeFilter(),n&&i.isEsc&&u.row&&(e=u.args,nt.clearActived(t),a.selected&&(0,_vue.nextTick)(function(){return nt.handleSelected(e,t)}))),G.dispatchEvent("keydown",{},t),G.dispatchEvent("keydown-end",{},t)})}function L(H){B.isActivated&&Z.preventEvent(H,"event.keydown",null,function(){var e,t,r,n,l,o=$.mouseConfig,a=$.keyboardConfig,i=$.treeConfig,u=$.editConfig,c=$.highlightCurrentRow,d=Y.ctxMenuStore,s=Y.editStore,f=Y.currentRow,v=Xe.value,g=He.value,h=Ae.value,p=Me.value,x=Le.value,m=Be.value,_=Pe.value,w=Ee.value,b=s.selected,C=s.actived,E=H.keyCode,R=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ESCAPE),T=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.BACKSPACE),y=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.TAB),S=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ENTER),I=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.SPACEBAR),D=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_LEFT),k=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_UP),L=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_RIGHT),U=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.ARROW_DOWN),O=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.DELETE),M=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.F2),F=(0,_event.hasEventKey)(H,_event.EVENT_KEYS.CONTEXT_MENU),A=H.metaKey,N=H.ctrlKey,V=H.shiftKey,z=H.altKey,q=D||k||L||U,s=v&&d.visible&&(S||I||q),v=(0,_utils.isEnableConf)(u)&&C.column&&C.row;s?(H.preventDefault(),d.showChild&&(0,_utils.hasChildrenList)(d.selected)?nt.moveCtxMenu(H,d,"selectChild",D,!1,d.selected.children):nt.moveCtxMenu(H,d,"selected",L,!0,_)):a&&o&&p.area&&nt.handleKeyboardEvent?nt.handleKeyboardEvent(H):R?(nt.closeMenu&&nt.closeMenu(),G.closeFilter(),a&&h.isEsc&&C.row&&(e=C.args,nt.clearActived(H),p.selected&&(0,_vue.nextTick)(function(){return nt.handleSelected(e,H)}))):I&&a&&h.isChecked&&b.row&&b.column&&("checkbox"===b.column.type||"radio"===b.column.type)?(H.preventDefault(),"checkbox"===b.column.type?Z.handleToggleCheckRowEvent(H,b.args):Z.triggerRadioRowEvent(H,b.args)):M&&(0,_utils.isEnableConf)(u)?v||b.row&&b.column&&(H.preventDefault(),nt.handleActived(b.args,H)):F?(B._keyCtx=b.row&&b.column&&g.length,clearTimeout(X),X=setTimeout(function(){B._keyCtx=!1},1e3)):S&&!z&&a&&h.isEnter&&(b.row||C.row||i&&(w.isCurrent||c)&&f)?N?C.row&&(n=C.args,nt.clearActived(H),p.selected&&(0,_vue.nextTick)(function(){return nt.handleSelected(n,H)})):b.row||C.row?(t=(b.row?b:C).args,V?h.enterToTab?nt.moveTabSelected(t,V,H):nt.moveSelected(t,D,!0,L,!1,H):h.enterToTab?nt.moveTabSelected(t,V,H):nt.moveSelected(t,D,!1,L,!0,H)):i&&(w.isCurrent||c)&&f&&((t=f[m.children])&&t.length&&(H.preventDefault(),r=t[0],n={$table:nt,row:r,rowIndex:G.getRowIndex(r),$rowIndex:G.getVMRowIndex(r)},G.setTreeExpand(f,!0).then(function(){return G.scrollToRow(r)}).then(function(){return Z.triggerCurrentRowEvent(H,n)}))):q&&a&&h.isArrow?v||(b.row&&b.column?nt.moveSelected(b.args,D,k,L,U,H):(k||U)&&(w.isCurrent||c)&&nt.moveCurrentRow(k,U,H)):y&&a&&h.isTab?b.row||b.column?nt.moveTabSelected(b.args,V,H):(C.row||C.column)&&nt.moveTabSelected(C.args,V,H):a&&(0,_utils.isEnableConf)(u)&&(O||(i&&(w.isCurrent||c)&&f?T&&h.isArrow:T))?v||(V=h.delMethod,v=h.backMethod,h.isDel&&(b.row||b.column)?(V?V({row:b.row,rowIndex:G.getRowIndex(b.row),column:b.column,columnIndex:G.getColumnIndex(b.column),$table:nt}):(0,_util.setCellValue)(b.row,b.column,null),T?v?v({row:b.row,rowIndex:G.getRowIndex(b.row),column:b.column,columnIndex:G.getColumnIndex(b.column),$table:nt}):nt.handleActived(b.args,H):O&&G.updateFooter()):T&&h.isArrow&&i&&(w.isCurrent||c)&&f&&((l=_xeUtils.default.findTree(B.afterFullData,function(e){return e===f},m).parent)&&(H.preventDefault(),n={$table:nt,row:l,rowIndex:G.getRowIndex(l),$rowIndex:G.getVMRowIndex(l)},G.setTreeExpand(l,!1).then(function(){return G.scrollToRow(l)}).then(function(){return Z.triggerCurrentRowEvent(H,n)})))):a&&(0,_utils.isEnableConf)(u)&&h.isEdit&&!N&&!A&&(I||48<=E&&E<=57||65<=E&&E<=90||96<=E&&E<=111||186<=E&&E<=192||219<=E&&E<=222)&&(h=h.editMethod,b.column&&b.row&&(0,_utils.isEnableConf)(b.column.editRender)&&(x.activeMethod&&!x.activeMethod(__assign(__assign({},b.args),{$table:nt}))||(h?h({row:b.row,rowIndex:G.getRowIndex(b.row),column:b.column,columnIndex:G.getColumnIndex(b.column),$table:nt,$grid:xe}):((0,_util.setCellValue)(b.row,b.column,null),nt.handleActived(b.args,H))))),G.dispatchEvent("keydown",{},H)})}function U(e){var t=$.keyboardConfig,r=$.mouseConfig,n=Y.editStore,l=Y.filterStore,o=B.isActivated,a=Me.value,i=Ae.value,n=n.actived;o&&!l.visible&&(n.row||n.column||t&&i.isClip&&r&&a.area&&nt.handlePasteCellAreaEvent&&nt.handlePasteCellAreaEvent(e),G.dispatchEvent("paste",{},e))}function O(e){var t=$.keyboardConfig,r=$.mouseConfig,n=Y.editStore,l=Y.filterStore,o=B.isActivated,a=Me.value,i=Ae.value,n=n.actived;o&&!l.visible&&(n.row||n.column||t&&i.isClip&&r&&a.area&&nt.handleCopyCellAreaEvent&&nt.handleCopyCellAreaEvent(e),G.dispatchEvent("copy",{},e))}function M(e){var t=$.keyboardConfig,r=$.mouseConfig,n=Y.editStore,l=Y.filterStore,o=B.isActivated,a=Me.value,i=Ae.value,n=n.actived;o&&!l.visible&&(n.row||n.column||t&&i.isClip&&r&&a.area&&nt.handleCutCellAreaEvent&&nt.handleCutCellAreaEvent(e),G.dispatchEvent("cut",{},e))}function A(){nt.closeMenu&&nt.closeMenu(),Z.updateCellAreas(),G.recalculate(!0)}function N(e){var t=Q.value;clearTimeout(B.tooltipTimeout),e?G.closeTooltip():t&&t.setActived(!0)}function V(e,t,r,n,l){l.cell=t;var o=Y.tooltipStore,a=Ie.value,i=l.column,u=l.row,t=a.showAll,l=(a=a.contentMethod)?a(l):null,c=(a=a&&!_xeUtils.default.eqNull(l))?l:("html"===i.type?r.innerText:r.textContent).trim(),d=r.scrollWidth>r.clientWidth;return c&&(t||a||d)&&(Object.assign(o,{row:u,column:i,visible:!0,currOpts:null}),(0,_vue.nextTick)(function(){var e=Q.value;e&&e.open(!d&&n||r,(0,_utils.formatText)(c))})),(0,_vue.nextTick)()}var z,X,q=e.slots,H=e.emit,P=_vXETable.VXETable.tooltip,j=_xeUtils.default.uniqueId(),W=(0,_size.useSize)($),K=(0,_vue.getCurrentInstance)(),Y=(0,_vue.reactive)({staticColumns:[],tableGroupColumn:[],tableColumn:[],tableData:[],scrollXLoad:!1,scrollYLoad:!1,overflowY:!0,overflowX:!1,scrollbarWidth:0,scrollbarHeight:0,rowHeight:0,parentHeight:0,isGroup:!1,isAllOverflow:!1,isAllSelected:!1,isIndeterminate:!1,selection:[],currentRow:null,currentColumn:null,selectRow:null,footerTableData:[],expandColumn:null,treeNodeColumn:null,hasFixedColumn:!1,rowExpandeds:[],expandLazyLoadeds:[],treeExpandeds:[],treeLazyLoadeds:[],treeIndeterminates:[],mergeList:[],mergeFooterList:[],initStore:{filter:!1,import:!1,export:!1},filterStore:{isAllSelected:!1,isIndeterminate:!1,style:null,options:[],column:null,multiple:!1,visible:!1,maxHeight:null},columnStore:{leftList:[],centerList:[],rightList:[],resizeList:[],pxList:[],pxMinList:[],scaleList:[],scaleMinList:[],autoList:[]},ctxMenuStore:{selected:null,visible:!1,showChild:!1,selectChild:null,list:[],style:null},editStore:{indexs:{columns:[]},titles:{columns:[]},selected:{row:null,column:null},copyed:{cut:!1,rows:[],columns:[]},actived:{row:null,column:null},insertList:[],removeList:[]},tooltipStore:{row:null,column:null,content:null,visible:!1,currOpts:null},validStore:{visible:!1,row:null,column:null,content:"",rule:null,isArrow:!1},importStore:{inited:!1,file:null,type:"",modeList:[],typeList:[],filename:"",visible:!1},importParams:{mode:"",types:null,message:!0},exportStore:{inited:!1,name:"",modeList:[],typeList:[],columns:[],isPrint:!1,hasFooter:!1,hasMerge:!1,hasTree:!1,hasColgroup:!1,visible:!1},exportParams:{filename:"",sheetName:"",mode:"",type:"",isColgroup:!1,isMerge:!1,isAllExpand:!1,useStyle:!1,original:!1,message:!0,isHeader:!1,isFooter:!1}}),B={tZindex:0,elemStore:{},scrollXStore:{offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},scrollYStore:{rowHeight:0,offsetSize:0,visibleSize:0,startIndex:0,endIndex:0},tableWidth:0,tableHeight:0,headerHeight:0,footerHeight:0,customHeight:0,customMaxHeight:0,hoverRow:null,lastScrollLeft:0,lastScrollTop:0,lastScrollTime:0,radioReserveRow:null,checkboxReserveRowMap:{},rowExpandedReserveRowMap:{},treeExpandedReserveRowMap:{},tableFullData:[],afterFullData:[],tableFullTreeData:[],afterTreeFullData:[],tableSynchData:[],tableSourceData:[],collectColumn:[],tableFullColumn:[],visibleColumn:[],fullAllDataRowIdData:{},fullDataRowIdData:{},fullColumnIdData:{},fullColumnFieldData:{},inited:!1,tooltipTimeout:null,initStatus:!1,isActivated:!1},G={},Z={},J=(0,_vue.ref)(),Q=(0,_vue.ref)(),ee=(0,_vue.ref)(),te=(0,_vue.ref)(),re=(0,_vue.ref)(),ne=(0,_vue.ref)(),le=(0,_vue.ref)(),oe=(0,_vue.ref)(),ae=(0,_vue.ref)(),ie=(0,_vue.ref)(),ue=(0,_vue.ref)(),ce=(0,_vue.ref)(),de=(0,_vue.ref)(),se=(0,_vue.ref)(),fe=(0,_vue.ref)(),ve=(0,_vue.ref)(),ge=(0,_vue.ref)(),he=(0,_vue.ref)(),pe=(0,_vue.ref)(),xe=(0,_vue.inject)("$xegrid",null),me=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.validConfig,$.validConfig)}),_e=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollX,$.scrollX)}),we=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.scrollY,$.scrollY)}),be=(0,_vue.computed)(function(){return{default:48,medium:44,small:40,mini:36}}),Ce=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.columnConfig,$.columnConfig)}),Ee=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.rowConfig,$.rowConfig)}),Re=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.resizableConfig,$.resizableConfig)}),Te=(0,_vue.computed)(function(){return Object.assign({startIndex:0},_conf.default.table.seqConfig,$.seqConfig)}),ye=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.radioConfig,$.radioConfig)}),Se=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.checkboxConfig,$.checkboxConfig)}),Ie=((0,_vue.ref)(),(0,_vue.computed)(function(){return Object.assign({},_conf.default.tooltip,_conf.default.table.tooltipConfig,$.tooltipConfig)})),De=(0,_vue.computed)(function(){var e=Y.tooltipStore,t=Ie.value;return __assign(__assign({},t),e.currOpts)}),ke=(0,_vue.computed)(function(){var e=Ie.value;return Object.assign({isArrow:!1},e)}),Le=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.editConfig,$.editConfig)}),Ue=(0,_vue.computed)(function(){return Object.assign({orders:["asc","desc",null]},_conf.default.table.sortConfig,$.sortConfig)}),Oe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.filterConfig,$.filterConfig)}),Me=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.mouseConfig,$.mouseConfig)}),Fe=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.areaConfig,$.areaConfig)}),Ae=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.keyboardConfig,$.keyboardConfig)}),Ne=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.clipConfig,$.clipConfig)}),Ve=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.fnrConfig,$.fnrConfig)}),ze=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.menuConfig,$.menuConfig)}),qe=(0,_vue.computed)(function(){var e=ze.value.header;return e&&e.options?e.options:[]}),He=(0,_vue.computed)(function(){var e=ze.value.body;return e&&e.options?e.options:[]}),$e=(0,_vue.computed)(function(){var e=ze.value.footer;return e&&e.options?e.options:[]}),Xe=(0,_vue.computed)(function(){var e=ze.value,t=qe.value,r=He.value,n=$e.value;return!!($.menuConfig&&(0,_utils.isEnableConf)(e)&&(t.length||r.length||n.length))}),Pe=(0,_vue.computed)(function(){var e=Y.ctxMenuStore,t=[];return e.list.forEach(function(e){e.forEach(function(e){t.push(e)})}),t}),je=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.exportConfig,$.exportConfig)}),We=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.importConfig,$.importConfig)}),Ke=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.printConfig,$.printConfig)}),Ye=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.expandConfig,$.expandConfig)}),Be=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.treeConfig,$.treeConfig)}),Ge=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.emptyRender,$.emptyRender)}),Ze=(0,_vue.computed)(function(){return $.border?Math.max(2,Math.ceil(Y.scrollbarWidth/Y.tableColumn.length)):1}),Je=(0,_vue.computed)(function(){return Object.assign({},_conf.default.table.customConfig,$.customConfig)}),Qe=(0,_vue.computed)(function(){var e=$.border;return!0===e?"full":e||"default"}),et=(0,_vue.computed)(function(){$.treeConfig;var e=Y.tableData,t=B.tableFullData,r=Se.value,n=r.strict,l=r.checkMethod;return!!n&&(!e.length&&!t.length||!!l&&t.every(function(e){return!l({row:e})}))}),tt={refElem:J,refTooltip:Q,refValidTooltip:te,refTableFilter:re,refTableMenu:ne,refTableHeader:le,refTableBody:oe,refTableFooter:ae,refTableLeftHeader:ie,refTableLeftBody:ue,refTableLeftFooter:ce,refTableRightHeader:de,refTableRightBody:se,refTableRightFooter:fe,refLeftContainer:ve,refRightContainer:ge,refCellResizeBar:he},rt={computeSize:W,computeValidOpts:me,computeSXOpts:_e,computeSYOpts:we,computeColumnOpts:Ce,computeRowOpts:Ee,computeResizableOpts:Re,computeSeqOpts:Te,computeRadioOpts:ye,computeCheckboxOpts:Se,computeTooltipOpts:Ie,computeEditOpts:Le,computeSortOpts:Ue,computeFilterOpts:Oe,computeMouseOpts:Me,computeAreaOpts:Fe,computeKeyboardOpts:Ae,computeClipOpts:Ne,computeFNROpts:Ve,computeHeaderMenu:qe,computeBodyMenu:He,computeFooterMenu:$e,computeIsMenu:Xe,computeMenuOpts:ze,computeExportOpts:je,computeImportOpts:We,computePrintOpts:Ke,computeExpandOpts:Ye,computeTreeOpts:Be,computeEmptyOpts:Ge,computeCustomOpts:Je,computeIsAllCheckboxDisabled:et},nt={xID:j,props:$,context:e,instance:K,reactData:Y,internalData:B,getRefMaps:function(){return tt},getComputeMaps:function(){return rt},xegrid:xe},lt=function(e){var t=_conf.default.version,e=_xeUtils.default.toStringJSON(localStorage.getItem(e)||"");return e&&e._v===t?e:{_v:t}},ot=function(e){var t=B.fullAllDataRowIdData;return e.filter(function(e){e=(0,_util.getRowid)(nt,e);return!!t[e]})},at=function(e){var r=B.fullDataRowIdData,n=[];return _xeUtils.default.each(e,function(e,t){r[t]&&-1===nt.findRowIndexOf(n,r[t].row)&&n.push(r[t].row)}),n},it=function(){var e=B.visibleColumn,t=oe.value,t=t?t.$el:null;if(t){for(var r=t.scrollLeft,n=r+t.clientWidth,l=-1,o=0,a=0,i=0,u=e.length;i<u&&(o+=e[i].renderWidth,!(0<=(l=-1===l&&r<o?i:l)&&(a++,n<o)));i++);return{toVisibleIndex:Math.max(0,l),visibleSize:Math.max(8,a)}}return{toVisibleIndex:0,visibleSize:8}},ut=function(){var e=le.value,t=oe.value,r=t?t.$el:null,n=W.value,l=be.value;if(r){var o=e?e.$el:null,t=0,e=void 0;return{rowHeight:t=(t=(e=!(e=r.querySelector("tr"))&&o?o.querySelector("tr"):e)?e.clientHeight:t)||l[n||"default"],visibleSize:Math.max(8,Math.ceil(r.clientHeight/t)+2)}}return{rowHeight:0,visibleSize:8}},ct=function(e,t,r){for(var n=0,l=e.length;n<l;n++){var o=e[n],a=t.startIndex,i=t.endIndex,u=o[r],o=u+o[r+"span"];u<a&&a<o&&(t.startIndex=u),u<i&&i<o&&(t.endIndex=o),t.startIndex===a&&t.endIndex===i||(n=-1)}},dt=function(e){var t=Y.parentHeight,r=$[e],n=0;return n=r?"auto"===r?t:(e=nt.getExcludeHeight(),n=(0,_dom.isScale)(r)?Math.floor((_xeUtils.default.toInteger(r)||1)/100*t):_xeUtils.default.toNumber(r),Math.max(40,n-e)):n},st=function(){var d=$.border,s=$.showFooter,f=$.showOverflow,v=$.showHeaderOverflow,g=$.showFooterOverflow,e=$.mouseConfig,h=$.spanMethod,p=$.footerSpanMethod,x=$.keyboardConfig,m=Y.isGroup,t=Y.currentRow,_=Y.tableColumn,w=Y.scrollXLoad,b=Y.scrollYLoad,C=Y.scrollbarWidth,E=Y.scrollbarHeight,r=Y.columnStore,n=Y.editStore,R=Y.mergeList,T=Y.mergeFooterList,y=Y.isAllOverflow,S=B.visibleColumn,I=B.fullColumnIdData,D=B.tableHeight,k=B.tableWidth,L=B.headerHeight,U=B.footerHeight,O=B.elemStore,M=B.customHeight,F=B.customMaxHeight,l=pe.value,A=Ze.value,o=Me.value,N=Ae.value,a=O["main-body-wrapper"];return l&&(l.style.top=L+"px",l.style.height=a?a.offsetHeight-E+"px":""),0<M&&s&&(M+=E),["main","left","right"].forEach(function(u,e){var l,a=0<e?u:"",i="left"===a,c=[];a&&(c=i?r.leftList:r.rightList,l=(i?ve:ge).value),["header","body","footer"].forEach(function(o){var e,t=O[u+"-"+o+"-wrapper"],r=O[u+"-"+o+"-table"];"header"===o?(n=k,e=!1,m||a&&(w||v)&&(e=!0),n=(_=e?c:_).reduce(function(e,t){return e+t.renderWidth},0),r&&(r.style.width=n?n+C+"px":"",_dom.browse.msie&&_xeUtils.default.arrayEach(r.querySelectorAll(".vxe-resizable"),function(e){e.style.height=e.parentNode.offsetHeight+"px"})),(e=O[u+"-"+o+"-repair"])&&(e.style.width=k+"px"),e=O[u+"-"+o+"-list"],m&&e&&_xeUtils.default.arrayEach(e.querySelectorAll(".col--group"),function(e){var t,r,n,l=G.getColumnNode(e);l&&(l=(t=l.item).showHeaderOverflow,l=_xeUtils.default.isBoolean(l)?l:v,n=r=0,(l="title"===l||(!0===l||"tooltip"===l)||"ellipsis"===l)&&_xeUtils.default.eachTree(t.children,function(e){e.children&&t.children.length||n++,r+=e.renderWidth},{children:"children"}),e.style.width=l?r-n-(d?2:0)+"px":"")})):"body"===o?(e=O[u+"-"+o+"-emptyBlock"],(0,_dom.isNodeElement)(t)&&(F?t.style.maxHeight=(a?F-L-(s?0:E):F-L)+"px":t.style.height=0<M?(a?(0<M?M-L-U:D)-(s?0:E):M-L-U)+"px":""),l&&((0,_dom.isNodeElement)(t)&&(t.style.top=L+"px"),l.style.height=(0<M?M-L-U:D)+L+U-E*(s?2:1)+"px",l.style.width=c.reduce(function(e,t){return e+t.renderWidth},i?0:C)+"px"),n=k,n=(_=a?!(b||f&&y)||R.length||h||x&&N.isMerge?S:c:_).reduce(function(e,t){return e+t.renderWidth},0),r&&(r.style.width=n?n+"px":"",r.style.paddingRight=C&&a&&(_dom.browse["-moz"]||_dom.browse.safari)?C+"px":""),e&&(e.style.width=n?n+"px":"")):"footer"===o&&(n=k,n=(_=a?!w&&!g||T.length&&p?S:c:_).reduce(function(e,t){return e+t.renderWidth},0),(0,_dom.isNodeElement)(t)&&(l&&(t.style.top=(0<M?M-U:D+L)+"px"),t.style.marginTop=-Math.max(1,E)+"px"),r&&(r.style.width=n?n+C+"px":""));var n=O[u+"-"+o+"-colgroup"];n&&_xeUtils.default.arrayEach(n.children,function(e){var a,t,r,n,i,l=e.getAttribute("name");"col_gutter"===l&&(e.style.width=C+"px"),I[l]&&(t=(a=I[l].column).showHeaderOverflow,r=a.showFooterOverflow,n=a.showOverflow,l=void 0,e.style.width=a.renderWidth+"px",i="title"===(l="header"===o?_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?v:t:"footer"===o?_xeUtils.default.isUndefined(r)||_xeUtils.default.isNull(r)?g:r:_xeUtils.default.isUndefined(n)||_xeUtils.default.isNull(n)?f:n)||(!0===l||"tooltip"===l)||"ellipsis"===l,l=O[u+"-"+o+"-list"],b&&!i&&(i=!0),l&&_xeUtils.default.arrayEach(l.querySelectorAll("."+a.id),function(e){var t=parseInt(e.getAttribute("colspan")||1),e=e.querySelector(".vxe-cell"),r=a.renderWidth;if(e){if(1<t)for(var n=G.getColumnIndex(a),l=1;l<t;l++){var o=G.getColumns(n+l);o&&(r+=o.renderWidth)}e.style.width=i?r-A*t+"px":""}}))})})}),t&&G.setCurrentRow(t),e&&o.selected&&n.selected.row&&n.selected.column&&nt.addCellSelectedClass(),(0,_vue.nextTick)()},ft=function(r){var n=Y.treeExpandeds,l=Y.treeLazyLoadeds,e=B.fullAllDataRowIdData,t=Be.value,o=Se.value,a=t.transform,i=t.loadMethod,u=o.checkStrictly,c=e[(0,_util.getRowid)(nt,r)];return new Promise(function(t){i?(l.push(r),i({$table:nt,row:r}).catch(function(){return[]}).then(function(e){c.treeLoaded=!0,_xeUtils.default.remove(l,function(e){return nt.eqRow(e,r)}),(e=!_xeUtils.default.isArray(e)?[]:e)?G.loadTreeChildren(r,e).then(function(e){e.length&&-1===nt.findRowIndexOf(n,r)&&n.push(r),!u&&G.isCheckedByCheckboxRow(r)&&G.setCheckboxRow(e,!0),(0,_vue.nextTick)().then(function(){if(a)return Z.handleTableData()}).then(function(){return G.recalculate()}).then(function(){return t()})}):(0,_vue.nextTick)().then(function(){return G.recalculate()}).then(function(){return t()})})):t()})},vt=function(e,t){var r,n=B.treeExpandedReserveRowMap;Be.value.reserve&&(r=(0,_util.getRowid)(nt,e),t?n[r]=e:n[r]&&delete n[r])},gt=function(){var e=Y.scrollXLoad,t=B.visibleColumn,r=B.scrollXStore,n=B.fullColumnIdData,t=e?t.slice(r.startIndex,r.endIndex):t.slice(0);t.forEach(function(e,t){e=e.id,e=n[e];e&&(e.$index=t)}),Y.tableColumn=t},e=function(r){return function(e){var t=B.fullAllDataRowIdData;if(e){e=t[(0,_util.getRowid)(nt,e)];if(e)return e[r]}return-1}},K=function(r){return function(e){var t=B.fullColumnIdData;if(e){e=t[e.id];if(e)return e[r]}return-1}},ht=_xeUtils.default.debounce(function(e){o(e)},20,{leading:!1,trailing:!0}),G={dispatchEvent:function(e,t,r){H(e,Object.assign({$table:nt,$event:r},t))},clearAll:function(){return(0,_util.clearTableAllStatus)(nt)},syncData:function(){return(0,_vue.nextTick)().then(function(){return Y.tableData=[],H("update:data",B.tableFullData),(0,_vue.nextTick)()})},updateData:function(){var e=Y.scrollXLoad,t=Y.scrollYLoad;return Z.handleTableData(!0).then(function(){if(G.updateFooter(),e||t)return e&&Z.updateScrollXSpace(),t&&Z.updateScrollYSpace(),G.refreshScroll()}).then(function(){return Z.updateCellAreas(),G.recalculate(!0)}).then(function(){setTimeout(function(){return nt.recalculate()},50)})},loadData:function(e){var t=B.inited,r=B.initStatus;return m(e).then(function(){return B.inited=!0,B.initStatus=!0,r||w(),t||T(),G.recalculate()})},reloadData:function(e){var t=B.inited;return G.clearAll().then(function(){return B.inited=!0,B.initStatus=!0,m(e)}).then(function(){return w(),t||T(),G.recalculate()})},reloadRow:function(e,t,r){var n=$.keepSource,l=Y.tableData,o=B.tableSourceData;return n?((n=o[G.getRowIndex(e)])&&e&&(r?(o=_xeUtils.default.get(t||e,r),_xeUtils.default.set(e,r,o),_xeUtils.default.set(n,r,o)):(t=_xeUtils.default.clone(__assign({},t),!0),_xeUtils.default.destructuring(n,Object.assign(e,t)))),Y.tableData=l.slice(0)):"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)()},loadTreeChildren:function(n,e){var l=$.keepSource,o=B.tableSourceData,i=B.fullDataRowIdData,u=B.fullAllDataRowIdData,a=Be.value,c=a.transform,d=a.children,s=a.mapChildren,t=u[(0,_util.getRowid)(nt,n)],f=t?t.level:0;return G.createData(e).then(function(e){var t,r;return l&&(t=(0,_util.getRowid)(nt,n),(r=_xeUtils.default.findTree(o,function(e){return t===(0,_util.getRowid)(nt,e)},a))&&(r.item[d]=_xeUtils.default.clone(e,!0))),_xeUtils.default.eachTree(e,function(e,t,r,n,l,o){var a=(0,_util.getRowid)(nt,e),o={row:e,rowid:a,seq:-1,index:t,_index:-1,$index:-1,items:r,parent:l,level:f+o.length};i[a]=o,u[a]=o},a),n[d]=e,c&&(n[s]=e),C(),e})},loadColumn:function(e){e=_xeUtils.default.mapTree(e,function(e){return(0,_vue.reactive)(_cell.default.createColumn(nt,e))});return n(e)},reloadColumn:function(e){return G.clearAll().then(function(){return G.loadColumn(e)})},getRowNode:function(e){if(e){var t=B.fullAllDataRowIdData,e=e.getAttribute("rowid");if(e){e=t[e];if(e)return{rowid:e.rowid,item:e.row,index:e.index,items:e.items,parent:e.parent}}}return null},getColumnNode:function(e){if(e){var t=B.fullColumnIdData,e=e.getAttribute("colid");if(e){e=t[e];if(e)return{colid:e.colid,item:e.column,index:e.index,items:e.items,parent:e.parent}}}return null},getRowSeq:e("seq"),getRowIndex:e("index"),getVTRowIndex:e("_index"),getVMRowIndex:e("$index"),getColumnIndex:K("index"),getVTColumnIndex:K("_index"),getVMColumnIndex:K("$index"),createData:function(e){function t(e){return(0,_vue.reactive)(Z.defineField(Object.assign({},e)))}var r=$.treeConfig,n=Be.value,l=r?_xeUtils.default.mapTree(e,t,n):e.map(t);return(0,_vue.nextTick)().then(function(){return l})},createRow:function(e){var t=_xeUtils.default.isArray(e);return t||(e=[e]),(0,_vue.nextTick)().then(function(){return G.createData(e).then(function(e){return t?e:e[0]})})},revertData:function(e,r){var t=$.keepSource,n=B.tableSourceData,l=B.tableFullData;if(!t)return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),(0,_vue.nextTick)();t=e;return e?_xeUtils.default.isArray(e)||(t=[e]):t=_xeUtils.default.toArray(nt.getUpdateRecords()),t.length&&t.forEach(function(e){var t;G.isInsertByRow(e)||(t=nt.findRowIndexOf(l,e),(t=n[t])&&e&&(r?_xeUtils.default.set(e,r,_xeUtils.default.clone(_xeUtils.default.get(t,r),!0)):_xeUtils.default.destructuring(e,_xeUtils.default.clone(t,!0))))}),e?(0,_vue.nextTick)():G.reloadData(n)},clearData:function(e,t){var r=B.tableFullData,n=B.visibleColumn;return arguments.length?e&&!_xeUtils.default.isArray(e)&&(e=[e]):e=r,t?e.forEach(function(e){return _xeUtils.default.set(e,t,null)}):e.forEach(function(t){n.forEach(function(e){e.property&&(0,_util.setCellValue)(t,e,null)})}),(0,_vue.nextTick)()},isInsertByRow:function(e){var t=Y.editStore;return-1<nt.findRowIndexOf(t.insertList,e)},removeInsertRow:function(){var e=Y.editStore;return nt.remove(e.insertList)},isUpdateByRow:function(e,t){var r=$.keepSource,n=$.treeConfig,l=B.visibleColumn,o=B.tableSourceData,a=B.fullDataRowIdData,i=Be.value;if(r){var u,c=void 0,d=(0,_util.getRowid)(nt,e);if(!a[d])return!1;if(n?(r=i.children,n=_xeUtils.default.findTree(o,function(e){return d===(0,_util.getRowid)(nt,e)},i),e=Object.assign({},e,((i={})[r]=null,i)),n&&(c=Object.assign({},n.item,((n={})[r]=null,n)))):c=o[a[d].index],c){if(1<arguments.length)return!v(c,e,t);for(var s=0,f=l.length;s<f;s++)if((u=l[s].property)&&!v(c,e,u))return!0}}return!1},getColumns:function(e){var t=B.visibleColumn;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getColumnById:function(e){var t=B.fullColumnIdData;return t[e]?t[e].column:null},getColumnByField:function(e){var t=B.fullColumnFieldData;return t[e]?t[e].column:null},getTableColumn:function(){return{collectColumn:B.collectColumn.slice(0),fullColumn:B.tableFullColumn.slice(0),visibleColumn:B.visibleColumn.slice(0),tableColumn:Y.tableColumn.slice(0)}},getData:function(e){var t=$.data||B.tableSynchData;return _xeUtils.default.isUndefined(e)?t.slice(0):t[e]},getCheckboxRecords:function(e){var t,r=$.treeConfig,n=B.tableFullData,l=B.afterFullData,o=B.afterTreeFullData,a=B.tableFullTreeData,i=Be.value,u=Se.value,c=i.transform,d=i.children,i=i.mapChildren,s=u.checkField,l=e?c?a:n:c?o:l;return s?r?_xeUtils.default.filterTree(l,function(e){return _xeUtils.default.get(e,s)},{children:c?i:d}):l.filter(function(e){return _xeUtils.default.get(e,s)}):(t=Y.selection,r?_xeUtils.default.filterTree(l,function(e){return-1<nt.findRowIndexOf(t,e)},{children:c?i:d}):l.filter(function(e){return-1<nt.findRowIndexOf(t,e)}))},getParentRow:function(e){var t=$.treeConfig,r=B.fullDataRowIdData;if(e&&t){t=void 0;if(t=_xeUtils.default.isString(e)?e:(0,_util.getRowid)(nt,e))return r[t]?r[t].parent:null}return null},getRowById:function(e){var t=B.fullDataRowIdData;return t[e]?t[e].row:null},getRowid:function(e){return(0,_util.getRowid)(nt,e)},getTableData:function(){var e=Y.tableData,t=Y.footerTableData,r=B.tableFullData,n=B.afterFullData;return{fullData:r.slice(0),visibleData:n.slice(0),tableData:e.slice(0),footerData:t.slice(0)}},hideColumn:function(e){e=(0,_util.handleFieldOrColumn)(nt,e);return e&&(e.visible=!1),Z.handleCustom()},showColumn:function(e){e=(0,_util.handleFieldOrColumn)(nt,e);return e&&(e.visible=!0),Z.handleCustom()},resetColumn:function(e){var t=B.tableFullColumn,r=Je.value.checkMethod,n=Object.assign({visible:!0,resizable:!0===e},e);return t.forEach(function(e){n.resizable&&(e.resizeWidth=0),r&&!r({column:e})||(e.visible=e.defaultVisible)}),n.resizable&&Z.saveCustomResizable(!0),Z.handleCustom()},refreshColumn:function(){return y().then(function(){return G.refreshScroll()}).then(function(){return G.recalculate()})},refreshScroll:function(){var t=B.lastScrollLeft,r=B.lastScrollTop,e=oe.value,n=ae.value,l=ue.value,o=se.value,a=e?e.$el:null,i=l?l.$el:null,u=o?o.$el:null,c=n?n.$el:null;return new Promise(function(e){if(t||r)return(0,_util.restoreScrollLocation)(nt,t,r).then(e).then(function(){setTimeout(e,30)});(0,_dom.setScrollTop)(a,r),(0,_dom.setScrollTop)(i,r),(0,_dom.setScrollTop)(u,r),(0,_dom.setScrollLeft)(c,t),setTimeout(e,30)})},recalculate:function(e){var t=le.value,r=oe.value,n=ae.value,l=r?r.$el:null,o=t?t.$el:null,a=n?n.$el:null;return l&&(i(o,l,a),!0===e)?s().then(function(){return i(o,l,a),s()}):s()},openTooltip:function(e,t){var r=ee.value;return r?r.open(e,t):(0,_vue.nextTick)()},closeTooltip:function(){var e=Y.tooltipStore,t=Q.value,r=ee.value;return e.visible&&(Object.assign(e,{row:null,column:null,content:null,visible:!1}),t&&t.close()),r&&r.close(),(0,_vue.nextTick)()},isAllCheckboxChecked:function(){return Y.isAllSelected},isAllCheckboxIndeterminate:function(){return!Y.isAllSelected&&Y.isIndeterminate},getCheckboxIndeterminateRecords:function(e){var t=$.treeConfig,r=B.afterFullData,n=Y.treeIndeterminates;return t?e?n.slice(0):n.filter(function(e){return-1<nt.findRowIndexOf(r,e)}):[]},setCheckboxRow:function(e,t){return(e=e&&!_xeUtils.default.isArray(e)?[e]:e).forEach(function(e){return Z.handleSelectRow({row:e},!!t)}),(0,_vue.nextTick)()},isCheckedByCheckboxRow:function(e){var t=Y.selection,r=Se.value.checkField;return r?_xeUtils.default.get(e,r):-1<nt.findRowIndexOf(t,e)},isIndeterminateByCheckboxRow:function(e){var t=Y.treeIndeterminates;return-1<nt.findRowIndexOf(t,e)&&!G.isCheckedByCheckboxRow(e)},toggleCheckboxRow:function(e){return Z.handleToggleCheckRowEvent(null,{row:e}),(0,_vue.nextTick)()},setAllCheckboxRow:function(t){var e=$.treeConfig,r=Y.selection,n=B.afterFullData,l=B.checkboxReserveRowMap,o=Be.value,a=Se.value,i=a.checkField,u=a.reserve,c=a.checkStrictly,d=a.checkMethod,s=[],a=e?[]:r.filter(function(e){return-1===nt.findRowIndexOf(n,e)});return c?Y.isAllSelected=t:(i?(c=function(e){d&&!d({row:e})||(t&&s.push(e),_xeUtils.default.set(e,i,t))},e?_xeUtils.default.eachTree(n,c,o):n.forEach(c)):e?t?_xeUtils.default.eachTree(n,function(e){d&&!d({row:e})||s.push(e)},o):d&&_xeUtils.default.eachTree(n,function(e){!d({row:e})&&-1<nt.findRowIndexOf(r,e)&&s.push(e)},o):t?s=d?n.filter(function(e){return-1<nt.findRowIndexOf(r,e)||d({row:e})}):n.slice(0):d&&(s=n.filter(function(e){return d({row:e})?0:-1<nt.findRowIndexOf(r,e)})),u&&(t?s.forEach(function(e){l[(0,_util.getRowid)(nt,e)]=e}):n.forEach(function(e){return p(e,!1)})),Y.selection=i?[]:a.concat(s)),Y.treeIndeterminates=[],Z.checkSelectionStatus(),(0,_vue.nextTick)()},getRadioReserveRecord:function(e){var t=$.treeConfig,r=B.fullDataRowIdData,n=B.radioReserveRow,l=B.afterFullData,o=ye.value,a=Be.value;if(o.reserve&&n){var i=(0,_util.getRowid)(nt,n);if(e){if(!r[i])return n}else{var u=(0,_util.getRowkey)(nt);if(t){if(_xeUtils.default.findTree(l,function(e){return i===_xeUtils.default.get(e,u)},a))return n}else if(!l.some(function(e){return i===_xeUtils.default.get(e,u)}))return n}}return null},clearRadioReserve:function(){return(B.radioReserveRow=null,_vue.nextTick)()},getCheckboxReserveRecords:function(r){var n,e=$.treeConfig,t=B.afterFullData,l=B.fullDataRowIdData,o=B.checkboxReserveRowMap,a=Se.value,i=Be.value,u=[];return a.reserve&&(n={},e?_xeUtils.default.eachTree(t,function(e){n[(0,_util.getRowid)(nt,e)]=1},i):t.forEach(function(e){n[(0,_util.getRowid)(nt,e)]=1}),_xeUtils.default.each(o,function(e,t){e&&(r?l[t]||u.push(e):n[t]||u.push(e))})),u},clearCheckboxReserve:function(){return B.checkboxReserveRowMap={},(0,_vue.nextTick)()},toggleAllCheckboxRow:function(){return Z.triggerCheckAllEvent(null,!Y.isAllSelected),(0,_vue.nextTick)()},clearCheckboxRow:function(){var e=$.treeConfig,t=B.tableFullData,r=Be.value,n=Se.value,l=n.checkField,n=n.reserve;return l&&(e?_xeUtils.default.eachTree(t,function(e){return _xeUtils.default.set(e,l,!1)},r):t.forEach(function(e){return _xeUtils.default.set(e,l,!1)})),n&&t.forEach(function(e){return p(e,!1)}),Y.isAllSelected=!1,Y.isIndeterminate=!1,Y.selection=[],Y.treeIndeterminates=[],(0,_vue.nextTick)()},setCurrentRow:function(e){var t=Ee.value,r=J.value;return G.clearCurrentRow(),G.clearCurrentColumn(),Y.currentRow=e,(t.isCurrent||$.highlightCurrentRow)&&r&&_xeUtils.default.arrayEach(r.querySelectorAll('[rowid="'+(0,_util.getRowid)(nt,e)+'"]'),function(e){return(0,_dom.addClass)(e,"row--current")}),(0,_vue.nextTick)()},isCheckedByRadioRow:function(e){return nt.eqRow(Y.selectRow,e)},setRadioRow:function(e){var t=ye.value.checkMethod;return!e||t&&!t({row:e})||(Y.selectRow=e,e=e,ye.value.reserve&&(B.radioReserveRow=e)),(0,_vue.nextTick)()},clearCurrentRow:function(){var e=J.value;return Y.currentRow=null,B.hoverRow=null,e&&_xeUtils.default.arrayEach(e.querySelectorAll(".row--current"),function(e){return(0,_dom.removeClass)(e,"row--current")}),(0,_vue.nextTick)()},clearRadioRow:function(){return(Y.selectRow=null,_vue.nextTick)()},getCurrentRecord:function(){return Ee.value.isCurrent||$.highlightCurrentRow?Y.currentRow:null},getRadioRecord:function(e){var t=$.treeConfig,r=B.fullDataRowIdData,n=B.afterFullData,l=Y.selectRow,o=Be.value;if(l){var a=(0,_util.getRowid)(nt,l);if(e){if(!r[a])return l}else if(t){var i=(0,_util.getRowkey)(nt);if(_xeUtils.default.findTree(n,function(e){return a===_xeUtils.default.get(e,i)},o))return l}else if(-1<nt.findRowIndexOf(n,l))return l}return null},getCurrentColumn:function(){return Ce.value.isCurrent||$.highlightCurrentColumn?Y.currentColumn:null},setCurrentColumn:function(e){e=(0,_util.handleFieldOrColumn)(nt,e);return e&&(G.clearCurrentRow(),G.clearCurrentColumn(),Y.currentColumn=e),(0,_vue.nextTick)()},clearCurrentColumn:function(){return(Y.currentColumn=null,_vue.nextTick)()},sort:function(e,t){var r=Ue.value,n=r.multiple,l=r.remote,o=r.orders;return e&&_xeUtils.default.isString(e)&&(e=[{field:e,order:t}]),(e=!_xeUtils.default.isArray(e)?[e]:e).length?(n||a(),(n?e:[e[0]]).forEach(function(e,t){var r=e.field,n=e.order,e=r;(e=_xeUtils.default.isString(r)?G.getColumnByField(r):e)&&e.sortable&&(-1===o.indexOf(n)&&(n=c(e)),e.order!==n&&(e.order=n),e.sortTime=Date.now()+t)}),l||Z.handleTableData(!0),(0,_vue.nextTick)().then(st)):(0,_vue.nextTick)()},clearSort:function(e){var t=Ue.value;return e?(e=(0,_util.handleFieldOrColumn)(nt,e))&&(e.order=null):a(),t.remote||Z.handleTableData(!0),(0,_vue.nextTick)().then(st)},isSort:function(e){if(e){e=(0,_util.handleFieldOrColumn)(nt,e);return!!e&&(e.sortable&&!!e.order)}return 0<G.getSortColumns().length},getSortColumns:function(){var e=Ue.value,t=e.multiple,e=e.chronological,n=[];return B.tableFullColumn.forEach(function(e){var t=e.property,r=e.order;e.sortable&&r&&n.push({column:e,field:t,property:t,order:r,sortTime:e.sortTime})}),t&&e&&1<n.length?_xeUtils.default.orderBy(n,"sortTime"):n},closeFilter:function(){var e=Y.filterStore,t=e.column,r=e.visible;return Object.assign(e,{isAllSelected:!1,isIndeterminate:!1,options:[],visible:!1}),r&&nt.dispatchEvent("filter-visible",{column:t,property:t.property,filterList:nt.getCheckedFilters(),visible:!1},null),(0,_vue.nextTick)()},isFilter:function(e){e=(0,_util.handleFieldOrColumn)(nt,e);return e?e.filters&&e.filters.some(function(e){return e.checked}):0<nt.getCheckedFilters().length},isRowExpandLoaded:function(e){e=B.fullAllDataRowIdData[(0,_util.getRowid)(nt,e)];return e&&!!e.expandLoaded},clearRowExpandLoaded:function(t){var e=Y.expandLazyLoadeds,r=B.fullAllDataRowIdData,n=Ye.value.lazy,r=r[(0,_util.getRowid)(nt,t)];return n&&r&&(r.expandLoaded=!1,_xeUtils.default.remove(e,function(e){return nt.eqRow(e,t)})),(0,_vue.nextTick)()},reloadRowExpand:function(e){var t=Y.expandLazyLoadeds;return Ye.value.lazy&&-1===nt.findRowIndexOf(t,e)&&G.clearRowExpandLoaded(e).then(function(){return h(e)}),(0,_vue.nextTick)()},reloadExpandContent:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadExpandContent","reloadRowExpand"]),G.reloadRowExpand(e)},toggleRowExpand:function(e){return G.setRowExpand(e,!G.isExpandByRow(e))},setAllRowExpand:function(e){var t=Ye.value;return G.setRowExpand(t.lazy?Y.tableData:B.tableFullData,e)},setRowExpand:function(e,t){var r,n=Y.rowExpandeds,l=Y.expandLazyLoadeds,o=Y.expandColumn,a=B.fullAllDataRowIdData,i=Ye.value,u=i.reserve,c=i.lazy,d=i.accordion,s=i.toggleMethod,f=[],v=G.getColumnIndex(o),g=G.getVMColumnIndex(o);return e&&(_xeUtils.default.isArray(e)||(e=[e]),d&&(n=[],e=e.slice(e.length-1,e.length)),r=s?e.filter(function(e){return s({$table:nt,expanded:t,column:o,columnIndex:v,$columnIndex:g,row:e,rowIndex:G.getRowIndex(e),$rowIndex:G.getVMRowIndex(e)})}):e,t?r.forEach(function(e){var t;-1===nt.findRowIndexOf(n,e)&&(t=a[(0,_util.getRowid)(nt,e)],c&&!t.expandLoaded&&-1===nt.findRowIndexOf(l,e)?f.push(h(e)):n.push(e))}):_xeUtils.default.remove(n,function(e){return-1<nt.findRowIndexOf(r,e)}),u&&r.forEach(function(e){return x(e,t)})),Y.rowExpandeds=n,Promise.all(f).then(function(){return G.recalculate()})},isExpandByRow:function(e){var t=Y.rowExpandeds;return-1<nt.findRowIndexOf(t,e)},clearRowExpand:function(){var e=Y.rowExpandeds,t=B.tableFullData,r=Ye.value.reserve,n=e.length;return Y.rowExpandeds=[],r&&t.forEach(function(e){return x(e,!1)}),(0,_vue.nextTick)().then(function(){n&&G.recalculate()})},clearRowExpandReserve:function(){return B.rowExpandedReserveRowMap={},(0,_vue.nextTick)()},getRowExpandRecords:function(){return Y.rowExpandeds.slice(0)},getTreeExpandRecords:function(){return Y.treeExpandeds.slice(0)},isTreeExpandLoaded:function(e){e=B.fullAllDataRowIdData[(0,_util.getRowid)(nt,e)];return e&&!!e.treeLoaded},clearTreeExpandLoaded:function(t){var e=Y.treeExpandeds,r=B.fullAllDataRowIdData,n=Be.value,l=n.transform,n=n.lazy,r=r[(0,_util.getRowid)(nt,t)];return n&&r&&(r.treeLoaded=!1,_xeUtils.default.remove(e,function(e){return nt.eqRow(e,t)})),l?(E(),Z.handleTableData()):(0,_vue.nextTick)()},reloadTreeExpand:function(e){var t=Y.treeLazyLoadeds,r=Be.value,n=r.transform,l=r.lazy,r=r.hasChild;return l&&e[r]&&-1===nt.findRowIndexOf(t,e)&&G.clearTreeExpandLoaded(e).then(function(){return ft(e)}).then(function(){if(n)return E(),Z.handleTableData()}).then(function(){return G.recalculate()}),(0,_vue.nextTick)()},reloadTreeChilds:function(e){return"development"===process.env.NODE_ENV&&(0,_log.warnLog)("vxe.error.delFunc",["reloadTreeChilds","reloadTreeExpand"]),G.reloadTreeExpand(e)},toggleTreeExpand:function(e){return G.setTreeExpand(e,!G.isTreeExpandByRow(e))},setAllTreeExpand:function(e){var t=B.tableFullData,r=Be.value,n=r.transform,l=r.lazy,o=r.children,a=[];return _xeUtils.default.eachTree(t,function(e){var t=e[o];(l||t&&t.length)&&a.push(e)},r),G.setTreeExpand(a,e).then(function(){if(n)return E(),G.recalculate()})},setTreeExpand:function(e,t){var r=Be.value.transform;return e&&(e=!_xeUtils.default.isArray(e)?[e]:e).length?r?l(e,t).then(function(){return E(),Z.handleTableData()}).then(function(){return G.recalculate()}):l(e,t):(0,_vue.nextTick)()},isTreeExpandByRow:function(e){var t=Y.treeExpandeds;return-1<nt.findRowIndexOf(t,e)},clearTreeExpand:function(){var e=Y.treeExpandeds,t=B.tableFullTreeData,r=Be.value,n=r.transform,l=r.reserve,o=e.length;return Y.treeExpandeds=[],l&&_xeUtils.default.eachTree(t,function(e){return vt(e,!1)},r),Z.handleTableData().then(function(){if(n)return E(),Z.handleTableData()}).then(function(){if(o)return G.recalculate()})},clearTreeExpandReserve:function(){return B.treeExpandedReserveRowMap={},(0,_vue.nextTick)()},getScroll:function(){var e=Y.scrollXLoad,t=Y.scrollYLoad,r=oe.value.$el;return{virtualX:e,virtualY:t,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}},scrollTo:function(e,t){var r=oe.value,n=ae.value,l=se.value,r=r?r.$el:null,l=l?l.$el:null,n=n?n.$el:null;return _xeUtils.default.isNumber(e)&&(0,_dom.setScrollLeft)(n||r,e),_xeUtils.default.isNumber(t)&&(0,_dom.setScrollTop)(l||r,t),Y.scrollXLoad||Y.scrollYLoad?new Promise(function(e){return setTimeout(function(){return e((0,_vue.nextTick)())},50)}):(0,_vue.nextTick)()},scrollToRow:function(e,t){var r=[];return e&&($.treeConfig?r.push(Z.scrollToTreeRow(e)):r.push((0,_util.rowToVisible)(nt,e))),t&&r.push(G.scrollToColumn(t)),Promise.all(r)},scrollToColumn:function(e){var t=B.fullColumnIdData,e=(0,_util.handleFieldOrColumn)(nt,e);return e&&t[e.id]?(0,_util.colToVisible)(nt,e):(0,_vue.nextTick)()},clearScroll:function(){var e=B.scrollXStore,t=B.scrollYStore,r=oe.value,n=ae.value,l=se.value,r=r?r.$el:null,l=l?l.$el:null,n=n?n.$el:null;return l&&((0,_util.restoreScrollListener)(l),l.scrollTop=0),n&&(n.scrollLeft=0),r&&((0,_util.restoreScrollListener)(r),r.scrollTop=0,r.scrollLeft=0),e.startIndex=0,(t.startIndex=0,_vue.nextTick)()},updateFooter:function(){var e=$.showFooter,t=$.footerMethod,r=B.visibleColumn,n=B.afterFullData;return e&&t&&(Y.footerTableData=r.length?t({columns:r,data:n,$table:nt,$grid:xe}):[]),(0,_vue.nextTick)()},updateStatus:function(a,i){var u=!_xeUtils.default.isUndefined(i);return(0,_vue.nextTick)().then(function(){var e=$.editRules,t=Y.validStore,r=oe.value;if(a&&r&&e){var n=a.row,l=a.column;if(nt.hasCellRules&&nt.hasCellRules("change",n,l)){var o=Z.getCell(n,l);if(o)return nt.validCellRules("change",n,l,i).then(function(){u&&t.visible&&(0,_util.setCellValue)(n,l,i),nt.clearValidate()}).catch(function(e){e=e.rule;u&&(0,_util.setCellValue)(n,l,i),nt.showValidTooltip({rule:e,row:n,column:l,cell:o})})}}})},setMergeCells:function(e){return $.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]),t(e,Y.mergeList,B.afterFullData),(0,_vue.nextTick)().then(function(){return Z.updateCellAreas()})},removeMergeCells:function(e){$.spanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-cells","span-method"]);var t=r(e,Y.mergeList,B.afterFullData);return(0,_vue.nextTick)().then(function(){return Z.updateCellAreas(),t})},getMergeCells:function(){return Y.mergeList.slice(0)},clearMergeCells:function(){return Y.mergeList=[],(0,_vue.nextTick)()},setMergeFooterItems:function(e){return $.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]),t(e,Y.mergeFooterList),(0,_vue.nextTick)().then(function(){return Z.updateCellAreas()})},removeMergeFooterItems:function(e){$.footerSpanMethod&&(0,_log.errLog)("vxe.error.errConflicts",["merge-footer-items","footer-span-method"]);var t=r(e,Y.mergeFooterList);return(0,_vue.nextTick)().then(function(){return Z.updateCellAreas(),t})},getMergeFooterItems:function(){return Y.mergeFooterList.slice(0)},clearMergeFooterItems:function(){return Y.mergeFooterList=[],(0,_vue.nextTick)()},focus:function(){return B.isActivated=!0,(0,_vue.nextTick)()},blur:function(){return(B.isActivated=!1,_vue.nextTick)()},connect:function(e){return e?(z=e).syncUpdate({collectColumn:B.collectColumn,$table:nt}):(0,_log.errLog)("vxe.error.barUnableLink"),(0,_vue.nextTick)()}},Z={getSetupOptions:function(){return _conf.default},updateAfterDataIndex:C,callSlot:function(e,t){if(e){if(xe)return xe.callSlot(e,t);if(_xeUtils.default.isFunction(e))return e(t)}return[]},getParentElem:function(){var e=J.value;if(xe){var t=xe.getRefMaps().refElem.value;return t?t.parentNode:null}return e?e.parentNode:null},getParentHeight:function(){var e=$.height,t=J.value;if(t){t=t.parentNode,e="auto"===e?(0,_dom.getPaddingTopBottomSize)(t):0;return Math.floor(xe?xe.getParentHeight():_xeUtils.default.toNumber(getComputedStyle(t).height)-e)}return 0},getExcludeHeight:function(){return xe?xe.getExcludeHeight():0},defineField:function(l){var e=$.treeConfig,t=Ye.value,r=Be.value,n=ye.value,o=Se.value,a=(0,_util.getRowkey)(nt);return B.tableFullColumn.forEach(function(e){var t,r=e.property,n=e.editRender;r&&!_xeUtils.default.has(l,r)&&(t=null,n&&(n=n.defaultValue,_xeUtils.default.isFunction(n)?t=n({column:e}):_xeUtils.default.isUndefined(n)||(t=n)),_xeUtils.default.set(l,r,t))}),[n.labelField,o.checkField,o.labelField,t.labelField].forEach(function(e){e&&(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,e))&&_xeUtils.default.set(l,e,null)}),e&&r.lazy&&_xeUtils.default.isUndefined(l[r.children])&&(l[r.children]=null),(0,_utils.eqEmptyValue)(_xeUtils.default.get(l,a))&&_xeUtils.default.set(l,a,(0,_util.getRowUniqueId)()),l},handleTableData:function(e){var i,u,t,r,n,l,o,a,c,d,s,f,v,g,h,p,x=Y.scrollYLoad,m=B.scrollYStore,_=B.fullDataRowIdData,w=B.afterFullData;e&&(r=$.treeConfig,n=B.tableFullColumn,l=B.tableFullData,o=B.tableFullTreeData,a=Oe.value,c=Ue.value,d=Be.value,s=d.transform,f=a.remote,v=a.filterMethod,g=c.remote,h=c.sortMethod,p=c.multiple,e=c.chronological,a=[],c=[],f&&g?r&&s?a=c=_xeUtils.default.searchTree(o,function(){return!0},__assign(__assign({},d),{original:!0})):c=a=(r?o:l).slice(0):(i=[],u=[],n.forEach(function(e){var t,r,n=e.property,l=e.sortable,o=e.order,a=e.filters;!f&&a&&a.length&&(t=[],r=[],a.forEach(function(e){e.checked&&(r.push(e),t.push(e.value))}),r.length&&i.push({column:e,valueList:t,itemList:r})),!g&&l&&o&&u.push({column:e,field:n,property:n,order:o,sortTime:e.sortTime})}),p&&e&&1<u.length&&(u=_xeUtils.default.orderBy(u,"sortTime")),!f&&i.length?(e=function(u){return i.every(function(e){var t=e.column,r=e.valueList,n=e.itemList,l=t.filterMethod,e=t.filterRender,e=e?_vXETable.VXETable.renderer.get(e.name):null,o=e?e.filterMethod:null,a=e?e.defaultFilterMethod:null,i=(0,_util.getCellValue)(u,t);return l?n.some(function(e){return l({value:e.value,option:e,cellValue:i,row:u,column:t,$table:nt})}):o?n.some(function(e){return o({value:e.value,option:e,cellValue:i,row:u,column:t,$table:nt})}):v?v({options:n,values:r,cellValue:i,row:u,column:t}):a?n.some(function(e){return a({value:e.value,option:e,cellValue:i,row:u,column:t,$table:nt})}):-1<r.indexOf(_xeUtils.default.get(u,t.property))})},r&&s?a=c=_xeUtils.default.searchTree(o,e,__assign(__assign({},d),{original:!0})):c=a=(r?o:l).filter(e)):r&&s?a=c=_xeUtils.default.searchTree(o,function(){return!0},__assign(__assign({},d),{original:!0})):c=a=(r?o:l).slice(0),!g&&u.length&&(r&&s?a=c=h?(t=h({data:c,sortList:u,$table:nt}),_xeUtils.default.isArray(t)?t:c):_xeUtils.default.orderBy(c,u.map(function(e){var t=e.column,e=e.order;return[b(t),e]})):c=a=h?(t=h({data:a,sortList:u,$table:nt}),_xeUtils.default.isArray(t)?t:a):_xeUtils.default.orderBy(a,u.map(function(e){var t=e.column,e=e.order;return[b(t),e]})))),B.afterFullData=a,B.afterTreeFullData=c,C(),w=E());w=x?w.slice(m.startIndex,m.endIndex):w.slice(0);return w.forEach(function(e,t){e=(0,_util.getRowid)(nt,e),e=_[e];e&&(e.$index=t)}),Y.tableData=w,(0,_vue.nextTick)()},cacheRowMap:function(i){function e(e,t,r,n,l,o){var a=(0,_util.getRowid)(nt,e),n=u&&n?(0,_util.toTreePathSeq)(n):t+1,o=o?o.length-1:0;(0,_utils.eqEmptyValue)(a)&&(a=(0,_util.getRowUniqueId)(),_xeUtils.default.set(e,f,a)),v&&e[c.hasChild]&&_xeUtils.default.isUndefined(e[c.children])&&(e[c.children]=null),o={row:e,rowid:a,seq:n,index:u&&l?-1:t,_index:-1,$index:-1,items:r,parent:l,level:o},i&&(d[a]=o),s[a]=o}var u=$.treeConfig,c=Be.value,d=B.fullDataRowIdData,s=B.fullAllDataRowIdData,t=B.tableFullData,r=B.tableFullTreeData,f=(0,_util.getRowkey)(nt),v=u&&c.lazy;i&&(d=B.fullDataRowIdData={}),s=B.fullAllDataRowIdData={},u?_xeUtils.default.eachTree(r,e,c):t.forEach(e)},analyColumnWidth:function(){var e=B.tableFullColumn,t=Ce.value,r=t.width,n=t.minWidth,l=[],o=[],a=[],i=[],u=[],c=[];e.forEach(function(e){r&&!e.width&&(e.width=r),n&&!e.minWidth&&(e.minWidth=n),e.visible&&(e.resizeWidth?l:(0,_dom.isPx)(e.width)?o:(0,_dom.isScale)(e.width)?i:(0,_dom.isPx)(e.minWidth)?a:(0,_dom.isScale)(e.minWidth)?u:c).push(e)}),Object.assign(Y.columnStore,{resizeList:l,pxList:o,pxMinList:a,scaleList:i,scaleMinList:u,autoList:c})},saveCustomResizable:function(e){var r,t=$.id,n=$.customConfig,l=Je.value,o=B.collectColumn,l=l.storage,l=!0===l||l&&l.resizable;n&&l&&(l=lt(resizableStorageKey),t?(e||(r=_xeUtils.default.isPlainObject(l[t])?l[t]:{},_xeUtils.default.eachTree(o,function(e){var t;!e.resizeWidth||(t=e.getKey())&&(r[t]=e.renderWidth)})),l[t]=_xeUtils.default.isEmpty(r)?void 0:r,localStorage.setItem(resizableStorageKey,_xeUtils.default.toJSONString(l))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},saveCustomVisible:function(){var r,n,e=$.id,t=$.customConfig,l=B.collectColumn,o=Je.value,a=o.checkMethod,o=o.storage,o=!0===o||o&&o.visible;t&&o&&(o=lt(visibleStorageKey),r=[],n=[],e?(_xeUtils.default.eachTree(l,function(e){var t;a&&!a({column:e})||(!e.visible&&e.defaultVisible?(t=e.getKey())&&r.push(t):e.visible&&!e.defaultVisible&&(t=e.getKey())&&n.push(t))}),o[e]=[r.join(",")].concat(n.length?[n.join(",")]:[]).join("|")||void 0,localStorage.setItem(visibleStorageKey,_xeUtils.default.toJSONString(o))):(0,_log.errLog)("vxe.error.reqProp",["id"]))},handleCustom:function(){return Z.saveCustomVisible(),Z.analyColumnWidth(),G.refreshColumn()},preventEvent:function(t,e,r,n,l){var o;return _vXETable.VXETable.interceptor.get(e).some(function(e){return!1===e(Object.assign({$grid:xe,$table:nt,$event:t},r))})||n&&(o=n()),l&&l(),o},checkSelectionStatus:function(){var t,r,e=$.treeConfig,n=Y.selection,l=Y.treeIndeterminates,o=B.afterFullData,a=Se.value,i=a.checkField,u=a.halfField,c=a.checkStrictly,d=a.checkMethod;c||(t=[],c=a=!(r=[]),c=i?(a=o.every(d?function(e){return d({row:e})?!!_xeUtils.default.get(e,i)&&(r.push(e),!0):(t.push(e),!0)}:function(e){return _xeUtils.default.get(e,i)})&&o.length!==t.length,e?u?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,u)||-1<nt.findRowIndexOf(l,e)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)||-1<nt.findRowIndexOf(l,e)}):u?!a&&o.some(function(e){return _xeUtils.default.get(e,i)||_xeUtils.default.get(e,u)}):!a&&o.some(function(e){return _xeUtils.default.get(e,i)})):(a=o.every(d?function(e){return d({row:e})?-1<nt.findRowIndexOf(n,e)&&(r.push(e),!0):(t.push(e),!0)}:function(e){return-1<nt.findRowIndexOf(n,e)})&&o.length!==t.length,e?!a&&o.some(function(e){return-1<nt.findRowIndexOf(l,e)||-1<nt.findRowIndexOf(n,e)}):!a&&o.some(function(e){return-1<nt.findRowIndexOf(n,e)})),Y.isAllSelected=a,Y.isIndeterminate=c)},handleSelectRow:function(e,r){var t,n=e.row,l=$.treeConfig,o=Y.selection,a=Y.treeIndeterminates,i=B.afterFullData,u=Be.value,c=Se.value,d=c.checkField,e=c.checkStrictly,s=c.checkMethod;if(d)if(l&&!e){if(-1===r?(-1===nt.findRowIndexOf(a,n)&&a.push(n),_xeUtils.default.set(n,d,!1)):_xeUtils.default.eachTree([n],function(t){!nt.eqRow(t,n)&&s&&!s({row:t})||(_xeUtils.default.set(t,d,r),_xeUtils.default.remove(a,function(e){return e===t}),p(n,r))},u),(t=_xeUtils.default.findTree(i,function(e){return nt.eqRow(e,n)},u))&&t.parent){var f=void 0,v=s?t.items.filter(function(e){return s({row:e})}):t.items;return f=_xeUtils.default.find(t.items,function(e){return-1<nt.findRowIndexOf(a,e)})?-1:(g=t.items.filter(function(e){return _xeUtils.default.get(e,d)})).filter(function(e){return-1<nt.findRowIndexOf(v,e)}).length===v.length||!(!g.length&&-1!==r)&&-1,Z.handleSelectRow({row:t.parent},f)}}else s&&!s({row:n})||(_xeUtils.default.set(n,d,r),p(n,r));else if(l&&!e){if(-1===r?(-1===nt.findRowIndexOf(a,n)&&a.push(n),_xeUtils.default.remove(o,function(e){return nt.eqRow(e,n)})):_xeUtils.default.eachTree([n],function(t){!nt.eqRow(t,n)&&s&&!s({row:t})||(r?o.push(t):_xeUtils.default.remove(o,function(e){return e===t}),_xeUtils.default.remove(a,function(e){return e===t}),p(n,r))},u),(t=_xeUtils.default.findTree(i,function(e){return nt.eqRow(e,n)},u))&&t.parent){var g,f=void 0,h=s?t.items.filter(function(e){return s({row:e})}):t.items;return f=_xeUtils.default.find(t.items,function(e){return-1<nt.findRowIndexOf(a,e)})?-1:(g=t.items.filter(function(e){return-1<nt.findRowIndexOf(o,e)})).filter(function(e){return-1<nt.findRowIndexOf(h,e)}).length===h.length||!(!g.length&&-1!==r)&&-1,Z.handleSelectRow({row:t.parent},f)}}else s&&!s({row:n})||(r?-1===nt.findRowIndexOf(o,n)&&o.push(n):_xeUtils.default.remove(o,function(e){return nt.eqRow(e,n)}),p(n,r));Z.checkSelectionStatus()},triggerHeaderHelpEvent:function(t,e){var r,n=e.column,e=n.titlePrefix||n.titleHelp;(e.content||e.message)&&(n=Y.tooltipStore,r=(0,_utils.getFuncText)(e.content||e.message),N(!0),n.visible=!0,n.currOpts=__assign(__assign({},e),{content:null}),(0,_vue.nextTick)(function(){var e=Q.value;e&&e.open(t.currentTarget,r)}))},triggerHeaderTooltipEvent:function(e,t){var r=Y.tooltipStore,n=t.column,e=e.currentTarget;N(!0),r.column===n&&r.visible||V(0,e,e,null,t)},triggerBodyTooltipEvent:function(e,t){var r=$.editConfig,n=Y.editStore,l=Y.tooltipStore,o=Le.value,a=n.actived,i=t.row,n=t.column,e=e.currentTarget;N(l.column!==n||l.row!==i),(0,_utils.isEnableConf)(r)&&("row"===o.mode&&a.row===i||a.row===i&&a.column===n)||l.column===n&&l.row===i&&l.visible||(l=i=void 0,n.treeNode?(i=e.querySelector(".vxe-tree-cell"),"html"===n.type&&(l=e.querySelector(".vxe-cell--html"))):l=e.querySelector("html"===n.type?".vxe-cell--html":".vxe-cell--label"),V(0,e,i||e.children[0],l,t))},triggerFooterTooltipEvent:function(e,t){var r=t.column,n=Y.tooltipStore,e=e.currentTarget;N(n.column!==r||n.row),n.column===r&&n.visible||V(0,e,e.querySelector(".vxe-cell--item")||e.children[0],null,t)},handleTargetLeaveEvent:function(){var e=Ie.value,t=Q.value;t&&t.setActived(!1),e.enterable?B.tooltipTimeout=setTimeout(function(){(t=Q.value)&&!t.isActived()&&G.closeTooltip()},e.leaveDelay):G.closeTooltip()},triggerHeaderCellClickEvent:function(e,t){var r=B._lastResizeTime,n=Ue.value,l=Ce.value,o=t.column,a=e.currentTarget,i=r&&r>Date.now()-300,u=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--sort").flag,r=(0,_dom.getEventTargetNode)(e,a,"vxe-cell--filter").flag;"cell"!==n.trigger||i||u||r||Z.triggerSortEvent(e,o,c(o)),G.dispatchEvent("header-cell-click",Object.assign({triggerResizable:i,triggerSort:u,triggerFilter:r,cell:a},t),e),(l.isCurrent||$.highlightCurrentColumn)&&G.setCurrentColumn(o)},triggerHeaderCellDblclickEvent:function(e,t){G.dispatchEvent("header-cell-dblclick",Object.assign({cell:e.currentTarget},t),e)},triggerCellClickEvent:function(e,t){var r=$.highlightCurrentRow,n=$.editConfig,l=Y.editStore,o=Ye.value,a=Le.value,i=Be.value,u=ye.value,c=Se.value,d=Ee.value,s=l.actived,f=t.row,v=t.column,g=v.type,h=v.treeNode,p="radio"===g,x="checkbox"===g,m="expand"===g,_=e.currentTarget,w=p&&(0,_dom.getEventTargetNode)(e,_,"vxe-cell--radio").flag,b=x&&(0,_dom.getEventTargetNode)(e,_,"vxe-cell--checkbox").flag,l=h&&(0,_dom.getEventTargetNode)(e,_,"vxe-tree--btn-wrapper").flag,g=m&&(0,_dom.getEventTargetNode)(e,_,"vxe-table--expanded").flag;t=Object.assign({cell:_,triggerRadio:w,triggerCheckbox:b,triggerTreeNode:l,triggerExpandNode:g},t),b||w||(!g&&("row"===o.trigger||m&&"cell"===o.trigger)&&Z.triggerRowExpandEvent(e,t),("row"===i.trigger||h&&"cell"===i.trigger)&&Z.triggerTreeExpandEvent(e,t)),l||(g||((d.isCurrent||r)&&(b||w||Z.triggerCurrentRowEvent(e,t)),!w&&("row"===u.trigger||p&&"cell"===u.trigger)&&Z.triggerRadioRowEvent(e,t),!b&&("row"===c.trigger||x&&"cell"===c.trigger)&&Z.handleToggleCheckRowEvent(e,t)),(0,_utils.isEnableConf)(n)&&("manual"===a.trigger?s.args&&s.row===f&&v!==s.column&&R(e,t):s.args&&f===s.row&&v===s.column||("click"===a.trigger||"dblclick"===a.trigger&&"row"===a.mode&&s.row===f)&&R(e,t))),G.dispatchEvent("cell-click",t,e)},triggerCellDblclickEvent:function(e,t){var r=$.editConfig,n=Y.editStore,l=Le.value,o=n.actived,n=e.currentTarget;t=Object.assign({cell:n},t),(0,_utils.isEnableConf)(r)&&"dblclick"===l.trigger&&(o.args&&e.currentTarget===o.args.cell||("row"===l.mode?d("blur").catch(function(e){return e}).then(function(){nt.handleActived(t,e).then(function(){return d("change")}).catch(function(e){return e})}):"cell"===l.mode&&nt.handleActived(t,e).then(function(){return d("change")}).catch(function(e){return e}))),G.dispatchEvent("cell-dblclick",t,e)},handleToggleCheckRowEvent:function(e,t){var r=Y.selection,n=Se.value.checkField,l=t.row,l=n?!_xeUtils.default.get(l,n):-1===nt.findRowIndexOf(r,l);e?Z.triggerCheckRowEvent(e,t,l):Z.handleSelectRow(t,l)},triggerCheckRowEvent:function(e,t,r){var n=Se.value.checkMethod;n&&!n({row:t.row})||(Z.handleSelectRow(t,r),G.dispatchEvent("checkbox-change",Object.assign({records:G.getCheckboxRecords(),reserves:G.getCheckboxReserveRecords(),indeterminates:G.getCheckboxIndeterminateRecords(),checked:r},t),e))},triggerCheckAllEvent:function(e,t){G.setAllCheckboxRow(t),e&&G.dispatchEvent("checkbox-all",{records:G.getCheckboxRecords(),reserves:G.getCheckboxReserveRecords(),indeterminates:G.getCheckboxIndeterminateRecords(),checked:t},e)},triggerRadioRowEvent:function(e,t){var r=Y.selectRow,n=t.row,l=ye.value,o=n,n=r!==o;n?G.setRadioRow(o):l.strict||(n=r===o)&&(o=null,G.clearRadioRow()),n&&G.dispatchEvent("radio-change",__assign({oldValue:r,newValue:o},t),e)},triggerCurrentRowEvent:function(e,t){var r=Y.currentRow,n=t.row,l=r!==n;G.setCurrentRow(n),l&&G.dispatchEvent("current-change",__assign({oldValue:r,newValue:n},t),e)},triggerRowExpandEvent:function(e,t){var r=Y.expandLazyLoadeds,n=Y.expandColumn,l=Ye.value,o=t.row;l.lazy&&-1!==nt.findRowIndexOf(r,o)||(t=!G.isExpandByRow(o),l=G.getColumnIndex(n),r=G.getVMColumnIndex(n),G.setRowExpand(o,t),G.dispatchEvent("toggle-row-expand",{expanded:t,column:n,columnIndex:l,$columnIndex:r,row:o,rowIndex:G.getRowIndex(o),$rowIndex:G.getVMRowIndex(o)},e))},triggerTreeExpandEvent:function(e,t){var r=Y.treeLazyLoadeds,n=Be.value,l=t.row,o=t.column;n.lazy&&-1!==nt.findRowIndexOf(r,l)||(t=!G.isTreeExpandByRow(l),n=G.getColumnIndex(o),r=G.getVMColumnIndex(o),G.setTreeExpand(l,t),G.dispatchEvent("toggle-tree-expand",{expanded:t,column:o,columnIndex:n,$columnIndex:r,row:l},e))},triggerSortEvent:function(e,t,r){var n=Ue.value,l=t.property;t.sortable&&(r&&t.order!==r?G.sort({field:l,order:r}):G.clearSort(n.multiple?t:null),t={column:t,property:l,order:t.order,sortList:G.getSortColumns()},G.dispatchEvent("sort-change",t,e))},triggerScrollXEvent:function(){f()},triggerScrollYEvent:function(e){var t=B.scrollYStore,r=t.adaptive,n=t.offsetSize,t=t.visibleSize;(isWebkit&&r&&2*n+t<=40?o:ht)(e)},scrollToTreeRow:function(t){var r,e=$.treeConfig,n=B.tableFullData,l=[];return e&&(e=Be.value,(e=_xeUtils.default.findTree(n,function(e){return nt.eqRow(e,t)},e))&&(r=e.nodes).forEach(function(e,t){t<r.length-1&&!G.isTreeExpandByRow(e)&&l.push(G.setTreeExpand(e,!0))})),Promise.all(l).then(function(){return(0,_util.rowToVisible)(nt,t)})},updateScrollXSpace:function(){var n=Y.scrollXLoad,l=Y.scrollbarWidth,e=B.visibleColumn,t=B.scrollXStore,o=B.elemStore,a=B.tableWidth,r=le.value,i=oe.value,u=ae.value,i=i?i.$el:null;i&&(r=r?r.$el:null,u=u?u.$el:null,r=r?r.querySelector(".vxe-table--header"):null,i=i.querySelector(".vxe-table--body"),u=u?u.querySelector(".vxe-table--footer"):null,t=e.slice(0,t.startIndex).reduce(function(e,t){return e+t.renderWidth},0),t=n?t+"px":"",r&&(r.style.marginLeft=t),i.style.marginLeft=t,u&&(u.style.marginLeft=t),["main"].forEach(function(r){["header","body","footer"].forEach(function(e){var t=o[r+"-"+e+"-xSpace"];t&&(t.style.width=n?a+("header"===e?l:0)+"px":"")})}),(0,_vue.nextTick)(st))},updateScrollYSpace:function(){var e=Y.scrollYLoad,t=B.scrollYStore,r=B.elemStore,n=B.afterFullData,l=t.startIndex,t=t.rowHeight,n=n.length*t,t=Math.max(0,l*t),o="",a="";e&&(o=t+"px",a=n+"px"),["main","left","right"].forEach(function(t){var e=r[t+"-body-table"];e&&(e.style.marginTop=o),["header","body","footer"].forEach(function(e){e=r[t+"-"+e+"-ySpace"];e&&(e.style.height=a)})}),(0,_vue.nextTick)(st)},updateScrollXData:function(){Y.tableColumn=[],(0,_vue.nextTick)(function(){gt(),Z.updateScrollXSpace()})},updateScrollYData:function(){Y.tableData=[],(0,_vue.nextTick)(function(){Z.handleTableData(),Z.updateScrollYSpace()})},checkScrolling:function(){var e=ve.value,t=ge.value,r=oe.value,r=r?r.$el:null;r&&(e&&(0<r.scrollLeft?(0,_dom.addClass):(0,_dom.removeClass))(e,"scrolling--middle"),t&&(r.clientWidth<r.scrollWidth-Math.ceil(r.scrollLeft)?(0,_dom.addClass):(0,_dom.removeClass))(t,"scrolling--middle"))},updateZindex:function(){$.zIndex?B.tZindex=$.zIndex:B.tZindex<(0,_utils.getLastZIndex)()&&(B.tZindex=(0,_utils.nextZIndex)())},updateCellAreas:function(){var e=$.mouseConfig,t=Me.value;e&&t.area&&nt.handleUpdateCellAreas&&nt.handleUpdateCellAreas()},triggerHoverEvent:function(e,t){t=t.row;Z.setHoverRow(t)},setHoverRow:function(e){var t=(0,_util.getRowid)(nt,e),r=J.value;Z.clearHoverRow(),r&&_xeUtils.default.arrayEach(r.querySelectorAll('[rowid="'+t+'"]'),function(e){return(0,_dom.addClass)(e,"row--hover")}),B.hoverRow=e},clearHoverRow:function(){var e=J.value;e&&_xeUtils.default.arrayEach(e.querySelectorAll(".vxe-body--row.row--hover"),function(e){return(0,_dom.removeClass)(e,"row--hover")}),B.hoverRow=null},getCell:function(e,t){var r,n=(0,_util.getRowid)(nt,e),l=oe.value,o=ue.value,e=se.value;return t.fixed&&("left"===t.fixed?o&&(r=o.$el):e&&(r=e.$el)),(r=r||l.$el)?r.querySelector('.vxe-body--row[rowid="'+n+'"] .'+t.id):null},getCellLabel:function(e,t){var r=t.formatter,n=(0,_util.getCellValue)(e,t),l=n;if(r){var o=void 0,a=B.fullAllDataRowIdData,i=(0,_util.getRowid)(nt,e),u=t.id,c=a[i];if(c&&(o=(o=c.formatData)||(a[i].formatData={}),c&&o[u]&&o[u].value===n))return o[u].label;var d,t={cellValue:n,row:e,rowIndex:G.getRowIndex(e),column:t,columnIndex:G.getColumnIndex(t)};l=_xeUtils.default.isString(r)?(d=_vXETable.VXETable.formats.get(r))?d(t):"":_xeUtils.default.isArray(r)?(d=_vXETable.VXETable.formats.get(r[0]))?d.apply(void 0,__spreadArray([t],r.slice(1))):"":r(t),o&&(o[u]={value:n,label:l})}return l},findRowIndexOf:function(e,t){return t?_xeUtils.default.findIndexOf(e,function(e){return nt.eqRow(e,t)}):-1},eqRow:function(e,t){return!(!e||!t)&&(e===t||(0,_util.getRowid)(nt,e)===(0,_util.getRowid)(nt,t))}};"development"===process.env.NODE_ENV&&("openExport,openPrint,exportData,openImport,importData,saveFile,readFile,importByFile,print".split(",").forEach(function(e){nt[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Export"])}}),"clearValidate,fullValidate,validate".split(",").forEach(function(e){nt[e]=function(){(0,_log.errLog)("vxe.error.reqModule",["Validator"])}})),Object.assign(nt,G,Z);function pt(e){var t=$.showHeader,r=$.showFooter,n=Y.tableData,l=Y.tableColumn,o=Y.tableGroupColumn,a=Y.columnStore,i=Y.footerTableData,u="left"===e,a=u?a.leftList:a.rightList;return(0,_vue.h)("div",{ref:u?ve:ge,class:"vxe-table--fixed-"+e+"-wrapper"},[t?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-header"),{ref:u?ie:de,fixedType:e,tableData:n,tableColumn:l,tableGroupColumn:o,fixedColumn:a}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:u?ue:se,fixedType:e,tableData:n,tableColumn:l,fixedColumn:a}),r?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-footer"),{ref:u?ce:fe,footerTableData:i,tableColumn:l,fixedColumn:a,fixedType:e}):(0,_vue.createCommentVNode)()])}var xt;function mt(){var e=J.value;e&&e.clientWidth&&e.clientHeight&&G.recalculate()}(0,_vue.watch)(function(){return $.data},function(e){var n=B.inited,l=B.initStatus;m(e||[]).then(function(){var e=Y.scrollXLoad,t=Y.scrollYLoad,r=Y.expandColumn;B.inited=!0,B.initStatus=!0,l||w(),n||T(),"development"===process.env.NODE_ENV&&(e||t)&&r&&(0,_log.warnLog)("vxe.error.scrollErrProp",["column.type=expand"]),G.recalculate()})}),(0,_vue.watch)(function(){return Y.staticColumns},function(e){n(e)}),(0,_vue.watch)(function(){return Y.tableColumn},function(){Z.analyColumnWidth()}),(0,_vue.watch)(function(){return $.showHeader},function(){(0,_vue.nextTick)(function(){G.recalculate(!0).then(function(){return G.refreshScroll()})})}),(0,_vue.watch)(function(){return $.showFooter},function(){(0,_vue.nextTick)(function(){G.recalculate(!0).then(function(){return G.refreshScroll()})})}),(0,_vue.watch)(function(){return $.height},function(){(0,_vue.nextTick)(function(){return G.recalculate(!0)})}),(0,_vue.watch)(function(){return $.maxHeight},function(){(0,_vue.nextTick)(function(){return G.recalculate(!0)})}),(0,_vue.watch)(function(){return $.syncResize},function(e){e&&(mt(),(0,_vue.nextTick)(function(){mt(),setTimeout(mt)}))}),(0,_vue.watch)(function(){return $.mergeCells},function(e){G.clearMergeCells(),(0,_vue.nextTick)(function(){e&&G.setMergeCells(e)})}),(0,_vue.watch)(function(){return $.mergeFooterItems},function(e){G.clearMergeFooterItems(),(0,_vue.nextTick)(function(){e&&G.setMergeFooterItems(e)})}),_vXETable.VXETable.hooks.forEach(function(e){e=e.setupTable;!e||(e=e(nt))&&_xeUtils.default.isObject(e)&&Object.assign(nt,e)}),Z.preventEvent(null,"created",{$table:nt}),(0,_vue.onActivated)(function(){G.recalculate().then(function(){return G.refreshScroll()}),Z.preventEvent(null,"activated",{$table:nt})}),(0,_vue.onDeactivated)(function(){B.isActivated=!1,Z.preventEvent(null,"deactivated",{$table:nt})}),(0,_vue.onMounted)(function(){(0,_vue.nextTick)(function(){var e=$.data,t=$.treeConfig,r=$.showOverflow,n=B.scrollXStore,l=B.scrollYStore,o=we.value,a=Le.value,i=Be.value,u=ye.value,c=Se.value,d=Ye.value,s=Ee.value;if("development"===process.env.NODE_ENV&&($.rowId||s.keyField||!(c.reserve||c.checkRowKeys||u.reserve||u.checkRowKey||d.expandRowKeys||i.expandRowKeys)||(0,_log.warnLog)("vxe.error.reqProp",["row-config.keyField"]),$.editConfig&&(a.showStatus||a.showUpdateStatus||a.showInsertStatus)&&!$.keepSource&&(0,_log.warnLog)("vxe.error.reqProp",["keep-source"]),!t||!i.line||($.rowKey||s.useKey)&&r||(0,_log.warnLog)("vxe.error.reqProp",["row-config.useKey | show-overflow"]),t&&$.stripe&&(0,_log.warnLog)("vxe.error.noTree",["stripe"]),$.showFooter&&!$.footerMethod&&(0,_log.warnLog)("vxe.error.reqProp",["footer-method"]),v=$.exportConfig,t=$.importConfig,g=je.value,f=We.value,t&&f.types&&!f.importMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.config.importTypes,f.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types="+f.types.join(","),f.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.config.importTypes,e)}).join(",")||_vXETable.VXETable.config.importTypes.join(",")]),v&&g.types&&!g.exportMethod&&!_xeUtils.default.includeArrays(_vXETable.VXETable.config.exportTypes,g.types)&&(0,_log.warnLog)("vxe.error.errProp",["export-config.types="+g.types.join(","),g.types.filter(function(e){return _xeUtils.default.includes(_vXETable.VXETable.config.exportTypes,e)}).join(",")||_vXETable.VXETable.config.exportTypes.join(",")])),"development"===process.env.NODE_ENV){var f=Je.value,v=Me.value,g=Ee.value;if(!$.id&&$.customConfig&&(!0===f.storage||f.storage&&f.storage.resizable||f.storage&&f.storage.visible)&&(0,_log.errLog)("vxe.error.reqProp",["id"]),$.treeConfig&&c.range&&(0,_log.errLog)("vxe.error.noTree",["checkbox-config.range"]),g.height&&!$.showOverflow&&(0,_log.warnLog)("vxe.error.notProp",["table.show-overflow"]),!nt.handleUpdateCellAreas&&($.clipConfig&&(0,_log.warnLog)("vxe.error.notProp",["clip-config"]),$.fnrConfig&&(0,_log.warnLog)("vxe.error.notProp",["fnr-config"]),v.area))return void(0,_log.errLog)("vxe.error.notProp",["mouse-config.area"]);v.area&&v.selected&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","mouse-config.selected"]),v.area&&c.range&&(0,_log.warnLog)("vxe.error.errConflicts",["mouse-config.area","checkbox-config.range"]),$.treeConfig&&v.area&&(0,_log.errLog)("vxe.error.noTree",["mouse-config.area"])}"development"===process.env.NODE_ENV&&($.editConfig&&!nt.insert&&(0,_log.errLog)("vxe.error.reqModule",["Edit"]),$.editRules&&!nt.validate&&(0,_log.errLog)("vxe.error.reqModule",["Validator"]),(c.range||$.keyboardConfig||$.mouseConfig)&&!nt.triggerCellMousedownEvent&&(0,_log.errLog)("vxe.error.reqModule",["Keyboard"]),($.printConfig||$.importConfig||$.exportConfig)&&!nt.exportData&&(0,_log.errLog)("vxe.error.reqModule",["Export"])),Object.assign(l,{startIndex:0,endIndex:0,visibleSize:0,adaptive:!1!==o.adaptive}),Object.assign(n,{startIndex:0,endIndex:0,visibleSize:0}),m(e||[]).then(function(){e&&e.length&&(B.inited=!0,B.initStatus=!0,w(),T()),st()}),$.autoResize&&(o=J.value,n=Z.getParentElem(),xt=(0,_resize.createResizeEvent)(function(){$.autoResize&&G.recalculate(!0)}),o&&xt.observe(o),n&&xt.observe(n))}),_event.GlobalEvent.on(nt,"paste",U),_event.GlobalEvent.on(nt,"copy",O),_event.GlobalEvent.on(nt,"cut",M),_event.GlobalEvent.on(nt,"mousedown",I),_event.GlobalEvent.on(nt,"blur",D),_event.GlobalEvent.on(nt,"mousewheel",k),_event.GlobalEvent.on(nt,"keydown",L),_event.GlobalEvent.on(nt,"resize",A),nt.handleGlobalContextmenuEvent&&_event.GlobalEvent.on(nt,"contextmenu",nt.handleGlobalContextmenuEvent),Z.preventEvent(null,"mounted",{$table:nt})}),(0,_vue.onBeforeUnmount)(function(){xt&&xt.disconnect(),G.closeFilter(),nt.closeMenu&&nt.closeMenu(),Z.preventEvent(null,"beforeUnmount",{$table:nt})}),(0,_vue.onUnmounted)(function(){_event.GlobalEvent.off(nt,"paste"),_event.GlobalEvent.off(nt,"copy"),_event.GlobalEvent.off(nt,"cut"),_event.GlobalEvent.off(nt,"mousedown"),_event.GlobalEvent.off(nt,"blur"),_event.GlobalEvent.off(nt,"mousewheel"),_event.GlobalEvent.off(nt,"keydown"),_event.GlobalEvent.off(nt,"resize"),_event.GlobalEvent.off(nt,"contextmenu"),Z.preventEvent(null,"unmounted",{$table:nt})});return nt.renderVN=function(){var e=$.loading,t=$.stripe,r=$.showHeader,n=$.height,l=$.treeConfig,o=$.mouseConfig,a=$.showFooter,i=$.highlightCell,u=$.highlightHoverRow,c=$.highlightHoverColumn,d=$.editConfig,s=Y.isGroup,f=Y.overflowX,v=Y.overflowY,g=Y.scrollXLoad,h=Y.scrollYLoad,p=Y.scrollbarHeight,x=Y.tableData,m=Y.tableColumn,_=Y.tableGroupColumn,w=Y.footerTableData,b=Y.initStore,C=Y.columnStore,E=Y.filterStore,R=C.leftList,T=C.rightList,y=De.value,S=Be.value,I=Ee.value,D=Ce.value,k=W.value,L=Qe.value,U=Me.value,O=me.value,M=ke.value,C=Xe.value;return(0,_vue.h)("div",{ref:J,class:["vxe-table","vxe-table--render-default","tid_"+j,"border--"+L,((L={})["size--"+k]=k,L["vxe-editable"]=!!d,L["cell--highlight"]=i,L["cell--selected"]=o&&U.selected,L["cell--area"]=o&&U.area,L["row--highlight"]=I.isHover||u,L["column--highlight"]=D.isHover||c,L["is--header"]=r,L["is--footer"]=a,L["is--group"]=s,L["is--tree-line"]=l&&S.line,L["is--fixed-left"]=R.length,L["is--fixed-right"]=T.length,L["is--animat"]=!!$.animat,L["is--round"]=$.round,L["is--stripe"]=!l&&t,L["is--loading"]=e,L["is--empty"]=!e&&!x.length,L["is--scroll-y"]=v,L["is--scroll-x"]=f,L["is--virtual-x"]=g,L["is--virtual-y"]=h,L)],onKeydown:F},[(0,_vue.h)("div",{class:"vxe-table-slots"},q.default?q.default({}):[]),(0,_vue.h)("div",{class:"vxe-table--render-wrapper"},[(0,_vue.h)("div",{class:"vxe-table--main-wrapper"},[r?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-header"),{ref:le,tableData:x,tableColumn:m,tableGroupColumn:_}):(0,_vue.createCommentVNode)(),(0,_vue.h)(_body.default,{ref:oe,tableData:x,tableColumn:m}),a?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-footer"),{ref:ae,footerTableData:w,tableColumn:m}):(0,_vue.createCommentVNode)()]),(0,_vue.h)("div",{class:"vxe-table--fixed-wrapper"},[R&&R.length&&f?pt("left"):(0,_vue.createCommentVNode)(),T&&T.length&&f?pt("right"):(0,_vue.createCommentVNode)()])]),(0,_vue.h)("div",{ref:pe,class:"vxe-table--empty-placeholder"},[(0,_vue.h)("div",{class:"vxe-table--empty-content"},function(){var e=Ge.value,t={$table:nt};if(q.empty)return q.empty(t);var r=e.name?_vXETable.VXETable.renderer.get(e.name):null,r=r?r.renderEmpty:null;return r?r(e,t):(0,_utils.getFuncText)($.emptyText)||_conf.default.i18n("vxe.table.emptyText")}())]),(0,_vue.h)("div",{class:"vxe-table--border-line"}),(0,_vue.h)("div",{ref:he,class:"vxe-table--resizable-bar",style:f?{"padding-bottom":p+"px"}:null}),(0,_vue.h)("div",{class:["vxe-table--loading vxe-loading",{"is--visible":e}]},[(0,_vue.h)("div",{class:"vxe-loading--spinner"})]),b.filter?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-filter"),{ref:re,filterStore:E}):(0,_vue.createCommentVNode)(),b.import&&$.importConfig?(0,_vue.h)((0,_vue.resolveComponent)("vxe-import-panel"),{defaultOptions:Y.importParams,storeData:Y.importStore}):(0,_vue.createCommentVNode)(),b.export&&($.exportConfig||$.printConfig)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-export-panel"),{defaultOptions:Y.exportParams,storeData:Y.exportStore}):(0,_vue.createCommentVNode)(),C?(0,_vue.h)((0,_vue.resolveComponent)("vxe-table-context-menu"),{ref:ne}):(0,_vue.createCommentVNode)(),P?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),{ref:ee,isArrow:!1,enterable:!1}):(0,_vue.createCommentVNode)(),P&&$.editRules&&O.showMessage&&("default"===O.message?!n:"tooltip"===O.message)?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:te,class:"vxe-table--valid-error"},"tooltip"===O.message||1===x.length?M:{})):(0,_vue.createCommentVNode)(),P?(0,_vue.h)((0,_vue.resolveComponent)("vxe-tooltip"),__assign({ref:Q},y)):(0,_vue.createCommentVNode)()])},(0,_vue.provide)("xecolgroup",null),(0,_vue.provide)("$xetable",nt),nt},render:function(){return this.renderVN()}});exports.default=_default;