"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _vue=require("vue"),_conf=_interopRequireDefault(require("../../v-x-e-table/src/conf")),_vXETable=require("../../v-x-e-table"),_utils=require("../../tools/utils");function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var _default=(0,_vue.defineComponent)({name:"VxeTableFilter",props:{filterStore:Object},setup:function(o){function i(e,t,l){o.filterStore.options.forEach(function(e){e._checked=!1}),l._checked=t,a.checkFilterOptions(),f(e)}function c(e,t,l){l._checked=t,a.checkFilterOptions()}var a=(0,_vue.inject)("$xetable",{}),s=a.reactData,u=a.internalData,v=(0,_vue.computed)(function(){var e=o.filterStore;return e&&e.options.some(function(e){return e.checked})}),f=function(e){o.filterStore.options.forEach(function(e){e.checked=e._checked}),a.confirmFilterEvent(e)},h=function(e){var t=o.filterStore;a.handleClearFilter(t.column),a.confirmFilterEvent(e)},d=function(e,t,l){o.filterStore.multiple?c(0,t,l):i(e,t,l)},x=function(e,t){var l;o.filterStore.multiple?(l=t,(t=o.filterStore).options.forEach(function(e){e._checked=l,e.checked=l}),t.isAllSelected=l,t.isIndeterminate=!1):h(e)},b={changeRadioOption:i,changeMultipleOption:c,changeAllOption:x,changeOption:d,confirmFilter:f,resetFilter:h};return function(){var t,e,l=o.filterStore,i=s.initStore,c=l.column,n=c?c.filterRender:null,r=n?_vXETable.VXETable.renderer.get(n.name):null;return(0,_vue.h)("div",{class:["vxe-table--filter-wrapper","filter--prevent-default",r&&r.className?r.className:"",{"is--animat":a.props.animat,"is--multiple":l.multiple,"is--active":l.visible}],style:l.style},i.filter&&l.visible?(c=n,i=r,t=o.filterStore,l=t.column,e=t.multiple,n=t.maxHeight,r=l.slots,l=r?r.filter:null,r=Object.assign({},u._currFilterParams,{$panel:b,$table:a}),(l?[(0,_vue.h)("div",{class:"vxe-table--filter-template"},a.callSlot(l,r))]:i&&i.renderFilter?[(0,_vue.h)("div",{class:"vxe-table--filter-template"},i.renderFilter(c,r))]:[(0,_vue.h)("ul",{class:"vxe-table--filter-header"},[(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":e?t.isAllSelected:!t.options.some(function(e){return e._checked}),"is--indeterminate":e&&t.isIndeterminate}],title:_conf.default.i18n(e?"vxe.table.allTitle":"vxe.table.allFilter"),onClick:function(e){x(e,!t.isAllSelected)}},(e?[(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},_conf.default.i18n("vxe.table.allFilter"))]))]),(0,_vue.h)("ul",{class:"vxe-table--filter-body",style:n?{maxHeight:n+"px"}:{}},t.options.map(function(t){return(0,_vue.h)("li",{class:["vxe-table--filter-option",{"is--checked":t._checked}],title:t.label,onClick:function(e){d(e,!t._checked,t)}},(e?[(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--checked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--unchecked-icon"}),(0,_vue.h)("span",{class:"vxe-checkbox--icon vxe-checkbox--indeterminate-icon"})]:[]).concat([(0,_vue.h)("span",{class:"vxe-checkbox--label"},(0,_utils.formatText)(t.label,1))]))}))]).concat((i=o.filterStore,c=i.column,r=i.multiple,n=v.value,c=(c=c.filterRender)?_vXETable.VXETable.renderer.get(c.name):null,i=!n&&!i.isAllSelected&&!i.isIndeterminate,!r||c&&!1===c.showFilterFooter?[]:[(0,_vue.h)("div",{class:"vxe-table--filter-footer"},[(0,_vue.h)("button",{class:{"is--disabled":i},disabled:i,onClick:f},_conf.default.i18n("vxe.table.confirmFilter")),(0,_vue.h)("button",{onClick:h},_conf.default.i18n("vxe.table.resetFilter"))])]))):[])}}});exports.default=_default;