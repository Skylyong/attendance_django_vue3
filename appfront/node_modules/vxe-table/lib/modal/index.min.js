"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.modal=exports.default=exports.Modal=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils")),_modal=_interopRequireWildcard(require("./src/modal")),_vXETable=require("../v-x-e-table"),_dynamics=require("../dynamics");function _getRequireWildcardCache(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(_getRequireWildcardCache=function(e){return e?o:t})(e)}function _interopRequireWildcard(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==_typeof(e)&&"function"!=typeof e)return{default:e};t=_getRequireWildcardCache(t);if(t&&t.has(e))return t.get(e);var o,n,r={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&((n=a?Object.getOwnPropertyDescriptor(e,o):null)&&(n.get||n.set)?Object.defineProperty(r,o,n):r[o]=e[o]);return r.default=e,t&&t.set(e,r),r}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var r in t=arguments[o])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function openModal(t){return(0,_dynamics.checkDynamic)(),new Promise(function(o){var n,r;t&&t.id&&_modal.allActivedModals.some(function(e){return e.props.id===t.id})?o("exist"):(n=t.onHide,r=Object.assign(t,{key:_xeUtils.default.uniqueId(),modelValue:!0,onHide:function(e){var t=_dynamics.dynamicStore.modals;n&&n(e),_dynamics.dynamicStore.modals=t.filter(function(e){return e.key!==r.key}),o(e.type)}}),_dynamics.dynamicStore.modals.push(r))})}function getModal(t){return _xeUtils.default.find(_modal.allActivedModals,function(e){return e.props.id===t})}function closeModal(e){var e=e?[getModal(e)]:_modal.allActivedModals,t=[];return e.forEach(function(e){e&&t.push(e.close())}),Promise.all(t)}function handleOpen(e,t,o,n){o=_xeUtils.default.isObject(t)?t:{content:_xeUtils.default.toValueString(t),title:o};return openModal(__assign(__assign(__assign({},e),n),o))}function openAlert(e,t,o){return handleOpen({type:"alert",showFooter:!0},e,t,o)}function openConfirm(e,t,o){return handleOpen({type:"confirm",status:"question",showFooter:!0},e,t,o)}function openMessage(e,t){return handleOpen({type:"message",mask:!1,lockView:!1,showHeader:!1},e,"",t)}var ModalController={get:getModal,close:closeModal,open:openModal,alert:openAlert,confirm:openConfirm,message:openMessage},modal=ModalController;exports.modal=modal;var Modal=Object.assign(_modal.default,{install:function(e){e.component(_modal.default.name,_modal.default),_vXETable.VXETable.modal=ModalController}});exports.Modal=Modal,_dynamics.dynamicApp.component(_modal.default.name,_modal.default);var _default=Modal;exports.default=_default;